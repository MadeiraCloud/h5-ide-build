(function(){define(["MC","event","account_model"],function(e,t,n){var r;return r=Backbone.Model.extend({defaults:{key:null},initialize:function(){return this.on("ACCOUNT_CHECK__REPEAT_RETURN",function(e){return console.log("ACCOUNT_CHECK__REPEAT_RETURN"),console.log(e),e.is_error?this._resetPasswordServer(e.param[1]?e.param[1]:e.param[2]):this.trigger("NO_EMAIL"),null})},checkRepeatService:function(e){var t,r;return console.log("checkRepeatService, value = "+e),/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]+$/.test(e)?(r=null,t=e):(r=e,t=null),n.check_repeat({sender:this},r,t)},_resetPasswordServer:function(e){return console.log("resetPasswordServer, result = "+e),n.reset_password({sender:this},e),this.once("ACCOUNT_RESET__PWD_RETURN",function(e){return console.log("ACCOUNT_RESET__PWD_RETURN"),console.log(e),e.is_error?this.trigger("NO_EMAIL"):window.location.href="reset.html#email",null})},checkKeyServer:function(){return console.log("checkKeyServer, key = "+this.get("key")),n.check_validation({sender:this},this.get("key"),"reset"),this.once("ACCOUNT_CHECK__VALIDATION_RETURN",function(e){return console.log("ACCOUNT_CHECK__VALIDATION_RETURN"),console.log(e),e.is_error?window.location.href="reset.html#expire":this.trigger("KEY_VALID"),null})},updatePasswordServer:function(e){return console.log("updatePasswordServer, result = "+e+", key = "+this.get("key")),n.update_password({sender:this},this.get("key"),e),this.once("ACCOUNT_UPDATE__PWD_RETURN",function(e){return console.log("ACCOUNT_UPDATE__PWD_RETURN"),console.log(e),e.is_error||(window.location.href="reset.html#success"),null})}}),new r})}).call(this);