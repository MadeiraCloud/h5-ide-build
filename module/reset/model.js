(function(){define(["MC","event","account_model"],function(e,t,n){var r;return r=Backbone.Model.extend({defaults:{key:null},initialize:function(){return this.on("ACCOUNT_CHECK__REPEAT_RETURN",function(e){return void 0,void 0,e.is_error?this._resetPasswordServer(e.param[1]?e.param[1]:e.param[2]):this.trigger("NO_EMAIL"),null})},checkRepeatService:function(e){var t,r;return void 0,/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]+$/.test(e)?(r=null,t=e):(r=e,t=null),n.check_repeat({sender:this},r,t)},_resetPasswordServer:function(e){return void 0,n.reset_password({sender:this},e),this.once("ACCOUNT_RESET__PWD_RETURN",function(e){return void 0,void 0,e.is_error?this.trigger("NO_EMAIL"):window.location.href="/reset/#email",null})},checkKeyServer:function(){return void 0,n.check_validation({sender:this},this.get("key"),"reset"),this.once("ACCOUNT_CHECK__VALIDATION_RETURN",function(e){return void 0,void 0,e.is_error?window.location.href="/reset/#expire":this.trigger("KEY_VALID"),null})},updatePasswordServer:function(e){return void 0,n.update_password({sender:this},this.get("key"),e),this.once("ACCOUNT_UPDATE__PWD_RETURN",function(e){return void 0,void 0,e.is_error||(window.location.href="/reset/#success"),null})}}),new r})}).call(this);