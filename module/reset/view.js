(function(){define(["event","text!./module/reset/template.html","text!./module/reset/email.html","text!./module/reset/password.html","text!./module/reset/loading.html","text!./module/reset/expire.html","text!./module/reset/success.html","i18n!nls/lang.js","backbone","jquery","handlebars"],function(e,t,n,r,i,s,o,u){var a;return a=Backbone.View.extend({el:"#main-body",template:Handlebars.compile(t),email_tmpl:Handlebars.compile(n),password_tmpl:Handlebars.compile(r),loading_tmpl:Handlebars.compile(i),expire_tmpl:Handlebars.compile(s),success_tmpl:Handlebars.compile(o),is_submit:!1,events:{"keyup #reset-pw-email":"changeSendButtonState","click #reset-btn":"resetPasswordButtonEvent","click #reset-password":"resetPasswordEvent","blur #reset-pw":"verificationPassword"},initialize:function(){},render:function(e,t){console.log("reset render"),console.log(e,t);switch(e){case"normal":return this.$el.html(this.template());case"email":return this.$el.html(this.email_tmpl());case"password":return this.$el.html(this.loading_tmpl());case"expire":return this.$el.html(this.expire_tmpl());case"success":return this.$el.html(this.success_tmpl());default:return this.$el.html(this.template())}},passwordRender:function(){return console.log("passwordRender"),this.$el.html(this.password_tmpl())},changeSendButtonState:function(e){console.log("changeSendButtonState"),$("#email-verification-status").hide();if(this.is_submit)return;return e.target.value?$("#reset-btn").removeAttr("disabled"):$("#reset-btn").attr("disabled",!0)},resetPasswordButtonEvent:function(){return console.log("resetPasswordButtonEvent"),$("#email-verification-status").hide(),$("#reset-btn").attr("disabled",!0),$("#reset-btn").attr("value",u.reset.reset_waiting),this.is_submit=!0,this.trigger("RESET_EMAIL",$("#reset-pw-email").val()),!1},resetPasswordEvent:function(){return console.log("resetPasswordEvent"),this.verificationPassword()&&($("#reset-password").attr("value",u.reset.reset_waiting),$("#reset-password").attr("disabled",!0),this.trigger("RESET_PASSWORD",$("#reset-pw").val())),!1},verificationPassword:function(){var e,t;return t=$("#reset-pw").val().trim(),e=$("#password-verification-status"),e.removeClass("error-status"),t!==""?t.length>5?(e.hide(),!0):(e.addClass("error-status").show().text(u.reset.reset_password_shorter),!1):(e.addClass("error-status").show().text(u.reset.reset_password_required),!1)},showErrorMessage:function(){var e;return console.log("showErrorMessage"),this.is_submit=!1,$("#reset-btn").attr("disabled",!1),$("#reset-btn").attr("value",u.reset.reset_btn),e=$("#email-verification-status"),e.addClass("error-status").show().text(u.reset.reset_error_state),!1}}),a})}).call(this);