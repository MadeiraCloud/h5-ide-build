(function(){define(["MC","stack_model","app_model","backbone","event"],function(e,t,n,r){var i,s;return i=Backbone.Model.extend({defaults:{stack_region_name:null,app_region_name:null,current_platform:null,tab_name:null,import_stack:null},initialize:function(){var e;return e=this,e.on("STACK_INFO_RETURN",function(t){return void 0,e.trigger("GET_STACK_COMPLETE",t)}),e.on("APP_INFO_RETURN",function(t){return void 0,e.trigger("GET_APP_COMPLETE",t)})},refresh:function(t,n,r){var i,s;void 0,void 0,t!=="dashboard"&&t!==null&&this.trigger("SAVE_DESIGN_MODULE",t);if(n==="dashboard"){this.trigger("SWITCH_DASHBOARD");return}Tabbar.current==="process"?e.common.other.processType(n)==="appview"&&e.common.other.getCacheMap(n).state!=="OPEN"?s="OLD_":s="OPEN_":Tabbar.current==="appview"?s="OLD_":e.tab[n]===void 0?(void 0,s="OPEN_"):(void 0,void 0,s="OLD_");switch(r){case"new":s==="OLD_"?i=s+"STACK":i="NEW_STACK";break;case"stack":case"import":i=s+"STACK";break;case"app":case"appview":i=s+"APP";break;case"process":i=s+"PROCESS";break;default:void 0}return void 0,e.data.current_tab_type=i,this.trigger(i,n),void 0,null},getStackInfo:function(e){var n;return void 0,n=this,t.info({sender:n},$.cookie("usercode"),$.cookie("session_id"),this.get("stack_region_name"),[e])},getAppInfo:function(e){var t;return void 0,t=this,n.info({sender:t},$.cookie("usercode"),$.cookie("session_id"),this.get("app_region_name"),[e])},checkPlatform:function(t){var n;return void 0,n=null,_.each(e.data.supported_platforms,function(e){return t===e.region&&(e.classic?n=!0:n=!1),null}),n}}),s=new i,s})}).call(this);