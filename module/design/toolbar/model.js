(function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};define(["component/exporter/Thumbnail","MC","backbone","jquery","underscore","event","stack_service","stack_model","app_model","constant","account_model"],function(t,n,r,i,s,o,u,a,f,l,c){var h,p,d,v,m,g,y,b;return h=l.RESTYPE,p={},p[h.ACL]="Network ACL",p[h.ASG]="Auto Scaling Group",p[h.CGW]="Customer Gateway",p[h.ELB]="Load Balancer",p[h.ENI]="Network Interface",p[h.IGW]="Internet Gateway",p[h.INSTANCE]="Instance",p[h.LC]="Launch Configuration",p[h.RT]="Route Table",p[h.SG]="Security Group",p[h.SUBSCRIPTION]="SNS Subscription",p[h.VGW]="VPN Gateway",p[h.VPC]="VPC",p[h.VPN]="VPN",m={},y={},b={},n.storage.get("req_map")&&(b=i.extend(!0,{},n.storage.get("req_map"))),v=!0,d=r.Model.extend({defaults:{item_flags:null,cf_data:null},initialize:function(){var t;return t=this,t.on("STACK_SAVE_RETURN",function(e){var n,r,i,s;return void 0,s=e.param[3],n=e.param[4],r=n.id,i=n.name,e.is_error?(t.trigger("TOOLBAR_HANDLE_FAILED","SAVE_STACK",i),null):(void 0,t.saveStackCallback(r,i,s),t.trigger("TOOLBAR_HANDLE_SUCCESS","SAVE_STACK",i))}),t.on("STACK_CREATE_RETURN",function(e){var n,r,i,s;return void 0,s=e.param[3],n=e.param[4],i=n.id,r=n.name,e.is_error?(t.trigger("TOOLBAR_HANDLE_FAILED","CREATE_STACK",r),null):(void 0,t.createStackCallback(e,i,r,s),t.trigger("TOOLBAR_HANDLE_SUCCESS","CREATE_STACK",r))}),t.on("STACK_SAVE__AS_RETURN",function(e){var r,i,s,u,a;return void 0,a=e.param[3],r=e.param[4],u=e.param[5],i=e.param[6],e.is_error?t.trigger("TOOLBAR_HANDLE_FAILED","DUPLICATE_STACK",i):(void 0,s=e.resolved_data,n.data.stack_list[a].push({id:s,name:u}),t.savePNG(s,"new",r),t.trigger("TOOLBAR_HANDLE_SUCCESS","DUPLICATE_STACK",i),o.trigger(o.UPDATE_STACK_LIST,"DUPLICATE_STACK",[s]))}),t.on("STACK_REMOVE_RETURN",function(e){var r,i,s,u,a,f,l;void 0,u=e.param[3],r=e.param[4],s=e.param[5];if(!e.is_error){void 0;if(n.aws.aws.checkStackName(r,s)){l=n.data.stack_list[u];for(a=0,f=l.length;a<f;a++){i=l[a];if(i.id===r&&i.name===s){n.data.stack_list[u].splice(n.data.stack_list[u].indexOf(i),1);break}}}return t.trigger("TOOLBAR_HANDLE_SUCCESS","REMOVE_STACK",s),o.trigger(o.UPDATE_STACK_LIST,"REMOVE_STACK",[r]),o.trigger(o.CLOSE_DESIGN_TAB,r),t.setFlag(r,"DELETE_STACK")}return t.trigger("TOOLBAR_HANDLE_FAILED","REMOVE_STACK",s)}),t.on("STACK_RUN_RETURN",function(e){var n,r,i;return void 0,i=e.param[3],r=e.param[4],n=e.param[5],o.trigger(o.OPEN_DESIGN_TAB,"NEW_PROCESS",n,i,r),t.handleRequest(e,"RUN_STACK",i,r,n)}),t.on("STACK_EXPORT__CLOUDFORMATION_RETURN",function(e){var r,i,s,o,u;return void 0,u=e.param[3],s=e.param[4],o=n.common.other.canvasData.get("name"),r=t.get("cf_data"),r||(r={}),i=!1,e.is_error?(void 0,o in r&&delete r[o]):(void 0,r[o]=e.resolved_data,i=!0),t.set("cf_data",r),i===!0?t.trigger("TOOLBAR_HANDLE_SUCCESS","EXPORT_CLOUDFORMATION",o):t.trigger("TOOLBAR_HANDLE_FAILED","EXPORT_CLOUDFORMATION",o)}),t.on("APP_START_RETURN",function(e){var n,r,i;return void 0,i=e.param[3],n=e.param[4],r=e.param[5],t.handleRequest(e,"START_APP",i,n,r)}),t.on("APP_STOP_RETURN",function(e){var n,r,i;return void 0,i=e.param[3],n=e.param[4],r=e.param[5],t.handleRequest(e,"STOP_APP",i,n,r)}),t.on("APP_TERMINATE_RETURN",function(r){var i,s,u,a;return void 0,a=r.param[3],s=r.param[4],u=r.param[5],i=r.param[6],!i||i===0?t.handleRequest(r,"TERMINATE_APP",a,s,u):(r.is_error?t.setFlag(s,"STOPPED_APP",a):(t.setFlag(s,"TERMINATED_APP",a),o.trigger(o.CLOSE_DESIGN_TAB,s),e.call(n.data.app_list[a],u)>=0&&n.data.app_list[a].splice(n.data.app_list[a].indexOf(u),1)),o.trigger(o.UPDATE_REGION_RESOURCE,a))}),t.on("APP_UPDATE_RETURN",function(e){var n,r,i;return void 0,i=e.param[3],n=e.param[5],r=m[n].name,t.handleRequest(e,"UPDATE_APP",i,n,r),null})},createStackCallback:function(e,t,r,s){var u,a;return void 0,a=e.resolved_data,this.savePNG(a,"new",t),n.data.stack_list[s].push({id:a,name:r}),o.trigger(o.UPDATE_STACK_LIST,"NEW_STACK",[a]),n.common.other.isCurrentTab(t)?(n.common.other.canvasData.set("id",a),u=n.common.other.canvasData.data(),this.setFlag(t,"CREATE_STACK",u),n.common.other.canvasData.origin(u),o.trigger(o.UPDATE_DESIGN_TAB,a,r+" - stack",t),o.trigger(o.UPDATE_STATUS_BAR_SAVE_TIME)):(m&&m[t]&&(m[a]=i.extend(!0,{},m[t]),m[a].is_enable=!0,m[a].is_duplicate=!0,m[a].is_delete=!0,delete m[t]),o.trigger(o.OPEN_DESIGN_TAB,"OPEN_STACK",r,s,e.resolved_data))},saveStackCallback:function(e,t,r){return void 0,this.savePNG(e),o.trigger(o.UPDATE_STACK_LIST,"SAVE_STACK",[e]),n.common.other.isCurrentTab(e)?(this.setFlag(e,"SAVE_STACK",t),o.trigger(o.UPDATE_STATUS_BAR_SAVE_TIME)):(o.trigger(o.OPEN_DESIGN_TAB,"OPEN_STACK",t,r,e),m&&m[e]&&(m[e].is_enable=!0,m[e].is_duplicate=!0,m[e].is_delete=!0)),null},setFlag:function(e,t,r){var u,a,f,c,h,p,d;f=this,c=n.common.other.canvasData.get("name"),p=n.common.other.canvasData.get("state"),e&&s.isObject(e)&&t==="OPEN_STACK"&&(e=e.resolved_data[0].id),e&&e.split&&e.split("-")[0]==="new"&&t==="OPEN_STACK"&&(t="NEW_STACK");if(t==="NEW_STACK")m[e]={name:c,is_run:!0,is_duplicate:!1,is_delete:!1,is_zoomin:!1,is_zoomout:!0,is_enable:!0},v=!0;else if(t==="OPEN_STACK")m[e]={name:c,is_run:!0,is_duplicate:!0,is_delete:!0,is_zoomin:!1,is_zoomout:!0,is_enable:!0},v=!0;else if(t==="SAVE_STACK")m[e].name=r,m[e].is_run=!0,m[e].is_duplicate=!0,m[e].is_delete=!0,m[e].is_enable=!0;else if(t==="CREATE_STACK")m[r.id]={name:r.name,is_run:!0,is_duplicate:!0,is_delete:!0,is_zoomin:m[e].is_zoomin,is_zoomout:m[e].is_zoomout,is_enable:!0},delete m[e],e=r.id;else{if(t==="DELETE_STACK"){delete m[e];return}if(t==="ZOOMIN_STACK")m[e].is_zoomin=r,m[e].is_zoomout=!0;else if(t==="ZOOMOUT_STACK")m[e].is_zoomout=r,m[e].is_zoomin=!0;else if(t==="OPEN_APP")a=!1,u=!1,p===l.APP_STATE.APP_STATE_STOPPED?a=!1:p===l.APP_STATE.APP_STATE_RUNNING?a=!0:(a=!1,u=!0),e=e.resolved_data[0].id,m[e]={name:c,state:p,is_running:a,is_pending:u,is_zoomin:!1,is_zoomout:!0,is_app_updating:!1,has_instance_store_ami:f.isInstanceStore(),is_asg:f.isAutoScaling(),is_production:n.common.other.canvasData.get("usage")!=="production"?!1:!0,has_states:Design.instance().serialize().agent.enabled&&s.some(s.values(Design.instance().serialize().component),function(e){var t;return((t=e.state)!=null?t.length:void 0)>0})},v=!0;else if(t==="RUNNING_APP")e in m&&(m[e].state=l.APP_STATE.APP_STATE_RUNNING,m[e].is_running=!0,m[e].is_pending=!1),h=r,o.trigger(o.UPDATE_DESIGN_TAB_ICON,"running",e),m&&m[e]&&m[e].is_app_updating===!1&&m[e].is_running===!0&&(n.data.running_app_list[e]={app_id:e,state:"running"},o.trigger(o.UPDATE_APP_INFO,h,e));else if(t==="STOPPED_APP")e in m&&(m[e].state=l.APP_STATE.APP_STATE_STOPPED,m[e].is_running=!1,m[e].is_pending=!1),h=r,o.trigger(o.UPDATE_DESIGN_TAB_ICON,"stopped",e),m&&m[e]&&m[e].is_app_updating===!1&&(n.data.running_app_list[e]={app_id:e,state:"stopped"},o.trigger(o.UPDATE_APP_INFO,h,e));else{if(t==="TERMINATED_APP"){e in m&&delete m[e],h=r;return}t==="PENDING_APP"?(e in m&&(m[e].is_pending=!0),h=r,o.trigger(o.UPDATE_DESIGN_TAB_ICON,"pending",e)):t==="UPDATE_APP"?e in m&&(m[e].is_app_updating=r):t==="ENABLE_SAVE"&&(d=m[e])!=null&&(d.is_enable=r)}}if(e===n.common.other.canvasData.get("id")&&v)return f.set("item_flags",i.extend(!0,{},m[e])),e.indexOf("app-")===0?f.trigger("UPDATE_TOOLBAR","app"):f.trigger("UPDATE_TOOLBAR","stack")},setTabFlag:function(e){var t,r,s,o,u;s=this,v=e;if(e){t=n.data.current_tab_id;for(r in m)u=m[r],t===r&&(o=r);o&&(s.set("item_flags",i.extend(!0,{},m[t])),t&&t.split("-")&&t.split("-")[0]==="app"?s.trigger("UPDATE_TOOLBAR","app"):s.trigger("UPDATE_TOOLBAR","stack"))}return null},saveStack:function(e){var t,r,s,o;return r=this,o=e.region,t=e.id,s=e.name,t.indexOf("stack-",0)===0?a.save_stack({sender:r},i.cookie("usercode"),i.cookie("session_id"),o,e):(n.common.other.addCacheThumb(t,i("#canvas_body").html(),i("#svg_canvas")[0].getBBox()),a.create({sender:r},i.cookie("usercode"),i.cookie("session_id"),o,e)),this.setFlag(t,"ENABLE_SAVE",!1)},syncSaveStack:function(e,t){var r,o,a,f;void 0,a=this,f={},f.sender=this,f.model=null,o=n.common.other.canvasData.get("id");if(o&&s.isArray(o.split("-"))){o.split("-")[0]==="stack"?r=u.save:o.split("-")[0]==="new"&&(n.common.other.addCacheThumb(o,i("#canvas_body").html(),i("#svg_canvas")[0].getBBox()),r=u.create);if(s.isFunction(r))return r(f,i.cookie("usercode"),i.cookie("session_id"),e,t,function(n){var r;if(!!n.is_error)return void 0;void 0,e=n.param[3],t=n.param[4],o=t.id,r=t.name;if(o.split("-")[0]==="stack")return a.saveStackCallback(o,r,e),a.trigger("TOOLBAR_HANDLE_SUCCESS","SAVE_STACK_BY_RUN",r);if(o.split("-")[0]==="new")return a.createStackCallback(n,o,r,e),a.trigger("TOOLBAR_HANDLE_SUCCESS","SAVE_STACK_BY_RUN",r)})}},duplicateStack:function(e,t,r,s){var o;return void 0,o=this,n.common.other.addCacheThumb(t,i("#canvas_body").html(),i("#svg_canvas")[0].getBBox()),a.save_as({sender:o},i.cookie("usercode"),i.cookie("session_id"),e,t,r,s)},deleteStack:function(e,n,r){var s;return s=this,a.remove({sender:s},i.cookie("usercode"),i.cookie("session_id"),e,n,r),t.remove(n),null},runStack:function(e){var t,r,s,o,u,f,l,c;c=e.component;for(s in c){r=c[s];if(r.type==="AWS.EC2.Instance"&&r.state&&r.state.length){n.Analytics.increase("use_visualops");break}}return void 0,u=this,s=e.id,f=e.region,t=e.name,l=e.usage,a.run({sender:u},i.cookie("usercode"),i.cookie("session_id"),f,s,t,null,null,null,null,null,l),o="process-"+f+"-"+t,y[o]=e,n.common.other.addCacheThumb(o,i("#canvas_body").html(),i("#svg_canvas")[0].getBBox()),null},updateApp:function(e){return this.setFlag(n.common.other.canvasData.get("id"),"UPDATE_APP",e),null},zoomIn:function(){var e,t;return t=this,$canvas.scale()>1&&n.canvas.zoomIn(),e=!0,$canvas.scale()<=1&&(e=!1),t.setFlag(n.common.other.canvasData.get("id"),"ZOOMIN_STACK",e)},zoomOut:function(){var e,t;return t=this,$canvas.scale()<1.6&&n.canvas.zoomOut(),e=!0,$canvas.scale()>=1.6&&(e=!1),t.setFlag(n.common.other.canvasData.get("id"),"ZOOMOUT_STACK",e)},savePNG:function(e,r,s){var o;return void 0,r==="new"?(o=n.common.other.getCacheThumb(s),o&&o.canvas&&o.svg&&t.save(e,o.canvas,o.svg)):t.save(e,i("#svg_canvas")),null},generatePNG:function(){return t.exportPNG(i("#svg_canvas"),{isExport:!0,createBlob:!0,name:Design.instance().get("name"),id:Design.instance().get("id"),onFinish:function(e){return function(t){if(t.id===Design.instance().get("id"))return e.trigger("EXPORT_PNG",t.image,t.id,t.blob)}}(this)}),null},isChanged:function(e){return!0},startApp:function(e,t,n){var r,s;return s=this,f.start({sender:s},i.cookie("usercode"),i.cookie("session_id"),e,t,n),r={region:e,name:n,id:t,flag_list:{is_pending:!0}},s.updateAppState(l.OPS_STATE.OPS_STATE_INPROCESS,"START_APP",r)},stopApp:function(e,t,n){var r,s;return s=this,f.stop({sender:s},i.cookie("usercode"),i.cookie("session_id"),e,t,n),r={region:e,name:n,id:t,flag_list:{is_pending:!0}},s.updateAppState(l.OPS_STATE.OPS_STATE_INPROCESS,"STOP_APP",r)},terminateApp:function(e,n,r,s){var o,u;return u=this,f.terminate({sender:u},i.cookie("usercode"),i.cookie("session_id"),e,n,r,s),o={region:e,name:r,id:n,flag_list:{is_pending:!0}},u.updateAppState(l.OPS_STATE.OPS_STATE_INPROCESS,"TERMINATE_APP",o),t.remove(n),null},saveApp:function(e){var t,r,s,o,u,a;return o=this,a=e.region,t=e.id,u=e.name,n.common.other.addCacheThumb(t,i("#canvas_body").html(),i("#svg_canvas")[0].getBBox()),f.update({sender:o},i.cookie("usercode"),i.cookie("session_id"),a,e,t),r="process-"+a+"-"+u,y[r]=e,s={region:a,name:u,id:t,flag_list:{is_pending:!0}},o.updateAppState(l.OPS_STATE.OPS_STATE_INPROCESS,"UPDATE_APP",s)},handleRequest:function(t,r,s,u,a){var f,c,h,p;return c=this,r!=="RUN_STACK"&&o.trigger(o.UPDATE_DESIGN_TAB_ICON,"pending",u),t.is_error?(r==="RUN_STACK"&&e.call(n.data.app_list[s],a)>=0&&n.data.app_list[s].splice(n.data.app_list[s].indexOf(a),1),m[u].is_running===!0?(p=l.APP_STATE.APP_STATE_RUNNING,f="running"):(p=l.APP_STATE.APP_STATE_STOPPED,f="stopped"),o.trigger(o.UPDATE_APP_STATE,p,u),o.trigger(o.UPDATE_DESIGN_TAB_ICON,f,u),o.trigger(o.UPDATE_APP_LIST,null,[u])):(h=t.resolved_data.id,void 0,b[h]={flag:r,id:u,name:a},n.storage.set("req_map",i.extend(!0,{},b)),null)},reqHandle:function(t,r){var u,a,f,c,h,p,d,v,g,y,w,E,S,x,T,N,C,k,L,A,O,M,D,P,H,B;S=this,k=App.WS.collection.request.find({_id:t}).fetch();if(k.length>0){N=k[0],C=N.id,D="time_end"in N&&N.time_end?N.time_end:N.time_begin;if(C in b){d=b[C].flag,g=b[C].id,x=b[C].name,T=N.region;if(!d||!T||!g||!x)return;D||(D=Date.now()/1e3),y={region:T,id:g,name:x,time_update:D},v={};switch(N.state){case l.OPS_STATE.OPS_STATE_INPROCESS:v.is_inprocess=!0,p=0,A=0;if("dag"in r){A=r.dag.step.length,B=r.dag.step;for(P=0,H=B.length;P<H;P++)L=B[P],L[1].toLowerCase()==="done"&&p++;void 0}O="process-"+T+"-"+x,O in n.process&&p>0&&(p=!("dones"in n.process[O].flag_list)||n.process[O].flag_list.dones<p?p:n.process[O].flag_list.dones),v.dones=p,v.steps=A,p>0&&A>0?v.rate=Math.round(v.dones*100/v.steps):v.rate=0;break;case l.OPS_STATE.OPS_STATE_FAILED:v.is_failed=!0,v.err_detail=N.data.replace(/\\n/g,"<br />"),N&&N.suggestion&&s.isArray(N.suggestion)&&N.suggestion.length>0&&s.each(N.suggestion,function(e){return v.err_detail+="<br/>"+e,null}),d==="RUN_STACK"?e.call(n.data.app_list[T],x)>=0&&n.data.app_list[T].splice(n.data.app_list[T].indexOf(x),1):d==="TERMINATE_APP"&&(u=g,a=x,E="The app "+a+" failed to terminate. Do you want to force deleting it?",h="",M=n.template.modalForceDeleteApp({title:"Force to delete app",main_content:E,desc_content:h}),modal(M,!1,function(){return i("#modal-confirm-delete").click(function(){return S.terminateApp(T,u,a,1),modal.close()}),i("#modal-cancel").click(function(){return S.setFlag(g,"STOPPED_APP",T)})}));break;case l.OPS_STATE.OPS_STATE_DONE:w=N.data.split(" "),f=w[w.length-1],v.app_id=f,v.is_done=!0,y.id=f;switch(d){case"RUN_STACK":S.setFlag(f,"RUNNING_APP",T),y.id=f;break;case"START_APP":S.setFlag(g,"RUNNING_APP",T);break;case"STOP_APP":S.setFlag(g,"STOPPED_APP",T);break;case"TERMINATE_APP":S.setFlag(g,"TERMINATED_APP",T),e.call(n.data.app_list[T],x)>=0&&n.data.app_list[T].splice(n.data.app_list[T].indexOf(x),1);break;case"UPDATE_APP":v.is_updated=!0,g in m&&(m[g].is_running?S.setFlag(g,"RUNNING_APP",T):S.setFlag(g,"STOPPED_APP",T));break;default:void 0;return}break;default:void 0}v&&(y.flag_list=v,S.updateAppState(N.state,d,y));if(N.state===l.OPS_STATE.OPS_STATE_DONE||N.state===l.OPS_STATE.OPS_STATE_FAILED)N.state===l.OPS_STATE.OPS_STATE_DONE&&d==="UPDATE_APP"&&S.savePNG(y.id,"new",y.id),c=[],y.id.indexOf("app-")===0&&c.push(y.id),c?d!=="RUN_STACK"&&o.trigger(o.UPDATE_APP_LIST,d,c):o.trigger(o.UPDATE_APP_LIST),o.trigger(o.UPDATE_REGION_RESOURCE,T),N.state===l.OPS_STATE.OPS_STATE_DONE?S.trigger("TOOLBAR_HANDLE_SUCCESS",d,x):N.state===l.OPS_STATE.OPS_STATE_FAILED&&S.trigger("TOOLBAR_HANDLE_FAILED",d,x),delete b[C],n.storage.set("req_map",i.extend(!0,{},b))}}return o.trigger(o.UPDATE_HEADER,N)},updateAppState:function(e,t,r){var i,s,u,a;i=this,s=null;switch(e){case l.OPS_STATE.OPS_STATE_DONE:t==="RUN_STACK"?s=l.APP_STATE.APP_STATE_RUNNING:t==="START_APP"?s=l.APP_STATE.APP_STATE_RUNNING:t==="STOP_APP"?s=l.APP_STATE.APP_STATE_STOPPED:t==="TERMINATE_APP"?s=l.APP_STATE.APP_STATE_TERMINATED:t==="UPDATE_APP"&&(s=l.APP_STATE.APP_STATE_RUNNING);break;case l.OPS_STATE.OPS_STATE_FAILED:s=l.APP_STATE.APP_STATE_STOPPED;break;case l.OPS_STATE.OPS_STATE_INPROCESS:t==="RUN_STACK"?s=l.APP_STATE.APP_STATE_INITIALIZING:t==="START_APP"?s=l.APP_STATE.APP_STATE_STARTING:t==="STOP_APP"?s=l.APP_STATE.APP_STATE_STOPPING:t==="TERMINATE_APP"?s=l.APP_STATE.APP_STATE_TERMINATING:t==="UPDATE_APP"&&(s=l.APP_STATE.APP_STATE_UPDATING);break;default:void 0}if(s){void 0,r.flag_list.flag=t,u=r.id,t==="RUN_STACK"&&(u="process-"+r.region+"-"+r.name),n.process[u]=r;if(t==="RUN_STACK")return r&&r.flag_list&&((a=r.flag_list.is_done)===!0||a==="true")&&r.flag_list.app_id&&i.savePNG(r.flag_list.app_id,"new",u),o.trigger(o.UPDATE_PROCESS,u);o.trigger(o.UPDATE_APP_STATE,s,u);if(t==="UPDATE_APP"){if(e===l.OPS_STATE.OPS_STATE_DONE)return void 0;if(e===l.OPS_STATE.OPS_STATE_FAILED)return void 0}}},isInstanceStore:function(){return!Design.instance().isStoppable()},convertCloudformation:function(){var e,t;return e=this,t=n.common.other.canvasData.get("region"),a.export_cloudformation({sender:e},i.cookie("usercode"),i.cookie("session_id"),t,n.common.other.canvasData.data()),null},isAutoScaling:function(){return!!Design.modelClassForType("AWS.AutoScaling.Group").allObjects().length},diff:function(){var e,t,n,r,i,s,o,u,a,f,l,c;n=[],t={},r=Design.instance().diff(),l=r.result;for(o=0,a=l.length;o<a;o++){s=l[o],p[s.type]&&(s.type=p[s.type]),i=t[s.id],i?s.change&&s.change!=="Update"&&(i.change=s.change):(i=t[s.id]=s,n.push(s));if(s.changes){i.changes=s.changes,c=s.changes;for(u=0,f=c.length;u<f;u++)e=c[u],e.info=e.name,e.count<0?e.info=e.name+" "+e.count:e.count>0&&(e.info=e.name+" +"+e.count)}i.change==="Delete"?i.info=i.info||"Deletion cannot be rolled back":i.change==="Terminate"&&(i.info=i.info||"Termination cannot be rolled back")}return r.result=n,r},isAllInstanceNotHaveUserData:function(){var e,t,n,r,i;return i=!0,e=Design.modelClassForType(l.RESTYPE.INSTANCE),n=e.allObjects(),s.each(n,function(e){var t;return t=e.get("userData"),t&&(i=!1),null}),t=Design.modelClassForType(l.RESTYPE.LC),r=t.allObjects(),s.each(r,function(e){var t;return t=e.get("userData"),t&&(i=!1),null}),i},setAgentEnable:function(e){var t,r,i,o;return e===!0&&(t=Design.modelClassForType(l.RESTYPE.INSTANCE),i=t.allObjects(),s.each(i,function(e){return e.set("userData",""),null}),r=Design.modelClassForType(l.RESTYPE.LC),o=r.allObjects(),s.each(o,function(e){return e.set("userData",""),null})),n.aws.aws.enableStackAgent(e)}}),g=new d,g})}).call(this);