(function(){define(["jquery","event","i18n!nls/lang.js"],function(e,t,n){var r,i;return r=function(){return require(["./module/design/toolbar/view","./module/design/toolbar/model"],function(r,i){var s;return s=new r,s.model=i,s.listen(),s.render(),t.onLongListen(t.OPEN_DESIGN,function(e,t,n,r,i){return void 0,s.render(t,0),null}),t.onLongListen(t.OPEN_SUB_DESIGN,function(e,t,n,r,s){return void 0,i.setFlag(s,t),null}),i.on("UPDATE_TOOLBAR",function(e){return void 0,s.render(e,1)}),t.onLongListen(t.SWITCH_DASHBOARD,function(){return void 0,i.setTabFlag(!1),null}),t.onLongListen(t.SWITCH_TAB,function(){return setTimeout(function(){return i.setTabFlag(!0)},500)}),t.onLongListen(t.SAVE_STACK,function(e){var t,r;void 0;try{MC.common.other.canvasData.save(e),MC.common.other.canvasData.origin(e),i.saveStack(e)}catch(o){t=o,r=sprintf(n.ide.TOOL_MSG_ERR_SAVE_FAILED,e.name),s.notify("error",r)}return null}),t.onLongListen(t.DUPLICATE_STACK,function(e,t,n,r){return void 0,i.duplicateStack(e,t,n,r)}),t.onLongListen(t.DELETE_STACK,function(e,t,n){return void 0,i.deleteStack(e,t,n)}),s.on("TOOLBAR_ZOOM_IN",function(){return void 0,i.zoomIn()}),s.on("TOOLBAR_ZOOM_OUT",function(){return void 0,i.zoomOut()}),s.on("UPDATE_APP",function(e){return i.updateApp(e),null}),s.on("TOOLBAR_EXPORT_PNG_CLICK",function(){return void 0,i.generatePNG()}),s.on("CONVERT_CLOUDFORMATION",function(){return i.convertCloudformation()}),i.on("EXPORT_PNG",function(e,t,n){return s.exportPNG(e,t,n)}),s.on("APP_UPDATING",function(e){return void 0,_.isObject(e)?i.saveApp(e):void 0}),s.on("APPLAY_TRIAL",function(e){return i.getApplayTrial(e)}),t.onLongListen("STOP_APP",function(e,t,n){return void 0,i.stopApp(e,t,n)}),t.onLongListen("START_APP",function(e,t,n){return void 0,i.startApp(e,t,n)}),t.onLongListen("TERMINATE_APP",function(e,t,n,r){return void 0,i.terminateApp(e,t,n,r)}),t.onLongListen(t.CANVAS_SAVE,function(){return void 0,s.clickSaveIcon()}),t.onLongListen(t.UPDATE_REQUEST_ITEM,function(e,t){return void 0,i.reqHandle(e,t)}),t.onLongListen(t.APPEDIT_2_APP,function(e,t){return void 0,s.saveSuccess2App(e,t)}),i.on("TOOLBAR_REQUEST_SUCCESS",function(e,t){var r,i;if(e){i="TOOLBAR_HANDLE_"+e;if(i in n.ide)return r=sprintf(n.ide.TOOL_MSG_INFO_REQ_SUCCESS,n.ide[i],t),s.notify("info",r)}}),i.on("TOOLBAR_REQUEST_FAILED",function(e,t){var r,i;if(e){i="TOOLBAR_HANDLE_"+e;if(i in n.ide)return r=sprintf(n.ide.TOOL_MSG_ERR_REQ_FAILED,n.ide[i],t),s.notify("error",r)}}),i.on("TOOLBAR_HANDLE_SUCCESS",function(t,r){var o,u,a,f,l,c;void 0;if(t)return modal&&modal.isPopup()&&(t==="SAVE_STACK_BY_RUN"?(u=MC.common.other.canvasData.data(),o=e(".modal-input-value").val(),u.name=o,u.usage="others",c=e("#app-usage-selectbox .selected").data("value"),c&&(u.usage=c),i.runStack(u),f=MC.common.other.canvasData.get("region"),MC.data.app_list[f].push(o),modal.close()):t==="EXPORT_CLOUDFORMATION"?(s.saveCloudFormation(r),r=""):e("#modal-export-cf")[0]!==void 0&&i.convertCloudformation()),l="TOOLBAR_HANDLE_"+t,l in n.ide&&(a=sprintf(n.ide.TOOL_MSG_INFO_HDL_SUCCESS,n.ide[l],r),s.notify("info",a)),null}),i.on("TOOLBAR_HANDLE_FAILED",function(t,r){var i,o;if(t){modal&&modal.isPopup()&&(t==="SAVE_STACK"||t==="CREATE_STACK")&&(e("#btn-confirm").attr("disabled",!0),e(".modal-close").attr("disabled",!1)),o="TOOLBAR_HANDLE_"+t;if(o in n.ide)return i=sprintf(n.ide.TOOL_MSG_ERR_HDL_FAILED,n.ide[o],r),s.notify("error",i)}})})},i=function(){},{loadModule:r,unLoadModule:i}})}).call(this);