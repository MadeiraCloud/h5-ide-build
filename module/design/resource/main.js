(function(){define(["event","constant"],function(e,t){var n,r;return n=function(){return require(["./module/design/resource/view","./module/design/resource/model","UI.bubble"],function(n,r){var i;return i=new n,i.render(),i.listen(r),i.model=r,e.onLongListen(e.OPEN_DESIGN,function(t,n,s){return void 0,i.reRender(),r.service_count=0,r.set("check_required_service_count",-1),MC.data.resouceapi=[],e.onListen(e.RESOURCE_QUICKSTART_READY,function(e){return void 0,r.describeAvailableZonesService(e),r.describeSnapshotsService(e)}),r.quickstartService(t),r.describeSubnetInDefaultVpc(t),i.region=t,i.resourceVpcRender(s,n),i.communityAmiBtnRender(),null}),e.onLongListen(e.ENABLE_RESOURCE_ITEM,function(e,t){return i.enableItem(e,t)}),e.onLongListen(e.DISABLE_RESOURCE_ITEM,function(e,t){return i.disableItem(e,t)}),e.onLongListen(e.UPDATE_RESOURCE_STATE,function(e){return i.hideResourcePanel(e)}),e.onLongListen(e.SWITCH_TAB,function(e,t){var n,i;void 0;if(e.split("_")[0]==="OLD")return n=MC.common.other.searchStackAppById(t),n&&(i=n.region),r.favoriteAmiService(i),null}),e.onLongListen(e.UPDATE_RESOURCE_STATE,function(e){void 0;if(e==="hide")return i.resourceVpcRender(MC.common.other.canvasData.get("platform"),"OPEN_APP"),r.describeAvailableZonesService(MC.common.other.canvasData.get("region"))}),Design.on(Design.EVENT.AddResource,function(e){var n,r,s,o;return s=t.RESTYPE,e&&((o=e.type)===s.AZ||o===s.IGW||o===s.VGW)&&(r=e.get("name"),n=function(e){return e&&e.option&&e.option.name===r},i.disableItem(e.type,n),void 0),null}),Design.on(Design.EVENT.RemoveResource,function(e){var n,r,s,o;return s=t.RESTYPE,e&&((o=e.type)===s.AZ||o===s.IGW||o===s.VGW)&&(r=e.get("name"),n=function(e){return e&&e.option&&e.option.name===r},i.enableItem(e.type,n),void 0),null}),i.on("LOADING_COMMUNITY_AMI",function(e,t,n,i,s,o,u,a){return void 0,r.describeCommunityAmiService(e,t,n,i,s,o,u,a)}),i.on("TOGGLE_FAV",function(e,t,n,i,s){if(t==="add")return r.addFav(e,n,i,s);if(t==="remove")return r.removeFav(e,n)}),r.on("change:availability_zone",function(){return void 0,e.trigger(e.RELOAD_AZ,r.get("availability_zone"))}),r.on("change:check_required_service_count",function(){var t;void 0,t=!1;if(r.get("check_required_service_count")===-1)return;return r.get("check_required_service_count")===3&&(void 0,t=!0),t&&(e.trigger(e.RESOURCE_API_COMPLETE),r.service_count=0),null})})},r=function(){},{loadModule:n,unLoadModule:r}})}).call(this);