(function(){define(["event","i18n!nls/lang.js","constant"],function(e,t,n){var r,i;return r=function(){return require(["./module/design/canvas/view"],function(t){var r;return r=new t,r.render(),e.onLongListen(e.CREATE_DESIGN_OBJ,function(t,n,i,s,o){var u,a;return void 0,r.reRender(),a={mode:Tabbar.current==="new"?Design.MODE.Stack:Tabbar.current},Tabbar.current==="appview"?(MC.common.other.canvasData.init(o.resolved_data[0]),a.autoFinish=!1,MC.canvas.layout.init(),u=new Design(MC.common.other.canvasData.data(!0),a),void 0,MC.canvas.analysis(),localStorage.setItem("canvas/lineStyle",4),u.finishDeserialization()):(MC.canvas.layout.init(),new Design(MC.common.other.canvasData.data(!0),a),void 0,n==="NEW_STACK"&&MC.aws.aws.enableStackAgent(!0),MC.common.other.canvasData.origin(MC.common.other.canvasData.data()),MC.ta.list=[]),e.trigger(e.OPEN_SUB_DESIGN,t,n,i,s,o),null}),e.onLongListen(e.RESTORE_CANVAS,function(){var e;return void 0,r.render(),e={mode:Tabbar.current},MC.canvas.layout.init(),new Design(MC.common.other.canvasData.origin(),e),void 0,MC.common.other.canvasData.origin(MC.common.other.canvasData.data()),null}),e.onLongListen(e.UPDATE_APP_STATE,function(e,t){return void 0,(e===n.APP_STATE.APP_STATE_STARTING||e===n.APP_STATE.APP_STATE_STOPPING||e===n.APP_STATE.APP_STATE_TERMINATING||e===n.APP_STATE.APP_STATE_UPDATING)&&MC.common.other.isCurrentTab(t)&&MC.common.other.canvasData.set("state",e),null})})},i=function(){},{loadModule:r,unLoadModule:i}})}).call(this);