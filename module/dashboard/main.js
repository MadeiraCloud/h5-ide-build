(function(){define(["component/exporter/Thumbnail","jquery","event","MC","base_main","vpc_model"],function(e,t,n,r,i,s){var o,u,a,f,l,c,h,p,d,v;return a=null,c=null,h=null,p=!1,d=!1,u=!1,f=function(){return _.extend(this,i)},o={hasCredential:function(){return!0},accountIsDemo:function(){return!App.user.hasCredential()},cleanupThumbnail:function(){var t,n,i,s,o,a,f,l,c,h;u=d=!1,i=[],c=r.data.app_thumb_list;for(n in c){s=c[n];for(o=0,f=s.length;o<f;o++)t=s[o],i.push(t.id)}h=r.data.stack_list;for(n in h){s=h[n];for(a=0,l=s.length;a<l;a++)t=s[a],i.push(t.id)}return e.cleanup(i),null}},f(),l=function(){return r.data.dashboard_type="OVERVIEW_TAB",require(["dashboard_view","dashboard_model","constant","UI.tooltip"],function(e,i,f){var v,m;v=null,m=loadSuperModule(l,"dashboard",e,null);if(!m)return;return m.model=i,m.render(),n.trigger(n.DASHBOARD_COMPLETE),i.on("change:result_list",function(){return void 0,p=!0,m.renderMapResult(),m.renderRecent()}),i.on("change:region_classic_list",function(){void 0,r.data.supported_platforms=i.get("region_classic_list");if(!(r.data.supported_platforms.length<=0))return r.data.is_loading_complete=!0,n.trigger(n.IDE_AVAILABLE)}),i.on("change:recent_edited_stacks",function(){return void 0,m.renderRecent()}),i.on("change:recent_launched_apps",function(){return void 0,m.renderRecent()}),i.on("change:global_list",function(){return m.renderGlobalList()}),i.on("change:cur_region_resource",function(){return m.renderRegionResource()}),n.onLongListen(n.SWITCH_MAIN,function(){if(r.data.supported_platforms&&r.data.supported_platforms.length)return i.set("supported_platforms",!0),m.enableCreateStack()}),n.onLongListen(n.UPDATE_AWS_CREDENTIAL,function(){var e,i,s,u;if(o.hasCredential()){o.accountIsDemo()?(m.enableSwitchRegion(),n.trigger(n.ACCOUNT_DEMONSTRATE),m.hideLoadTime(),t("#global-region-visualize-VPC").addClass("disabled"),t("#global-region-visualize-VPC").attr("disabled",!0)):(m.clearDemo(),m.enableSwitchRegion(),m&&m.reloadResource(null,!0),m.displayLoadTime(),t("#global-region-visualize-VPC").removeClass("disabled"),t("#global-region-visualize-VPC").removeAttr("disabled")),r.data.config={},u=f.REGION_KEYS;for(i=0,s=u.length;i<s;i++)e=u[i],r.data.config[e]={};return r.common.other.initUnmanaged(),null}return m.disableSwitchRegion(),m.showCredential(),m.renderLoadingFaild(),m.hideLoadTime()}),n.onLongListen(n.ACCOUNT_DEMONSTRATE,function(){return m.setDemo(),m.renderGlobalDemo(),m.renderRegionDemo()}),s.on("VPC_VPC_DESC_ACCOUNT_ATTRS_RETURN",function(e){return i.accountReturnHandler(),e.is_error?m.hideLoadTime():(m.enableSwitchRegion(),o.accountIsDemo()?(n.trigger(n.ACCOUNT_DEMONSTRATE),m.hideLoadTime()):m.displayLoadTime())}),n.onLongListen(n.UPDATE_DASHBOARD,function(){void 0;if(m)return m.reloadResource(null,!1)}),i.describeAccountAttributesService(),n.onLongListen("RESULT_APP_LIST",function(e){return c=e,i.updateMap(i,c,h),i.updateRecentList(i,e,"recent_launched_apps"),m.renderMapResult(),i.getItemList("app",a,c),u=!0,d&&o.cleanupThumbnail(),null}),n.onLongListen("RESULT_STACK_LIST",function(e){return void 0,h=e,i.updateMap(i,c,h),i.updateRecentList(i,e,"recent_edited_stacks"),m.renderMapResult(),i.getItemList("stack",a,h),d=!0,u&&o.cleanupThumbnail(),null}),n.onLongListen(n.NAVIGATION_TO_DASHBOARD_REGION,function(e){return void 0,e==="global"&&n.trigger(n.RETURN_OVERVIEW_TAB),null}),m.on("SWITCH_REGION",function(e,t){a=e,i.loadResource(e);if(!t)return this.model.getItemList("app",e,c),this.model.getItemList("stack",e,h)}),m.on("RELOAD_RESOURCE",function(e){return void 0,m.displayLoadTime(),i.describeAWSResourcesService(e),n.trigger(n.UPDATE_STACK_LIST),n.trigger(n.UPDATE_APP_LIST),r.common.other.initUnmanaged(),null}),i.on("change:cur_app_list",function(){return m.renderRegionAppStack("app")}),n.onLongListen(n.UPDATE_APP_INFO,function(e,t){return i.describeAWSResourcesService(e)}),i.on("UPDATE_REGION_APP_LIST",function(){return m.renderRegionAppStack("app")}),i.on("change:cur_stack_list",function(){return m.renderRegionAppStack("stack")}),i.on("REGION_RESOURCE_CHANGED",function(e,t){return void 0,m.renderRegionResourceBody(e,!0)}),n.onLongListen(n.UPDATE_REGION_THUMBNAIL,function(e,t){return void 0,m.updateThumbnail(e,t),null})})},v=function(){},{loadModule:l,unLoadModule:v}})}).call(this);