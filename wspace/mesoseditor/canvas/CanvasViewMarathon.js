define(["CanvasView","constant","i18n!/nls/lang.js","../template/TplOpsEditor","Design"],function(e,t,n,r,i){var s;return s=function(e,t){return t.x1<=e.x&&t.y1<=e.y&&t.x2>=e.x&&t.y2>=e.y},e.extend({initialize:function(){return e.prototype.initialize.apply(this,arguments),this.$el.addClass("marathon").toggleClass("empty",!this.hasItems()).append(r.canvas.placeholder())},hasItems:function(){return this.items().length>1},recreateStructure:function(){this.svg.clear().add([this.svg.group().classes("layer_group"),this.svg.group().classes("layer_line"),this.svg.group().classes("layer_node")])},appendGroup:function(e){var t,n;return t=this.__appendSvg(e,".layer_group"),n=this,setTimeout(function(){return n.sortGroup()},0),t},sortGroup:function(){var e,n,r,i,s,o,u,a,f,l,c,h,p;i=_.chain(this.items()).filter(function(e){return e.type===t.RESTYPE.MRTHGROUP}).sortBy(function(e){return e.parentCount()}).map(function(e){return e.$el[0]}).value(),u=$(this.svg.node).children(".layer_group")[0],n=$(u).children().splice(0),o=!1;for(s=a=0,c=n.length;a<c;s=++a){r=n[s];if(i[s]!==r){o=!0;break}}if(!o)return;for(f=0,h=n.length;f<h;f++)e=n[f],u.removeChild(e);for(s=l=0,p=i.length;l<p;s=++l)r=i[s],u.appendChild(r)},fixConnection:function(e,t,n){},highLightItems:function(){},appendNode:function(e){return this.__appendSvg(e,".layer_node")},appendline:function(e){return this.__appendSvg(e,".layer_line")},addItem:function(){return this.$el.removeClass("empty"),e.prototype.addItem.apply(this,arguments)},removeItem:function(){return e.prototype.removeItem.apply(this,arguments),this.$el.toggleClass("empty",!this.hasItems())},errorMessageForDrop:function(e){switch(e){case t.RESTYPE.VOL:return n.CANVAS.WARN_NOTMATCH_VOLUME;case t.RESTYPE.SUBNET:return n.CANVAS.WARN_NOTMATCH_SUBNET;case t.RESTYPE.INSTANCE:return n.CANVAS.WARN_NOTMATCH_INSTANCE_SUBNET;case t.RESTYPE.ENI:return n.CANVAS.WARN_NOTMATCH_ENI;case t.RESTYPE.RT:return n.CANVAS.WARN_NOTMATCH_RTB;case t.RESTYPE.ELB:return n.CANVAS.WARN_NOTMATCH_ELB;case t.RESTYPE.CGW:return n.CANVAS.WARN_NOTMATCH_CGW;case t.RESTYPE.ASG:return n.CANVAS.WARN_NOTMATCH_ASG;case t.RESTYPE.IGW:return n.CANVAS.WARN_NOTMATCH_IGW;case t.RESTYPE.VGW:return n.CANVAS.WARN_NOTMATCH_VGW;case t.RESTYPE.DBSBG:return n.CANVAS.WARN_NOTMATCH_SGP_VPC;case t.RESTYPE.DBINSTANCE:return n.CANVAS.WARN_NOTMATCH_DBINSTANCE_SGP}},isReadOnly:function(){return this.design.modeIsApp()}})});