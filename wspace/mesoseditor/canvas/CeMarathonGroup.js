define(["CanvasElement","constant","CanvasManager","i18n!/nls/lang.js","CanvasView"],function(e,t,n,r,i){return e.extend({type:t.RESTYPE.MRTHGROUP,parentType:[t.RESTYPE.MRTHGROUP,"SVG"],defaultSize:[22,17],portPosition:function(t,n){var r,s;return r=this.model,t==="group-dep-in"?(s=-10,n&&(s-=8),[s,11,e.constant.PORT_LEFT_ANGLE]):(s=r.width()*i.GRID_WIDTH+10,n&&(s+=7),[s,11,e.constant.PORT_RIGHT_ANGLE])},listenModelEvents:function(){var e;e=this,this.listenTo(this.model,"change:__parent",function(){return e.canvas.sortGroup()})},applyGeometry:function(t,n,r,i){var s,o,u,a,f;e.prototype.applyGeometry.apply(this,arguments),f=this.$el[0].instance.children();for(u=0,a=f.length;u<a;u++){s=f[u],o=s.classes();if(o.indexOf("group-label-bg")>=0){s.size(r*10,s.height());break}}},create:function(){var e,t,n;return t=this.canvas.svg,e=this.model,n=this.canvas.appendGroup(this.createGroup()),n.add([t.rect(e.width()*10,20).move(0,0).radius(2).attr({"class":"group-label-bg"}),t.use("marathon_port").attr({"class":"port port-marathon tooltip","data-name":"group-dep-in","data-tooltip":r.IDE.PORT_TIP_U}),t.use("marathon_port").attr({"class":"port port-marathon tooltip","data-name":"group-dep-out","data-tooltip":r.IDE.PORT_TIP_V})],0),this.initNode(n,e.x(),e.y()),n},label:function(){return this.model.get("name")},render:function(){var e;return e=this.model,n.setLabel(this,this.$el.children("text")),this.$el[0].instance.move(e.x()*i.GRID_WIDTH,e.y()*i.GRID_WIDTH)},containPoint:function(e,t){var n,r,i;return r=this.model.x()-2,i=this.model.y(),n=this.size(),r<=e&&i<=t&&r+n.width+4>=e&&i+n.height>=t},parentCount:function(){var e,t;t=0,e=this.parent();while(e)++t,e=e.parent();return t}})});