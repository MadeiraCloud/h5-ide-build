define(["constant","ConnectionModel","i18n!/nls/lang.js"],function(e,t,n){var r;return r=t.extend({type:"MarathonDepIn",directional:!0,portDefs:[{port1:{name:"app-dep-in",type:e.RESTYPE.MRTHAPP},port2:{name:"group-dep-out",type:e.RESTYPE.MRTHGROUP}},{port1:{name:"app-dep-in",type:e.RESTYPE.MRTHAPP},port2:{name:"app-dep-out",type:e.RESTYPE.MRTHAPP}},{port1:{name:"group-dep-in",type:e.RESTYPE.MRTHGROUP},port2:{name:"group-dep-out",type:e.RESTYPE.MRTHGROUP}},{port1:{name:"group-dep-in",type:e.RESTYPE.MRTHGROUP},port2:{name:"app-dep-out",type:e.RESTYPE.MRTHAPP}}],constructor:function(e,n,r,i){var s;if(_.isString(n)){s=this.resolve(e,n);if(!s){void 0;return}n=s}return t.call(this,e,n,r,i)},absolutePath:function(e,t){return t.indexOf("../")===-1?t:(t=t.replace(/\\/g,"/"),t.indexOf("../")===0&&(t=e.path()+"/"+t),t.replace(/\/[^/]+\/\.\./g,""))},serialize:function(e,t){var n;n=e[this.port1Comp().id],n.resource.dependencies||(n.resource.dependencies=[]),n.resource.dependencies.push(this.port2Comp().path())},resolve:function(e,t){var n;return t=this.absolutePath(e,t),n=null,e.design().eachComponent(function(e){return e.path()===t?(n=e,!1):!0}),n}},{isConnectable:function(e,t){var n,r,i,s;s=e.connections();for(r=0,i=s.length;r<i;r++){n=s[r];if(n.connectsTo(t.id))return!1}return!0}}),r});