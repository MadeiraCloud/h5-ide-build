define(["constant","GroupModel","./MarathonDepIn","i18n!/nls/lang.js"],function(e,t,n,r){var i;return i=t.extend({type:e.RESTYPE.MRTHGROUP,newNameTmpl:"group",path:function(){var e,t;e=[],t=this;while(t)e.unshift(t.get("name")),t=t.parent();return("/"+e.join("/")).replace(/\/+/g,"/")},serialize:function(){var t,n,r,i,s,o,u;i=[],t=[],u=this.children();for(s=0,o=u.length;s<o;s++)n=u[s],n.type===e.RESTYPE.MRTHGROUP?i.push(n.id):t.push(n.id);return r={uid:this.id,type:this.type,toplevel:!this.parent(),resource:{id:this.get("name")}},i.length&&(r.resource.groups=i),t.length&&(r.resource.apps=t),{component:r,layout:this.generateLayout()}},isReparentable:function(t){return!t||!_.find(t.children(),function(t){return t.type===e.RESTYPE.MRTHAPP})}},{handleTypes:e.RESTYPE.MRTHGROUP,deserialize:function(e,t,n){return new i({id:e.uid,name:e.resource.id,parent:t.groupUId?n(t.groupUId):null,x:t.coordinate[0],y:t.coordinate[1],width:t.size[0],height:t.size[1]}),null},postDeserialize:function(e,t){var r,i,s,o;o=e.resource.dependencies||[];for(i=0,s=o.length;i<s;i++)r=o[i],new n(Design.instance().component(e.uid),r)}}),i});