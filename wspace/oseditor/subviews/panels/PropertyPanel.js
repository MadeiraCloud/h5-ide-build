define(["backbone","constant","Design","CloudResources","../../property/OsPropertyView","../../property/OsPropertyBundle","../../property/validation/ValidationBase","../../property/validation/ValidationBundle","./template/TplPropertyPanel","UI.selection","ConnectionModel"],function(e,t,n,r,i,s,o,u,a,f,l){return e.View.extend({initialize:function(e){var t,s,u,a,f,l;t=e.workspace.design.region(),this.options=e,this.uid=e.uid,this.type=e.type,this.panel=e.panel,this.model=n.instance().component(this.uid),this.mode=e.workspace.design.mode(),this.mode==="appedit"&&((s=this.model)!=null?!s.get("appId"):!void 0)&&(this.mode="stack"),this.model&&((u=this.mode)==="app"||u==="appedit")&&((a=this.model)!=null?a.get("appId"):void 0)&&(this.appModel=(f=r(this.type,t))!=null?f.get((l=this.model)!=null?l.get("appId"):void 0):void 0),this.model&&(this.viewClass=i.getClass(this.mode,this.type)),this.viewClass==null&&(this.viewClass=i.getClass(this.mode,"default")),this.validationClass=o.getClass(this.type)},resourceInexist:function(){return this.mode==="stack"?!1:this.appModel?!1:this.model instanceof l?!1:!0},render:function(){var e,t,n,r,i;return t=this.options.workspace.design,e={model:this.model,appModel:this.appModel||null,propertyPanel:this,panel:this.panel,workspace:this.options.workspace},n=this.propertyView=new this.viewClass(e),this.validationClass?r=new this.validationClass(e):r=null,f(this.$el,n.selectTpl,_.extend({view:n},r)),this.setTitle(),this.resourceInexist()?this.$el.append(a.empty()):this.$el.append(n.render().el),(i=this.panel.parent)!=null&&i.$el.attr("data-mode",this.mode),this},setTitle:function(e){var t;e==null&&(e=this.propertyView.getTitle());if(!e)return;return t=this.$("h1.title"),t.size()?t.eq(0).text(e):this.$el.html(a.title({title:e}))},showFloatPanel:function(){return this.panel.showFloatPanel.apply(this.panel,arguments)},hideFloatPanel:function(){return this.panel.hideFloatPanel.apply(this.panel,arguments)},remove:function(){var t;return this.propertyView&&this.propertyView.selectTpl&&f.unbind(this.$el,this.propertyView.selectTpl),(t=this.propertyView)!=null&&t.remove(),e.View.prototype.remove.apply(this,arguments)}})});