define(["CanvasElement","constant","CanvasManager","i18n!/nls/lang.js"],function(e,t,n,r){return e.extend({type:t.RESTYPE.OSPORT,parentType:[t.RESTYPE.OSSUBNET],defaultSize:[8,8],portPosMap:{"pool-left":[0,40,e.constant.PORT_LEFT_ANGLE],"pool-right":[80,40,e.constant.PORT_RIGHT_ANGLE],"server-left":[0,60,e.constant.PORT_LEFT_ANGLE],"server-right":[80,60,e.constant.PORT_RIGHT_ANGLE]},portDirMap:{pool:"horizontal",server:"horizontal"},events:{"mousedown .fip-status":"toggleFip","click .fip-status":"suppressEvent"},suppressEvent:function(){return!1},labelWidth:function(){return 100},listenModelEvents:function(){this.listenTo(this.model,"change:fip",this.render),this.listenTo(this.model,"change:connections",this.render)},toggleFip:function(){var e;return this.canvas.design.modeIsApp()?!1:(e=!!this.model.getFloatingIp(),this.model.setFloatingIp(!e),!1)},create:function(){var e,t,n;return e=this.model,void 0,t=this.canvas.svg,n=this.createRawNode().add([t.use("os_port"),t.group().move(33,29).classes("fip-status cvs-hover tooltip").add([t.image("").size(26,21).classes("normal"),t.image("").size(26,21).classes("hover")]),this.createPortElement().attr({"class":"port port-blue tooltip","data-name":"pool","data-alias":"pool-left","data-tooltip":r.IDE.PORT_TIP_P}),this.createPortElement().attr({"class":"port port-blue tooltip","data-name":"pool","data-alias":"pool-right","data-tooltip":r.IDE.PORT_TIP_P}),this.createPortElement().attr({"class":"port port-green tooltip","data-name":"server","data-alias":"server-left","data-tooltip":r.IDE.PORT_TIP_R}),this.createPortElement().attr({"class":"port port-green tooltip","data-name":"server","data-alias":"server-right","data-tooltip":r.IDE.PORT_TIP_R})]),this.canvas.appendNode(n),this.initNode(n,e.x(),e.y()),n},render:function(){var e,t;return t=this.model,n.setLabel(this,this.$el.children(".node-label")),e=this.$el.children(".fip-status"),t.connections("OsPortUsage").length?(e.show(),n.updateFip(e,t)):e.hide(),null}})});