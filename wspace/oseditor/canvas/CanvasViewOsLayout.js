(function(){define(["./CanvasViewOs","CanvasViewLayout","constant"],function(e,t,n){var r,i,s,o,u,a,f;return f=null,u=function(e){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S;i=t.DefaultGroupMethod.call(this,e),c=[],l=f=d=a=[];for(v=0,b=i.length;v<b;v++)n=i[v],n.type==="OS::Nova::Server_group"?c.push(n):n.type==="OS::Neutron::Port_group"?f=n.children:n.type==="OS::Neutron::VIP_group"?d=n.children:n.type==="OS::Neutron::Pool_group"&&(a=n.children);r=[];for(m=0,w=a.length;m<w;m++){u=a[m],p=u.component.connectionTargets("OsListenerAsso")[0],o=-1;for(s=g=0,E=d.length;g<E;s=++g){h=d[s];if(h.component===p){o=s;break}}o>=0?(d.splice(o,1),r.push({type:"ELB_pair",children:[u,h]})):r.push(u)}for(y=0,S=d.length;y<S;y++)p=d[y],r.push(p);return r.length&&c.push({type:"ELB_group",children:r}),f.length&&c.push({type:"OS::Neutron::Port_group",children:f}),c},a=function(e){var t,n,r,i;n=[];for(r=0,i=e.length;r<i;r++)t=e[r],t.type==="OS::Neutron::Router"?n.push(t):n.unshift(t);return n},s=function(e){var n,r,i,s;r=[];for(i=0,s=e.length;i<s;i++)n=e[i],n.type==="OS::Neutron::Router_group"?r.unshift(n):r.push(n);return t.DefaultArrangeMethod.call(this,r)},i=function(e){var t,n,r,i,s,o,u,a,l,c,h;e.sort(function(e,t){return t.children.length-e.children.length}),f={},i=-2,s=-2,o=0,u=0,n=[];for(r=a=0,c=e.length;a<c;r=++a)t=e[r],r%2===0?(t.y=0,t.x=i+2,i=t.x+t.width,t.height>o&&(o=t.height)):(n.push(t),t.x=s+2,s=t.x+t.width,t.height>u&&(u=t.height));for(l=0,h=n.length;l<h;l++)t=n[l],f[t.component.id]=t.y=o+2;return f.y=o+2,{width:Math.max(i,s),height:o+2+u}},r=function(e){var t,n,r,i,s,o,u,a,l,c;i=-2,s=-2;for(o=0,a=e.length;o<a;o++){n=e[o],t=!1,c=n.component.connectionTargets("OsRouterAsso");for(u=0,l=c.length;u<l;u++){r=c[u];if(!f[r.id]){t=!0;break}}t?(i+=2,n.x=i,i+=8,n.y=0):(s+=2,n.x=s,s+=8,n.y=f.y)}return{width:Math.max(i,s),height:f.y+8}},o=e.prototype.autoLayoutConfig={SVG:{sortMethod:a,arrangeMethod:s,space:6},"OS::Neutron::Network":{space:4,margin:3,width:60,height:60},"OS::Neutron::Router_group":{arrangeMethod:r,space:4},"OS::Neutron::Router":{width:8,height:8},"OS::Neutron::Subnet_group":{arrangeMethod:i,space:2},"OS::Neutron::Subnet":{groupMethod:u,arrangeMethod:"ArrangeVertical",space:2,margin:2,width:8,height:8},"OS::Nova::Server_group":{space:2},"OS::Nova::Server":{width:8,height:8},"OS::Neutron::Port":{width:8,height:8},"OS::Neutron::VIP":{width:8,height:8},"OS::Neutron::Pool":{width:8,height:8},ELB_group:{arrangeMethod:"ArrangeBinPack",space:2},ELB_pair:{space:2}},null})}).call(this);