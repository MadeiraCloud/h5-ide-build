(function(){define(["constant","../OsPropertyView","./template/stack","../oshmlist/view"],function(e,t,n,r){return t.extend({events:{"change .selection[data-target]":"updateAttribute"},initialize:function(){this.memConn=this.model.connections("OsPoolMembership"),this.hmlistView=this.reg(new r({targetModel:this.model}))},render:function(){return this.$el.html(n(this.getRenderData())),this.renderHmlist(),this},getModelJson:function(){var e;return e=t.prototype.getModelJson.call(this),e.mems=_.map(this.memConn,function(e){var t,n;return n=e.getPort(),t=e.toJSON(),t.osport=e.getPort().toJSON(),n.isEmbedded()&&(t.osport.name=n.owner().get("name")),t}),e},renderHmlist:function(){return this.$(".pool-details").after(this.hmlistView.render().el)},getModelForUpdateAttr:function(e){var t,n;t=$(e.currentTarget),n=t.data("model"),n||(n=t.closest("[data-model]").data("model"));switch(n){case"hm":return this.hm;case"mem":return this.memConn[t.data("index")];default:return this.model}},updateAttribute:function(e){var t,n,r,i;r=this.getModelForUpdateAttr(e),t=$(e.currentTarget),n=t.data("target"),i=t.getValue(),(n==="weight"||n==="port")&&r.set("appId",""),r.set(n,i);if(n==="name")return this.setTitle(i)}},{handleTypes:[e.RESTYPE.OSPOOL],handleModes:["stack","appedit"]})})}).call(this);