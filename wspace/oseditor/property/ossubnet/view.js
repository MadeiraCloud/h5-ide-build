define(["constant","../OsPropertyView","./template"],function(e,t,n){return t.extend({events:{"change .selection[data-target]":"updateAttribute","select_dropdown_button_click .item-list":"addItem","click .item-list .item .item-remove":"removeItemClicked","select_item_remove .item-list":"removeItem"},initialize:function(){this.selectTpl={button:function(){return n.addButton()},sgItem:function(e){return n.item({value:e.text})},sgOption:function(e){return n.option({value:e.text})}}},render:function(){var e,t,r,i;return(i=this.mode())==="stack"||i==="appedit"?(e=this.model.toJSON(),t=[],r=[],_.each(this.model.get("nameservers"),function(e){return r.push(e),t.push(e)}),t=t.join(","),e=_.extend(e,{nameServerList:t,nameServers:r}),e=_.extend(e,this.getRenderData()),this.$el.html(n.stack(e))):this.$el.html(n.app(this.getRenderData())),this},addItem:function(e,t){var n,r;return n=$.trim(t),MC.validate("ipv4",n)&&(r=this.model.get("nameservers"),r.push(n),this.model.set("nameservers",_.uniq(r))),this.render()},removeItemClicked:function(e){var t,n,r;return t=$(e.currentTarget),r=t.parents(".item").find(".item-name").attr("data-value"),n=this.model.get("nameservers").indexOf(r),n>-1&&this.model.get("nameservers").splice(n,1),this.render()},removeItem:function(e,t){var n;n=this.model.get("nameservers").indexOf(t);if(n>-1)return this.model.get("nameservers").splice(n,1)},updateAttribute:function(e){var t,n,r;t=$(e.currentTarget),n=t.data("target"),r=t.getValue(),this.model.set(n,r),n==="cidr"&&this.model.resetAllChildIP();if(n==="name")return this.setTitle(r)}},{handleTypes:[e.RESTYPE.OSSUBNET],handleModes:["stack","app","appedit"]})});