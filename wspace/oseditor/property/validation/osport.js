define(["constant","./ValidationBase","i18n!/nls/lang.js"],function(e,t,n){return t.extend({limits:{ip:t.limit.ipv4},ip:function(t){var r,i,s,o,u,a;if(!MC.validate("ipv4",t))return"Invalid IP Address";u=this.model.parent();if(u.type===e.RESTYPE.OSSUBNET){o=u.get("cidr"),a=Design.modelClassForType(e.RESTYPE.SUBNET).isIPInSubnet(t,o,[0,1,2]);if(!a.isValid)return a.isReserved?n.IDE.VALIDATION_IP_IN_SUBNET_REVERSED_RANGE:n.IDE.VALIDATION_IP_CONFLICTS_WITH_SUBNET_IP_RANGE}return s=this.model,this.model.type===e.RESTYPE.OSSERVER&&this.model.embedPort&&(s=this.model.embedPort()),i=Design.modelClassForType(e.RESTYPE.OSPORT).allObjects(),i=i.concat(Design.modelClassForType(e.RESTYPE.OSLISTENER).allObjects()),r=!1,_.each(i,function(e){if(e===s)return;return t===e.get("ip")&&(r=!0),null}),r?n.IDE.VALIDATION_IP_CONFLICTS_WITH_OTHER_IP:null}},{handleTypes:[e.RESTYPE.OSPORT]})});