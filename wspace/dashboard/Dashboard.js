define("wspace/dashboard/DashboardTpl",["handlebars"],function(e){var t,n={};return t=function(e,t,n,r,i){function l(e,t){return'\n                      <div class="region-app-stack-wrap marathon">\n                          <div class="dash-region-apps-wrap">\n                              <div class="dashboard-loading">\n                                  <div class="loading-spinner"></div>\n                              </div>\n                          </div>\n                          <div class="dash-region-stacks-wrap">\n                              <div class="dashboard-loading">\n                                  <div class="loading-spinner"></div>\n                              </div>\n                          </div>\n                      </div>\n                      '}function c(e,t){var r;return r=n.each.call(e,e&&e.regions,{hash:{},inverse:f.noop,fn:f.program(4,h,t),data:t}),r||r===0?r:""}function h(e,t){var n="",r;return n+='\n                                        <li data-region="'+a((r=e&&e.id,typeof r===u?r.apply(e):r))+'">'+a((r=e&&e.alias,typeof r===u?r.apply(e):r))+"</li>\n                                    ",n}function p(e,t){var r="";return r+='\n                          <a class="show-credential">'+a(n.i18n.call(e,"DASH_TPL_PROVIDE_YOUR_CREDENTIAL_1",{hash:{},data:t}))+"</a> "+a(n.i18n.call(e,"DASH_TPL_PROVIDE_YOUR_CREDENTIAL_2",{hash:{},data:t}))+"\n                          ",r}function d(e,t){var r="";return r+="\n                          <p>"+a(n.i18n.call(e,"DASH_ASK_ADMIN_PROVIDE_CREDENTIAL",{hash:{},data:t}))+"</p>\n                          ",r}function v(e,t){var r="";return r+='<button class="dashboard-nav-log dashboard-nav-audit" data-id="audit">'+a(n.i18n.call(e,"DASHBOARD_PANEL_LOGS_AUDIT",{hash:{},data:t}))+"</button>",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div>\n\n  <header class="dashboard-header">\n    <button class="icon-refresh refreshResource">'+a(n.i18n.call(t,"DASH_TPL_JUST_NOW",{hash:{},data:i}))+'</button>\n\n      <button class="btn btn-primary icon-new-stack">'+a(n.i18n.call(t,"DASH_CREATE_NEW_STACK",{hash:{},data:i}))+'</button>\n\n      <div class="hovermenu">\n        <button class="btn btn-primary icon-import">'+a(n.i18n.call(t,"DASH_IMPORT_JSON",{hash:{},data:i}))+'<i class="icon-caret-down"></i></button>\n        <div class="dropdown-menu"> <ul>\n          <li class=\'import-stack\' data-type="stack" data-analytics-plus="import_json">'+a(n.i18n.call(t,"IMPORT_FORM_STACK_JSON",{hash:{},data:i}))+'</li>\n          <li class=\'import-stack\' data-type="cf" data-analytics-plus="import_cf">'+a(n.i18n.call(t,"IMPORT_FORM_CLOUDFORMATION",{hash:{},data:i}))+'</li>\n        </ul> </div>\n      </div>\n\n      <button id="VisualizeVPC" class="btn btn-blue icon-visualize tooltip" data-analytics-plus="visualize_vpc" title="'+a(n.i18n.call(t,"PROVIDE_CRED_TO_VISUALIZE",{hash:{},data:i}))+'" data-tooltip="'+a(n.i18n.call(t,"PROVIDE_CRED_TO_VISUALIZE",{hash:{},data:i}))+'">'+a(n.i18n.call(t,"DASH_VISUALIZE_VPC",{hash:{},data:i}))+'</button>\n\n  </header>\n\n  <div class="dashboard-wrapper">\n      <article class="dashboard-content">\n          <div id="global-region-wrap">\n              <!-- Global Map -->\n              <section id="dashboard-data-wrap">\n                  <!-- Region view -->\n                  <section id="RegionView">\n                      <div class="region-app-stack-wrap">\n                          <div class="dash-region-apps-wrap">\n                              <div class="dashboard-loading">\n                                  <div class="loading-spinner"></div>\n                              </div>\n                          </div>\n                          <div class="dash-region-stacks-wrap">\n                              <div class="dashboard-loading">\n                                  <div class="loading-spinner"></div>\n                              </div>\n                          </div>\n                      </div>\n\n                      ',o=n["if"].call(t,!1,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+='\n\n                      <div class="dash-resource-wrap">\n                        <header class="dash-region-header">\n                            <label class="region-resource-tab">\n                                Resource Table\n                            </label>\n                            <nav class="dash-region-navigation" data-type="resource">\n                                <button class="js-toggle-dropdown">\n                                    <i class="icon-caret-down right"></i><span>'+a(n.i18n.call(t,"DASH_BTN_GLOBAL",{hash:{},data:i}))+'</span>\n                                </button>\n                                <ul id="region-switch-list" class="dropdown-menu">\n                                    <li data-region="global">'+a(n.i18n.call(t,"DASH_BTN_GLOBAL",{hash:{},data:i}))+"</li>\n                                    ",o=n.each.call(t,t&&t.providers,{hash:{},inverse:f.noop,fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;s+='\n                                </ul>\n                            </nav>\n                          </header>\n                          <ul id="GlobalView" style="display: none;"></ul>\n                          <div id="RegionViewWrap">\n                              <nav class="" id="RegionResourceNav">\n                                  <div class="resource-tab instances on" data-type="INSTANCE">\n                                      <span class="resource-count">'+a(n.i18n.call(t,"DASH_LBL_INSTANCE",{hash:{},data:i}))+'</span><span\n                                          class="count-bubble"></span></div>\n                                  <div class="resource-tab rds" data-type="DBINSTANCE">\n                                      <span class="resource-count">'+a(n.i18n.call(t,"DASH_LBL_RDS",{hash:{},data:i}))+'</span><span\n                                          class="count-bubble"></span></div>\n                                  <div class="resource-tab eips" data-type="EIP">\n                                      <span class="resource-count">'+a(n.i18n.call(t,"DASH_LBL_ELASTIC_IP",{hash:{},data:i}))+'</span><span\n                                          class="count-bubble"></span></div>\n                                  <div class="resource-tab volumes" data-type="VOL">\n                                      <span class="resource-count">'+a(n.i18n.call(t,"DASH_LBL_VOLUME",{hash:{},data:i}))+'</span><span\n                                          class="count-bubble"></span></div>\n                                  <div class="resource-tab vpcs" data-type="VPC">\n                                      <span class="resource-count">'+a(n.i18n.call(t,"DASH_LBL_VPC",{hash:{},data:i}))+'</span><span\n                                          class="count-bubble"></span></div>\n                                  <div class="resource-tab vpns" data-type="VPN">\n                                      <span class="resource-count">'+a(n.i18n.call(t,"DASH_LBL_VPN",{hash:{},data:i}))+'</span><span\n                                          class="count-bubble"></span></div>\n                                  <div class="resource-tab elbs" data-type="ELB">\n                                      <span class="resource-count">'+a(n.i18n.call(t,"DASH_LBL_LOAD_BALANCER",{hash:{},data:i}))+'</span><span\n                                          class="count-bubble"></span></div>\n                                  <div class="resource-tab asgs" data-type="ASG">\n                                      <span class="resource-count">'+a(n.i18n.call(t,"DASH_LBL_AUTO_SCALING_GROUP",{hash:{},data:i}))+'</span><span\n                                          class="count-bubble"></span></div>\n                                  <div class="resource-tab cloudwatches" data-type="CW">\n                                      <span class="resource-count">'+a(n.i18n.call(t,"DASH_LBL_CLOUDWATCH_ALARM",{hash:{},data:i}))+'</span><span\n                                          class="count-bubble"></span></div>\n                                  <div class="resource-tab snss" data-type="SUBSCRIPTION">\n                                      <span class="resource-count">'+a(n.i18n.call(t,"DASH_LBL_SNS_SUBSCRIPTION",{hash:{},data:i}))+'</span><span\n                                          class="count-bubble"></span></div>\n                              </nav>\n                              <div id="RegionResourceData" class="table-head-fix"></div>\n                          </div>\n                      </div>\n                  </section>\n                  <!-- Region view -->\n                  <div id="DashboardDemo">\n                      <div class="enter-credential">\n                          '+a(n.i18n.call(t,"DASH_TPL_SAMPLE_INSTRUCTION",{hash:{},data:i}))+"<br/>\n                          ",o=n["if"].call(t,t&&t.isAdmin,{hash:{},inverse:f.program(8,d,i),fn:f.program(6,p,i),data:i});if(o||o===0)s+=o;s+='\n                      </div>\n                      <img src="/assets/images/ide/global-demo.png"/>\n                  </div>\n              </section>\n          </div>\n      </article>\n\n    <aside class="dashboard-sidebar">\n      <nav>\n        <button class="dashboard-nav-log dashboard-nav-activity selected" data-id="activity">'+a(n.i18n.call(t,"DASHBOARD_PANEL_LOGS_ACTIVITY",{hash:{},data:i}))+"</button>\n        ",o=n["if"].call(t,t&&t.isAdmin,{hash:{},inverse:f.noop,fn:f.program(10,v,i),data:i});if(o||o===0)s+=o;return s+='\n      </nav>\n      <div class="dashboard-log-wrap">\n          <div class="dashboard-log dashboard-log-activity"><div class="loading-spinner"></div></div>\n          <div class="dashboard-log dashboard-log-audit hide"><div class="loading-spinner"></div></div>\n      </div>\n    </aside>\n  </div>\n</div>',s},n.main=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="",i;r+='\n    <li class="dashboard-log-item '+a((i=e&&e.action_type,typeof i===u?i.apply(e):i))+'">\n        ',i=n["if"].call(e,e&&e.avatar,{hash:{},inverse:f.program(4,h,t),fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;r+='\n        <div class="info">\n            <div class="event">',i=(i=e&&e.event,typeof i===u?i.apply(e):i);if(i||i===0)r+=i;return r+='</div>\n            <div class="time">'+a((i=e&&e.time,typeof i===u?i.apply(e):i))+"</div>\n        </div>\n    </li>\n    ",r}function c(e,t){var n="",r;return n+='<img class="avatar" src="'+a((r=e&&e.avatar,typeof r===u?r.apply(e):r))+'" />',n}function h(e,t){var n="";return n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<ul class="dashboard-log-list">\n    ',o=n.each.call(t,t,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n</ul>",s},n.activityList=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o=this.escapeExpression;return s+='<div class="dashboard-log-empty">\n    <div class="main">'+o(n.i18n.call(t,"DASHBOARD_PANEL_LOGS_NO_ACTIVITY",{hash:{},data:i}))+'</div>\n    <div class="sub">'+o(n.i18n.call(t,"DASHBOARD_PANEL_LOGS_NO_ACTIVITY_SUB",{hash:{},data:i}))+"</div>\n</div>",s},n.noActivity=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="function",o=this.escapeExpression;return o(typeof t===s?t.apply(t):t)},n.securityText=e.template(t),n}),define("wspace/dashboard/ImportDialogTpl",["handlebars"],function(e){var t,n={};return t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o=this.escapeExpression;return s+='<div class="loading-spinner loading-spinner-small hide"></div>\n<div id="modal-import-json-dropzone">'+o(n.i18n.call(t,"POP_IMPORT_DROP_LBL",{hash:{},data:i}))+'<label for="modal-import-json-file" class="select-file-link">'+o(n.i18n.call(t,"POP_IMPORT_SELECT_LBL",{hash:{},data:i}))+'</label><input type="file" id="modal-import-json-file"></div>\n<div id="import-json-error"></div>',s},n.importJSON=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o=this.escapeExpression;return s+='<div class="loading-spinner loading-spinner-small hide"></div>\n<div id="modal-import-json-dropzone">'+o(n.i18n.call(t,"POP_IMPORT_DROP_CF_LBL",{hash:{},data:i}))+'<label for="modal-import-json-file" class="select-file-link">'+o(n.i18n.call(t,"POP_IMPORT_SELECT_LBL",{hash:{},data:i}))+'</label><input type="file" id="modal-import-json-file"></div>\n<div id="import-json-error"></div>\n<ul class="import-cf-notice">\n'+o(n.i18n.call(t,"IMPORT_CF_NOTICE",{hash:{},data:i}))+"\n</ul>",s},n.importCF=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="",i;r+='<li class="item',i=n.unless.call(e,t==null||t===!1?t:t.index,{hash:{},inverse:u.noop,fn:u.program(2,c,t),data:t});if(i||i===0)r+=i;return r+='" data-id="'+f(typeof e===a?e.apply(e):e)+'">'+f(typeof e===a?e.apply(e):e)+"</li>",r}function c(e,t){return" selected"}function h(e,t){var r="",i;r+='\n  <section class="modal-control-group"> <h5>'+f(n.i18n.call(e,"SPECIFY_PARAMETERS_FOR_TEMPLATE",{hash:{},data:t}))+'</h5>\n\n  <div class="nano cf-params-wrap">\n    <ul class="cf-params nano-content" id="import-cf-params">\n      ',i=n.each.call(e,e&&e.parameters,{hash:{},inverse:u.noop,fn:u.program(5,p,t),data:t});if(i||i===0)r+=i;return r+="\n    </ul>\n  </div>\n  </section>\n  ",r}function p(e,t){var r="",i;r+='<li class="cf-input-entry" data-type="'+f((i=e&&e.Type,typeof i===a?i.apply(e):i))+'" data-name="'+f((i=e&&e.Name,typeof i===a?i.apply(e):i))+'" ',i=n["if"].call(e,e&&e.NoEcho,{hash:{},inverse:u.noop,fn:u.program(6,d,t),data:t});if(i||i===0)r+=i;r+='>\n      <div class="cf-left">\n        <span class="cf-name">'+f((i=e&&e.Name,typeof i===a?i.apply(e):i))+'</span>\n        <span class="cf-type">'+f((i=e&&e.Type,typeof i===a?i.apply(e):i))+'</span>\n      </div>\n      <div class="cf-right">\n        <span class="cf-input-wrap">\n          <input class="input cf-input" ',i=n["if"].call(e,e&&e.NoEcho,{hash:{},inverse:u.program(10,m,t),fn:u.program(8,v,t),data:t});if(i||i===0)r+=i;r+=' value="'+f((i=e&&e.Default,typeof i===a?i.apply(e):i))+'">\n        </span>\n\n        <div class="cf-desc"><p>'+f((i=e&&e.Description,typeof i===a?i.apply(e):i))+"</p>",i=n["if"].call(e,e&&e.__Constraint,{hash:{},inverse:u.noop,fn:u.program(12,g,t),data:t});if(i||i===0)r+=i;r+='</div>\n        <span class="cf-error">',i=n["if"].call(e,e&&e.ConstraintDescription,{hash:{},inverse:u.program(16,b,t),fn:u.program(14,y,t),data:t});if(i||i===0)r+=i;return r+="</span>\n      </div>\n      </li>",r}function d(e,t){return'data-echo="false"'}function v(e,t){return'type="password"'}function m(e,t){return'type="text"'}function g(e,t){var n="",r;return n+="<p>"+f((r=e&&e.__Constraint,typeof r===a?r.apply(e):r))+"</p>",n}function y(e,t){var n;return f((n=e&&e.ConstraintDescription,typeof n===a?n.apply(e):n))}function b(e,t){return f(n.i18n.call(e,"IMPORT_CF_NOT_MEET_CONSTRAINT",{hash:{},data:t}))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this,a="function",f=this.escapeExpression;s+='<div id="import-cf-form">\n  <section class="modal-control-group clearfix"> <label class="label">'+f(n.i18n.call(t,"PROP.STACK_LBL_REGION",{hash:{},data:i}))+':</label>\n    <div class="selectbox combo-dd" id="import-cf-region">\n      <div class="selection">'+f((o=(o=t&&t.regions,o==null||o===!1?o:o[0]),typeof o===a?o.apply(t):o))+'</div>\n      <ul class="dropdown" tabindex="-1">\n        ',o=n.each.call(t,t&&t.regions,{hash:{},inverse:u.noop,fn:u.program(1,l,i),data:i});if(o||o===0)s+=o;s+="\n      </ul>\n      </ul>\n    </div>\n  </section>\n\n  ",o=n["if"].call(t,(o=t&&t.parameters,o==null||o===!1?o:o.length),{hash:{},inverse:u.noop,fn:u.program(4,h,i),data:i});if(o||o===0)s+=o;return s+='\n\n  <div class="loader"><div class="loading-spinner"></div></div>\n\n  <div class="modal-footer">\n    <span class="param-error hide">'+f(n.i18n.call(t,"IMPORT_CF_PARAMS_ERROR",{hash:{},data:i}))+'</span>\n    <span class="param-empty hide">'+f(n.i18n.call(t,"IMPORT_CF_PARAMS_EMPTY",{hash:{},data:i}))+'</span>\n    <button class="btn btn-blue" id="import-cf-import">'+f(n.i18n.call(t,"PROP.LBL_IMPORT",{hash:{},data:i}))+'</button>\n    <button class="btn modal-close btn-silver" id="import-cf-cancel">'+f(n.i18n.call(t,"PROP.LBL_CANCEL",{hash:{},data:i}))+'</button>\n  </div>\n</div>\n<div class="loading-spinner hide"></div>',s},n.importCFConfirm=e.template(t),n}),define("wspace/dashboard/ImportDialog",["./ImportDialogTpl","UI.modalplus","constant","i18n!/nls/lang.js","CloudResources","ApiRequest","JsonExporter","backbone","UI.select2","UI.nanoscroller"],function(e,t,n,r,i,s,o){return Backbone.View.extend({events:{"change #modal-import-json-file":"onSelectFile","drop #modal-import-json-dropzone":"onSelectFile","dragenter #modal-import-json-dropzone":"onDragenter","dragleave #modal-import-json-dropzone":"onDragleave","dragover  #modal-import-json-dropzone":"onDragover","click #import-cf-cancel":"cancelImport","click #import-cf-import":"doImport","keypress .cf-input":"onFocusInput","OPTION_CHANGE #import-cf-region":"onRegionChange"},initialize:function(n){var i;i=this,this.type=n.type,this.project=n.project,this.modal=new t({title:this.type==="stack"?r.IDE.POP_IMPORT_JSON_TIT:r.IDE.POP_IMPORT_CF_TIT,template:this.type==="stack"?e.importJSON():e.importCF(),width:"470",disableFooter:!0,onClose:function(){return i.onModalClose()}}),this.setElement(this.modal.tpl),this.regionForceFetchMap={},this.reader=new FileReader,this.reader.onload=function(e){return i.onReaderLoader(e)},this.reader.onerror=this.onReaderError},onDragenter:function(){return this.$el.find("#modal-import-json-dropzone").toggleClass("dragover",!0)},onDragleave:function(){return this.$el.find("#modal-import-json-dropzone").toggleClass("dragover",!1)},onDragover:function(e){var t;t=e.originalEvent.dataTransfer,t&&(t.dropEffect="copy"),e.stopPropagation(),e.preventDefault()},onSelectFile:function(e){var t;e.stopPropagation(),e.preventDefault(),$("#modal-import-json-dropzone").removeClass("dragover"),$("#import-json-error").html(""),e=e.originalEvent,t=(e.dataTransfer||e.target).files;if(!t||!t.length)return;return this.filename=(t[0].name||"").split(".")[0],this.reader.readAsText(t[0]),null},onReaderLoader:function(e){var t,n;n=o.importJson(this.reader.result);if(_.isString(n)){$("#import-json-error").html(n);return}if(this.type==="cf"){this.handleCFTemplate(n);return}return t=this.project.createStackByJson(n),App.loadUrl(t.url()),this.modal.close(),this.model=this.project=this.reader=null,null},onReaderError:function(){return $("#import-json-error").html(r.IDE.POP_IMPORT_ERROR)},handleCFTemplate:function(t){var i,s,o,u,a;o=[],a=t.Parameters;for(s in a)u=a[s],u.Name=s,u.NoEcho=u.NoEcho===!0,u.AllowedValues&&!_.isArray(u.AllowedValues)&&(u.AllowedValues=void 0),u.Type==="AWS::EC2::KeyPair::KeyName"&&(this.hasKpParam=!0),u.__Constraint="",u.AllowedValues&&(u.__Constraint="AllowedPattern: "+u.AllowedValues.join(",")+" "),u.Type==="Number"?(u.MinValue&&(u.__Constraint+="MinValue: "+u.MinValue+" "),u.MaxValue&&(u.__Constraint+="MaxValue: "+u.MaxValue+" ")):u.Type==="String"&&(u.MinLength&&(u.__Constraint+="MinLength: "+u.MinLength+" "),u.MaxLength&&(u.__Constraint+="MaxLength: "+u.MaxLength+" ")),o.push(u);this.parameters=o,this.cfJson=t,i={regions:n.REGION_KEYS.slice(0),parameters:o},this.modal.setContent(e.importCFConfirm(i)),this.modal.setWidth("570"),this.modal.setTitle(r.IDE.POP_IMPORT_CF_TIT),this.modal.tpl.find(".cf-params-wrap").nanoScroller(),this.initInputs(),this.onRegionChange()},onModalClose:function(){var e,t,n,r,i;i=this.modal.tpl.find("#import-cf-params").children().find("input.cf-input");for(n=0,r=i.length;n<r;n++)e=i[n],t=$(e).data("select2"),t&&$(e).select2("destroy")},initInputs:function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g;c=this,o=function(e){var t,n,r,i,s,o;n=[],r=e.term.toLowerCase(),o=c.currentRegionKps;for(i=0,s=o.length;i<s;i++)t=o[i],t.toLowerCase().indexOf(r)>=0&&n.push({id:t,text:t});return e.callback({more:!1,results:n})},s=function(e,t){var n;return n=e.select2("val"),t({id:n,text:n})},u=function(e){if(isNaN(Number(e)))return;return{id:e,text:e}},r=function(e){return e?"Invalid input":"Input value..."},e=$("#import-cf-params").children(),m=this.parameters;for(h=0,d=m.length;h<d;h++){a=m[h];if(a.NoEcho)continue;f=!1,i=e.filter("[data-name='"+a.Name+"']").find("input"),l={allowClear:!0,data:[],formatNoMatches:r};if(a.Type==="CommaDelimitedList"||a.Type==="List<Number>")f=!0,l.multiple=!0,l.allowDuplicate=!0,a.AllowedValues||(l.tags=[],l.data=void 0,l.tokenSeparators=[","]);a.Type==="List<Number>"&&(l.createSearchChoice=u),a.Type==="AWS::EC2::KeyPair::KeyName"&&(f=!0,l.query=o,l.initSelection=s);if(a.AllowedValues){f=!0,n=[],g=a.AllowedValues;for(p=0,v=g.length;p<v;p++)t=g[p],n.push({id:""+t,text:""+t});l.data=n,l.selectOnComma=!0}f&&i.select2(l)}},onRegionChange:function(){var e,t,r;if(!this.hasKpParam)return;e=this.project.credIdOfProvider("aws::global"),t=$("#import-cf-region").find(".selected").attr("data-id"),this.regionForceFetchMap[t]||(this.regionForceFetchMap[t]=!0,i(e,n.RESTYPE.KP,t).fetchForce()),r=this,$("#import-cf-form .loader").show(),i(e,n.RESTYPE.KP,t).fetch().then(function(){var s,o,u,a,f,l;$("#import-cf-form .loader").hide(),r.currentRegionKps=i(e,n.RESTYPE.KP,t).pluck("id"),s=$("#import-cf-params").children(),l=r.parameters;for(a=0,f=l.length;a<f;a++)u=l[a],u.Type==="AWS::EC2::KeyPair::KeyName"&&(o=s.filter("[data-name='"+u.Name+"']").find("input.cf-input"),o.select2("val",o.select2("val")||u.Default))})},extractUserInput:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w;a=e.attr("data-type"),t=e.find("input.cf-input"),t.siblings(".select2-container").length?l=t.select2("val"):l=e.find("input.cf-input").val(),o=e.attr("data-name"),u=this.cfJson.Parameters[o];if(!l)return{name:o,value:""};a==="Number"||a==="String"?c=[l]:_.isArray(l)?c=l:c=l.split(",");if(a==="Number"||a==="List<Number>")for(s=h=0,m=c.length;h<m;s=++h){f=c[s],f=Number(f);if(isNaN(f))return!1;if(u.MinValue&&Number(u.MinValue)>f)return!1;if(u.MaxValue&&Number(u.MaxValue)<f)return!1;c[s]=f}else if(a==="String"||a==="CommaDelimitedList"){u.AllowedPattern&&(n=new RegExp(u.AllowedPattern));for(s=p=0,g=c.length;p<g;s=++p){f=c[s];if(u.MinLength&&Number(u.MinLength)>f.length)return!1;if(u.MaxLength&&Number(u.MaxLength)<f.length)return!1;if(n&&!n.test(f))return!1}}if(u.AllowedValues)for(d=0,y=c.length;d<y;d++){f=c[d],w=u.AllowedValues||[];for(v=0,b=w.length;v<b;v++){i=w[v];if(""+i==""+f){r=!0;break}}if(!r)return!1}if(u.Type==="AWS::EC2::KeyPair::KeyName"&&this.currentRegionKps.indexOf(l)<0)return!1;if(a==="String"||a==="Number")l=c[0];else if(a==="List<Number>"||a==="CommaDelimitedList")l=c.join(",");return{name:o,value:l}},checkCFParameter:function(){var e,t,n,r,i,s,o,u;e=this.modal.tpl.find(".cf-params").children(),n=!1,r=!1;for(o=0,u=e.length;o<u;o++)i=e[o],t=$(i),s=this.extractUserInput(t),s?(s.value||(r=!0),this.cfJson.Parameters[s.name].Default=s.value,t.toggleClass("error",!1)):(n=!0,t.toggleClass("error",!0));return this.modal.tpl.find(".param-error").hide(),this.modal.tpl.find(".param-empty").hide(),n?(this.modal.tpl.find(".param-error").show(),this.emptyParamConfirm=!1):r&&(this.modal.tpl.find(".param-empty").show(),this.emptyParamConfirm||(n=this.emptyParamConfirm=!0)),!n},doImport:function(){var e,t,o;if(!this.checkCFParameter())return;return o=this,this.modal.tpl.find(".loading-spinner").show(),this.modal.tpl.closest(".modal-box").find(".modal-close").hide(),$("#import-cf-form").hide(),this.modal.resize(),t=$("#import-cf-region").find(".selected").attr("data-id"),e=this.project.credIdOfProvider("aws::global"),i(e,n.RESTYPE.AZ,t).fetch().then(function(){return s("stack_import_cloudformation",{region_name:$("#import-cf-region").find(".selected").attr("data-id"),cf_template:o.cfJson,parameters:{az:_.pluck(i(e,n.RESTYPE.AZ,t).where({category:t}),"id")}}).then(function(e){return o.modal.close(),e.provider="aws::global",o.filename&&(e.name=o.filename),App.loadUrl(o.project.createStackByJson(e,!0).url())},function(){o.modal.close(),notification("error",sprintf(r.IDE.POP_IMPORT_CFM_ERROR))})})},cancelImport:function(){return this.modal.close()},onFocusInput:function(e){return $(e.currentTarget).closest("li").removeClass("error")}})}),define("wspace/dashboard/DashboardTplData",["handlebars"],function(e){var t,n={};return t=function(e,t,n,r,i){function f(e,t){var n="",r;return n+='\n    <li id="'+u((r=e&&e.region,typeof r===o?r.apply(e):r))+'" class="global-map-item" title="'+u((r=e&&e.regionName,typeof r===o?r.apply(e):r))+' Dashboard">\n        <h5>'+u((r=e&&e.regionName,typeof r===o?r.apply(e):r))+'</h5>\n        <span class="global-region-location app">'+u((r=e&&e.app,typeof r===o?r.apply(e):r))+'</span>\n        <span class="global-region-location stack">'+u((r=e&&e.stack,typeof r===o?r.apply(e):r))+"</span>\n    </li>\n",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o="function",u=this.escapeExpression,a=this;return s=n.each.call(t,t,{hash:{},inverse:a.noop,fn:a.program(1,f,i),data:i}),s||s===0?s:""},n.globalMap=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="",i;return r+='\n    <p><b style="color:#ec3c38;">'+a((i=e&&e.name,typeof i===u?i.apply(e):i))+" "+a(n.i18n.call(e,"POP_CONFIRM_PROD_APP_WARNING_MSG",{hash:{},data:t}))+"</b>"+a(n.i18n.call(e,"TOOLBAR.FORGET_CONFIRM_INSTRUCTION",{hash:{},data:t}))+"</p>\n    <p>"+a(n.i18n.call(e,"POP_CONFIRM_FORGET_PROD_APP_INPUT_LBL",{hash:{},data:t}))+'</p>\n    <div><input class="input" style="width:390px;" id="appNameConfirmIpt"/></div>\n',r}function c(e,t){var r="";return r+='\n    <div class="modal-center-align-helper"> <div class="modal-text-major">'+a(n.i18n.call(e,"TOOLBAR.FORGET_APP_CONFIRM",{hash:{},data:t}))+"</div></div>\n",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div class="confirm-padding">\n',o=n["if"].call(t,t&&t.production,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n</div>",s},n.forgetApp=e.template(t),t=function(e,t,n,r,i){function l(e,t){return'class="hide"'}function c(e,t){var r="",i;r+="\n        <h4>"+a(n.i18n.call(e,"DASH_LBL_RECENT_LAUNCHED_STACK",{hash:{},data:t}))+"</h4>\n        <ul>",i=n.each.call(e,e&&e.apps,{hash:{},inverse:f.noop,fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;return r+="</ul>\n    ",r}function h(e,t){var r="",i;r+='<li class="recent-list-item" data-id="'+a((i=e&&e.id,typeof i===u?i.apply(e):i))+'">\n            <h5>'+a((i=e&&e.name,typeof i===u?i.apply(e):i))+" ",i=n["if"].call(e,e&&e.usage,{hash:{},inverse:f.noop,fn:f.program(5,p,t),data:t});if(i||i===0)r+=i;return r+="</h5>\n            <span>"+a((i=e&&e.regionName,typeof i===u?i.apply(e):i))+'</span>\n            <span class="recent-time">'+a((i=e&&e.formatedTime,typeof i===u?i.apply(e):i))+"</span>\n        </li>",r}function p(e,t){var n="",r;return n+='<i class="right icon-app-type-'+a((r=e&&e.usage,typeof r===u?r.apply(e):r))+'"></i>',n}function d(e,t){var r="";return r+='\n        <span class="empty-text">'+a(n.i18n.call(e,"DASH_TPL_NO_RECENT_APP",{hash:{},data:t}))+"</span>\n    ",r}function v(e,t){var r="",i;r+="\n        <h4>"+a(n.i18n.call(e,"DASH_LBL_RECENT_EDITED_STACK",{hash:{},data:t}))+"</h4>\n        <ul>",i=n.each.call(e,e&&e.stacks,{hash:{},inverse:f.noop,fn:f.program(10,m,t),data:t});if(i||i===0)r+=i;return r+="</ul>\n    ",r}function m(e,t){var n="",r;return n+='<li class="recent-list-item" data-id="'+a((r=e&&e.id,typeof r===u?r.apply(e):r))+'">\n            <h5>'+a((r=e&&e.name,typeof r===u?r.apply(e):r))+"</h5>\n            <span>"+a((r=e&&e.regionName,typeof r===u?r.apply(e):r))+'</span>\n            <span class="recent-time">'+a((r=e&&e.formatedTime,typeof r===u?r.apply(e):r))+"</span>\n        </li>",n}function g(e,t){var r="";return r+='\n        <span class="empty-text">'+a(n.i18n.call(e,"DASH_TPL_NO_RECENT_STACK",{hash:{},data:t}))+"</span>\n    ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+="<section ",o=n["if"].call(t,t&&t.isStack,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+=">\n    ",o=n["if"].call(t,(o=t&&t.apps,o==null||o===!1?o:o.length),{hash:{},inverse:f.program(7,d,i),fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;s+="\n</section>\n<section ",o=n.unless.call(t,t&&t.isStack,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+=">\n    ",o=n["if"].call(t,(o=t&&t.stacks,o==null||o===!1?o:o.length),{hash:{},inverse:f.program(12,g,i),fn:f.program(9,v,i),data:i});if(o||o===0)s+=o;return s+="\n</section>",s},n.recent=e.template(t),t=function(e,t,n,r,i){function f(e,t){return'\n<div class="dashboard-loading"><div class="loading-spinner"></div></div>\n'}function l(e,t){var r="",i;r+='\n<li class="instances" data-type="INSTANCE">\n  <hgroup><span class="resource-count">'+u((i=(i=e&&e.instances,i==null||i===!1?i:i.totalCount),typeof i===o?i.apply(e):i))+"</span><h5>"+u(n.i18n.call(e,"DASH_LBL_RUNNING_INSTANCE",{hash:{},data:t}))+"</h5></hgroup>\n  <ul>",i=n.each.call(e,e&&e.instances,{hash:{},inverse:a.noop,fn:a.program(4,c,t),data:t});if(i||i===0)r+=i;r+='</ul>\n</li>\n<li class="rds" data-type="DBINSTANCE">\n  <hgroup><span class="resource-count">'+u((i=(i=e&&e.rds,i==null||i===!1?i:i.totalCount),typeof i===o?i.apply(e):i))+"</span><h5>"+u(n.i18n.call(e,"DASH_LBL_RDS",{hash:{},data:t}))+"</h5></hgroup>\n  <ul>",i=n.each.call(e,e&&e.rds,{hash:{},inverse:a.noop,fn:a.program(4,c,t),data:t});if(i||i===0)r+=i;r+='</ul>\n</li>\n<li class="eips" data-type="EIP">\n  <hgroup><span class="resource-count">'+u((i=(i=e&&e.eips,i==null||i===!1?i:i.totalCount),typeof i===o?i.apply(e):i))+"</span><h5>"+u(n.i18n.call(e,"DASH_LBL_ELASTIC_IP",{hash:{},data:t}))+"</h5></hgroup>\n  <ul>",i=n.each.call(e,e&&e.eips,{hash:{},inverse:a.noop,fn:a.program(4,c,t),data:t});if(i||i===0)r+=i;r+='</ul>\n</li>\n<li class="volumes" data-type="VOL">\n  <hgroup><span class="resource-count">'+u((i=(i=e&&e.volumes,i==null||i===!1?i:i.totalCount),typeof i===o?i.apply(e):i))+"</span><h5>"+u(n.i18n.call(e,"DASH_LBL_VOLUME",{hash:{},data:t}))+"</h5></hgroup>\n  <ul>",i=n.each.call(e,e&&e.volumes,{hash:{},inverse:a.noop,fn:a.program(4,c,t),data:t});if(i||i===0)r+=i;r+='</ul>\n</li>\n<li class="elbs" data-type="ELB">\n  <hgroup><span class="resource-count">'+u((i=(i=e&&e.elbs,i==null||i===!1?i:i.totalCount),typeof i===o?i.apply(e):i))+"</span><h5>"+u(n.i18n.call(e,"DASH_LBL_LOAD_BALANCER",{hash:{},data:t}))+"</h5></hgroup>\n  <ul>",i=n.each.call(e,e&&e.elbs,{hash:{},inverse:a.noop,fn:a.program(4,c,t),data:t});if(i||i===0)r+=i;r+='</ul>\n</li>\n<li class="vpns" data-type="VPN">\n  <hgroup><span class="resource-count">'+u((i=(i=e&&e.vpns,i==null||i===!1?i:i.totalCount),typeof i===o?i.apply(e):i))+"</span><h5>"+u(n.i18n.call(e,"DASH_LBL_VPN",{hash:{},data:t}))+"</h5></hgroup>\n  <ul>",i=n.each.call(e,e&&e.vpns,{hash:{},inverse:a.noop,fn:a.program(4,c,t),data:t});if(i||i===0)r+=i;return r+="</ul>\n</li>\n",r}function c(e,t){var n="",r;return n+='<li data-region="'+u((r=e&&e.region,typeof r===o?r.apply(e):r))+'" class="global-resource-li">\n    <span class="count">'+u((r=(r=e&&e.data,r==null||r===!1?r:r.length),typeof r===o?r.apply(e):r))+"</span>\n    <h4>"+u((r=e&&e.regionName,typeof r===o?r.apply(e):r))+"</h4><h5>"+u((r=e&&e.regionArea,typeof r===o?r.apply(e):r))+"</h5>\n  </li>",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o="function",u=this.escapeExpression,a=this;return s=n["if"].call(t,t&&t.loading,{hash:{},inverse:a.program(3,l,i),fn:a.program(1,f,i),data:i}),s||s===0?s:""},n.globalResources=e.template(t),t=function(e,t,n,r,i){function l(e,t){return"Docker App"}function c(e,t){return u(n.i18n.call(e,"DASH_LBL_APP",{hash:{},data:t}))}function h(e,t){return"hide"}function p(e,t){var n="",r;return n+='\n                    <li data-region="'+u((r=e&&e.id,typeof r===a?r.apply(e):r))+'">'+u((r=e&&e.shortName,typeof r===a?r.apply(e):r))+" <span>"+u((r=e&&e.count,typeof r===a?r.apply(e):r))+"</span></li>",n}function d(e,t,r){var i="",s;i+='\n            <li data-id="'+u((s=e&&e.id,typeof s===a?s.apply(e):s))+'">\n                <a class="route" href="/workspace/'+u((s=r&&r.projectId,typeof s===a?s.apply(e):s))+"/ops/"+u((s=e&&e.id,typeof s===a?s.apply(e):s))+'">',s=n["if"].call(e,e&&e.progressing,{hash:{},inverse:f.programWithDepth(12,m,t,r),fn:f.program(10,v,t),data:t});if(s||s===0)i+=s;return i+="\n                </a></li>\n        ",i}function v(e,t){var n="",r;return n+='\n                <div class="thumbnail app-thumbnail"></div>\n                <div class="region-resource-progess-wrap"><div class="region-resource-progess" style="width:'+u((r=e&&e.progress,typeof r===a?r.apply(e):r))+'%;"></div></div>\n                <div class="region-resource-info truncate" title="'+u((r=e&&e.name,typeof r===a?r.apply(e):r))+'">\n                    <div class="loading-spinner loading-spinner-small"></div><span>'+u((r=e&&e.name,typeof r===a?r.apply(e):r))+" - "+u((r=e&&e.stateDesc,typeof r===a?r.apply(e):r))+"...</span>\n                </div>\n            ",n}function m(e,t,r){var i="",s;i+="\n                ",s=n.unless.call(e,r&&r.isMarathon,{hash:{},inverse:f.program(16,b,t),fn:f.program(13,g,t),data:t});if(s||s===0)i+=s;i+='\n                <div class="thumbnail app-thumbnail"><img src="'+u((s=e&&e.thumbnail,typeof s===a?s.apply(e):s))+'" ',s=n.unless.call(e,e&&e.thumbnail,{hash:{},inverse:f.noop,fn:f.program(18,w,t),data:t});if(s||s===0)i+=s;i+='/></div>\n                <div class="region-resource-info">\n                    ',s=n["if"].call(e,e&&e.stoppable,{hash:{},inverse:f.noop,fn:f.program(20,E,t),data:t});if(s||s===0)i+=s;i+='\n                    <i class="icon-terminate terminate-app tooltip" data-tooltip="'+u(n.i18n.call(e,"TOOLBAR.TOOLBAR_HANDLE_TERMINATE_APP",{hash:{},data:t}))+'"></i>\n                    <i class="icon-forget-app forget-app tooltip" data-tooltip="',s=n.i18n.call(e,"TOOLBAR.TIP_FORGET_APP",{hash:{},data:t});if(s||s===0)i+=s;i+='"></i>\n                    <span class="',s=n.ifCond.call(e,e&&e.stateDesc,"Running",{hash:{},inverse:f.program(27,N,t),fn:f.program(25,T,t),data:t});if(s||s===0)i+=s;return i+=' truncate" title="'+u((s=e&&e.name,typeof s===a?s.apply(e):s))+'">'+u((s=e&&e.name,typeof s===a?s.apply(e):s))+"</span>\n                </div>\n                ",i}function g(e,t){var r="",i;r+='\n                    <i class="icon-app-type-'+u((i=e&&e.usage,typeof i===a?i.apply(e):i))+'" data-type="'+u((i=e&&e.usage,typeof i===a?i.apply(e):i))+'"></i>\n                    ',i=n.ifCond.call(e,e&&e.type,"mesos",{hash:{},inverse:f.noop,fn:f.program(14,y,t),data:t});if(i||i===0)r+=i;return r+="\n                ",r}function y(e,t){return' <i class="icon-app-type-mesos"></i> '}function b(e,t){return'\n                    <i class="icon-app-type-marathon"></i>\n                '}function w(e,t){return'class="hide"'}function E(e,t){var r="",i;r+="\n                        ",i=n.ifCond.call(e,e&&e.stateDesc,"Running",{hash:{},inverse:f.program(23,x,t),fn:f.program(21,S,t),data:t});if(i||i===0)r+=i;return r+="\n                    ",r}function S(e,t){var r="";return r+='<i class="icon-stop stop-app tooltip"  data-tooltip="'+u(n.i18n.call(e,"TOOLBAR.TOOLBAR_HANDLE_STOP_APP",{hash:{},data:t}))+'"></i>',r}function x(e,t){return'<i class="icon-play start-app"></i>'}function T(e,t){return"running"}function N(e,t){return"stopped"}function C(e,t){var r="";return r+='\n            <div class="blank-widget"><div>'+u(n.i18n.call(e,"DASH_LBL_NO_APP",{hash:{},data:t}))+"</div></div>\n        ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+='<div class="dash-region-apps-wrap">\n    <header class="dash-region-header">\n        <label class="region-resource-tab">\n            '+u((o=(o=t&&t.apps,o==null||o===!1?o:o.length),typeof o===a?o.apply(t):o))+"<b>",o=n["if"].call(t,t&&t.isMarathon,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+='</b>\n        </label>\n        <nav class="dash-region-navigation ',o=n["if"].call(t,t&&t.isMarathon,{hash:{},inverse:f.noop,fn:f.program(5,h,i),data:i});if(o||o===0)s+=o;s+='" data-type="apps">\n            <button class="js-toggle-dropdown">\n                <i class="icon-caret-down right"></i><span>'+u((o=(o=t&&t.currentRegion,o==null||o===!1?o:o.shortName),typeof o===a?o.apply(t):o))+'</span>\n            </button>\n            <ul id="region-switch-list" class="dropdown-menu">\n                <li data-region="global">'+u(n.i18n.call(t,"DASH_BTN_GLOBAL",{hash:{},data:i}))+" <span>"+u((o=t&&t.globalCount,typeof o===a?o.apply(t):o))+"</span></li>\n                ",o=n.each.call(t,t&&t.region,{hash:{},inverse:f.noop,fn:f.program(7,p,i),data:i});if(o||o===0)s+=o;s+='\n            </ul>\n        </nav>\n    </header>\n\n    <ul id="region-resource-app-wrap" class="region-resource-list">\n        ',o=n.each.call(t,t&&t.apps,{hash:{},inverse:f.program(29,C,i),fn:f.programWithDepth(9,d,i,t),data:i});if(o||o===0)s+=o;return s+="\n    </ul>",s},n.region_apps=e.template(t),t=function(e,t,n,r,i){function l(e,t){return"Docker Stack"}function c(e,t){return u(n.i18n.call(e,"DASH_LBL_STACK",{hash:{},data:t}))}function h(e,t){return"hide"}function p(e,t){var n="",r;return n+='\n                    <li data-region="'+u((r=e&&e.id,typeof r===a?r.apply(e):r))+'">'+u((r=e&&e.shortName,typeof r===a?r.apply(e):r))+" <span>"+u((r=e&&e.count,typeof r===a?r.apply(e):r))+"</span></li>",n}function d(e,t,r){var i="",s;i+='\n            <li data-id="'+u((s=e&&e.id,typeof s===a?s.apply(e):s))+'">\n                <a class="route" href="/workspace/'+u((s=r&&r.projectId,typeof s===a?s.apply(e):s))+"/ops/"+u((s=e&&e.id,typeof s===a?s.apply(e):s))+'">\n                    ',s=n.ifCond.call(e,e&&e.type,"mesos",{hash:{},inverse:f.noop,fn:f.program(10,v,t),data:t});if(s||s===0)i+=s;i+='\n                    <div class="thumbnail"><img src="'+u((s=e&&e.thumbnail,typeof s===a?s.apply(e):s))+'" ',s=n.unless.call(e,e&&e.thumbnail,{hash:{},inverse:f.noop,fn:f.program(12,m,t),data:t});if(s||s===0)i+=s;i+='/></div>\n                    <div class="region-resource-info">\n                        <i class="icon-delete delete-stack tooltip" data-tooltip="'+u(n.i18n.call(e,"DASH_TIP_DEL_STACK",{hash:{},data:t}))+'"></i>\n                        <i class="icon-duplicate duplicate-stack tooltip" data-tooltip="'+u(n.i18n.call(e,"DASH_TIP_DUPLICATE_STACK",{hash:{},data:t}))+'"></i>\n                        <span class="',s=n.ifCond.call(e,e&&e.type,"mesos",{hash:{},inverse:f.noop,fn:f.program(14,g,t),data:t});if(s||s===0)i+=s;return i+='truncate">'+u((s=e&&e.name,typeof s===a?s.apply(e):s))+"</span>\n                    </div>\n                </a>\n            </li>\n        ",i}function v(e,t){return' <i class="icon-stack-type-mesos"></i> '}function m(e,t){return'class="hide"'}function g(e,t){return"upper-compact "}function y(e,t){var r="";return r+='\n            <div class="blank-widget"><div>'+u(n.i18n.call(e,"DASH_LBL_NO_STACK",{hash:{},data:t}))+"</div></div>\n        ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+='<div class="dash-region-stacks-wrap">\n    <header class="dash-region-header">\n        <label class="region-resource-tab stack">\n            '+u((o=(o=t&&t.stacks,o==null||o===!1?o:o.length),typeof o===a?o.apply(t):o))+"<b>",o=n["if"].call(t,t&&t.isMarathon,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+='</b>\n        </label>\n        <nav class="dash-region-navigation ',o=n["if"].call(t,t&&t.isMarathon,{hash:{},inverse:f.noop,fn:f.program(5,h,i),data:i});if(o||o===0)s+=o;s+='" data-type="stacks">\n            <button class="js-toggle-dropdown">\n                <i class="icon-caret-down right"></i><span>'+u((o=(o=t&&t.currentRegion,o==null||o===!1?o:o.shortName),typeof o===a?o.apply(t):o))+'</span>\n            </button>\n\n            <ul id="region-switch-list" class="dropdown-menu">\n                <li data-region="global">'+u(n.i18n.call(t,"DASH_BTN_GLOBAL",{hash:{},data:i}))+" <span>"+u((o=t&&t.globalCount,typeof o===a?o.apply(t):o))+"</span></li>\n                ",o=n.each.call(t,t&&t.region,{hash:{},inverse:f.noop,fn:f.program(7,p,i),data:i});if(o||o===0)s+=o;s+='\n            </ul>\n        </nav>\n    </header>\n    <ul id="region-resource-stack-wrap" class="region-resource-list">\n        ',o=n.each.call(t,t&&t.stacks,{hash:{},inverse:f.program(16,y,i),fn:f.programWithDepth(9,d,i,t),data:i});if(o||o===0)s+=o;return s+="\n    </ul>\n</div>",s},n.region_stacks=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="",i;i=n["with"].call(e,e&&e.attributes,{hash:{},inverse:u.noop,fn:u.programWithDepth(2,c,t,e),data:t});if(i||i===0)r+=i;return r+="\n",r}function c(e,t,r){var i="",s;i+="<tr>\n    <td>\n    ",s=n.doubleIf.call(e,e&&e.visopsTag,(s=e&&e.visopsTag,s==null||s===!1?s:s.app),{hash:{},inverse:u.program(6,d,t),fn:u.program(3,h,t),data:t});if(s||s===0)i+=s;i+="\n      <div>",s=n["if"].call(e,e&&e.visopsTag,{hash:{},inverse:u.noop,fn:u.program(8,v,t),data:t});if(s||s===0)i+=s;i+='<span class="resource-id">( '+a((s=e&&e.id,typeof s===f?s.apply(e):s))+' )</span></div>\n    </td>\n    <td><i class="status status-'+a((s=(s=e&&e.instanceState,s==null||s===!1?s:s.name),typeof s===f?s.apply(e):s))+' icon-label"></i>'+a((s=(s=e&&e.instanceState,s==null||s===!1?s:s.name),typeof s===f?s.apply(e):s))+"</td>\n    <td>"+a(n.simpleTime.call(e,e&&e.launchTime,{hash:{},data:t}))+'</td>\n    <td>\n      <img src="/assets/images/ide/ami/',s=n.awsAmiIcon.call(e,(s=r&&r.collection,s==null||s===!1?s:s.__credential),e&&e.imageId,e&&e.category,{hash:{},inverse:u.noop,fn:u.program(10,m,t),data:t});if(s||s===0)i+=s;i+='">\n      <span class="bubble" data-bubble-template="dashboardBubble" data-bubble-data="{&quot;type&quot;:&quot;AMI&quot;,&quot;id&quot;:&quot;'+a((s=e&&e.imageId,typeof s===f?s.apply(e):s))+'&quot;}">'+a((s=e&&e.imageId,typeof s===f?s.apply(e):s))+"</span></td>\n    <td>"+a((s=e&&e.instanceType,typeof s===f?s.apply(e):s))+"</td>\n    <td ",s=n.awsIsEip.call(e,(s=r&&r.collection,s==null||s===!1?s:s.__credential),e&&e.ipAddress,e&&e.category,{hash:{},inverse:u.noop,fn:u.program(12,g,t),data:t});if(s||s===0)i+=s;return i+=">"+a((s=e&&e.ipAddress,typeof s===f?s.apply(e):s))+"</td>\n    <td>"+a((s=(s=e&&e.placement,s==null||s===!1?s:s.availabilityZone),typeof s===f?s.apply(e):s))+'</td>\n    <td><i title="'+a(n.i18n.call(e,"DASH_TIT_VIEW_RESOURCE_DETAIL",{hash:{},data:t}))+'" class="icon-detail" data-id="'+a((s=e&&e.id,typeof s===f?s.apply(e):s))+'"></i></td>\n  </tr>',i}function h(e,t){var r="",i;r+='\n      <div class="table-app-link-wrap"><span class="',i=n["if"].call(e,(i=e&&e.visopsTag,i==null||i===!1?i:i.isOwner),{hash:{},inverse:u.noop,fn:u.program(4,p,t),data:t});if(i||i===0)r+=i;return r+=' truncate tooltip" data-tooltip="'+a(n.i18n.call(e,"DASH_TIP_APP_CREATED_BY",{hash:{},data:t}))+a(n.getInvalidKey.call(e,e&&e.visopsTag,"Created by",{hash:{},data:t}))+'" data-id="'+a((i=(i=e&&e.visopsTag,i==null||i===!1?i:i["app-id"]),typeof i===f?i.apply(e):i))+'">['+a((i=(i=e&&e.visopsTag,i==null||i===!1?i:i.app),typeof i===f?i.apply(e):i))+"]</span></div>\n    ",r}function p(e,t){return"table-app-link link-style"}function d(e,t){var r="";return r+="\n      <div>"+a(n.i18n.call(e,"DASH_LBL_UNMANAGED",{hash:{},data:t}))+"</div>\n    ",r}function v(e,t){var r;return a(n.or.call(e,(r=e&&e.visopsTag,r==null||r===!1?r:r.name),(r=e&&e.visopsTag,r==null||r===!1?r:r.Name),{hash:{},data:t}))}function m(e,t){var n="";return n}function g(e,t){var r="";return r+='class="dashboard-eip tooltip" data-tooltip="'+a(n.i18n.call(e,"DASH_LBL_ELASTIC_IP",{hash:{},data:t}))+'"',r}function y(e,t){var r="";return r+='\n  <div class="blank-widget">'+a(n.i18n.call(e,"DASH_TIP_NO_RESOURCE_LEFT",{hash:{},data:t}))+a(n.i18n.call(e,"DASH_LBL_INSTANCE",{hash:{},data:t}))+a(n.i18n.call(e,"DASH_TIP_NO_RESOURCE_RIGHT",{hash:{},data:t}))+".</div>\n",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this,a=this.escapeExpression,f="function";s+='<table class="table-head">\n    <thead>\n    <tr>\n        <th class="sortable">'+a(n.i18n.call(t,"DASH_LBL_INSTANCE_NAME",{hash:{},data:i}))+"/"+a(n.i18n.call(t,"DASH_LBL_ID",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:10%">'+a(n.i18n.call(t,"DASH_LBL_STATUS",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:18%" data-row-type="datetime">'+a(n.i18n.call(t,"DASH_LBL_LAUNCH_TIME",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:15%">'+a(n.i18n.call(t,"DASH_LBL_AMI",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:12%">'+a(n.i18n.call(t,"DASH_LBL_INSTANCE_TYPE",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:12%">'+a(n.i18n.call(t,"DASH_LBL_PUBLIC_IP",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:12%">'+a(n.i18n.call(t,"DASH_LBL_AVAILABILITY_ZONE",{hash:{},data:i}))+'</th>\n        <th style="width:40px">'+a(n.i18n.call(t,"DASH_LBL_DETAIL",{hash:{},data:i}))+'</th>\n    </tr>\n    </thead>\n</table>\n<table class="table">\n  <thead>\n      <tr>\n          <th></th>\n          <th style="width: 10%"></th>\n          <th style="width: 18%"></th>\n          <th style="width: 15%"></th>\n          <th style="width: 11%"></th>\n          <th style="width: 14%"></th>\n          <th style="width: 11%"></th>\n          <th style="width: 40px"></th>\n      </tr>\n  </thead>\n<tbody> ',o=n.each.call(t,t,{hash:{},inverse:u.program(14,y,i),fn:u.program(1,l,i),data:i});if(o||o===0)s+=o;return s+=" </tbody>\n</table>",s},n.resourceINSTANCE=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="",i;i=n["with"].call(e,e&&e.attributes,{hash:{},inverse:f.noop,fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;return r+="\n    ",r}function c(e,t){var r="",i;return r+="\n        <tr>\n            <td>"+a((i=e&&e.publicIp,typeof i===u?i.apply(e):i))+"</td>\n            <td>"+a((i=e&&e.instanceId,typeof i===u?i.apply(e):i))+'</td>\n            <td><i title="'+a(n.i18n.call(e,"DASH_TIT_VIEW_RESOURCE_DETAIL",{hash:{},data:t}))+'" class="icon-detail" data-id="'+a((i=e&&e.id,typeof i===u?i.apply(e):i))+'"></i></td>\n        </tr>',r}function h(e,t){var r="";return r+='\n        <div class="blank-widget">'+a(n.i18n.call(e,"DASH_TIP_NO_RESOURCE_LEFT",{hash:{},data:t}))+a(n.i18n.call(e,"DASH_LBL_ELASTIC_IP",{hash:{},data:t}))+a(n.i18n.call(e,"DASH_TIP_NO_RESOURCE_RIGHT",{hash:{},data:t}))+"\n            .\n        </div>\n    ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<table class="table-head">\n    <thead>\n    <tr>\n        <th class="sortable" style="width:40%">'+a(n.i18n.call(t,"DASH_LBL_IP",{hash:{},data:i}))+'</th>\n        <th class="sortable">'+a(n.i18n.call(t,"DASH_LBL_ASSOCIATED_INSTANCE",{hash:{},data:i}))+'</th>\n        <th style="width:40px">'+a(n.i18n.call(t,"DASH_LBL_DETAIL",{hash:{},data:i}))+'</th>\n    </tr>\n    </thead>\n</table>\n<table class="table">\n    <thead>\n    <tr>\n        <th style="width:40%"></th>\n        <th></th>\n        <th style="width:40px"></th>\n    </tr>\n    </thead>\n    <tbody>',o=n.each.call(t,t,{hash:{},inverse:f.program(4,h,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n    </tbody>\n</table>",s},n.resourceEIP=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="",i;i=n["with"].call(e,e&&e.attributes,{hash:{},inverse:u.noop,fn:u.program(2,c,t),data:t});if(i||i===0)r+=i;return r+="\n    ",r}function c(e,t){var r="",i;r+="\n        <tr>\n            <td>\n                ",i=n.doubleIf.call(e,e&&e.visopsTag,(i=e&&e.visopsTag,i==null||i===!1?i:i.app),{hash:{},inverse:u.program(6,d,t),fn:u.program(3,h,t),data:t});if(i||i===0)r+=i;r+="\n                <div>"+a((i=e&&e.id,typeof i===f?i.apply(e):i))+'</div>\n            </td>\n            <td><i class="status status-'+a((i=e&&e.status,typeof i===f?i.apply(e):i))+' icon-label"></i>'+a((i=e&&e.status,typeof i===f?i.apply(e):i))+"</td>\n            <td>"+a(n.simpleTime.call(e,e&&e.createTime,{hash:{},data:t}))+"</td>\n            <td>"+a((i=e&&e.device,typeof i===f?i.apply(e):i))+"</td>\n            <td>"+a((i=e&&e.size,typeof i===f?i.apply(e):i))+' GiB</td>\n            <td>\n                <i class="status ',i=n["if"].call(e,e&&e.attachmentStatus,{hash:{},inverse:u.program(10,m,t),fn:u.program(8,v,t),data:t});if(i||i===0)r+=i;r+=' icon-label"></i>',i=n["if"].call(e,e&&e.attachmentStatus,{hash:{},inverse:u.program(14,y,t),fn:u.program(12,g,t),data:t});if(i||i===0)r+=i;return r+='</td>\n            <td><i title="'+a(n.i18n.call(e,"DASH_TIT_VIEW_RESOURCE_DETAIL",{hash:{},data:t}))+'" class="icon-detail" data-id="'+a((i=e&&e.id,typeof i===f?i.apply(e):i))+'"></i></td>\n        </tr>',r}function h(e,t){var r="",i;r+='\n                    <div class="table-app-link-wrap"><span\n                            class="',i=n["if"].call(e,(i=e&&e.visopsTag,i==null||i===!1?i:i.isOwner),{hash:{},inverse:u.noop,fn:u.program(4,p,t),data:t});if(i||i===0)r+=i;return r+=' truncate tooltip"\n                            data-tooltip="'+a(n.i18n.call(e,"DASH_TIP_APP_CREATED_BY",{hash:{},data:t}))+a(n.getInvalidKey.call(e,e&&e.visopsTag,"Created by",{hash:{},data:t}))+'"\n                            data-id="'+a((i=(i=e&&e.visopsTag,i==null||i===!1?i:i["app-id"]),typeof i===f?i.apply(e):i))+'">['+a((i=(i=e&&e.visopsTag,i==null||i===!1?i:i.app),typeof i===f?i.apply(e):i))+"]</span></div>\n                ",r}function p(e,t){return"table-app-link link-style"}function d(e,t){var r="";return r+="\n                    <div>"+a(n.i18n.call(e,"DASH_LBL_UNMANAGED",{hash:{},data:t}))+"</div>\n                ",r}function v(e,t){return"status-in-use"}function m(e,t){return"status-available"}function g(e,t){return"\n                attached"}function y(e,t){return"not-attached"}function b(e,t){var r="";return r+='\n        <div class="blank-widget">'+a(n.i18n.call(e,"DASH_TIP_NO_RESOURCE_LEFT",{hash:{},data:t}))+a(n.i18n.call(e,"DASH_LBL_VOLUME",{hash:{},data:t}))+a(n.i18n.call(e,"DASH_TIP_NO_RESOURCE_RIGHT",{hash:{},data:t}))+"\n            .\n        </div>\n    ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this,a=this.escapeExpression,f="function";s+='<table class="table-head">\n    <thead>\n    <tr>\n        <th class="sortable">'+a(n.i18n.call(t,"DASH_LBL_NAME",{hash:{},data:i}))+"/"+a(n.i18n.call(t,"DASH_LBL_ID",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:15%">'+a(n.i18n.call(t,"DASH_LBL_STATUS",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:20%" data-row-type="datetime">'+a(n.i18n.call(t,"DASH_LBL_CREATE_TIME",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:18%">'+a(n.i18n.call(t,"DASH_LBL_DEVICE_NAME",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:12%">'+a(n.i18n.call(t,"DASH_LBL_VOLUME_SIZE",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:15%">'+a(n.i18n.call(t,"DASH_LBL_ATTACHMENT_STATUS",{hash:{},data:i}))+'</th>\n        <th style="width:40px">'+a(n.i18n.call(t,"DASH_LBL_DETAIL",{hash:{},data:i}))+'</th>\n    </tr>\n    </thead>\n</table>\n<table class="table">\n    <thead>\n    <tr>\n        <th></th>\n        <th style="width: 15%"></th>\n        <th style="width: 20%"></th>\n        <th style="width: 18%"></th>\n        <th style="width: 12%"></th>\n        <th style="width: 15%"></th>\n        <th style="width:40px"></th>\n    </tr>\n    </thead>\n    <tbody>',o=n.each.call(t,t,{hash:{},inverse:u.program(16,b,i),fn:u.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n    </tbody>\n</table>",s},n.resourceVOL=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="",i;i=n["with"].call(e,e&&e.attributes,{hash:{},inverse:u.noop,fn:u.program(2,c,t),data:t});if(i||i===0)r+=i;return r+="\n  ",r}function c(e,t){var r="",i;r+=" <tr>\n    <td>\n    ",i=n.doubleIf.call(e,e&&e.visopsTag,(i=e&&e.visopsTag,i==null||i===!1?i:i.app),{hash:{},inverse:u.program(6,d,t),fn:u.program(3,h,t),data:t});if(i||i===0)r+=i;r+="\n    <div>"+a((i=e&&e.id,typeof i===f?i.apply(e):i))+'</div>\n    </td>\n    <td><i class="status status-'+a((i=e&&e.state,typeof i===f?i.apply(e):i))+' icon-label"></i>'+a((i=e&&e.state,typeof i===f?i.apply(e):i))+"</td>\n    <td>"+a((i=e&&e.cidrBlock,typeof i===f?i.apply(e):i))+"</td>\n    <td>",i=n["if"].call(e,e&&e.dhcpOptionsId,{hash:{},inverse:u.program(10,m,t),fn:u.program(8,v,t),data:t});if(i||i===0)r+=i;return r+='</td>\n    <td><i title="'+a(n.i18n.call(e,"DASH_TIT_VIEW_RESOURCE_DETAIL",{hash:{},data:t}))+'" class="icon-detail" data-id="'+a((i=e&&e.id,typeof i===f?i.apply(e):i))+'"></i></td>\n  </tr>',r}function h(e,t){var r="",i;r+='\n      <div class="table-app-link-wrap"><span class="',i=n["if"].call(e,(i=e&&e.visopsTag,i==null||i===!1?i:i.isOwner),{hash:{},inverse:u.noop,fn:u.program(4,p,t),data:t});if(i||i===0)r+=i;return r+=' truncate tooltip" data-tooltip="'+a(n.i18n.call(e,"DASH_TIP_APP_CREATED_BY",{hash:{},data:t}))+a(n.getInvalidKey.call(e,e&&e.visopsTag,"Created by",{hash:{},data:t}))+'" data-id="'+a((i=(i=e&&e.visopsTag,i==null||i===!1?i:i["app-id"]),typeof i===f?i.apply(e):i))+'">['+a((i=(i=e&&e.visopsTag,i==null||i===!1?i:i.app),typeof i===f?i.apply(e):i))+"]</span></div>\n    ",r}function p(e,t){return"table-app-link link-style"}function d(e,t){var r="";return r+="\n      <div>"+a(n.i18n.call(e,"DASH_LBL_UNMANAGED",{hash:{},data:t}))+"</div>\n    ",r}function v(e,t){var n="",r;return n+='<span class="bubble" data-bubble-template="dashboardBubble" data-bubble-data="{&quot;type&quot;:&quot;DHCP&quot;,&quot;id&quot;:&quot;'+a((r=e&&e.dhcpOptionsId,typeof r===f?r.apply(e):r))+'&quot;}">'+a((r=e&&e.dhcpOptionsId,typeof r===f?r.apply(e):r))+"</span>",n}function m(e,t){return"None"}function g(e,t){var r="";return r+='\n  <div class="blank-widget">'+a(n.i18n.call(e,"DASH_TIP_NO_RESOURCE_LEFT",{hash:{},data:t}))+a(n.i18n.call(e,"DASH_LBL_VPC",{hash:{},data:t}))+a(n.i18n.call(e,"DASH_TIP_NO_RESOURCE_RIGHT",{hash:{},data:t}))+".</div>\n  ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this,a=this.escapeExpression,f="function";s+='<table class="table-head">\n    <thead>\n    <tr>\n        <th class="sortable">'+a(n.i18n.call(t,"DASH_LBL_NAME",{hash:{},data:i}))+"/"+a(n.i18n.call(t,"DASH_LBL_ID",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:20%">'+a(n.i18n.call(t,"DASH_LBL_STATUS",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:25%">'+a(n.i18n.call(t,"DASH_LBL_CIDR",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:20%">'+a(n.i18n.call(t,"DASH_LBL_DHCP_SETTINGS",{hash:{},data:i}))+'</th>\n        <th style="width:40px">'+a(n.i18n.call(t,"DASH_LBL_DETAIL",{hash:{},data:i}))+'</th>\n    </tr>\n    </thead>\n</table>\n<table class="table">\n  <thead>\n  <tr>\n      <th></th>\n      <th style="width:20%"></th>\n      <th style="width:25%"></th>\n      <th style="width:20%"></th>\n      <th style="width:40px"></th>\n  </tr>\n  </thead>\n  <tbody>',o=n.each.call(t,t,{hash:{},inverse:u.program(12,g,i),fn:u.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n\n  </tbody>\n</table>",s},n.resourceVPC=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="",i;i=n["with"].call(e,e&&e.attributes,{hash:{},inverse:u.noop,fn:u.program(2,c,t),data:t});if(i||i===0)r+=i;return r+="\n  ",r}function c(e,t){var r="",i;r+="\n  <tr>\n    <td>\n      ",i=n.doubleIf.call(e,e&&e.visopsTag,(i=e&&e.visopsTag,i==null||i===!1?i:i.app),{hash:{},inverse:u.program(6,d,t),fn:u.program(3,h,t),data:t});if(i||i===0)r+=i;return r+="\n      <div>"+a((i=e&&e.id,typeof i===f?i.apply(e):i))+'</div>\n    </td>\n    <td><i class="status status-'+a((i=e&&e.state,typeof i===f?i.apply(e):i))+' icon-label"></i>'+a((i=e&&e.state,typeof i===f?i.apply(e):i))+'</td>\n    <td><span class="bubble" data-bubble-template="dashboardBubble" data-bubble-data="{&quot;type&quot;:&quot;VGW&quot;,&quot;id&quot;:&quot;'+a((i=e&&e.vpnGatewayId,typeof i===f?i.apply(e):i))+'&quot;}">'+a((i=e&&e.vpnGatewayId,typeof i===f?i.apply(e):i))+'</span></td>\n    <td><span class="bubble" data-bubble-template="dashboardBubble" data-bubble-data="{&quot;type&quot;:&quot;CGW&quot;,&quot;id&quot;:&quot;'+a((i=e&&e.customerGatewayId,typeof i===f?i.apply(e):i))+'&quot;}">'+a((i=e&&e.customerGatewayId,typeof i===f?i.apply(e):i))+'</span></td>\n    <td><i title="'+a(n.i18n.call(e,"DASH_TIT_VIEW_RESOURCE_DETAIL",{hash:{},data:t}))+'" class="icon-detail" data-id=\''+a((i=e&&e.id,typeof i===f?i.apply(e):i))+"'></i></td>\n  </tr>",r}function h(e,t){var r="",i;r+='\n        <div class="table-app-link-wrap"><span class="',i=n["if"].call(e,(i=e&&e.visopsTag,i==null||i===!1?i:i.isOwner),{hash:{},inverse:u.noop,fn:u.program(4,p,t),data:t});if(i||i===0)r+=i;return r+=' truncate tooltip" data-tooltip="'+a(n.i18n.call(e,"DASH_TIP_APP_CREATED_BY",{hash:{},data:t}))+a(n.getInvalidKey.call(e,e&&e.visopsTag,"Created by",{hash:{},data:t}))+'" data-id="'+a((i=(i=e&&e.visopsTag,i==null||i===!1?i:i["app-id"]),typeof i===f?i.apply(e):i))+'">['+a((i=(i=e&&e.visopsTag,i==null||i===!1?i:i.app),typeof i===f?i.apply(e):i))+"]</span></div>\n      ",r}function p(e,t){return"table-app-link link-style"}function d(e,t){var r="";return r+="\n        <div>"+a(n.i18n.call(e,"DASH_LBL_UNMANAGED",{hash:{},data:t}))+"</div>\n      ",r}function v(e,t){var r="";return r+='\n  <div class="blank-widget">'+a(n.i18n.call(e,"DASH_TIP_NO_RESOURCE_LEFT",{hash:{},data:t}))+a(n.i18n.call(e,"DASH_LBL_VPN",{hash:{},data:t}))+a(n.i18n.call(e,"DASH_TIP_NO_RESOURCE_RIGHT",{hash:{},data:t}))+".</div>\n  ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this,a=this.escapeExpression,f="function";s+='<table class="table-head">\n    <thead>\n    <tr>\n        <th class="sortable">'+a(n.i18n.call(t,"DASH_LBL_NAME",{hash:{},data:i}))+"/"+a(n.i18n.call(t,"DASH_LBL_ID",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:20%">'+a(n.i18n.call(t,"DASH_LBL_STATUS",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:25%">'+a(n.i18n.call(t,"DASH_LBL_VIRTUAL_PRIVATE_GATEWAY",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:20%">'+a(n.i18n.call(t,"DASH_LBL_CUSTOMER_GATEWAY",{hash:{},data:i}))+'</th>\n        <th style="width:40px">'+a(n.i18n.call(t,"DASH_LBL_DETAIL",{hash:{},data:i}))+'</th>\n    </tr>\n    </thead>\n</table>\n<table class="table">\n    <thead>\n    <tr>\n        <th></th>\n        <th style="width: 20%"></th>\n        <th style="width: 25%"></th>\n        <th style="width: 20%"></th>\n        <th style="width: 40px"></th>\n    </tr>\n    </thead>\n<tbody>',o=n.each.call(t,t,{hash:{},inverse:u.program(8,v,i),fn:u.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n</tbody>\n</table>",s},n.resourceVPN=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="",i;i=n["with"].call(e,e&&e.attributes,{hash:{},inverse:f.noop,fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;return r+="\n    ",r}function c(e,t){var r="",i;return r+="\n        <tr>\n            <td>"+a((i=e&&e.DNSName,typeof i===u?i.apply(e):i))+"</td>\n            <td>"+a(n.simpleTime.call(e,e&&e.CreatedTime,{hash:{},data:t}))+"</td>\n            <td>"+a((i=e&&e.AvailabilityZones,typeof i===u?i.apply(e):i))+"</td>\n            <td>"+a((i=e&&e.state,typeof i===u?i.apply(e):i))+'</td>\n            <td><i title="'+a(n.i18n.call(e,"DASH_TIT_VIEW_RESOURCE_DETAIL",{hash:{},data:t}))+'" class="icon-detail" data-id="'+a((i=e&&e.id,typeof i===u?i.apply(e):i))+'"></i></td>\n        </tr>',r}function h(e,t){var r="";return r+='\n        <div class="blank-widget">'+a(n.i18n.call(e,"DASH_TIP_NO_RESOURCE_LEFT",{hash:{},data:t}))+a(n.i18n.call(e,"DASH_LBL_LOAD_BALANCER",{hash:{},data:t}))+a(n.i18n.call(e,"DASH_TIP_NO_RESOURCE_RIGHT",{hash:{},data:t}))+"\n            .\n        </div>\n    ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<table class="table-head">\n    <thead>\n    <tr>\n        <th class="sortable">'+a(n.i18n.call(t,"DASH_LBL_DNS_NAME",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:20%" data-row-type="datetime">'+a(n.i18n.call(t,"DASH_LBL_CREATE_TIME",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:25%">'+a(n.i18n.call(t,"DASH_LBL_AVAILABILITY_ZONE",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:20%">'+a(n.i18n.call(t,"DASH_LBL_STATUS",{hash:{},data:i}))+'</th>\n        <th style="width:40px">'+a(n.i18n.call(t,"DASH_LBL_DETAIL",{hash:{},data:i}))+'</th>\n    </tr>\n    </thead>\n</table>\n\n<table class="table">\n    <thead>\n    <tr>\n        <th></th>\n        <th style="width: 20%"></th>\n        <th style="width: 25%"></th>\n        <th style="width: 20%"></th>\n        <th style="width: 40px"></th>\n    </tr>\n    </thead>\n    <tbody>',o=n.each.call(t,t,{hash:{},inverse:f.program(4,h,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n    </tbody>\n</table>",s},n.resourceELB=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="",i;i=n["with"].call(e,e&&e.attributes,{hash:{},inverse:u.noop,fn:u.program(2,c,t),data:t});if(i||i===0)r+=i;return r+="\n    ",r}function c(e,t){var r="",i;r+="\n        <tr>\n            <td>\n                ",i=n.doubleIf.call(e,e&&e.visopsTag,(i=e&&e.visopsTag,i==null||i===!1?i:i.app),{hash:{},inverse:u.program(6,d,t),fn:u.program(3,h,t),data:t});if(i||i===0)r+=i;return r+="\n                <div>"+a((i=e&&e.AutoScalingGroupName,typeof i===f?i.apply(e):i))+"</div>\n            </td>\n            <td>"+a((i=e&&e.last_activity,typeof i===f?i.apply(e):i))+"</td>\n            <td>"+a((i=e&&e.activity_state,typeof i===f?i.apply(e):i))+'</td>\n            <td><i title="'+a(n.i18n.call(e,"DASH_TIT_VIEW_RESOURCE_DETAIL",{hash:{},data:t}))+'" class="icon-detail" data-id="'+a((i=e&&e.id,typeof i===f?i.apply(e):i))+'"></i>\n            </td>\n        </tr>',r}function h(e,t){var r="",i;r+='\n                    <div class="table-app-link-wrap"><span\n                            class="',i=n["if"].call(e,(i=e&&e.visopsTag,i==null||i===!1?i:i.isOwner),{hash:{},inverse:u.noop,fn:u.program(4,p,t),data:t});if(i||i===0)r+=i;return r+=' truncate tooltip"\n                            data-tooltip="'+a(n.i18n.call(e,"DASH_TIP_APP_CREATED_BY",{hash:{},data:t}))+a(n.getInvalidKey.call(e,e&&e.visopsTag,"Created by",{hash:{},data:t}))+'"\n                            data-id="'+a((i=(i=e&&e.visopsTag,i==null||i===!1?i:i["app-id"]),typeof i===f?i.apply(e):i))+'">['+a((i=(i=e&&e.visopsTag,i==null||i===!1?i:i.app),typeof i===f?i.apply(e):i))+"]</span></div>\n                ",r}function p(e,t){return"table-app-link link-style"}function d(e,t){var r="";return r+="\n                    <div>"+a(n.i18n.call(e,"DASH_LBL_UNMANAGED",{hash:{},data:t}))+"</div>\n                ",r}function v(e,t){var r="";return r+='\n        <div class="blank-widget">'+a(n.i18n.call(e,"DASH_TIP_NO_RESOURCE_LEFT",{hash:{},data:t}))+a(n.i18n.call(e,"DASH_LBL_AUTO_SCALING_GROUP",{hash:{},data:t}))+a(n.i18n.call(e,"DASH_TIP_NO_RESOURCE_RIGHT",{hash:{},data:t}))+"\n        </div>\n    ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this,a=this.escapeExpression,f="function";s+='<table class="table-head">\n    <thead>\n    <tr>\n        <th class="sortable">'+a(n.i18n.call(t,"DASH_LBL_NAME",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:50%">'+a(n.i18n.call(t,"DASH_LBL_CURRENT",{hash:{},data:i}))+"/"+a(n.i18n.call(t,"DASH_LBL_LAST_ACTIVITY",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:20%">'+a(n.i18n.call(t,"DASH_LBL_ACTIVITY_STATUS",{hash:{},data:i}))+'</th>\n        <th style="width:40px">'+a(n.i18n.call(t,"DASH_LBL_DETAIL",{hash:{},data:i}))+'</th>\n    </tr>\n    </thead>\n</table>\n\n<table class="table">\n    <thead>\n    <tr>\n        <th></th>\n        <th style="width: 50%"></th>\n        <th style="width: 20%"></th>\n        <th style="width:40px"></th>\n    </tr>\n    </thead>\n    <tbody> ',o=n.each.call(t,t,{hash:{},inverse:u.program(8,v,i),fn:u.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n    </tbody>\n</table>",s},n.resourceASG=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="",i;i=n["with"].call(e,e&&e.attributes,{hash:{},inverse:f.noop,fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;return r+="\n    ",r}function c(e,t){var r="",i;r+="\n    <tr>\n      <td>"+a((i=e&&e.Name,typeof i===u?i.apply(e):i))+"</td>\n      <td>",i=n.doubleIf.call(e,e&&e.Dimensions,(i=(i=e&&e.Dimensions,i==null||i===!1?i:i.member),i==null||i===!1?i:i.length),{hash:{},inverse:f.noop,fn:f.program(3,h,t),data:t});if(i||i===0)r+=i;r+="</td>\n      <td>"+a((i=e&&e.MetricName,typeof i===u?i.apply(e):i))+" "+a((i=e&&e.ComparisonOperator,typeof i===u?i.apply(e):i))+" "+a((i=e&&e.Threshold,typeof i===u?i.apply(e):i))+" for "+a((i=e&&e.Period,typeof i===u?i.apply(e):i))+' seconds</td>\n      <td><i class="status ',i=n.ifCond.call(e,e&&e.StateValue,"OK",{hash:{},inverse:f.program(7,d,t),fn:f.program(5,p,t),data:t});if(i||i===0)r+=i;return r+=' icon-label"></i>'+a((i=e&&e.StateValue,typeof i===u?i.apply(e):i))+'</td>\n      <td><i title="'+a(n.i18n.call(e,"DASH_TIT_VIEW_RESOURCE_DETAIL",{hash:{},data:t}))+'" class="icon-detail" data-id="'+a((i=e&&e.id,typeof i===u?i.apply(e):i))+'"></i></td>\n    </tr>',r}function h(e,t){var n="",r;return n+=a((r=(r=(r=(r=e&&e.Dimensions,r==null||r===!1?r:r.member),r==null||r===!1?r:r[0]),r==null||r===!1?r:r.Name),typeof r===u?r.apply(e):r))+":"+a((r=(r=(r=(r=e&&e.Dimensions,r==null||r===!1?r:r.member),r==null||r===!1?r:r[0]),r==null||r===!1?r:r.Value),typeof r===u?r.apply(e):r)),n}function p(e,t){return"status-green"}function d(e,t){var r;return r=n.ifCond.call(e,e&&e.StateValue,"ALARM",{hash:{},inverse:f.program(10,m,t),fn:f.program(8,v,t),data:t}),r||r===0?r:""}function v(e,t){return"status-yellow"}function m(e,t){return"status-grey"}function g(e,t){var r="";return r+='\n    <div class="blank-widget">'+a(n.i18n.call(e,"DASH_TIP_NO_RESOURCE_LEFT",{hash:{},data:t}))+a(n.i18n.call(e,"DASH_LBL_CLOUDWATCH_ALARM",{hash:{},data:t}))+a(n.i18n.call(e,"DASH_TIP_NO_RESOURCE_RIGHT",{hash:{},data:t}))+".</div>\n    ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<table class="table-head">\n    <thead>\n    <tr>\n        <th class="sortable">'+a(n.i18n.call(t,"DASH_LBL_NAME",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:30%">'+a(n.i18n.call(t,"DASH_LBL_DIMENSION",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:30%">'+a(n.i18n.call(t,"DASH_LBL_THRESHOLD",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:10%">'+a(n.i18n.call(t,"DASH_LBL_STATE",{hash:{},data:i}))+'</th>\n        <th style="width:40px">'+a(n.i18n.call(t,"DASH_LBL_DETAIL",{hash:{},data:i}))+'</th>\n    </tr>\n    </thead>\n</table>\n<table class="table">\n    <thead>\n        <tr>\n            <th></th>\n            <th style="width: 30%"></th>\n            <th style="width: 30%"></th>\n            <th style="width: 10%"></th>\n            <th style="width:40px"></th>\n        </tr>\n    </thead>\n  <tbody>',o=n.each.call(t,t,{hash:{},inverse:f.program(12,g,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n  </tbody>\n</table>",s},n.resourceCW=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="",i;i=n["with"].call(e,e&&e.attributes,{hash:{},inverse:f.noop,fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;return r+="\n    ",r}function c(e,t){var r="",i;r+="\n        <tr>\n            <td>"+u((i=e&&e.TopicName,typeof i===a?i.apply(e):i))+"</td>\n            <td>"+u((i=e&&e.Protocol,typeof i===a?i.apply(e):i))+": "+u((i=e&&e.Endpoint,typeof i===a?i.apply(e):i))+"</td>\n            ",i=n.ifCond.call(e,e&&e.SubscriptionArn,"PendingConfirmation",{hash:{},inverse:f.program(5,p,t),fn:f.program(3,h,t),data:t});if(i||i===0)r+=i;return r+='\n            <td><i title="'+u(n.i18n.call(e,"DASH_TIT_VIEW_RESOURCE_DETAIL",{hash:{},data:t}))+'" class="icon-detail" data-id="'+u((i=e&&e.id,typeof i===a?i.apply(e):i))+'"></i>\n            </td>\n        </tr>',r}function h(e,t){var r="";return r+='\n                <td><i class="status status-red icon-label"></i>'+u(n.i18n.call(e,"DASH_TPL_PENDING_CONFIRMATION",{hash:{},data:t}))+"</td>\n            ",r}function p(e,t){var r="";return r+='\n                <td><i class="status status-green icon-label"></i>'+u(n.i18n.call(e,"PROP.LBL_SUCCESS",{hash:{},data:t}))+"</td>\n            ",r}function d(e,t){var r="";return r+='\n        <div class="blank-widget">'+u(n.i18n.call(e,"DASH_TIP_NO_RESOURCE_LEFT",{hash:{},data:t}))+u(n.i18n.call(e,"DASH_LBL_SNS_SUBSCRIPTION",{hash:{},data:t}))+u(n.i18n.call(e,"DASH_TIP_NO_RESOURCE_RIGHT",{hash:{},data:t}))+"</div>\n    ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+='<table class="table-head">\n    <thead>\n    <tr>\n        <th class="sortable" style="width:20%">'+u(n.i18n.call(t,"DASH_LBL_TOPIC_NAME",{hash:{},data:i}))+'</th>\n        <th class="sortable">'+u(n.i18n.call(t,"DASH_LBL_ENDPOINT_AND_PROTOCOL",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:30%">'+u(n.i18n.call(t,"DASH_LBL_CONFIRMATION",{hash:{},data:i}))+'</th>\n        <th style="width:40px">'+u(n.i18n.call(t,"DASH_LBL_DETAIL",{hash:{},data:i}))+'</th>\n    </tr>\n    </thead>\n</table>\n<table class="table">\n    <thead>\n    <tr>\n        <th style="width:20%"></th>\n        <th></th>\n        <th style="width:30%"></th>\n        <th style="width:40px"></th>\n    </tr>\n    </thead>\n    <tbody> ',o=n.each.call(t,t,{hash:{},inverse:f.program(7,d,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n    </tbody>\n</table>",s},n.resourceSUBSCRIPTION=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="",i;i=n["with"].call(e,e&&e.attributes,{hash:{},inverse:f.noop,fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;return r+="\n    ",r}function c(e,t){var r="",i;r+="<tr>\n        <td>\n            <div>"+a((i=e&&e.DBInstanceIdentifier,typeof i===u?i.apply(e):i))+'</div>\n        </td>\n        <td><i class="status status-',i=n.ifCond.call(e,e&&e.DBInstanceStatus,"available",{hash:{},inverse:f.program(5,p,t),fn:f.program(3,h,t),data:t});if(i||i===0)r+=i;return r+=' icon-label"></i>'+a((i=e&&e.DBInstanceStatus,typeof i===u?i.apply(e):i))+"</td>\n        <td>"+a((i=e&&e.Engine,typeof i===u?i.apply(e):i))+" "+a((i=e&&e.EngineVersion,typeof i===u?i.apply(e):i))+"</td>\n        <td>"+a((i=e&&e.DBInstanceClass,typeof i===u?i.apply(e):i))+"</td>\n        <td>"+a((i=e&&e.AllocatedStorage,typeof i===u?i.apply(e):i))+' GB</td>\n        <td><i title="'+a(n.i18n.call(e,"DASH_TIT_VIEW_RESOURCE_DETAIL",{hash:{},data:t}))+'" class="icon-detail" data-id="'+a((i=e&&e.id,typeof i===u?i.apply(e):i))+'"></i></td>\n    </tr>',r}function h(e,t){return"green"}function p(e,t){return"yellow"}function d(e,t){var r="";return r+='\n        <div class="blank-widget">'+a(n.i18n.call(e,"DASH_TIP_NO_RESOURCE_LEFT",{hash:{},data:t}))+a(n.i18n.call(e,"DASH_LBL_INSTANCE",{hash:{},data:t}))+a(n.i18n.call(e,"DASH_TIP_NO_RESOURCE_RIGHT",{hash:{},data:t}))+".</div>\n    ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<table class="table-head">\n    <thead>\n    <tr>\n        <th class="sortable">'+a(n.i18n.call(t,"DASH_LBL_DBINSTANCE_NAME",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:18%">'+a(n.i18n.call(t,"DASH_LBL_STATUS",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:21%" data-row-type="datetime">'+a(n.i18n.call(t,"DASH_LBL_FAMILY",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:15%">'+a(n.i18n.call(t,"DASH_LBL_CLASS",{hash:{},data:i}))+'</th>\n        <th class="sortable" style="width:15%">'+a(n.i18n.call(t,"DASH_LBL_STORAGE",{hash:{},data:i}))+'</th>\n        <th style="width:40px">'+a(n.i18n.call(t,"DASH_LBL_DETAIL",{hash:{},data:i}))+'</th>\n    </tr>\n    </thead>\n</table>\n<table class="table">\n    <thead>\n        <tr>\n            <th></th>\n            <th style="width: 18%"></th>\n            <th style="width: 21%"></th>\n            <th style="width: 15%"></th>\n            <th style="width: 15%"></th>\n            <th style="width: 40px"></th>\n        </tr>\n    </thead>\n    <tbody> ',o=n.each.call(t,t,{hash:{},inverse:f.program(7,d,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+=" </tbody>\n</table>",s},n.resourceDBINSTANCE=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="",i;r+="\n    <dt>"+a(n.i18n.call(e,t==null||t===!1?t:t.key,{hash:{},data:t}))+":</dt>\n        <dd>",i=n["if"].call(e,e&&e.bubble,{hash:{},inverse:f.program(10,m,t),fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;return r+="</dd>\n    ",r}function c(e,t){var r;return r=n.each.call(e,e,{hash:{},inverse:f.noop,fn:f.program(3,h,t),data:t}),r||r===0?r:""}function h(e,t){var r="",i;i=n["if"].call(e,t==null||t===!1?t:t.index,{hash:{},inverse:f.noop,fn:f.program(4,p,t),data:t});if(i||i===0)r+=i;r+='<a href="javascript:void(0)" class="bubble table-link" data-bubble-template="',i=n["if"].call(e,(i=e&&e.bubble,i==null||i===!1?i:i.template),{hash:{},inverse:f.program(8,v,t),fn:f.program(6,d,t),data:t});if(i||i===0)r+=i;return r+='" data-bubble-data="'+a((i=(i=e&&e.bubble,i==null||i===!1?i:i.data),typeof i===u?i.apply(e):i))+'">'+a((i=(i=e&&e.bubble,i==null||i===!1?i:i.value),typeof i===u?i.apply(e):i))+"</a>",r}function p(e,t){return", "}function d(e,t){var n;return a((n=(n=e&&e.bubble,n==null||n===!1?n:n.template),typeof n===u?n.apply(e):n))}function v(e,t){return"dashboardBubble"}function m(e,t){return a(typeof e===u?e.apply(e):e)}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<dl class="dl-horizontal" style="margin-top:0;">\n    ',o=n.each.call(t,t,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n</dl>",s},n.resourceDetail=e.template(t),t=function(e,t,n,r,i){function l(e,t){var n="",r;return n+="<dt>"+a((r=t==null||t===!1?t:t.key,typeof r===u?r.apply(e):r))+"</dt><dd>"+a(typeof e===u?e.apply(e):e)+"</dd>",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div class="bubble-head">'+a((o=t&&t.id,typeof o===u?o.apply(t):o))+'</div>\n<div class="bubble-content">\n<dl class="dl-horizontal">',o=n.each.call(t,t&&t.data,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="</dl>\n</div>",s},n.bubbleResourceInfo=e.template(t),t=function(e,t,n,r,i){function l(e,t){var n="",r;return n+="<dt>"+a((r=t==null||t===!1?t:t.key,typeof r===u?r.apply(e):r))+"</dt><dd>"+a(typeof e===u?e.apply(e):e)+"</dd>",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div class="bubble-head">'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+'</div>\n<div class="bubble-content">\n    <dl class="dl-horizontal">',o=n.each.call(t,t&&t.data,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="</dl>\n</div>",s},n.bubbleResourceSub=e.template(t),n}),define("wspace/dashboard/VisualizeTpl",["handlebars"],function(e){var t,n={};return t=function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="scroll-wrap scrollbar-auto-hide" style="height:500px;">\n	<div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n	<section id="VisualizeVpcDialog" class="scroll-content"></section>\n</div>'},n.frame=e.template(t),t=function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="loading-spinner"></div>'},n.loading=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o=this.escapeExpression;return s+='<div class="unmanaged-vpc-empty">'+o(n.i18n.call(t,"DASH_TPL_LOADING_VPC_FAILED",{hash:{},data:i}))+'\n	<button class="btn btn-blue" id="VisualizeReload">'+o(n.i18n.call(t,"DASH_POP_BTN_RETRY",{hash:{},data:i}))+"</button>\n</div>",s},n.failure=e.template(t),t=function(e,t,n,r,i){function f(e,t){var r="",i;i=n["if"].call(e,(i=e&&e.vpcs,i==null||i===!1?i:i.length),{hash:{},inverse:a.noop,fn:a.program(2,l,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function l(e,t){var r="",i;r+='<section>\n	<header class="region-header"><span class="region-name">'+u((i=e&&e.name,typeof i===o?i.apply(e):i))+"</span>"+u((i=e&&e.subname,typeof i===o?i.apply(e):i))+'<span class="vpc-count">'+u((i=(i=e&&e.vpcs,i==null||i===!1?i:i.length),typeof i===o?i.apply(e):i))+'</span></header>\n\n	<ul class="region-group clearfix" data-region="'+u((i=e&&e.id,typeof i===o?i.apply(e):i))+'">\n		',i=n.each.call(e,e&&e.vpcs,{hash:{},inverse:a.noop,fn:a.program(3,c,t),data:t});if(i||i===0)r+=i;return r+="\n	</ul>\n</section>",r}function c(e,t){var r="",i;r+='\n		<li class="visualize-vpc">\n			<h5>',i=n["if"].call(e,e&&e.name,{hash:{},inverse:a.program(6,p,t),fn:a.program(4,h,t),data:t});if(i||i===0)r+=i;r+='</h5>\n			<ol class="tac">\n				<li class="visualize-res"><div class="vis-res-num">'+u((i=(i=e&&e.subnet,i==null||i===!1?i:i.length),typeof i===o?i.apply(e):i))+'</div><span class="vis-res-name">'+u(n.i18n.call(e,"DASH_LBL_SUBNETS",{hash:{},data:t}))+'</span></li>\n				<li class="visualize-res"><div class="vis-res-num">'+u((i=(i=e&&e.ami,i==null||i===!1?i:i.length),typeof i===o?i.apply(e):i))+'</div><span class="vis-res-name">'+u(n.i18n.call(e,"DASH_LBL_RUNNING_INSTANCE",{hash:{},data:t}))+'</span></li>\n				<li class="visualize-res"><div class="vis-res-num">'+u((i=(i=e&&e.stopped,i==null||i===!1?i:i.length),typeof i===o?i.apply(e):i))+'</div><span class="vis-res-name">'+u(n.i18n.call(e,"DASH_LBL_STOPPED_INSTANCE",{hash:{},data:t}))+'</span></li>\n				<li class="visualize-res"><div class="vis-res-num">'+u((i=(i=e&&e.eni,i==null||i===!1?i:i.length),typeof i===o?i.apply(e):i))+'</div><span class="vis-res-name">'+u(n.i18n.call(e,"DASH_LBL_NETWORK_INTERFACE",{hash:{},data:t}))+'</span></li>\n				<li class="visualize-res"><div class="vis-res-num">'+u((i=(i=e&&e.eip,i==null||i===!1?i:i.length),typeof i===o?i.apply(e):i))+'</div><span class="vis-res-name">'+u(n.i18n.call(e,"DASH_LBL_ELASTIC_IP",{hash:{},data:t}))+'</span></li>\n				<li class="visualize-res"><div class="vis-res-num">'+u((i=(i=e&&e.elb,i==null||i===!1?i:i.length),typeof i===o?i.apply(e):i))+'</div><span class="vis-res-name">'+u(n.i18n.call(e,"DASH_LBL_LOAD_BALANCER",{hash:{},data:t}))+'</span></li>\n			</ol>\n			<button class="btn btn-blue visualize-vpc-btn',i=n["if"].call(e,e&&e.imported,{hash:{},inverse:a.noop,fn:a.program(8,d,t),data:t});if(i||i===0)r+=i;r+='" data-vpcid="'+u((i=e&&e.id,typeof i===o?i.apply(e):i))+'">',i=n["if"].call(e,e&&e.imported,{hash:{},inverse:a.program(12,m,t),fn:a.program(10,v,t),data:t});if(i||i===0)r+=i;return r+="</button>\n		</li>\n		",r}function h(e,t){var n="",r;return n+=u((r=e&&e.name,typeof r===o?r.apply(e):r))+" <span>("+u((r=e&&e.id,typeof r===o?r.apply(e):r))+")</span>",n}function p(e,t){var n;return u((n=e&&e.id,typeof n===o?n.apply(e):n))}function d(e,t){return" tooltip disabled"}function v(e,t){return u(n.i18n.call(e,"DASH_TPL_ALREADY_IMPORTED",{hash:{},data:t}))}function m(e,t){return u(n.i18n.call(e,"DASH_TPL_TO_IMPORT",{hash:{},data:t}))}function g(e,t){var r="";return r+='<div class="unmanaged-vpc-empty">'+u(n.i18n.call(e,"DASH_TPL_NO_VPC_TO_IMPORT",{hash:{},data:t}))+"</div>",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o="function",u=this.escapeExpression,a=this;return s=n.each.call(t,t,{hash:{},inverse:a.program(14,g,i),fn:a.program(1,f,i),data:i}),s||s===0?s:""},n.content=e.template(t),n}),define("wspace/dashboard/VisualizeDialog",["Credential","ApiRequest","UI.modalplus","./VisualizeTpl","i18n!/nls/lang.js","constant","backbone"],function(e,t,n,r,i,s){var o;return o={"AWS.VPC.VPC":{},"AWS.VPC.Subnet":{},"AWS.EC2.Instance":{filter:{"instance-state-name":["pending","running","stopping","stopped"]}},"AWS.VPC.NetworkInterface":{},"AWS.ELB":{}},Backbone.View.extend({events:{"click #VisualizeReload":"sendRequest","click .visualize-vpc-btn":"importVpc"},initialize:function(e){var t;this.model=e.model,this.dialog=e.dialog,this.dialog||(this.dialog=new n({title:i.IDE.DASH_IMPORT_VPC_AS_APP})),this.dialog.setTitle(i.IDE.DASH_IMPORT_VPC_AS_APP).setWidth(770).setContent(r.frame()).toggleFooter().compact().resize(),t=this,this.dialog.on("close",function(){return t.remove()}),this.setElement(this.dialog.tpl.find("#VisualizeVpcDialog")),this.sendRequest(),this.listenTo(App.WS,"visualizeUpdate",this.onReceiveData)},render:function(){return this.fail?this.$el.html(r.failure()):this.data?this.$el.html(r.content(this.data)):this.$el.html(r.loading())},remove:function(){this.stopListening(),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},sendRequest:function(){var n;n=this,this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){return n.failToLoad()},48e4),t("aws_resource",{region_name:null,key_id:this.model.credIdOfProvider(e.PROVIDER.AWSGLOBAL),resources:o,addition:"statistic",retry_times:1}).fail(function(){return n.failToLoad()}),this.fail=!1,this.data=null,this.render()},failToLoad:function(){this.fail=!0,this.data=null,this.render(),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},onReceiveData:function(e){this.fail=!1,this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.data=this.parseVisData(e),this.render()},parseVisData:function(e){var t,n,r,i,o,u,a,f,l,c,h,p,d,v,m;u=function(e){return _.keys(e||{})},n=function(e,t){var n,r,i,s,o,u;i=[],o=e||{};for(r in o)n=o[r],s=((u=n.instanceState)!=null?u.name:void 0)||"",t?(s==="stopped"||s==="stopping")&&i.push(r):(s==="running"||s==="pending")&&i.push(r);return i},o=[];for(i in e){h=e[i];if(i==="_id"||i==="username"||i==="timestamp")continue;p=[],o.push({id:i,name:s.REGION_SHORT_LABEL[i],subname:s.REGION_LABEL[i],vpcs:p});for(c in h){a=h[c];try{l={};if(a.Tag&&a.Tag.item)if(a.Tag.item.length){m=a.Tag.item;for(d=0,v=m.length;d<v;d++)f=m[d],l[f.key]=f.value}else l[a.Tag.item.key]=a.Tag.item.value;r={id:c,name:l.Name||l.name,subnet:u(a["AWS|VPC|Subnet"]),ami:n(a["AWS|EC2|Instance"]),stopped:n(a["AWS|EC2|Instance"],!0),eni:u(a["AWS|VPC|NetworkInterface"]),eip:u(a["AWS|EC2|EIP"]),elb:u(a["AWS|ELB"]),imported:!!a.project_id},p.push(r)}catch(g){t=g}}}return o},importVpc:function(t){var n,r;return $(t.currentTarget).hasClass("disabled")?!1:(n=$(t.currentTarget),n.hasClass(".disabled")?!1:(r=this.model.createAppByExistingResource(n.attr("data-vpcid"),n.closest("ul").attr("data-region"),e.PROVIDER.AWSGLOBAL),this.dialog.close(),App.loadUrl(r.url()),!1))}})});var __indexOf=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};define("wspace/dashboard/DashboardView",["./DashboardTpl","./ImportDialog","./DashboardTplData","constant","./VisualizeDialog","CloudResources","ApiRequest","AppAction","UI.modalplus","i18n!/nls/lang.js","ProjectLog","Credential","credentialFormView","UI.bubble","backbone"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){return Handlebars.registerHelper("awsAmiIcon",function(e,t,n){var i;return i=s(e,r.RESTYPE.AMI,n).get(t),i?(i=i.attributes,i.osType+"."+i.architecture+"."+i.rootDeviceType+".png"):(void 0,"empty.png")}),Handlebars.registerHelper("awsIsEip",function(e,t,n,i){var o,u,a,f;if(!t)return"";f=s(e,r.RESTYPE.EIP,n).models;for(u=0,a=f.length;u<a;u++){o=f[u];if(o.get("publicIp")===t)return i.fn(this)}return""}),Backbone.View.extend({events:{"click .dashboard-header .icon-new-stack":"createStack","click .dashboard-header .import-stack":"importStack","click .dashboard-header .icon-visualize":"importApp","click .dashboard-sidebar .dashboard-nav-log":"updateLog","click .dashboard-sidebar nav buttton":"updateLog","click #region-switch-list li":"switchRegion","click .resource-tab":"switchResource","click .region-resource-list .delete-stack":"deleteStack","click .region-resource-list .duplicate-stack":"duplicateStack","click .region-resource-list .start-app":"startApp","click .region-resource-list .stop-app":"stopApp","click .region-resource-list .terminate-app":"terminateApp","click .region-resource-list .forget-app":"forgetApp","click .show-credential":"showCredential","click .icon-detail":"showResourceDetail","click .refreshResource":"reloadResource","click .global-resource-li":"switchGlobalResource"},initialize:function(){var t,n,i,o,u,a;this.resourcesTab="INSTANCE",this.region="global",this.appsRegion="global",this.stacksRegion="global",this.setElement($(e.main({providers:this.model.supportedProviders(),id:this.model.scene.project.get("id"),isAdmin:this.model.scene.project.amIAdmin()})).appendTo(this.model.scene.spaceParentElement())),i=this,this.logCol=this.model.scene.project.logs(),this.logCol.on("change add",this.updateLog,this),this.render(),this.listenTo(this.model.scene.project,"update:stack",function(){return this.updateStacks()}),this.listenTo(this.model.scene.project,"update:app",function(){return this.updateApps()}),this.listenTo(this.model.scene.project,"change:stack",function(){return this.updateStacks()}),this.listenTo(this.model.scene.project,"change:app",function(){return this.updateApps()}),this.listenTo(this.model.scene.project,"update:credential",function(){return i.updateDemoView()}),this.listenTo(this.model.scene.project,"change:credential",function(){return i.updateDemoView()}),this.listenTo(this.model.scene.project.apps(),"change:progress",function(e){return i.updateAppStackProgress(e)}),this.listenTo(this.model.scene.project.stacks(),"change:progress",function(e){return i.updateAppStackProgress(e)}),this.listenTo(App.WS,"visualizeUpdate",this.onVisualizeUpdated),t=this.model.scene.project.credIdOfProvider(c.PROVIDER.AWSGLOBAL),this.credentialAccount=this.model.scene.project.credOfProvider(c.PROVIDER.AWSGLOBAL).get("awsAccount"),this.listenTo(s(t,r.RESTYPE.INSTANCE),"update",this.onGlobalResChanged),this.listenTo(s(t,r.RESTYPE.EIP),"update",this.onGlobalResChanged),this.listenTo(s(t,r.RESTYPE.VOL),"update",this.onGlobalResChanged),this.listenTo(s(t,r.RESTYPE.ELB),"update",this.onGlobalResChanged),this.listenTo(s(t,r.RESTYPE.VPN),"update",this.onGlobalResChanged),this.listenTo(s(t,r.RESTYPE.VPC),"update",this.onRegionResChanged),this.listenTo(s(t,r.RESTYPE.ASG),"update",this.onRegionResChanged),this.listenTo(s(t,r.RESTYPE.CW),"update",this.onRegionResChanged),a=r.REGION_KEYS;for(o=0,u=a.length;o<u;o++)n=a[o],this.listenTo(s(t,r.RESTYPE.SUBSCRIPTION,n),"update",this.onRegionResChanged),this.listenTo(s(t,r.RESTYPE.DBINSTANCE,n),"update",this.onGlobalResChanged);MC.template.dashboardBubble=_.bind(this.dashboardBubble,this),MC.template.dashboardBubbleSub=_.bind(this.dashboardBubbleSub,this)},render:function(){var e;this.updateDemoView(),this.updateGlobalResources(),this.model.fetchAwsResources(),this.initRegion(),this.updateLog(),e=this,setInterval(function(){e.$el.find(".refreshResource").hasClass("reloading")||e.$el.find(".refreshResource").text(MC.intervalDate(e.lastUpdate/1e3)),e.updateLog()},6e4),this.$el.toggleClass("observer",this.model.isReadOnly())},createStack:function(e){var t,n,r,i;return i=this,t=_.findWhere(i.model.supportedProviders(),{id:"aws::global"}).regions,r=t[0],n=new a({title:f.IDE.CREATE_STACK_TITLE,compact:!0,width:560,template:MC.template.createStack({firstRegion:r,awsRegions:t}),confirm:{text:f.IDE.CREATE_STACK_CONFIRM}}),n.find(".toolbar-visual-ops-switch").on("click",function(){return $(this).toggleClass("on")}),n.find(".select-stack-type li").click(function(e){if(!$(e.currentTarget).hasClass("active"))return n.find(".select-stack-type li").toggleClass("active"),n.find(".tabs-content > div").toggleClass("hide")}),n.on("confirm",function(){var e,t,r,s,o,u;return u=n.find(".tab-aws-stack").hasClass("active")?"aws":"mesos",s=n.find("#create-"+u+"-stack-region li.item.selected").data("value"),e=u==="mesos"?n.find(".create-mesos-use-marathon").hasClass("on"):!1,o=n.find("#mesos-scale li.item.selected").data("value"),r="aws::global",void 0,n.close(),t=i.model.scene.project.createStack(s,r,{type:u,framework:e,scale:o}),i.model.scene.loadSpace(t)})},getPreBakedAmiId:function(e,t){var n;return n=new Q.defer,t==="aws"?(n.resolve(),n.promise):o("aws_aws",{region_names:[e],fields:["prebaked_ami","quickstart"]}).then(function(e){var t,n;t=null,e=e[0];if(e.quickstart&&e.prebaked_ami)return n=_.find(e.quickstart,function(t){var n;return(n=t.id,__indexOf.call(e.prebaked_ami,n)>=0)&&t.osType==="ubuntu"&&t.virtualizationType==="hvm"}),t=n.id,t})},showCredential:function(){return(new h({model:this.model.scene.project})).render()},importStack:function(e){return new t({type:$(e.currentTarget).attr("data-type"),project:this.model.scene.project}),!0},importApp:function(){return(new u({project:this.model.scene.project})).showPayment().then(function(e){return function(t){return new i({model:e.model.scene.project,dialog:t!=null?t.modal:void 0})}}(this))},updateDemoView:function(){var e;this.model.scene.project.isDemoMode()?(this.$el.find("#VisualizeVPC").attr("disabled","disabled").addClass("tooltip").attr("title",f.IDE.PROVIDE_CRED_TO_VISUALIZE),this.$el.find("#dashboard-data-wrap").toggleClass("demo",!0)):(this.$el.find("#dashboard-data-wrap").removeClass("demo"),this.$el.find("#VisualizeVPC").removeAttr("disabled").removeClass("tooltip").removeAttr("title"),e=this.model.scene.project.credOfProvider(c.PROVIDER.AWSGLOBAL).get("awsAccount"),this.credentialAccount!==e&&(this.reloadResource(),this.credentialAccount=e))},updateGlobalResources:function(){var e;this.model.isAwsResReady()?(this.__globalLoading=!1,e={},_.each(this.model.getAwsResData(),function(t,n){var r;r=_.sortBy(t,function(e){return-e.data.length}),e[n]=r})):(this.__globalLoading=!0,e={loading:!0}),this.$el.find("#GlobalView").html(n.globalResources(e)),this.region==="global"&&(this.$el.find("#GlobalView").removeAttr("style"),this.$el.find("#RegionViewWrap").hide())},onGlobalResChanged:function(){return this.updateGlobalResources(),this.updateRegionResources()},onRegionResChanged:function(){return this.updateRegionResources()},initRegion:function(){return this.updateRegionAppStack("stacks","global"),this.updateRegionAppStack("apps","global"),this.toggleMarathonOpslist(),this.updateRegionResources()},switchRegion:function(e){var t,n,r;if(e&&e.currentTarget){n=e.currentTarget,t=$(n).data("region"),t!=="global"&&this.model.fetchAwsResources(t),r=$(e.currentTarget).parents(".dash-region-navigation").data("type");if(r==="stacks"||r==="apps")return this[r+"Region"]=t,this.updateRegionAppStack(r,t);if(r==="resource")return this.region=t,this.updateRegionResources()}},switchGlobalResource:function(e){var t,n,r;return void 0,t=$(e.currentTarget),n=t.data("region"),r=t.parent().parent().data("type"),$(".dash-resource-wrap").find("#region-switch-list").find("li[data-region="+n+"]").click(),$("#RegionViewWrap").find("nav>div[data-type='"+r+"']").click()},updateRegionResources:function(){var e,t;this.$el.find(".dash-resource-wrap .js-toggle-dropdown span").text(r.REGION_SHORT_LABEL[this.region]||f.IDE.DASH_BTN_GLOBAL);if(this.region==="global"){this.updateGlobalResources();return}return this.$el.find("#RegionViewWrap").show(),this.$el.find("#GlobalView").hide(),this.updateRegionTabCount(),t=r.RESTYPE[this.resourcesTab],this.model.isAwsResReady(this.region,t)?e=n["resource"+this.resourcesTab](this.model.getAwsResData(this.region,t)):e='<div class="dashboard-loading"><div class="loading-spinner"></div></div>',this.$el.find("#RegionResourceData").html(e)},updateAppStackProgress:function(e){$("#region-resource-app-wrap, #region-resource-stack-wrap").children("li[data-id='"+e.id+"']").find(".region-resource-progess").css("width",e.get("progress")+"%")},updateStacks:function(){return this.updateRegionAppStack("stacks",null),this.toggleMarathonOpslist()},updateApps:function(){return this.updateRegionAppStack("apps",null),this.toggleMarathonOpslist()},toggleMarathonOpslist:function(){var e,t;return e=this.$el.find(".region-app-stack-wrap.marathon"),t=e.find(".region-resource-list li").size()>0,e.toggle(t)},updateRegionAppStack:function(e,t,i){var s,o,u,a,l,c;e==null&&(e="stacks"),i==null&&(i=!1);if(e!=="stacks"&&e!=="apps")return!1;t||(i?t="global":t=this[e+"Region"]),l=this,s={apps:[],stacks:[],region:this.region},o=_.map(r.REGION_LABEL,function(e,t){return{id:t,name:e,count:0,shortName:r.REGION_SHORT_LABEL[t]}}),t!=="global"?u=function(e){return e.get("region")===t&&e.isExisting()}:u=function(){return!0},c={thumbnail:!0},a=_.clone(l.model.scene.project[e]()),a.comparator="updateTime",a.sort(),i?a=a.filter(function(e){return e.get("provider")==="docker::marathon"}):a=a.filter(function(e){return e.get("provider")!=="docker::marathon"}),s.region=_.map(o,function(e){return e.count=_.filter(a,function(t){return t.get("region")===e.id}).length,e}),s[e]=a.filter(u).map(function(e){return e.toJSON(c)}).reverse(),s.globalCount=a.length,s.projectId=l.model.scene.project.id,s.currentRegion=_.find(o,function(e){return e.id===t})||{id:"global",shortName:f.IDE.DASH_BTN_GLOBAL},i?(s.isMarathon=i,this.$el.find(".region-app-stack-wrap.marathon .dash-region-"+e+"-wrap").replaceWith(n["region_"+e](s))):this.$el.find(".region-app-stack-wrap").not(".marathon").find(".dash-region-"+e+"-wrap").replaceWith(n["region_"+e](s))},updateRegionTabCount:function(){var e,t,n,r;r=this.model.getResourcesCount(this.region),e=this.$el.find("#RegionResourceNav");for(n in r)t=r[n],e.children("."+n).children(".count-bubble").text(t===""?"-":t)},switchResource:function(e){this.$el.find("#RegionResourceNav").children().removeClass("on"),this.resourcesTab=$(e.currentTarget).addClass("on").attr("data-type"),this.updateRegionResources()},deleteStack:function(e){var t;return e.preventDefault(),t=$(e.currentTarget).closest("li").attr("data-id"),(new u({model:this.model.scene.project.getOpsModel(t)})).deleteStack(),!1},duplicateStack:function(e){var t;return e.preventDefault(),t=$(e.currentTarget).closest("li").attr("data-id"),App.loadUrl(this.model.scene.project.stacks().get(t).duplicate().url()),!1},startApp:function(e){var t;return e.preventDefault(),t=$(e.currentTarget).closest("li").attr("data-id"),(new u({model:this.model.scene.project.getOpsModel(t)})).startApp(),!1},stopApp:function(e){var t;return e.preventDefault(),t=$(e.currentTarget).closest("li").attr("data-id"),(new u({model:this.model.scene.project.getOpsModel(t)})).stopApp(),!1},terminateApp:function(e){var t;return e.preventDefault(),t=$(e.currentTarget).closest("li").attr("data-id"),(new u({model:this.model.scene.project.getOpsModel(t)})).terminateApp(),!1},forgetApp:function(e){var t,r,i,s,o;return e.preventDefault(),t=$(e.currentTarget).closest("li").attr("data-id"),i=this.model.scene.project.getOpsModel(t),o=i.get("usage")==="production",s=i.get("name"),r=new a({title:f.IDE.TITLE_CONFIRM_TO_FORGET,template:n.forgetApp({production:o,name:s}),confirm:{text:f.TOOLBAR.BTN_FORGET_CONFIRM,color:"red"},disableClose:!0}),r.tpl.find("#appNameConfirmIpt").on("keyup change",function(){r.tpl.find("#appNameConfirmIpt").val()===s?r.tpl.find(".modal-confirm").removeAttr("disabled"):r.tpl.find(".modal-confirm").attr("disabled","disabled")}),o&&r.tpl.find(".modal-confirm").attr("disabled","disabled"),r.on("confirm",function(){r.close(),i.terminate(!0,!1).then(function(){return notification("info",'Your app "'+s+'" has been removed from our database.')},function(e){return notification("error",'Failed to remove your app "'+s+'" from our database. (ErrorCode: '+e.error+")")})}),!1},reloadResource:function(){if($(".refreshResource").hasClass("reloading"))return;$(".refreshResource").addClass("reloading").text(""),this.model.clearVisualizeData(),s.invalidate().done(function(){return $(".refreshResource").removeClass("reloading").text(f.IDE.DASH_TPL_JUST_NOW)})},showResourceDetail:function(e){var t,i,s,o,u;t=$(e.currentTarget),s=t.attr("data-id"),u=r.RESTYPE[this.resourcesTab],o=this.model.getResourceData(this.region,u,s),i=this.formatDetail(this.resourcesTab,o.attributes),i.title&&(s=i.title,delete i.title),new a({title:s,width:"450",template:n.resourceDetail(i),disableFooter:!0})},formatDetail:function(e,t){var n,r,i,s,o;switch(e){case"SUBSCRIPTION":return{DASH_LBL_TITLE:t.Endpoint,DASH_LBL_ENDPOINT:t.Endpoint,DASH_LBL_OWNER:t.Owner,DASH_LBL_PROTOCOL:t.Protocol,DASH_LBL_SUBSCRIPTION_ARN:t.SubscriptionArn,DASH_LBL_TOPIC_ARN:t.TopicArn};case"VPC":return{DASH_LBL_STATE:t.state,DASH_LBL_CIDR:t.cidrBlock,DASH_LBL_TENANCY:t.instanceTenancy};case"ASG":return{DASH_LBL_TITLE:t.Name,DASH_BUB_NAME:t.Name,DASH_LBL_AVAILABILITY_ZONE:t.AvailabilityZones.join(", "),DASH_LBL_CREATE_TIME:t.CreatedTime,DASH_LBL_DEFAULT_COOLDOWN:t.DefaultCooldown,DASH_LBL_DESIRED_CAPACITY:t.DesiredCapacity,DASH_LBL_MAX_SIZE:t.MaxSize,DASH_LBL_MIN_SIZE:t.MinSize,DASH_LBL_HEALTH_CHECK_GRACE_PERIOD:t.HealthCheckGracePeriod,DASH_LBL_HEALTH_CHECK_TYPE:t.HealthCheckType,DASH_LBL_LAUNCH_CONFIGURATION_NAME:t.LaunchConfigurationName,DASH_LBL_TERMINATION_POLICIES:t.TerminationPolicies.join(", "),DASH_LBL_AUTOSCALING_GROUP_ARN:t.id};case"ELB":return{DASH_LBL_AVAILABILITY_ZONE:t.AvailabilityZones.join(", "),DASH_LBL_CREATE_TIME:t.CreatedTime,DASH_LBL_DNS_NAME:t.DNSName,DASH_LBL_HEALTH_CHECK:this.formatData("HealthCheck",[t.HealthCheck],"Health Check",!0),DASH_LBL_INSTANCE:t.Instances.join(", "),DASH_LBL_LISTENER_DESC:this.formatData("ListenerDescriptions",_.pluck(t.ListenerDescriptions.member,"Listener"),"Listener Descriptions",!0),DASH_LBL_SECURITY_GROUPS:t.SecurityGroups.join(", "),DASH_LBL_SUBNETS:t.Subnets.join(", ")};case"VPN":return{DASH_LBL_STATE:t.state,DASH_LBL_VGW_ID:t.vpnGatewayId,DASH_LBL_CGW_ID:t.customerGatewayId,DASH_LBL_TYPE:t.type};case"VOL":return{DASH_LBL_VOLUME_ID:t.id,DASH_LBL_DEVICE_NAME:t.device,DASH_LBL_SNAPSHOT_ID:t.snapshotId,DASH_LBL_VOLUME_SIZE:t.size,DASH_LBL_STATUS:t.status,DASH_LBL_INSTANCE_ID:t.instanceId,DASH_LBL_DELETE_ON_TERM:t.deleteOnTermination,DASH_LBL_AVAILABILITY_ZONE:t.availabilityZone,DASH_LBL_VOLUME_TYPE:t.volumeType,DASH_LBL_CREATE_TIME:t.createTime,DASH_LBL_ATTACH_TIME:t.attachTime};case"INSTANCE":return{DASH_LBL_STATUS:t.instanceState.name,DASH_LBL_MONITORING:t.monitoring.state,DASH_LBL_PRIMARY_PRIVATE_IP:t.privateIpAddress,DASH_LBL_PRIVATE_DNS:t.privateDnsName,DASH_LBL_LAUNCH_TIME:t.launchTime,DASH_LBL_AVAILABILITY_ZONE:t.placement.availabilityZone,DASH_LBL_AMI_LAUNCH_INDEX:t.amiLaunchIndex,DASH_LBL_INSTANCE_TYPE:t.instanceType,DASH_LBL_BLOCK_DEVICE_TYPE:t.rootDeviceType,DASH_LBL_BLOCK_DEVICES:t.blockDeviceMapping?this.formatData("BlockDevice",t.blockDeviceMapping,"deviceName"):null,DASH_LBL_NETWORK_INTERFACE:t.networkInterfaceSet?this.formatData("ENI",t.networkInterfaceSet,"networkInterfaceId"):null};case"EIP":return r={DASH_LBL_PUBLIC_IP:t.publicIp,DASH_LBL_DOMAIN:t.domain,DASH_LBL_ALLOCATION_ID:t.id,DASH_LBL_CATEGORY:t.category,DASH_LBL_TITLE:t.publicIp},t.associationId&&(r.DASH_LBL_ASSOCIATION_ID=t.associationId),t.networkInterfaceId&&(r.DASH_LBL_NETWORK_INTERFACE_ID=t.networkInterfaceId),t.instanceId&&(r.DASH_LBL_INSTANCE_ID=t.instanceId),t.privateIpAddresse&&(r.DASH_LBL_PRIVATE_IP_ADDRESS=t.privateIpAddresses),r;case"CW":return{DASH_LBL_ALARM_NAME:t.Name,DASH_LBL_COMPARISON_OPERATOR:t.ComparisonOperator,DASH_LBL_DIMENSIONS:this.formatData("Dimensions",t.Dimensions,"Dimensions",!0),DASH_LBL_EVALUATION_PERIODS:t.EvaluationPeriods,DASH_LBL_INSUFFICIENT_DATA_ACTIONS:t.InsufficientDataActions,DASH_LBL_METRIC_NAME:t.MetricName,DASH_LBL_NAMESPACE:t.Namespace,DASH_LBL_OK_ACTIONS:t.OKActions,DASH_LBL_PERIOD:t.Period,DASH_LBL_STATE_REGION:t.StateReason,DASH_LBL_STATE_UPDATED_TIMESTAMP:t.StateUpdatedTimestamp,DASH_LBL_STATE_VALUE:t.StateValue,DASH_LBL_STATISTIC:t.Statistic,DASH_LBL_THRESHOLD:t.Threshold,DASH_LBL_CATEGORY:t.category,DASH_LBL_TITLE:t.Name,DASH_LBL_ACTIONS_ENABLED:t.ActionsEnabled?"true":"false",DASH_LBL_ALARM_ACTIONS:t.AlarmActions.member,DASH_LBL_ALARM_ARN:t.id};case"DBINSTANCE":return n={DASH_LBL_STATUS:t.DBInstanceStatus,DASH_LBL_ENDPOINT:t.Endpoint.Address+""+t.Endpoint.Port,DASH_LBL_ENGINE:t.Engine,DASH_LBL_DB_NAME:t.name||t.Name||t.DBName||"None",DASH_LBL_OPTION_GROUP:((i=t.OptionGroupMemberships)!=null?(s=i.OptionGroupMembership)!=null?s.OptionGroupName:void 0:void 0)||"None",DASH_LBL_PARAMETER_GROUP:((o=t.DBParameterGroups)!=null?o.DBParameterGroupName:void 0)||"None",DASH_LBL_AVAILABILITY_ZONE:t.AvailabilityZone,DASH_LBL_SUBNET_GROUP:t.sbgId||"None",DASH_LBL_PUBLICLY_ACCESSIBLE:t.PubliclyAccessible.toString(),DASH_LBL_IOPS:t.Iops||"OFF",DASH_LBL_MULTI_AZ:t.MultiAZ.toString(),DASH_LBL_AUTOMATED_BACKUP:t.AutoMinorVersionUpgrade,DASH_LBL_LATEST_RESTORE_TIME:t.LatestRestorableTime,DASH_LBL_AUTO_MINOR_VERSION_UPGRADE:t.AutoMinorVersionUpgrade,DASH_LBL_MAINTENANCE_WINDOW:t.PreferredMaintenanceWindow,DASH_LBL_BACKUP_WINDOW:t.PreferredBackupWindow},n}},formatData:function(e,t,n,r){var i;return["BlockDevice","AttachmentSet","HealthCheck","ListenerDescriptions","Dimensions","ENI"].indexOf(e)>-1?(_.map(t,function(e,t){return _.map(e,function(t,n){n==="ebs"&&_.extend(e,t);if(_.isObject(t))return delete e[n]}),_.map(e,function(t,n){if(_.isBoolean(t))return e[n]=t.toString(),null})}),_.map(t,function(e){return r?e._title=n:e._title=e[n],e.bubble={value:r?n:e[n],data:JSON.stringify(e),template:"dashboardBubbleSub"},e}),t.bubble=!0,t):(i=_.map(t,function(t){return t.bubble={},t.bubble.value=t[n],t.bubble.data=JSON.stringify({type:e,id:t[n]}),t}),i.bubble=!0,i)},dashboardBubbleSub:function(e){var t,r;return r={},t={},_.each(e,function(e,n){var r;r=f.IDE["BUBBLE_"+n.toUpperCase().split("-").join("_")]||n,t[r]=e}),r.data=t,r.title=e.id||e.name||e._title,delete r.data._title,n.bubbleResourceSub(r)},dashboardBubble:function(e){var t,i,s,o;return s=(o=this.model.getAwsResDataById(this.region,r.RESTYPE[e.type],e.id))!=null?o.toJSON():void 0,i={},_.each(s,function(e,t){var n;n=f.IDE["BUBBLE_"+t.toUpperCase().split("-").join("_")]||t,i[n]=e}),t={id:e.id,data:i},_.each(t.data,function(e,n){_.isBoolean(e)&&(t.data[n]=e.toString()),e===""&&(t.data[n]="None"),_.isArray(e)&&e.length===0&&(t.data[n]=["None"]);if(_.isObject(e)&&!_.isArray(e))return delete t.data[n]}),n.bubbleResourceInfo(t)},updateLog:function(e){var t,n,r,i;return i=this,e&&(t=$(e.currentTarget),n=t.parents(".dashboard-sidebar"),n.find(".dashboard-nav-log").removeClass("selected"),n.find(".dashboard-log").addClass("hide"),t.addClass("selected"),t.hasClass("dashboard-nav-activity")?n.find(".dashboard-log-activity").removeClass("hide"):n.find(".dashboard-log-audit").removeClass("hide")),r=i.model.scene.project.get("myRole"),i.renderLog("activity"),r==="admin"?i.renderLog("audit"):i.renderLog("audit",!0)},renderLog:function(t,n){var r,i,s,o,u,a;a=this,t==="activity"?(o=this.logCol.history(),i=".dashboard-log-activity"):t==="audit"&&(o=this.logCol.audit(),i=".dashboard-log-audit"),r=this.$el.find(".dashboard-sidebar").find(i);if(n){r.html(e.noActivity());return}return u=this.model.scene.project.id,s=_.filter(o,function(e){return e.get("success")}),s=_.map(o,function(n){var r,i,s,o,l,c,h;return r=n.get("action")||"",o=n.get("target")||"",t=(n.get("type")||"").toLowerCase(),l=n.get("targetId")||"",a.model.scene.project.getOpsModel(l)||(l=null),c='<span class="name">'+e.securityText(n.get("username"))+"</span>",l?h='<a class="target route" href="/workspace/'+u+"/ops/"+l+'">'+o+"</a>":h='<span class="target">'+e.securityText(o)+" </span>",s=f.IDE["DASHBOARD_LOGS_"+t.toUpperCase()+"_"+r.toUpperCase()],s&&(i=sprintf(s,c,h,"")),{action_type:(r+"_"+t).toLowerCase(),event:i||""+c+" "+r+" "+t+" "+h,time:MC.intervalDate(new Date(n.get("time")))}}),s.length?r.html(e.activityList(s)):r.html(e.noActivity())}})}),define("wspace/dashboard/Dashboard",["Workspace","./DashboardView","i18n!/nls/lang.js","CloudResources","constant","ApiRequest","Credential"],function(e,t,n,r,i,s,o){return e.extend({type:"Dashboard",isFixed:function(){return!0},tabClass:function(){return"icon-dashboard"},title:function(){return n.IDE.NAV_TIT_DASHBOARD},url:function(){return"/"},initialize:function(){this.view=new t({model:this}),this.listenTo(this.scene.project,"change:myRole",function(){return this.view.render()})},isReadOnly:function(){return this.scene.project.amIObserver()},isWorkingOn:function(e){return e.type==="Dashboard"},fetchAwsResources:function(e){var t,n;t=this.scene.project.credIdOfProvider(o.PROVIDER.AWSGLOBAL),n=this;if(!e){r(t,i.RESTYPE.INSTANCE).fetch(),r(t,i.RESTYPE.EIP).fetch(),r(t,i.RESTYPE.VOL).fetch(),r(t,i.RESTYPE.ELB).fetch(),r(t,i.RESTYPE.VPN).fetch(),_.each(i.REGION_KEYS,function(e){return r(t,i.RESTYPE.DBINSTANCE,e).fetch()});return}r(t,i.RESTYPE.SUBSCRIPTION,e).fetch(),r(t,i.RESTYPE.VPC).fetch(),r(t,i.RESTYPE.DHCP,e).fetch(),r(t,i.RESTYPE.ASG).fetch(),r(t,i.RESTYPE.CW).fetch(),r(t,i.RESTYPE.ENI,e).fetch(),r(t,i.RESTYPE.CGW,e).fetch(),r(t,i.RESTYPE.VGW,e).fetch()},isAwsResReady:function(e,t){var n,s,u,a,f,l,c,h,p,d;n=this.scene.project.credIdOfProvider(o.PROVIDER.AWSGLOBAL);if(!e){a=!0,s=[r(n,i.RESTYPE.INSTANCE),r(n,i.RESTYPE.EIP),r(n,i.RESTYPE.VOL),r(n,i.RESTYPE.ELB),r(n,i.RESTYPE.VPN)],d=i.REGION_KEYS;for(l=0,h=d.length;l<h;l++)u=d[l],r(n,i.RESTYPE.DBINSTANCE,u).isReady()||(a=!1);for(c=0,p=s.length;c<p;c++)f=s[c],f.isReady()||(a=!1);return a}switch(t){case i.RESTYPE.SUBSCRIPTION:return r(n,t,e).isReady();case i.RESTYPE.VPC:return r(n,t).isReady()&&r(n,i.RESTYPE.DHCP,e).isReady();case i.RESTYPE.INSTANCE:return r(n,t).isReady()&&r(n,i.RESTYPE.EIP,e).isReady();case i.RESTYPE.VPN:return r(n,t).isReady()&&r(n,i.RESTYPE.VGW,e).isReady()&&r(n,i.RESTYPE.CGW,e).isReady();case i.RESTYPE.DBINSTANCE:return r(n,t,e).isReady();default:return r(n,t).isReady()}},getAwsResData:function(e,t){var n,s,u,a,f,l,c,h,p;u=this.scene.project.credIdOfProvider(o.PROVIDER.AWSGLOBAL);if(!e){l=function(e){return e.attributes.instanceState?e.attributes.instanceState.name==="running":!1},s=0,n=[],p=i.REGION_KEYS;for(c=0,h=p.length;c<h;c++)f=p[c],a={region:f,data:r(u,i.RESTYPE.DBINSTANCE,f).models||[],regionName:i.REGION_SHORT_LABEL[f],regionArea:i.REGION_LABEL[f]},s+=a.data.length,n.push(a);return n.totalCount=s,{instances:r(u,i.RESTYPE.INSTANCE).groupByCategory(void 0,l),eips:r(u,i.RESTYPE.EIP).groupByCategory(),volumes:r(u,i.RESTYPE.VOL).groupByCategory(),elbs:r(u,i.RESTYPE.ELB).groupByCategory(),vpns:r(u,i.RESTYPE.VPN).groupByCategory(),rds:n}}return t===i.RESTYPE.SUBSCRIPTION?r(u,t,e).models:r(u,t,e).where({category:e})},getAwsResDataById:function(e,t,n){return r(this.scene.project.credIdOfProvider(o.PROVIDER.AWSGLOBAL),t,e).get(n)},getResourceData:function(e,t,n){return r(this.scene.project.credIdOfProvider(o.PROVIDER.AWSGLOBAL),t,e).get(n)},clearVisualizeData:function(){this.set("visualizeData",[]),this.__visRequest=null},getResourcesCount:function(e){var t,n,s,u,a,f,l,c;a={category:e},u={instances:"INSTANCE",eips:"EIP",volumes:"VOL",elbs:"ELB",vpns:"VPN",vpcs:"VPC",asgs:"ASG",cloudwatches:"CW"},s={},n=this.scene.project.credIdOfProvider(o.PROVIDER.AWSGLOBAL);for(f in u)c=u[f],t=r(n,i.RESTYPE[c]),t.isReady()?s[f]=t.where(a).length:s[f]="";return l=r(n,i.RESTYPE.DBINSTANCE,e),l.isReady()?s.rds=l.models.length:s.rds="",t=r(n,i.RESTYPE.SUBSCRIPTION,e),t.isReady()?s.snss=t.models.length:s.snss="",s},supportedProviders:function(){return[{id:"aws::global",regions:[{id:"us-east-1",name:n.IDE["IDE_LBL_REGION_NAME_us-east-1"],alias:n.IDE["IDE_LBL_REGION_NAME_SHORT_us-east-1"]},{id:"us-west-1",name:n.IDE["IDE_LBL_REGION_NAME_us-west-1"],alias:n.IDE["IDE_LBL_REGION_NAME_SHORT_us-west-1"]},{id:"us-west-2",name:n.IDE["IDE_LBL_REGION_NAME_us-west-2"],alias:n.IDE["IDE_LBL_REGION_NAME_SHORT_us-west-2"]},{id:"eu-west-1",name:n.IDE["IDE_LBL_REGION_NAME_eu-west-1"],alias:n.IDE["IDE_LBL_REGION_NAME_SHORT_eu-west-1"]},{id:"eu-central-1",name:n.IDE["IDE_LBL_REGION_NAME_eu-central-1"],alias:n.IDE["IDE_LBL_REGION_NAME_SHORT_eu-central-1"]},{id:"ap-southeast-2",name:n.IDE["IDE_LBL_REGION_NAME_ap-southeast-2"],alias:n.IDE["IDE_LBL_REGION_NAME_SHORT_ap-southeast-2"]},{id:"ap-northeast-1",name:n.IDE["IDE_LBL_REGION_NAME_ap-northeast-1"],alias:n.IDE["IDE_LBL_REGION_NAME_SHORT_ap-northeast-1"]},{id:"ap-southeast-1",name:n.IDE["IDE_LBL_REGION_NAME_ap-southeast-1"],alias:n.IDE["IDE_LBL_REGION_NAME_SHORT_ap-southeast-1"]},{id:"sa-east-1",name:n.IDE["IDE_LBL_REGION_NAME_sa-east-1"],alias:n.IDE["IDE_LBL_REGION_NAME_SHORT_sa-east-1"]}]}]}},{canHandle:function(e){return e.type==="Dashboard"}})});