define("workspaces/editor/template/TplRightPanel",["handlebars"],function(e){var t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o=this.escapeExpression;return s+='<button class="HideOEPanelRight tooltip sidebar-hider icon-caret-right" data-tooltip=\''+o(n.i18n.call(t,"RES_TIP_TOGGLE_RESOURCE_PANEL",{hash:{},data:i}))+'\'></button>\n<nav class="sidebar-title">\n  <button class="property-tab" id="btn-switch-property">Property</button>\n  <button class="property-tab" id="btn-switch-state">State <b class="count"></b></button>\n\n</nav>\n\n<div class="sub-property">\n  <section class="property-panel-wrapper property-first-panel">\n    <header class="property-sidebar-title truncate property-title"></header>\n    <div class="scroll-wrap scrollbar-auto-hide">\n      <div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n      <div class="scroll-content property-content property-details"></div>\n    </div>\n  </section>\n\n  <section class="property-panel-wrapper property-second-panel">\n    <div class="property-sidebar-title">\n      <button class="back icon-btn-back HideSecondPanel tooltip"></button><span class="truncate property-second-title"></span>\n    </div>\n    <div class="scroll-wrap scrollbar-auto-hide">\n      <div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n      <div class="scroll-content property-content"></div>\n    </div>\n  </section>\n</div>\n<div class="sub-stateeditor"></div>',s};return e.template(t)}),function(){define("workspaces/editor/property/base/main",["event"],function(e){var t,n,r,i,s,o,u,a,f,l,c,h;return n=null,r=null,i=null,s=null,f=[].slice,e.onLongListen("all",function(e){var t,r;if((!n||!n.ideEvents)&&(!i||!i.ideEvents))return;return n&&n.ideEvents&&n.ideEvents.hasOwnProperty(e)&&(t=f.call(arguments,1),r=n.ideEvents[e],_.isString(r)&&(r=n[r]),r.apply(n,t)),i&&i.ideEvents&&i.ideEvents.hasOwnProperty(e)&&(t||(t=f.call(arguments,1)),r=i.ideEvents[e],_.isString(r)&&(r=i[r]),r.apply(i,t)),null}),u={},a=[],u.DEFAULT_TYPE="default",o={},t=function(){return this.type=t.TYPE.Stack,null},t.TYPE=t.prototype.TYPE={Stack:"Stack",App:"App",AppEdit:"AppEdit"},t.prototype.loadSubPanel=function(e,t){return c(o[e],e,t,n.type)},t.extend=function(e,n){var r,i,s,f,l,c,h;s=Backbone.Model.extend.call(t,e,n),i=new s;if(i.subPanelID)return o[i.subPanelID]=i,s;e.handleTypes===""?r=[u.DEFAULT_TYPE]:_.isString(e.handleTypes)||!e.handleTypes.hasOwnProperty("length")?r=[e.handleTypes]:r=e.handleTypes;for(c=0,h=r.length;c<h;c++){f=r[c];if(!f.hasOwnProperty("length")){a.push({regexp:f,prop:i});continue}f.indexOf(">")&&(l=f.split(">"),l.length===2&&l[1].length>0&&(u[l[1]+">"+l[0]]=i)),u[f]=i}return s},t.prototype.activeModule=function(){return n},t.prototype.activeSubModule=function(){return i},t.activeModule=t.prototype.activeModule,t.activeSubModule=t.prototype.activeSubModule,t.loadSubPanel=t.prototype.loadSubPanel,t.load=function(e,t,n,r){var i,s;return s=l(e,t,n),i=c(s,e,t,n,r),i!==!0?(i===!1?e="Missing_Resource":(e="",void 0),s=l(e,t,n),c(s,e,t,n,r)):!0},l=function(e,t,n){var r,i,s,o,f;e||(e=u.DEFAULT_TYPE),r=e,i=u[e],i||(r=n+":"+e,i=u[r]);if(!i&&e.indexOf(!1))for(o=0,f=a.length;o<f;o++){s=a[o];if(e.match(s.regexp)){r=s.regexp,i=s.prop;break}}if(!i)return;return i.handle=r,i},c=function(e,o,u,a,f){var l,c;if(!e)return!1;e.type=a,l="init"+e.type;if(!e[l])return;e.uid=u,c=e[l].call(e,u);if(c===!1)return;l="setup"+e.type,e[l]&&(e[l].call(e),e[l]=null),e.subPanelID?(i=e,s=o):(i=null,s=null,n=e,r=o);if(e.model.init){e.model.clear({silent:!0});if(e.model.init(u)===!1)return!1}return h(f,e.model),e.view.model=e.model,e.view._isSub=!!e.subPanelID,e.view.__restore=t.__restore,t.__restore=!1,e.subPanelID?e.view._loadAsSub(e.subPanelID):e.view._load(),l="afterLoad"+e.type,e[l]&&e[l].call(e),!0},h=function(e,t){},t.onUnloadSubPanel=function(){return n.onUnloadSubPanel&&n.onUnloadSubPanel(i.subPanelID),i=null,s=null,null},t.snapshot=function(){return{activeModuleId:n.uid,activeModuleType:r,activeSubModuleId:i?i.uid:null,activeSubModuleType:s,tab_type:n.type}},t.restore=function(e,n){return t.load(e.activeModuleType,e.activeModuleId,e.tab_type,!0),e.activeSubModuleType&&(t.__restore=!0,t.loadSubPanel(e.activeSubModuleType,e.activeSubModuleId,!0),t.__restore=!1),null},t})}.call(this),function(){define("workspaces/editor/property/base/model",["backbone","Design","constant"],function(e,t,n){var r;return r=e.Model.extend({init:function(){return null},setName:function(e){var n;return n=this.get("uid"),void 0,t.instance().component(n).setName(e),this.set("name",e),null}}),r})}.call(this),function(){define("workspaces/editor/property/stack/model",["../base/model","constant","Design"],function(e,t,n){var r,i;return i={"ec2-classic":"EC2 Classic","ec2-vpc":"EC2 VPC","default-vpc":"Default VPC","custom-vpc":"Custom VPC"},r=e.extend({init:function(){var e,r,s;return r=n.instance(),r.get("name")?(e=r.get("agent"),this.set({name:r.get("name").replace(/\s+/g,""),id:r.get("id"),usage:r.get("usage"),description:r.get("description"),type:i[r.type()],region:t.REGION_SHORT_LABEL[r.region()],isApp:this.isApp,isAppEdit:this.isAppEdit,isStack:this.isStack,isImport:r.modeIsAppView(),isResDiff:r.get("resource_diff"),opsEnable:e.enabled}),s=n.modelClassForType(t.RESTYPE.VPC).theVPC(),s&&this.set("vpcid",s.get("appId")),this.getNetworkACL(),this.isStack&&this.set("isStack",!0),this.set(n.instance().getCost()),null):null},createAcl:function(){var e;return e=n.modelClassForType(t.RESTYPE.ACL),(new e).id},getNetworkACL:function(){var e,r,i;return e=n.modelClassForType(t.RESTYPE.ACL),i=[],r=null,_.each(e.allObjects(),function(e){return function(t){var n,s;return s=!0,e.isApp?s=!1:t.isDefault()?s=!1:e.isAppEdit&&(s=!t.get("appId")),n={uid:t.id,name:t.get("name"),rule:t.getRuleCount(),association:t.getAssoCount(),deletable:s},t.isDefault()?r=n:i.splice(_.sortedIndex(i,n,"name"),0,n),null}}(this)),r&&i.splice(0,0,r),this.set("networkAcls",i),null},removeAcl:function(e){return n.instance().component(e).remove(),this.getNetworkACL(),null}}),new r})}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};define("workspaces/editor/property/base/view",["constant","i18n!/nls/lang.js","backbone","jquery","handlebars","UI.selectbox","UI.notification","UI.multiinputbox","UI.modal","UI.selectbox","MC.validate","UI.parsley","UI.tooltip","UI.sortable","UI.tablist"],function(t,n){var r,i,s;return s=[],i=[],r=Backbone.View.extend({__addToTrash:function(t){if(e.call(s,t)<0)return s.push(t)},__clearTrash:function(){var e,t,n;for(t=0,n=s.length;t<n;t++)e=s[t],_.isObject(e)&&e.remove&&e.__removeSubView();return s=[],this},__removeSubView:function(){var e,t,n;for(t=0,n=i.length;t<n;t++)e=i[t],_.isObject(e)&&_.isFunction(e.remove)&&e.remove();return i=[]},addSubView:function(t){if(e.call(i,t)<0)return i.push(t)},setTitle:function(e){$("#OEPanelRight").find(this._isSub?".property-second-title":".property-title").text(e)},prependTitle:function(e){$("#OEPanelRight").find(this._isSub?".property-second-title":".property-title").prepend(e)},forceShow:function(){return $("#OEPanelRight").trigger("FORCE_SHOW"),null},disabledAllOperabilityArea:function(e){var t;if(e){if($("#OpsEditor").children(".disabled-event-layout").length)return;return t='<div class="disabled-event-layout"></div>',$("#OpsEditor").append(t),$("#tabbar-wrapper").append(t)}return $(".disabled-event-layout").remove()},_load:function(){var e,t;return this.__clearTrash(),this.__addToTrash(this),t=$("#OEPanelRight").find(".property-first-panel").find(".property-details"),e=$("<div class='scroll-content property-content property-details'></div>").insertAfter(t),t.empty().remove(),this._resetImmediatelySection(),this.setElement(e),this.render(),this.focusImportantInput(),null},_resetImmediatelySection:function(){return $(".apply-immediately-section").remove(),$(".property-panel-wrapper").removeClass("immediately")},_loadAsSub:function(e){var t;return this.__restore?$("#OEPanelRight").trigger("OPEN_SUBPANEL_IMM"):$("#OEPanelRight").trigger("OPEN_SUBPANEL"),this.setElement($("#OEPanelRight").find(".property-second-panel .property-content")),this.render(),t=this,setTimeout(function(){return t.focusImportantInput()},200),null},_render:function(){var e,n,r;r=this._originalRender(),selectbox.init();if(!_.isString(r))return r;n=this.model.get("uid");if(n){e=Design.instance().component(n);if(e&&(e.type===t.RESTYPE.SG||e.type===t.RESTYPE.DBINSTANCE))return null}return this.setTitle(r),null},focusImportantInput:function(){var e,t;return t=this,e=t.$el.find("input[data-empty-remove]").filter(function(){return!this.value.length}),e.length&&setTimeout(function(){return t.forceShow(),e.focus(),t.disabledAllOperabilityArea(!0)},0),null}}),r.extend=function(e,t){return e.render&&(e._originalRender=e.render,e.render=r.prototype._render),Backbone.View.extend.call(this,e,t)},r})}.call(this),define("workspaces/editor/property/stack/template/stack",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var r="",i;r+="\n    ",i=n["if"].call(e,e&&e.isAppEdit,{hash:{},inverse:f.noop,fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;r+='\n    <dl class="dl-horizontal dl-region-type property-control-group">\n      <dt><label>'+u(n.i18n.call(e,"PROP_STACK_LBL_REGION",{hash:{},data:t}))+"</label></dt>\n      <dd>"+u((i=e&&e.region,typeof i===a?i.apply(e):i))+"</dd>\n      <dt><label>"+u(n.i18n.call(e,"PROP_STACK_LBL_TYPE",{hash:{},data:t}))+"</label></dt>\n      <dd>"+u((i=e&&e.type,typeof i===a?i.apply(e):i))+"</dd>\n      <dt><label>"+u(n.i18n.call(e,"PROP_APP_LBL_ID",{hash:{},data:t}))+"</label></dt>\n      <dd>"+u((i=e&&e.id,typeof i===a?i.apply(e):i))+"</dd>\n      ",i=n["if"].call(e,e&&e.usage,{hash:{},inverse:f.noop,fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;r+="\n      <dt><label>"+u(n.i18n.call(e,"PROP_STACK_LBL_DESC",{hash:{},data:t}))+"</label></dt>\n      <dd>"+u((i=e&&e.description,typeof i===a?i.apply(e):i))+"</dd>\n    </dl>\n\n    ",i=n["if"].call(e,e&&e.isApp,{hash:{},inverse:f.noop,fn:f.program(6,p,t),data:t});if(i||i===0)r+=i;r+="\n\n    ",i=n["if"].call(e,e&&e.isAppEdit,{hash:{},inverse:f.noop,fn:f.program(11,m,t),data:t});if(i||i===0)r+=i;return r+="\n  ",r}function c(e,t){var r="",i;return r+='\n    <section class="property-control-group" data-bind="true">\n        <label class="left" for="property-app-name">'+u(n.i18n.call(e,"PROP_APP_LBL_NAME",{hash:{},data:t}))+'</label>\n        <input class="input" type="text" data-ignore="true" data-required-rollback="true" value="'+u((i=e&&e.name,typeof i===a?i.apply(e):i))+'" id="property-app-name">\n    </section>\n    ',r}function h(e,t){var r="",i;return r+="\n      <dt><label>"+u(n.i18n.call(e,"PROP_STACK_LBL_USAGE",{hash:{},data:t}))+'</label></dt>\n      <dd style="text-transform: capitalize">'+u((i=e&&e.usage,typeof i===a?i.apply(e):i))+"</dd>\n      ",r}function p(e,t){var r="",i;r+='\n    <dl class="dl-vertical">\n      <dt><label>'+u(n.i18n.call(e,"PROP_APP_LBL_INSTANCE_STATE",{hash:{},data:t}))+"</label></dt>\n      ",i=n["if"].call(e,e&&e.opsEnable,{hash:{},inverse:f.program(9,v,t),fn:f.program(7,d,t),data:t});if(i||i===0)r+=i;r+="\n      <dt><label>"+u(n.i18n.call(e,"PROP_APP_LBL_RESDIFF_VIEW",{hash:{},data:t}))+"</label></dt>\n      ",i=n["if"].call(e,e&&e.isResDiff,{hash:{},inverse:f.program(9,v,t),fn:f.program(7,d,t),data:t});if(i||i===0)r+=i;return r+="\n    </dl>\n\n    ",r}function d(e,t){return"\n      <dd>Enabled</dd>\n      "}function v(e,t){return"\n      <dd>Disabled</dd>\n      "}function m(e,t){var r="",i;r+='\n    <section class="property-control-group resdiff-switch">\n      <div class="checkbox">\n        <input id="property-app-resdiff" type="checkbox" name="resdiff" ',i=n["if"].call(e,e&&e.isResDiff,{hash:{},inverse:f.noop,fn:f.program(12,g,t),data:t});if(i||i===0)r+=i;return r+=' >\n        <label for="property-app-resdiff"></label>\n      </div>\n      <label for="property-app-resdiff">'+u(n.i18n.call(e,"PROP_APP_LBL_RESDIFF",{hash:{},data:t}))+'</label><i class="icon-info tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_APP_TIP_RESDIFF",{hash:{},data:t}))+'"></i>\n    </section>\n    ',r}function g(e,t){return"checked"}function y(e,t){var r="",i;return r+='\n	<section class="property-control-group" data-bind="true">\n		<label class="left" for="property-stack-name">'+u(n.i18n.call(e,"PROP_STACK_LBL_NAME",{hash:{},data:t}))+'</label>\n		<input class="input" type="text" data-ignore="true" data-required-rollback="true" value="'+u((i=e&&e.name,typeof i===a?i.apply(e):i))+'" id="property-stack-name">\n	</section>\n    <section class="property-control-group" data-bind="true">\n        <label for="property-stack-description">'+u(n.i18n.call(e,"PROP_STACK_LBL_DESCRIPTION",{hash:{},data:t}))+'</label>\n        <textarea name="" id="property-stack-description" cols="30" rows="7">'+u((i=e&&e.description,typeof i===a?i.apply(e):i))+'</textarea>\n    </section>\n	<dl class="dl-horizontal dl-region-type property-control-group">\n		<dt><label>'+u(n.i18n.call(e,"PROP_STACK_LBL_REGION",{hash:{},data:t}))+"</label></dt><dd>"+u((i=e&&e.region,typeof i===a?i.apply(e):i))+"</dd>\n		<dt><label>"+u(n.i18n.call(e,"PROP_STACK_LBL_TYPE",{hash:{},data:t}))+"</label></dt><dd>"+u((i=e&&e.type,typeof i===a?i.apply(e):i))+"</dd>\n    <dt><label>"+u(n.i18n.call(e,"PROP_STACK_LBL_ID",{hash:{},data:t}))+"</label></dt><dd>"+u((i=e&&e.id,typeof i===a?i.apply(e):i))+"</dd>\n	</dl>\n  ",r}function b(e,t){var r="",i;r+='\n	<div class="option-group-head pos-r">'+u(n.i18n.call(e,"PROP_STACK_TIT_ACL",{hash:{},data:t}))+'<span class="acl-info-list-num property-head-num-wrap">('+u((i=(i=e&&e.networkAcls,i==null||i===!1?i:i.length),typeof i===a?i.apply(e):i))+')</span>\n	</div>\n	<div class="option-group">\n    <ul class="acl-sg-info-list acl-info-list property-list" id="stack-property-acl-list"></ul>\n    ',i=n.unless.call(e,e&&e.isApp,{hash:{},inverse:f.noop,fn:f.program(17,w,t),data:t});if(i||i===0)r+=i;return r+="\n  </div>\n	",r}function w(e,t){var r="";return r+='<a href="#" class="add-to-list action-link" id="stack-property-new-acl">'+u(n.i18n.call(e,"PROP_STACK_BTN_CREATE_NEW_ACL",{hash:{},data:t}))+"</a>",r}function E(e,t){var r="",i;r+="$"+u((i=e&&e.totalFee,typeof i===a?i.apply(e):i))+"/",i=n.i18n.call(e,"PROP_STACK_LBL_COST_CYCLE",{hash:{},data:t});if(i||i===0)r+=i;return r+=" ",r}function S(e,t){var n="",r;return n+="\n        <tr> <td>"+u((r=e&&e.resource,typeof r===a?r.apply(e):r))+"</td> <td>"+u((r=e&&e.type,typeof r===a?r.apply(e):r))+"</td> <td>"+u((r=e&&e.formatedFee,typeof r===a?r.apply(e):r))+"</td> </tr>\n      ",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+="<article>\n\n  ",o=n.unless.call(t,t&&t.isStack,{hash:{},inverse:f.program(14,y,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+='\n\n	<!-- SG, ACL, COST -->\n	<div class="option-group-head">'+u(n.i18n.call(t,"PROP_STACK_TIT_SG",{hash:{},data:i}))+'<span class="property-head-num-wrap">(<span id="property-head-sg-num"></span>)</span></div>\n  <div class="option-group sg-group"></div>\n\n\n	',o=n["if"].call(t,t&&t.networkAcls,{hash:{},inverse:f.noop,fn:f.program(16,b,i),data:i});if(o||o===0)s+=o;s+='\n\n\n	<div class="option-group-head">\n		'+u(n.i18n.call(t,"PROP_STACK_TIT_COST_ESTIMATION",{hash:{},data:i}))+'\n		<span class="cost-counter right">',o=n["if"].call(t,t&&t.totalFee,{hash:{},inverse:f.noop,fn:f.program(19,E,i),data:i});if(o||o===0)s+=o;s+='</span>\n	</div>\n	<div class="option-group">\n		<table class="table cost-estimation-table">\n			<thead> <tr>\n					<th>'+u(n.i18n.call(t,"PROP_STACK_COST_COL_RESOURCE",{hash:{},data:i}))+'</th>\n          <th style="min-width:70px;">'+u(n.i18n.call(t,"PROP_STACK_COST_COL_SIZE_TYPE",{hash:{},data:i}))+'</th>\n          <th style="min-width:60px;">'+u(n.i18n.call(t,"PROP_STACK_COST_COL_FEE",{hash:{},data:i}))+"</th>\n			</tr> </thead>\n			<tbody> ",o=n.each.call(t,t&&t.costList,{hash:{},inverse:f.noop,fn:f.program(21,S,i),data:i});if(o||o===0)s+=o;return s+=' </tbody>\n\n		</table>\n		<div class="property-control-group tac">\n			<a target="_blank" href="http://aws.amazon.com/ec2/pricing/" class="goto-outsite tac" target="_blank">AWS EC2 Pricing</a>\n		</div>\n	</div>\n\n</article>',s};return e.template(t)}),define("workspaces/editor/property/stack/template/acl",["handlebars"],function(e){var t=function(e,t,n,r,i){function f(e,t){var r="",i;r+='<li data-uid="'+u((i=e&&e.uid,typeof i===o?i.apply(e):i))+'">\n<div class="col3 edit icon-btn-details tooltip" data-tooltip=\''+u(n.i18n.call(e,"PROP_STACK_ACL_TIP_DETAIL",{hash:{},data:t}))+'\' ></div>\n<div class="col2">\n	<div class="col2-1 truncate">'+u((i=e&&e.name,typeof i===o?i.apply(e):i))+'</div>\n	<div class="col2-2 truncate">'+u((i=e&&e.rule,typeof i===o?i.apply(e):i))+" "+u(n.i18n.call(e,"PROP_STACK_ACL_LBL_RULE",{hash:{},data:t}))+", "+u((i=e&&e.association,typeof i===o?i.apply(e):i))+" "+u(n.i18n.call(e,"PROP_STACK_ACL_LBL_ASSOC",{hash:{},data:t}))+" ",i=n["if"].call(e,e&&e.deletable,{hash:{},inverse:a.noop,fn:a.program(2,l,t),data:t});if(i||i===0)r+=i;return r+=" </div>\n</div>\n</li>",r}function l(e,t){var r="",i;return r+=' | <a class="sg-list-delete-btn" data-name="'+u((i=e&&e.name,typeof i===o?i.apply(e):i))+'" data-count="'+u((i=e&&e.association,typeof i===o?i.apply(e):i))+'">'+u(n.i18n.call(e,"PROP_STACK_ACL_BTN_DELETE",{hash:{},data:t}))+"</a>",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o="function",u=this.escapeExpression,a=this;return s=n.each.call(t,t&&t.networkAcls,{hash:{},inverse:a.noop,fn:a.program(1,f,i),data:i}),s||s===0?s:""};return e.template(t)}),define("workspaces/editor/property/stack/template/sub",["handlebars"],function(e){var t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div style="width:420px">\n   <div class="modal-header">\n      <h3>'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+' SNS Subscription</h3>\n      <i class="modal-close">&times;</i>\n   </div>\n   <div class="modal-body" id="property-asg-sns-modal" data-uid='+a((o=t&&t.uid,typeof o===u?o.apply(t):o))+'>\n      <div class="modal-control-group modal-sns-protocol">\n        <label class="label-short">Protocol</label>\n        <div class="selectbox">\n          <div class="selection">'+a((o=t&&t.protocol,typeof o===u?o.apply(t):o))+'</div>\n          <ul class="dropdown" tabindex="-1">\n            <li class="item" data-id="https">HTTPS</li>\n            <li class="item" data-id="http">HTTP</li>\n            <li class="item" data-id="email">Email</li>\n            <li class="item" data-id="email-json">Email-JSON</li>\n            <li class="item" data-id="sms">SMS</li>\n            <li class="item" data-id="arn">Application</li>\n            <li class="item" data-id="sqs">Amazon SQS</li>\n          </ul>\n        </div>\n      </div>\n      <div class="modal-control-group">\n        <label class="label-short" for="property-asg-endpoint">Endpoint</label>\n        <div class="property-asg-ep" data-bind="true">\n          <input type="text" class="input" id="property-asg-endpoint" value="'+a((o=t&&t.endpoint,typeof o===u?o.apply(t):o))+'" max-length="255" data-required="true" data-trigger="change">\n        </div>\n      </div>\n\n    </section>\n\n   </div>\n   <div class="modal-footer">\n      <button id="property-asg-sns-done" class="btn btn-blue">Done</button>\n      <button class="btn modal-close btn-silver">Cancel</button>\n   </div>\n</div>',s};return e.template(t)}),function(){define("workspaces/editor/property/stack/view",["../base/view","./template/stack","./template/acl","./template/sub","event","i18n!/nls/lang.js"],function(e,t,n,r,i,s){var o;return o=e.extend({events:{"change #property-stack-name":"stackNameChanged","change #property-stack-description":"stackDescriptionChanged","change #property-app-name":"changeAppName","click #stack-property-new-acl":"createAcl","click #stack-property-acl-list .edit":"openAcl","click .acl-info-list .sg-list-delete-btn":"deleteAcl","click #property-app-resdiff":"toggleResDiff"},render:function(){var e;return this.model.isApp||this.model.isAppEdit?e="App - "+this.model.get("name"):e="Stack - "+this.model.get("name"),this.$el.html(t(this.model.attributes)),e&&this.setTitle(e),this.refreshACLList(),this.model.isAppEdit&&this.$("#property-app-name").parsley("custom",this.checkAppName),null},checkAppName:function(e){var t;return t=App.model.appList().findWhere({name:e}),t&&t.id!==Design.instance().get("id")?s.ide.PROP_MSG_WARN_REPEATED_APP_NAME:null},changeAppName:function(e){var t;t=$(e.currentTarget);if(t.parsley("validate"))return Design.instance().set("name",t.val())},toggleResDiff:function(e){return Design.instance().set("resource_diff",e.currentTarget.checked)},stackDescriptionChanged:function(){var e,t,n;t=$("#property-stack-description"),n=this.model.get("id"),e=t.val();if(t.parsley("validate"))return this.trigger("STACK_DESC_CHANGED",e)},stackNameChanged:function(){var e,t,n;n=$("#property-stack-name"),t=this.model.get("id"),e=n.val();if(e===this.model.get("name"))return;return n.parsley("custom",function(t){if(!MC.validate("awsName",t))return s.ide.PARSLEY_SHOULD_BE_A_VALID_STACK_NAME;if(!App.model.stackList().isNameAvailable(t))return sprintf(s.ide.PARSLEY_TYPE_NAME_CONFLICT,"Stack",e)}),n.parsley("validate")&&(this.trigger("STACK_NAME_CHANGED",e),this.setTitle("Stack - "+e)),null},refreshACLList:function(){return $(this.el).find(".acl-info-list-num").text("("+this.model.get("networkAcls").length+")"),$("#stack-property-acl-list").html(n(this.model.attributes))},createAcl:function(){return this.trigger("OPEN_ACL",this.model.createAcl())},openAcl:function(e){return this.trigger("OPEN_ACL",$(e.currentTarget).closest("li").attr("data-uid")),null},deleteAcl:function(e){var t,n,r,i,s,o;return t=$(e.currentTarget),i=parseInt(t.attr("data-count"),10),r=t.closest("li").attr("data-uid"),i?(o=this,n=t.attr("data-name"),s=MC.template.modalDeleteSGOrACL({title:"Delete Network ACL",main_content:"Are you sure you want to delete "+n+"?",desc_content:"Subnets associated with "+n+" will use DefaultACL."}),modal(s,!1,function(){return $("#modal-confirm-delete").click(function(){return o.model.removeAcl(r),o.model.getNetworkACL(),o.refreshACLList(),modal.close()})})):(this.model.removeAcl(r),this.model.getNetworkACL(),this.refreshACLList())}}),new o})}.call(this),function(){define("workspaces/editor/property/sglist/model",["Design","constant"],function(e,t){var n;return n=Backbone.Model.extend({getSGInfoList:function(){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_;u=e.instance(),p=this.parent_model,d=!1,u.modeIsApp()||u.modeIsAppView()?d=!0:u.modeIsAppEdit()&&p.isSGListReadOnly&&(d=p.isSGListReadOnly()),m=this.resId,v=u.component(m),v?(l=v.type===t.RESTYPE.ELB,c=!1,m=v.id):(l=!1,c=!0,m=""),S=[],a={},f=[],n=e.modelClassForType("SgAsso"),_=e.modelClassForType(t.RESTYPE.SG).allObjects();for(T=0,L=_.length;T<L;T++){b=_[T];if(b.isElbSg()&&!l&&!c)continue;w=!!n.findExisting(b,v),h=c||!d||w;if(!h)continue;b.isDefault()||d||b.get("appId")?o=!1:o=!0,s=b.connections("SgAsso");for(N=0,A=s.length;N<A;N++){i=s[N];if(i.connectsTo(m)){a[b.id]=!0,f.push(b);break}}S.push({uid:b.id,color:b.color,name:b.get("name"),desc:b.get("description"),ruleCount:b.ruleCount(),memberCount:b.getMemberList().length,hideCheck:d||c,deletable:o,used:a[b.id]})}E=[];for(C=0,O=f.length;C<O;C++){x=f[C],g=x.connections("SgRuleSet");for(k=0,M=g.length;k<M;k++)y=g[k],E=E.concat(y.toPlainObjects(x.id))}return r=e.modelClassForType("SgRuleSet"),this.set({is_stack_sg:c,only_one_sg:f.length===1,sg_list:S,sg_length:c?S.length:f.length,readonly:d,sg_rule_list:r.getPlainObjFromRuleSets(E)}),this.sortSGList(),this.sortSGRule(),null},sortSGList:function(){return this.attributes.sg_list=this.attributes.sg_list.sort(function(e,t){if(e.name==="DefaultSG")return-1;if(t.name==="DefaultSG")return 1;if(e.name<t.name)return-1;if(e.name===t.name)return 0;if(e.name>t.name)return 1}),this.attributes.sg_list},sortSGRule:function(e){var t;return t=_.sortBy(this.attributes.sg_rule_list,e||"direction"),this.set("sg_rule_list",t),null},assignSG:function(t,n){var r,i,s;return r=e.modelClassForType("SgAsso"),s=e.instance(),void 0,i=new r(s.component(this.resId),s.component(t)),n===!1&&i.remove(),null},deleteSG:function(t){return e.instance().component(t).remove(),null},isElbSg:function(t){return e.instance().component(t).isElbSg()},getElbNameBySgId:function(n){var r,i,s,o,u;i=e.instance().component(n);if(i.isElbSg()){u=e.modelClassForType(t.RESTYPE.ELB).allObjects();for(s=0,o=u.length;s<o;s++){r=u[s];if(r.getElbSg()===i)return r.get("name")}}return""},createNewSG:function(){var n,r,i,s;return r=e.modelClassForType(t.RESTYPE.SG),s=new r,i=e.instance().component(this.resId),i&&(n=e.modelClassForType("SgAsso"),new n(s,i)),s.id}}),new n})}.call(this),define("workspaces/editor/property/sglist/template/stack",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var r="";return r+='\n<ul class="tab sg-info-list-tab">\n	<li data-tab-target="#item-group" class="active">'+u(n.i18n.call(e,"PROP_SGLIST_TAB_GROUP",{hash:{},data:t}))+'</li>\n	<li data-tab-target="#item-rule">'+u(n.i18n.call(e,"PROP_SGLIST_TAB_RULE",{hash:{},data:t}))+"</li>\n</ul>\n",r}function c(e,t){var r="",i;r+='\n			<li class="clearfix" data-uid="'+u((i=e&&e.uid,typeof i===f?i.apply(e):i))+'">\n				',i=n.unless.call(e,e&&e.hideCheck,{hash:{},inverse:a.noop,fn:a.program(4,h,t),data:t});if(i||i===0)r+=i;r+='\n				<div class="col3 sg-edit-icon tooltip icon-btn-details" data-tooltip=\''+u(n.i18n.call(e,"PROP_SGLIST_TIP_VIEW_DETAIL",{hash:{},data:t}))+'\'></div>\n\n				<div class="col2">\n					<div class="col2-1 truncate"><div class="sg-color" style="background-color:'+u((i=e&&e.color,typeof i===f?i.apply(e):i))+'" ></div><span class="sg-name">'+u((i=e&&e.name,typeof i===f?i.apply(e):i))+'</span></div>\n					<div class="col2-2 truncate">'+u((i=e&&e.desc,typeof i===f?i.apply(e):i))+'</div>\n					<div class="col2-3 truncate">'+u((i=e&&e.ruleCount,typeof i===f?i.apply(e):i))+" "+u(n.i18n.call(e,"PROP_SGLIST_LBL_RULE",{hash:{},data:t}))+", "+u((i=e&&e.memberCount,typeof i===f?i.apply(e):i))+" "+u(n.i18n.call(e,"PROP_SGLIST_LBL_MEMBER",{hash:{},data:t})),i=n["if"].call(e,e&&e.deletable,{hash:{},inverse:a.noop,fn:a.program(7,d,t),data:t});if(i||i===0)r+=i;return r+="</div>\n				</div>\n			</li>\n			",r}function h(e,t){var r="",i;r+='\n					<div class="checkbox-wrap col1">\n						<div class="checkbox">\n							<input class="sg-list-association-check" type="checkbox" ',i=n["if"].call(e,e&&e.used,{hash:{},inverse:a.noop,fn:a.program(5,p,t),data:t});if(i||i===0)r+=i;return r+=' id="sg-list-'+u((i=t==null||t===!1?t:t.index,typeof i===f?i.apply(e):i))+'"/>\n							<label for="sg-list-'+u((i=t==null||t===!1?t:t.index,typeof i===f?i.apply(e):i))+'"></label>\n						</div>\n					</div>\n				',r}function p(e,t){return'checked="checked"'}function d(e,t){var r="",i;return r+=' | <a class="sg-list-delete-btn" data-name="'+u((i=e&&e.name,typeof i===f?i.apply(e):i))+'" data-count="'+u((i=e&&e.memberCount,typeof i===f?i.apply(e):i))+'">'+u(n.i18n.call(e,"PROP_SGLIST_LNK_DELETE",{hash:{},data:t}))+"</a>",r}function v(e,t){var r="";return r+='<a href="javascript:void(0)" class="add-to-list action-link" id="add-sg-btn">'+u(n.i18n.call(e,"PROP_SGLIST_BTN_CREATE_NEW_SG",{hash:{},data:t}))+"</a>",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a=this,f="function";o=n.unless.call(t,t&&t.is_stack_sg,{hash:{},inverse:a.noop,fn:a.program(1,l,i),data:i});if(o||o===0)s+=o;s+='\n\n<div class="tab-content">\n	<div id="item-group" class="active tab-item pos-r">\n		<ul class="acl-sg-info-list property-list" id="sg-info-list">\n			',o=n.each.call(t,t&&t.sg_list,{hash:{},inverse:a.noop,fn:a.program(3,c,i),data:i});if(o||o===0)s+=o;s+="\n		</ul>\n		",o=n.unless.call(t,t&&t.readonly,{hash:{},inverse:a.noop,fn:a.program(9,v,i),data:i});if(o||o===0)s+=o;return s+='\n	</div>\n\n	<div id="item-rule" class="tab-item">\n		<div class="rule-list-sort property-control-group">\n			<h5>'+u(n.i18n.call(t,"PROP_SG_RULE_SORT_BY",{hash:{},data:i}))+'</h5>\n			<div class="selectbox" id="sg-rule-filter-select">\n				<div class="selection">'+u(n.i18n.call(t,"PROP_SG_RULE_SORT_BY_DIRECTION",{hash:{},data:i}))+'</div>\n				<ul class="dropdown" tabindex="-1">\n					<li class="item selected" data-id="direction">'+u(n.i18n.call(t,"PROP_SG_RULE_SORT_BY_DIRECTION",{hash:{},data:i}))+'</li>\n					<li class="item" data-id="relation">'+u(n.i18n.call(t,"PROP_SG_RULE_SORT_BY_SRC_DEST",{hash:{},data:i}))+'</li>\n					<li class="item" data-id="protocol">'+u(n.i18n.call(t,"PROP_SG_RULE_SORT_BY_PROTOCOL",{hash:{},data:i}))+'</li>\n				</ul>\n			</div>\n		</div>\n		<ul class="sg-rule-list property-list" id="sglist-rule-list"> </ul>\n	</div>\n</div>',s};return e.template(t)}),function(){define("workspaces/editor/property/sglist/view",["./template/stack"],function(e){var t;return t=Backbone.View.extend({events:{"click #sg-info-list .sg-edit-icon":"openSgPanel","click #add-sg-btn":"openSgPanel","click .sg-list-association-check":"assignSGToComp","click .sg-list-delete-btn":"deleteSGFromComp","OPTION_CHANGE #sg-rule-filter-select":"sortSgRule"},render:function(){return this.model.getSGInfoList(),this.setElement($(".sg-group")),this.$el.html(e(this.model.attributes)),$("#sglist-rule-list").html(MC.template.sgRuleList(this.model.attributes.sg_rule_list)),$("#property-head-sg-num").text(this.model.attributes.sg_length)},openSgPanel:function(e){var t;return e.currentTarget.id==="add-sg-btn"?t=this.model.createNewSG():t=$(e.currentTarget).closest("li").attr("data-uid"),this.trigger("OPEN_SG",t)},refreshSGList:function(){return this.render()},assignSGToComp:function(e){var t,n,r,i;return n=$(e.currentTarget),t=n.closest("#sg-info-list").find(":checked"),t.length===0?!1:(i=n.closest("li").attr("data-uid"),r=n.prop("checked"),this.model.assignSG(i,r),this.render(),null)},deleteSGFromComp:function(e){var t,n,r,i,s,o,u,a;return u=this,t=$(e.currentTarget),o=t.closest("li").attr("data-uid"),i=Number(t.attr("data-count")),s=t.attr("data-name"),i&&(r="Are you sure you want to delete "+s+"?",n="The firewall settings of "+s+"'s member will be affected. Member only has this security group will be using DefaultSG."),r?(a=MC.template.modalDeleteSGOrACL({title:"Delete Security Group",main_content:r,desc_content:n}),modal(a,!1,function(){return $("#modal-confirm-delete").click(function(){return u.model.deleteSG(o),u.render(),modal.close()})})):(this.model.deleteSG(o),this.render())},sortSgRule:function(e){var t,n;return t=$("#sglist-rule-list"),n=$(e.target).find(".selected").attr("data-id"),this.model.sortSGRule(n),$("#sglist-rule-list").html(MC.template.sgRuleList(this.model.attributes.sg_rule_list))}}),new t})}.call(this),function(){define("workspaces/editor/property/sglist/main",["../base/main","./model","./view"],function(e,t,n){var r,i,s;return n.on("OPEN_SG",function(t){return e.loadSubPanel("SG",t),null}),n.model=t,s=function(){return n.render(),null},r=function(e){return t.parent_model=e,t.resId=e.get("uid")||e.id,n.render(),null},i=function(e){if(e==="SG")return n.render()},{loadModule:r,refresh:s,onUnloadSubPanel:i}})}.call(this),function(){define("workspaces/editor/property/stack/main",["../base/main","./model","./view","../sglist/main","event","Design"],function(e,t,n,r,i,s){var o;return n.on("STACK_NAME_CHANGED",function(e){var t;return t=s.instance(),t.set("name",e),null}),n.on("STACK_DESC_CHANGED",function(e){var t;return t=s.instance(),t.set("description",e),null}),n.on("OPEN_ACL",function(t){return e.loadSubPanel("ACL",t),null}),o=e.extend({handleTypes:["Stack","default"],onUnloadSubPanel:function(e){r.onUnloadSubPanel(e);if(e==="ACL")return this.model.getNetworkACL(),this.view.refreshACLList()},initStack:function(e){return this.model=t,this.model.isApp=!1,this.model.isAppEdit=!1,this.model.isStack=!0,this.view=n,null},afterLoadStack:function(){return r.loadModule(this.model),null},initApp:function(e){return this.model=t,this.model.isApp=!0,this.model.isAppEdit=!1,this.model.isStack=!1,this.view=n,null},afterLoadApp:function(){return r.loadModule(this.model),null},initAppEdit:function(){return this.model=t,this.model.isApp=!1,this.model.isAppEdit=!0,this.model.isStack=!1,this.view=n,null},afterLoadAppEdit:function(){return r.loadModule(this.model),null}}),null})}.call(this),function(){define("workspaces/editor/property/instance/model",["../base/model","constant","event","i18n!/nls/lang.js"],function(e,t,n,r){var i;return i=e.extend({init:function(e){var n,r,i,s,o,u;return i=Design.instance().component(e),r=i!=null?i.toJSON():void 0,r.uid=e,r.classic_stack=!1,r.can_set_ebs=i.isEbsOptimizedEnabled(),r.instance_type=i.getInstanceTypeList(),r.tenancy=i.isDefaultTenancy(),r.displayCount=r.count-1,o=i.getEmbedEni(),r.number_disable=o&&o.connections("RTB_Route").length>0,u=Design.modelClassForType(t.RESTYPE.VPC).allObjects()[0],r.force_tenacy=u&&!u.isDefaultTenancy(),s=Design.instance(),n=s.get("agent"),r.stackAgentEnable=n.enabled,this.set(r),this.getAmi(),this.getKeyPair(),this.getEni(),null},getKeyPair:function(){var e;return e=Design.instance().component(this.get("uid")).connectionTargets("KeypairUsage")[0],e&&this.set("keypair",e.getKPList()),null},addKP:function(e){var n,r,i,s,o;n=Design.modelClassForType(t.RESTYPE.KP),o=n.allObjects();for(i=0,s=o.length;i<s;i++){r=o[i];if(r.get("name")===e)return!1}return r=new n({name:e}),r.id},deleteKP:function(e){return Design.instance().component(e).remove(),null},setKP:function(e){var t,n;return t=Design.instance(),n=t.component(this.get("uid")),t.component(e).assignTo(n),null},setCount:function(e){return Design.instance().component(this.get("uid")).setCount(e)},setEbsOptimized:function(e){return Design.instance().component(this.get("uid")).set("ebsOptimized",e)},setTenancy:function(e){return Design.instance().component(this.get("uid")).setTenancy(e)},setMonitoring:function(e){return Design.instance().component(this.get("uid")).set("monitoring",e)},setUserData:function(e){return Design.instance().component(this.get("uid")).set("userData",e)},setEniDescription:function(e){return Design.instance().component(this.get("uid")).getEmbedEni().set("description",e)},setSourceCheck:function(e){return Design.instance().component(this.get("uid")).getEmbedEni().set("sourceDestCheck",e)},setPublicIp:function(e){Design.instance().component(this.get("uid")).getEmbedEni().set("assoPublicIp",e);if(e)return Design.modelClassForType(t.RESTYPE.IGW).tryCreateIgw()},getAmi:function(){var e,t,n,r,i,s,o,u;return t=this.get("imageId"),n=Design.instance().component(this.get("uid")),e=n.getAmi(),e?r={name:e.name||e.description||e.id,icon:e.osType+"."+e.architecture+"."+e.rootDeviceType+".png"}:r={name:t+" is not available.",icon:"ami-not-available.png",unavailable:!0},this.set("instance_ami",r),e&&e.blockDeviceMapping&&!$.isEmptyObject(e.blockDeviceMapping)&&(o=e.rootDeviceName,s=e.blockDeviceMapping[o],o&&!s&&_.each(e.blockDeviceMapping,function(e,t){return o.indexOf(t)!==-1&&!s&&(s=e,o=t),null}),i=n.get("rdType"),u={name:o,size:parseInt(n.get("rdSize"),10),iops:n.get("rdIops"),encrypted:s.encrypted,isStandard:i==="standard",isIo1:i==="io1",isGp2:i==="gp2"},u.size<10&&(u.iops="",u.iopsDisabled=!0),this.set("rootDevice",u)),this.set("min_volume_size",n.getAmiRootDeviceVolumeSize()),null},canSetInstanceType:function(e){var t,n,i,s;return i=Design.instance().component(this.get("uid")),n=i.connectionTargets("EniAttachment").length+1,t=i.getInstanceTypeConfig(e),s=t?t.max_eni:2,n<=2||n<=s?!0:sprintf(r.ide.PROP_WARN_EXCEED_ENI_LIMIT,e,s)},setInstanceType:function(e){var t;return t=Design.instance().component(this.get("uid")),t.setInstanceType(e),this.getEni(),t.isEbsOptimizedEnabled()},getEni:function(){var e,t,n;n=Design.instance().component(this.get("uid")),e=n.getEmbedEni();if(!e)return;return t=e.toJSON(),t.ips=e.getIpArray(),t.ips[0].unDeletable=!0,this.set("eni",t),this.set("multi_enis",n.connections("EniAttachment").length>0),null},attachEip:function(e,n){return Design.instance().component(this.get("uid")).getEmbedEni().setIp(e,null,null,n),this.attributes.eni.ips[e].hasEip=n,n&&Design.modelClassForType(t.RESTYPE.IGW).tryCreateIgw(),null},removeIp:function(e){return Design.instance().component(this.get("uid")).getEmbedEni().removeIp(e),null},addIp:function(){var e,t;return e=Design.instance().component(this.get("uid")).getEmbedEni(),e.addIp(),t=e.getIpArray(),t[0].unDeletable=!0,this.get("eni").ips=t,null},isValidIp:function(e){return Design.instance().component(this.get("uid")).getEmbedEni().isValidIp(e)},canAddIP:function(){return Design.instance().component(this.get("uid")).getEmbedEni().canAddIp()},setIp:function(e,t,n){return Design.instance().component(this.get("uid")).getEmbedEni().setIp(e,t,n),null},getStateData:function(){return Design.instance().component(this.get("uid")).getStateData()},setIops:function(e){return Design.instance().component(this.get("uid")).set("rdIops",e),null},setVolumeType:function(e){return Design.instance().component(this.get("uid")).set("rdType",e),null},setVolumeSize:function(e){return Design.instance().component(this.get("uid")).set("rdSize",e),null}}),new i})}.call(this),define("workspaces/editor/property/instance/template/stack",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){return"single"}function c(e,t){var r="";return r+='disabled="disabled" data-tooltip="'+u(n.i18n.call(e,"PROP_INSTANCE_TIP_YOU_CANNOT_SPECIFY_INSTANCE_NUMBER",{hash:{},data:t}))+'"',r}function h(e,t){var r="";return r+='data-tooltip="'+u(n.i18n.call(e,"PROP_INSTANCE_TIP_IF_THE_QUANTITY_IS_MORE_THAN_1",{hash:{},data:t}))+'"',r}function p(e,t){return'style="color:red;"'}function d(e,t){var r="",i;r+='\n		<section class="property-control-group">\n			<label class="left">'+u(n.i18n.call(e,"PROP_INSTANCE_TYPE",{hash:{},data:t}))+'</label>\n			<div class="selectbox selectbox-mega" id="instance-type-select">\n				<div class="selection"></div>\n				<ul class="dropdown"> ',i=n.each.call(e,e&&e.instance_type,{hash:{},inverse:a.noop,fn:a.program(10,v,t),data:t});if(i||i===0)r+=i;return r+=" </ul>\n			</div>\n		</section>\n		",r}function v(e,t){var r="",i;r+='\n					<li class="',i=n["if"].call(e,e&&e.selected,{hash:{},inverse:a.noop,fn:a.program(11,m,t),data:t});if(i||i===0)r+=i;r+='tooltip item" tabindex="-1" data-tooltip="'+u((i=e&&e.main,typeof i===f?i.apply(e):i))+'" data-id="'+u((i=e&&e.name,typeof i===f?i.apply(e):i))+'" ',i=n["if"].call(e,e&&e.hide,{hash:{},inverse:a.noop,fn:a.program(13,g,t),data:t});if(i||i===0)r+=i;return r+='>\n						<div class="main truncate">'+u((i=e&&e.main,typeof i===f?i.apply(e):i))+'</div>\n						<div class="sub"><span>'+u((i=e&&e.ecu,typeof i===f?i.apply(e):i))+"</span> <span>"+u((i=e&&e.core,typeof i===f?i.apply(e):i))+"</span> <span>"+u((i=e&&e.mem,typeof i===f?i.apply(e):i))+"</span></div>\n					</li>\n				",r}function m(e,t){return"selected "}function g(e,t){return'style="display:none;"'}function y(e,t){return'checked="checked"'}function b(e,t){var r="",i;r+='\n		<section class="property-control-group">\n			<label class="left">'+u(n.i18n.call(e,"PROP_INSTANCE_TENANCY",{hash:{},data:t}))+'</label>\n			<div class="selectbox" id="tenancy-select">\n				<div class="selection">',i=n["if"].call(e,e&&e.tenancy,{hash:{},inverse:a.program(20,E,t),fn:a.program(18,w,t),data:t});if(i||i===0)r+=i;r+='</div>\n				<ul class="dropdown" tabindex="-1">\n					',i=n.unless.call(e,e&&e.force_tenacy,{hash:{},inverse:a.noop,fn:a.program(22,S,t),data:t});if(i||i===0)r+=i;r+='\n					<li class="item ',i=n.unless.call(e,e&&e.tenancy,{hash:{},inverse:a.noop,fn:a.program(23,x,t),data:t});if(i||i===0)r+=i;return r+='" data-id="dedicated">'+u(n.i18n.call(e,"PROP_INSTANCE_TENANCY_DELICATED",{hash:{},data:t}))+"</li>\n				</ul>\n			</div>\n		</section>\n		",r}function w(e,t){return"Default"}function E(e,t){return"Dedicated"}function S(e,t){var r="",i;r+='\n					<li class="item ',i=n["if"].call(e,e&&e.tenancy,{hash:{},inverse:a.noop,fn:a.program(23,x,t),data:t});if(i||i===0)r+=i;return r+='" data-id="default">'+u(n.i18n.call(e,"PROP_INSTANCE_TENANCY_DEFAULT",{hash:{},data:t}))+"</li>\n					",r}function x(e,t){return"selected"}function T(e,t){return'\n				<input id="property-instance-enable-cloudwatch" type="checkbox" checked="true" value="None" name="property-instance-enable-cloudwatch" />\n				'}function N(e,t){return'\n				<input id="property-instance-enable-cloudwatch" type="checkbox" value="None" name="property-instance-enable-cloudwatch" />\n				'}function C(e,t){return"hide"}function k(e,t){var r="";return r+='\n			<div class="property-info">User Data is disabled to allow installing OpsAgent for VisualOps. <a href="'+u(n.i18n.call(e,"PROP_AGENT_USER_DATA_URL",{hash:{},data:t}))+'" target="_blank">View content</a>.</div>\n			',r}function L(e,t){var r="",i;return r+='\n			<label for="property-instance-user-data">'+u(n.i18n.call(e,"PROP_INSTANCE_USER_DATA",{hash:{},data:t}))+'</label>\n			<textarea id="property-instance-user-data">'+u((i=e&&e.userData,typeof i===f?i.apply(e):i))+"</textarea>\n			",r}function A(e,t){var r="",i;r+='\n	<div class="option-group-head">Root Device</div>\n	<div class="option-group">\n    <section class="property-control-group">\n      <label>'+u(n.i18n.call(e,"PROP_VOLUME_DEVICE_NAME",{hash:{},data:t}))+"</label>\n      <div>"+u((i=(i=e&&e.rootDevice,i==null||i===!1?i:i.name),typeof i===f?i.apply(e):i))+'</div>\n    </section>\n    <section class="property-control-group">\n      <label>'+u(n.i18n.call(e,"PROP_VOLUME_SIZE",{hash:{},data:t}))+'</label>\n      <div class="ranged-number-input">\n          <label for="volume-size-ranged"></label>\n          <input id="volume-size-ranged" type="text" class="input" value="'+u((i=(i=e&&e.rootDevice,i==null||i===!1?i:i.size),typeof i===f?i.apply(e):i))+'" name="volume-size-ranged" data-ignore="true" maxlength="4" data-required="true" data-required="true" data-type="number"/>\n      <label for="volume-property-ranged-number" >GB</label>\n      </div>\n    </section>\n\n    <section class="property-control-group">\n      <label>'+u(n.i18n.call(e,"PROP_VOLUME_TYPE",{hash:{},data:t}))+'</label>\n      <div id="volume-type-radios">\n\n      <div>\n      	<div class="radio">\n          <input id="radio-standard" type="radio" name="volume-type" ',i=n["if"].call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.isStandard),{hash:{},inverse:a.noop,fn:a.program(15,y,t),data:t});if(i||i===0)r+=i;r+=' value="standard"/>\n          <label for="radio-standard"></label>\n        </div>\n        <label for="radio-standard">'+u(n.i18n.call(e,"PROP_VOLUME_TYPE_STANDARD",{hash:{},data:t}))+'</label>\n      </div>\n\n      <div>\n        <div class="radio">\n          <input id="radio-gp2" type="radio" name="volume-type" ',i=n["if"].call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.isGp2),{hash:{},inverse:a.noop,fn:a.program(15,y,t),data:t});if(i||i===0)r+=i;r+=' value="gp2"/>\n          <label for="radio-gp2"></label>\n        </div>\n        <label for="radio-gp2">'+u(n.i18n.call(e,"PROP_VOLUME_TYPE_GP2",{hash:{},data:t}))+"</label>\n      </div>\n\n      <div ",i=n["if"].call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.iopsDisabled),{hash:{},inverse:a.noop,fn:a.program(36,O,t),data:t});if(i||i===0)r+=i;r+=' data-tooltip="'+u(n.i18n.call(e,"PROP_VOLUME_MSG_WARN",{hash:{},data:t}))+'">\n        <div class="radio">\n          <input id="radio-io1" type="radio" name="volume-type" ',i=n["if"].call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.isIo1),{hash:{},inverse:a.noop,fn:a.program(15,y,t),data:t});if(i||i===0)r+=i;r+=" ",i=n["if"].call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.iopsDisabled),{hash:{},inverse:a.noop,fn:a.program(38,M,t),data:t});if(i||i===0)r+=i;r+=' value="io1"/>\n          <label for="radio-io1"></label>\n        </div>\n        <label for="radio-io1">'+u(n.i18n.call(e,"PROP_VOLUME_TYPE_IO1",{hash:{},data:t}))+'</label>\n      </div>\n\n      </div>\n    </section>\n\n    <section class="property-control-group" id="iops-group" ',i=n.unless.call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.isIo1),{hash:{},inverse:a.noop,fn:a.program(40,_,t),data:t});if(i||i===0)r+=i;r+='>\n        <label>IOPS</label>\n        <div class="ranged-number-input">\n          <label for="iops-ranged"></label>\n          <input id="iops-ranged" type="text" class="input" min="100" max="2000" value="'+u((i=(i=e&&e.rootDevice,i==null||i===!1?i:i.iops),typeof i===f?i.apply(e):i))+'">\n        </div>\n    </section>\n\n    <section class="property-control-group">\n        <label>'+u(n.i18n.call(e,"PROP_VOLUME_ENCRYPTED",{hash:{},data:t}))+"</label>\n        <div>",i=n["if"].call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.encrypted),{hash:{},inverse:a.program(44,P,t),fn:a.program(42,D,t),data:t});if(i||i===0)r+=i;return r+="</div>\n    </section>\n\n	</div>\n  ",r}function O(e,t){return'class="tooltip"'}function M(e,t){return"disabled"}function _(e,t){return'style="display:none"'}function D(e,t){return"Encrypted"}function P(e,t){return"Not Encrypted"}function H(e,t){var r="",i;r+='\n	<div class="option-group-head">'+u(n.i18n.call(e,"PROP_INSTANCE_ENI_DETAIL",{hash:{},data:t}))+'</div>\n	<div class="option-group" data-bind="true">\n		<section class="property-control-group">\n			<label class="left" for="property-instance-ni-description">'+u(n.i18n.call(e,"PROP_INSTANCE_ENI_DESC",{hash:{},data:t}))+'</label>\n			<textarea id="property-instance-ni-description" data-type="ascii" data-ignore="true" class="input">'+u((i=(i=e&&e.eni,i==null||i===!1?i:i.description),typeof i===f?i.apply(e):i))+'</textarea>\n		</section>\n		<section class="property-control-group">\n			<div class="checkbox">\n				',i=n["if"].call(e,(i=e&&e.eni,i==null||i===!1?i:i.sourceDestCheck),{hash:{},inverse:a.program(49,j,t),fn:a.program(47,B,t),data:t});if(i||i===0)r+=i;r+='\n				<label for="property-instance-source-check"></label>\n			</div>\n			<label for="property-instance-source-check">'+u(n.i18n.call(e,"PROP_INSTANCE_ENI_SOURCE_DEST_CHECK",{hash:{},data:t}))+"</label>\n		</section>\n		<section ",i=n["if"].call(e,e&&e.multi_enis,{hash:{},inverse:a.program(53,I,t),fn:a.program(51,F,t),data:t});if(i||i===0)r+=i;r+='>\n			<div class="checkbox">\n				<input id="property-instance-public-ip" type="checkbox" ',i=n["if"].call(e,e&&e.multi_enis,{hash:{},inverse:a.noop,fn:a.program(55,q,t),data:t});if(i||i===0)r+=i;r+=" ",i=n["if"].call(e,(i=e&&e.eni,i==null||i===!1?i:i.assoPublicIp),{hash:{},inverse:a.noop,fn:a.program(57,R,t),data:t});if(i||i===0)r+=i;return r+=' value="None" name="property-instance-public-ip" />\n				<label for="property-instance-public-ip"></label>\n			</div>\n			<label for="property-instance-public-ip">'+u(n.i18n.call(e,"PROP_INSTANCE_ENI_AUTO_PUBLIC_IP",{hash:{},data:t}))+'</label>\n		</section>\n		<section class="property-control-group">\n			<div class="network-list-wrap">\n				<div class="network-list-header clearfix">\n					'+u(n.i18n.call(e,"PROP_INSTANCE_ENI_IP_ADDRESS",{hash:{},data:t}))+'\n					<button id="instance-ip-add" class="right btn btn-blue btn-small tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_ENI_TIP_ADD_IP_ADDRESS",{hash:{},data:t}))+'">'+u(n.i18n.call(e,"PROP_INSTANCE_ENI_ADD_IP",{hash:{},data:t}))+'</button>\n				</div>\n				<ul class="network-list" id="property-network-list" data-bind="true"></ul>\n			</div>\n		</section>\n	</div>\n	',r}function B(e,t){return'\n				<input id="property-instance-source-check" type="checkbox" checked="true" value="None" name="property-instance-source-check" />\n				'}function j(e,t){return'\n				<input id="property-instance-source-check" type="checkbox" value="None" name="property-instance-source-check" />\n				'}function F(e,t){var r="";return r+='class="property-control-group tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_INSTANCE_TIP_PUBLIC_IP_CANNOT_BE_ASSOCIATED",{hash:{},data:t}))+'"',r}function I(e,t){return'class="property-control-group"'}function q(e,t){return'disabled="disabled"'}function R(e,t){return'checked="checked" '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a=this,f="function";s+='<article>\n\n	<div class="option-group-head expand">'+u(n.i18n.call(t,"PROP_INSTANCE_DETAIL",{hash:{},data:i}))+'</div>\n	<div class="option-group">\n		<section class="property-control-group" data-bind="true">\n			<label class="left" for="property-instance-name" >'+u(n.i18n.call(t,"PROP_INSTANCE_HOSTNAME",{hash:{},data:i}))+'</label>\n			<span class="required-input right">'+u(n.i18n.call(t,"PROP_INSTANCE_REQUIRE",{hash:{},data:i}))+'</span>\n\n			<div class="property-instance-name-wrap ',o=n.ifCond.call(t,t&&t.count,1,{hash:{},inverse:a.noop,fn:a.program(1,l,i),data:i});if(o||o===0)s+=o;s+='">\n				<div class="name-count-wrap">\n					-[0-<span id="property-instance-name-count">'+u((o=t&&t.displayCount,typeof o===f?o.apply(t):o))+'</span>]\n				</div>\n				<div class="fitfloat">\n					<input class="input instance-name"  type="text" value="'+u((o=t&&t.name,typeof o===f?o.apply(t):o))+'" id="property-instance-name" data-ignore="true" data-required-rollback="true"/>\n				</div>\n			</div>\n\n		</section>\n		<section class="property-control-group" data-bind="true">\n			<label class="left" for="property-instance-count" >'+u(n.i18n.call(t,"PROP_INSTANCE_NUMBER",{hash:{},data:i}))+'</label>\n			<span class="required-input right">'+u(n.i18n.call(t,"PROP_INSTANCE_REQUIRE",{hash:{},data:i}))+'</span>\n			<input class="input tooltip" type="text" value="'+u((o=t&&t.count,typeof o===f?o.apply(t):o))+'" id="property-instance-count" data-ignore="true" data-required="true" data-type="digits" ',o=n["if"].call(t,t&&t.number_disable,{hash:{},inverse:a.program(5,h,i),fn:a.program(3,c,i),data:i});if(o||o===0)s+=o;s+='/>\n		</section>\n		<section class="property-control-group">\n			<label>'+u(n.i18n.call(t,"PROP_INSTANCE_AMI",{hash:{},data:i}))+'</label>\n			<div id="property-ami" class="property-block-wrap clearfix" data-uid=\''+u((o=t&&t.imageId,typeof o===f?o.apply(t):o))+'\'>\n				<img class="property-ami-icon left" src="/assets/images/ide/ami/'+u((o=(o=t&&t.instance_ami,o==null||o===!1?o:o.icon),typeof o===f?o.apply(t):o))+'">\n				<div class="property-ami-label" ',o=n["if"].call(t,(o=t&&t.instance_ami,o==null||o===!1?o:o.unavailable),{hash:{},inverse:a.noop,fn:a.program(7,p,i),data:i});if(o||o===0)s+=o;s+=">"+u((o=(o=t&&t.instance_ami,o==null||o===!1?o:o.name),typeof o===f?o.apply(t):o))+"</div>\n			</div>\n		</section>\n		",o=n["if"].call(t,(o=t&&t.instance_type,o==null||o===!1?o:o.length),{hash:{},inverse:a.noop,fn:a.program(9,d,i),data:i});if(o||o===0)s+=o;s+='\n		<section class="property-control-group" ',o=n.unless.call(t,t&&t.can_set_ebs,{hash:{},inverse:a.noop,fn:a.program(13,g,i),data:i});if(o||o===0)s+=o;s+='>\n			<div class="checkbox">\n				<input id="property-instance-ebs-optimized" type="checkbox" value="None" ',o=n["if"].call(t,t&&t.ebsOptimized,{hash:{},inverse:a.noop,fn:a.program(15,y,i),data:i});if(o||o===0)s+=o;s+=' name="ebs-optimized" />\n				<label for="property-instance-ebs-optimized"></label>\n			</div>\n			<label for="property-instance-ebs-optimized">EBS Optimized</label>\n		</section>\n		',o=n.unless.call(t,t&&t.classic_stack,{hash:{},inverse:a.noop,fn:a.program(17,b,i),data:i});if(o||o===0)s+=o;s+='\n		<section class="property-control-group">\n			<label class="left">'+u(n.i18n.call(t,"PROP_INSTANCE_KEY_PAIR",{hash:{},data:i}))+'</label>\n			<i class="icon-info tooltip default-kp-info" data-tooltip="'+u(n.i18n.call(t,"POP_INSTANCE_KEYPAIR_INFO_TIP",{hash:{},data:i}))+'"></i>\n            <div id="kp-placeholder"></div>\n		</section>\n	</div>\n\n	<div class="option-group-head">'+u(n.i18n.call(t,"PROP_INSTANCE_ADVANCED_DETAIL",{hash:{},data:i}))+'</div>\n	<div class="option-group">\n		<section class="property-control-group">\n			<div class="checkbox">\n				',o=n["if"].call(t,t&&t.monitoring,{hash:{},inverse:a.program(27,N,i),fn:a.program(25,T,i),data:i});if(o||o===0)s+=o;s+='\n				<label for="property-instance-enable-cloudwatch"></label>\n			</div>\n			<label for="property-instance-enable-cloudwatch" >'+u(n.i18n.call(t,"PROP_INSTANCE_CW_ENABLED",{hash:{},data:i}))+'</label>\n\n			<p class="',o=n.unless.call(t,t&&t.monitoring,{hash:{},inverse:a.noop,fn:a.program(29,C,i),data:i});if(o||o===0)s+=o;s+=' property-info" id="property-cloudwatch-warn">'+u(n.i18n.call(t,"PROP_INSTANCE_CW_WARN",{hash:{},data:i}))+'<a target="_blank" href="http://aws.amazon.com/cloudwatch">Amazon Cloud Watch product page</a></p>\n		</section>\n		<section class="property-control-group">\n			',o=n["if"].call(t,t&&t.stackAgentEnable,{hash:{},inverse:a.program(33,L,i),fn:a.program(31,k,i),data:i});if(o||o===0)s+=o;s+="\n		</section>\n	</div>\n\n  ",o=n["if"].call(t,t&&t.rootDevice,{hash:{},inverse:a.noop,fn:a.program(35,A,i),data:i});if(o||o===0)s+=o;s+="\n\n	",o=n["if"].call(t,t&&t.eni,{hash:{},inverse:a.noop,fn:a.program(46,H,i),data:i});if(o||o===0)s+=o;return s+='\n\n	<div class="option-group-head" id="sg-head">'+u(n.i18n.call(t,"PROP_INSTANCE_SG_DETAIL",{hash:{},data:i}))+'<span class="property-head-num-wrap">(<span id="property-head-sg-num"></span>)</span></div>\n  <div class="option-group sg-group"></div>\n</article>',s};return e.template(t)}),function(){define("workspaces/editor/property/instance/view",["../base/view","./template/stack","i18n!/nls/lang.js","constant","kp_dropdown"],function(e,t,n,r,i){var s,o;return o=function(){return null},s=e.extend({events:{"change .instance-name":"instanceNameChange","change #property-instance-count":"countChange","change #property-instance-ebs-optimized":"ebsOptimizedSelect","change #property-instance-enable-cloudwatch":"cloudwatchSelect","change #property-instance-user-data":"userdataChange","change #property-instance-ni-description":"eniDescriptionChange","change #property-instance-source-check":"sourceCheckChange","change #property-instance-public-ip":"publicIpChange","OPTION_CHANGE #instance-type-select":"instanceTypeSelect","OPTION_CHANGE #tenancy-select":"tenancySelect","click #property-ami":"openAmiPanel","OPTION_CHANGE #keypair-select":"setKP","EDIT_UPDATE #keypair-select":"addKP","click #keypair-select .icon-remove":"deleteKP","EDIT_FINISHED #keypair-select":"updateKPSelect","click .toggle-eip":"setEip","click #instance-ip-add":"addIp","click #property-network-list .icon-remove":"removeIp","keyup .input-ip":"syncIPList","click #volume-type-radios input":"changeVolumeType","keyup #iops-ranged":"changeIops","keyup #volume-size-ranged":"sizeChanged"},changeVolumeType:function(e){var t,n,r,i;t=$(e.currentTarget);if(t.is(":disabled"))return;return r=t.val(),$("#iops-group").toggle(r==="io1"),r==="io1"?(i=parseInt($("#volume-size-ranged").val(),10),n=i*10,$("#iops-ranged").val(n).keyup()):(this.model.setIops(""),$("#iops-ranged").val("")),this.model.setVolumeType(r),null},changeIops:function(){return $("#iops-ranged").parsley("validate")&&this.model.setIops($("#iops-ranged").val()),null},sizeChanged:function(e){var t,n,r,i;if(!$("#volume-size-ranged").parsley("validate"))return;return i=parseInt($("#volume-size-ranged").val(),10),this.model.setVolumeSize(i),i<10&&(this.model.setIops(""),r=!0),t=$("#volume-type-radios").children("div").last().toggleClass("tooltip",r).find("input"),r?(t.attr("disabled","disabled"),$("#radio-standard").click(),$("#iops-group").hide()):t.removeAttr("disabled"),n=parseInt($("#iops-ranged").val(),10)||0,n&&(n>i*10&&(n=i*10,$("#iops-ranged").val(n)),$("#iops-ranged").keyup()),null},render:function(){var e,r,s;return this.$el.html(t(this.model.attributes)),e=Design.instance().component(this.model.get("uid")),r=new i({resModel:e}),this.$("#kp-placeholder").html(r.render().el),this.addSubView(r),this.refreshIPList(),s=this,$("#volume-size-ranged").parsley("custom",function(e){e=+e;if(!e||e>1024||e<s.model.attributes.min_volume_size)return sprintf(n.ide.PARSLEY_VOLUME_SIZE_OF_ROOTDEVICE_MUST_IN_RANGE,s.model.attributes.min_volume_size)}),$("#iops-ranged").parsley("custom",function(e){var t;e=+e,t=parseInt($("#volume-size-ranged").val(),10);if(e>4e3||e<100)return n.ide.PARSLEY_IOPS_MUST_BETWEEN_100_4000;if(e>10*t)return n.ide.PARSLEY_IOPS_MUST_BE_LESS_THAN_10_TIMES_OF_VOLUME_SIZE}),this.model.attributes.name},instanceNameChange:function(e){var t,n;return n=$(e.currentTarget),t=n.val(),MC.aws.aws.checkResName(this.model.get("uid"),n,"Instance")&&(this.model.setName(t),this.setTitle(t)),null},countChange:function(e){var t,r,i;t=$(e.currentTarget),r=this,t.parsley("custom",function(e){if(isNaN(e)||e>99||e<1)return n.ide.PARSLEY_THIS_VALUE_MUST_BETWEEN_1_99});if(t.parsley("validate"))return this.refreshIPList(),i=+t.val(),this.model.setCount(i),$(".property-instance-name-wrap").toggleClass("single",i===1),$("#property-instance-name-count").text(i-1),this.setEditableIP(i===1)},setEditableIP:function(e){var t;return t=$("#property-network-list"),e?t.find(".input-ip-wrap").removeClass("disabled").find(".name").data("tooltip",n.ide.PROP_INSTANCE_IP_MSG_1).find(".input-ip").prop("disabled",""):t.find(".input-ip-wrap").addClass("disabled").find(".name").data("tooltip",n.ide.PROP_INSTANCE_IP_MSG_2).find(".input-ip").attr("disabled","disabled"),null},instanceTypeSelect:function(e,t){var n,r,i;r=this.model.canSetInstanceType(t);if(r!==!0){notification("error",r),e.preventDefault();return}return i=this.model.setInstanceType(t),n=$("#property-instance-ebs-optimized"),n.closest(".property-control-group").toggle(i),i||n.prop("checked",!1),this.refreshIPList()},ebsOptimizedSelect:function(e){return this.model.setEbsOptimized(e.target.checked),null},tenancySelect:function(e,t){var n,r,i;return r=$("#instance-type-select"),n=r.find("[data-id='t1.micro']"),n.length&&(i=t!=="dedicated",n.toggle(i),n.hasClass("selected")&&!i&&r.find(".item:not([data-id='t1.micro'])").eq(0).click()),this.model.setTenancy(t),null},cloudwatchSelect:function(e){return this.model.setMonitoring(e.target.checked),$("#property-cloudwatch-warn").toggle($("#property-instance-enable-cloudwatch").is(":checked"))},userdataChange:function(e){return this.model.setUserData(e.target.value),null},eniDescriptionChange:function(e){return this.model.setEniDescription(e.target.value),null},sourceCheckChange:function(e){return this.model.setSourceCheck(e.target.checked),null},publicIpChange:function(e){return this.model.setPublicIp(e.target.checked),null},updateKPSelect:function(){return $("#keypair-select").find(".item:last-child").append('<span class="icon-remove"></span>'),null},openAmiPanel:function(e){return this.trigger("OPEN_AMI",$("#property-ami").attr("data-uid")),null},bindIpItemValidate:function(){var e;return e=this,$(".input-ip").each(function(){var t;return t=$(this),t.parsley("custom",function(n){var r,i,s,o,u,a,f;f=t,i=n,s=f.siblings(".input-ip-prefix").text(),r=s+i,u=s.split("."),o=!1,u.length===4?i==="x"?o=!0:MC.validate("ipaddress",s+i)&&(o=!0):i==="x.x"?o=!0:MC.validate("ipaddress",s+i)&&(o=!0);if(!o)return"Invalid IP address";a=e.model.isValidIp(r);if(a!==!0)return a})})},addIp:function(){if($("#instance-ip-add").hasClass("disabled"))return;return this.model.addIp(),this.refreshIPList(),null},removeIp:function(e){var t,n;return t=$(e.currentTarget).closest("li"),n=t.index(),t.remove(),this.model.removeIp(n),this.updateIPAddBtnState(!0),null},setEip:function(e){var t,r,i,s;return t=$(e.currentTarget),i=t.closest("li").index(),r=!t.hasClass("associated"),r?s=n.ide.PROP_INSTANCE_IP_MSG_4:s=n.ide.PROP_INSTANCE_IP_MSG_3,t.toggleClass("associated",r).data("tooltip",s),this.model.attachEip(i,r),null},syncIPList:function(e){var t,n,r,i,s;i=$("#property-network-list .input-ip-item"),t=$(e.currentTarget);if(!t.parsley("validate"))return;return s=t.val(),r=t.siblings(".input-ip-prefix").text()+s,n=s==="x"||s==="x.x",this.model.setIp(t.closest("li").index(),r,n),null},refreshIPList:function(){if(!this.model.attributes.eni)return;return $("#property-network-list").html(MC.template.propertyIpList(this.model.attributes.eni.ips)),this.updateIPAddBtnState(),this.bindIpItemValidate(),null},updateIPAddBtnState:function(e){var t;return e===void 0&&(e=this.model.canAddIP()),e===!0?t="Add IP Address":(_.isString(e)?t=e:t="Cannot add IP address",e=!1),$("#instance-ip-add").toggleClass("disabled",!e).data("tooltip",t),null},disableUserDataInput:function(e){var t;t=$("#property-instance-user-data");if(e===!0)return t.attr("disabled","disabled"),t.addClass("tooltip").attr("data-tooltip",n.ide.PROP_INSTANCE_USER_DATA_DISABLE);if(e===!1)return t.removeAttr("disabled"),t.removeClass("tooltip").removeAttr("data-tooltip")}}),new s})}.call(this),function(){define("workspaces/editor/property/instance/app_model",["../base/model","keypair_model","keypair_service","instance_model","instance_service","constant","i18n!/nls/lang.js","Design","CloudResources"],function(e,t,n,r,i,s,o,u,a){var f;return f=e.extend({defaults:{id:null},setOsTypeAndLoginCmd:function(e){var t,n,r,i,o,f,l,c;f=u.instance().region(),n=(l=a(s.RESTYPE.INSTANCE,f).get(e))!=null?l.toJSON():void 0,n&&(o=(c=a(s.RESTYPE.AMI,f).get(n.imageId))!=null?c.toJSON():void 0,o&&(o=o.osType));if(!o)return;"win|windows".indexOf(o)>0?this.set("osType","windows"):this.set("osType",o),n&&(r=n.instanceState.name);if(r==="running")switch(o){case"amazon":i="ec2-user";break;case"ubuntu":i="ubuntu";break;case"redhat":i="ec2-user";break;default:i="root"}return t=sprintf("ssh -i %s.pem %s@%s",n.keyName,i,n.publicIpAddress||n.privateIpAddress),this.set("loginCmd",t)},init:function(e){var t,n,r,i,o,f,l,c,h,p,d,v,m,g,y,b;this.set("id",e),this.set("uid",e),l=u.instance().component(e),l?e=l.get("appId"):(r=u.modelClassForType(s.RESTYPE.INSTANCE).getEffectiveId(e),l=u.instance().component(r.uid),this.set("uid",r.uid),this.set("mid",r.mid)),l||void 0,t=a(s.RESTYPE.INSTANCE,u.instance().region());if(!(t!=null?(m=t.get(e))!=null?m.toJSON():void 0:void 0))return!1;o=$.extend(!0,{},(g=t.get(e))!=null?g.toJSON():void 0),o.name=l?l.get("name"):e,c=l.getAmiRootDeviceName(),o.state=MC.capitalize(o.instanceState.name),o.blockDevice="";if(o.blockDeviceMapping&&o.blockDeviceMapping){n=[],y=o.blockDeviceMapping;for(d=0,v=y.length;d<v;d++)i=y[d],n.push(i.deviceName),c===i.deviceName&&(h=i);o.blockDevice=n.join(", "),h&&(p=(b=a(s.RESTYPE.VOL,u.instance().region()).get(h.ebs.volumeId))!=null?b.toJSON():void 0,p&&(p.attachmentSet&&(p.name=p.attachmentSet[0].device),this.set("rootDevice",p)))}return o.eni=this.getEniData(o),o.app_view=!1,f="disabled",o.monitoring&&o.monitoring.state&&(f=o.monitoring.state),this.set("monitoringState",f),this.set(o),this.resModel=l,this.setOsTypeAndLoginCmd(e),null},getEniData:function(e){var t,n,r,i,o,f,l,c,h,p,d,v,m,g,y,b,w,E;if(!e.networkInterfaceSet)return null;b=e.networkInterfaceSet;for(p=0,m=b.length;p<m;p++){c=b[p];if(c.attachment.deviceIndex==="0"){h=c.networkInterfaceId,f=c;break}}n=s.RESTYPE.ENI;if(!h)return null;t=u.modelClassForType(n),r=t&&t.allObjects()||[];for(d=0,g=r.length;d<g;d++){l=r[d];if(l.get("appId"===h)){o=l;break}}i=a(s.RESTYPE.ENI,u.instance().region()),i.get(h)?f=$.extend(!0,{},(w=i.get(h))!=null?w.toJSON():void 0):f=$.extend(!0,{},f),f.name=o?o.get("name"):h,f.status==="in-use"&&(f.isInUse=!0),f.sourceDestCheck=f.sourceDestCheck?"enabled":"disabled",E=f.privateIpAddressesSet;for(v=0,y=E.length;v<y;v++)c=E[v],c.primary=c.primary===!0;return f},genPasswordHandler:function(e){var t;return t=this,function(n){var r,i,s,u,a,f,l,c;l=n.param[3],s=n.param[4],a=n.param[5],i=null,u=null,c=null,f=null,r=t.get("instanceId");if(r!==s)return;return n.is_error?(notification("error",o.ide.PROP_MSG_ERR_GET_PASSWD_FAILED),a=null,null):(n.resolved_data&&(c=n.resolved_data.passwordData),e==="check"?t.trigger("PASSWORD_STATE",!!c):e==="download"?t.trigger("KEYPAIR_DOWNLOAD",!0,c,n.param[5]):t.trigger("PASSWORD_GOT",c),null)}},getPasswordData:function(e,t){var n,r,s,o;return r=this.get("instanceId"),o=$.cookie("usercode"),s=$.cookie("session_id"),n=this.genPasswordHandler(t?"check":void 0),i.GetPasswordData(null,o,s,u.instance().region(),r,e).then(n),null},downloadKp:function(e){var t,r,s,o,a;return o=this,a=$.cookie("usercode"),s=$.cookie("session_id"),r=u.instance().region(),t=this.genPasswordHandler("download"),n.download(null,a,s,r,e).then(function(e){var n,u;return e.is_error?o.trigger("KEYPAIR_DOWNLOAD",!1,e.resolved_data):o.get("osType")==="windows"?(n=o.get("instanceId"),u=e.resolved_data,i.GetPasswordData(null,a,s,r,n,u).then(t)):o.trigger("KEYPAIR_DOWNLOAD",!0,e.resolved_data)}),null},getEni:function(){var e,t,n;n=u.instance().component(this.get("uid")),e=n.getEmbedEni();if(!e)return;return t=e.toJSON(),t.ips=e.getIpArray(),t.ips[0].unDeletable=!0,this.set("eni",t),this.set("multi_enis",n.connections("EniAttachment").length>0),null}}),new f})}.call(this),define("workspaces/editor/property/instance/template/app",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var r="",i;r+="\n      <dd>",i=n["if"].call(e,e&&e.keyName,{hash:{},inverse:f.program(4,h,t),fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;return r+="</dd>\n      ",r}function c(e,t){var n;return a((n=e&&e.keyName,typeof n===u?n.apply(e):n))}function h(e,t){return"No Key Pair"}function p(e,t){var r="",i;r+="\n      <dd>\n        ",i=n["if"].call(e,e&&e.keyName,{hash:{},inverse:f.program(12,g,t),fn:f.program(7,d,t),data:t});if(i||i===0)r+=i;return r+="\n      </dd>\n      ",r}function d(e,t){var r="",i;r+="\n            ",i=n["if"].call(e,e&&e.windows,{hash:{},inverse:f.program(10,m,t),fn:f.program(8,v,t),data:t});if(i||i===0)r+=i;return r+="\n        ",r}function v(e,t){var n="",r;return n+="\n                "+a((r=e&&e.keyName,typeof r===u?r.apply(e):r))+'\n                <button class="btn btn-blue" id="property-app-keypair">Get Windows Password</button>\n            ',n}function m(e,t){var n="",r;return n+='\n                <a href="#" id="property-app-keypair">'+a((r=e&&e.keyName,typeof r===u?r.apply(e):r))+"</a>\n            ",n}function g(e,t){return"\n          No Key Pair\n        "}function y(e,t){var r="",i;r+='\n  <div class="option-group-head">Root Device</div>\n  <div class="option-group">\n    <article class="property-app">\n      <dl class="dl-vertical">\n        <dt>'+a(n.i18n.call(e,"PROP_VOLUME_ID",{hash:{},data:t}))+"</dt>\n        <dd>"+a(n.emptyStr.call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.volumeId),{hash:{},data:t}))+"</dd>\n        <dt>"+a(n.i18n.call(e,"PROP_VOLUME_DEVICE_NAME",{hash:{},data:t}))+"</dt>\n        <dd>"+a(n.emptyStr.call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.name),{hash:{},data:t}))+"</dd>\n        <dt>"+a(n.i18n.call(e,"PROP_VOLUME_STATE",{hash:{},data:t}))+'</dt>\n        <dd><i class="status status-'+a((i=(i=e&&e.rootDevice,i==null||i===!1?i:i.status),typeof i===u?i.apply(e):i))+'"></i>'+a((i=(i=e&&e.rootDevice,i==null||i===!1?i:i.status),typeof i===u?i.apply(e):i))+"</dd>\n        <dt>"+a(n.i18n.call(e,"PROP_VOLUME_CREATE_TIME",{hash:{},data:t}))+"</dt>\n        <dd>"+a(n.timeStr.call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.createTime),{hash:{},data:t}))+'</dd>\n      </dl>\n      <dl class="dl-vertical">\n        <dt>'+a(n.i18n.call(e,"PROP_VOLUME_TYPE",{hash:{},data:t}))+"</dt>\n        <dd>"+a(n.readableVt.call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.volumeType),{hash:{},data:t}))+"</dd>\n        ",i=n["if"].call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.snapshotId),{hash:{},inverse:f.noop,fn:f.program(15,b,t),data:t});if(i||i===0)r+=i;r+="\n        <dt>"+a(n.i18n.call(e,"PROP_VOLUME_SIZE",{hash:{},data:t}))+"</dt>\n        <dd>"+a(n.emptyStr.call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.size),{hash:{},data:t}))+" GB</dd>\n        <dt>"+a(n.i18n.call(e,"PROP_VOLUME_ENCRYPTED",{hash:{},data:t}))+"</dt>\n        <dd>",i=n["if"].call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.encrypted),{hash:{},inverse:f.program(19,E,t),fn:f.program(17,w,t),data:t});if(i||i===0)r+=i;r+="</dd>\n        ",i=n["if"].call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.iops),{hash:{},inverse:f.noop,fn:f.program(21,S,t),data:t});if(i||i===0)r+=i;return r+='\n      </dl>\n      <dl class="dl-vertical">\n        <dt>'+a(n.i18n.call(e,"PROP_VOLUME_ATTACHMENT_STATE",{hash:{},data:t}))+"</dt>\n        <dd>"+a(n.emptyStr.call(e,(i=(i=(i=e&&e.rootDevice,i==null||i===!1?i:i.attachmentSet),i==null||i===!1?i:i[0]),i==null||i===!1?i:i.state),{hash:{},data:t}))+"</dd>\n        <dt>"+a(n.i18n.call(e,"PROP_VOLUME_INSTANCE_ID",{hash:{},data:t}))+"</dt>\n        <dd>"+a(n.emptyStr.call(e,(i=(i=(i=e&&e.rootDevice,i==null||i===!1?i:i.attachmentSet),i==null||i===!1?i:i[0]),i==null||i===!1?i:i.instanceId),{hash:{},data:t}))+"</dd>\n        <dt>"+a(n.i18n.call(e,"PROP_VOLUME_ATTACHMENT_TIME",{hash:{},data:t}))+"</dt>\n        <dd>"+a(n.timeStr.call(e,(i=(i=(i=e&&e.rootDevice,i==null||i===!1?i:i.attachmentSet),i==null||i===!1?i:i[0]),i==null||i===!1?i:i.attachTime),{hash:{},data:t}))+"</dd>\n      </dl>\n    </article>\n  </div>\n  ",r}function b(e,t){var r="",i;return r+="\n        <dt>"+a(n.i18n.call(e,"PROP_VOLUME_SNAPSHOT_ID",{hash:{},data:t}))+"</dt>\n        <dd>"+a((i=(i=e&&e.rootDevice,i==null||i===!1?i:i.snapshotId),typeof i===u?i.apply(e):i))+"</dd>\n        ",r}function w(e,t){return"Encrypted"}function E(e,t){return"Not Encrypted"}function S(e,t){var n="",r;return n+="\n        <dt>IOPS</dt>\n        <dd>"+a((r=(r=e&&e.rootDevice,r==null||r===!1?r:r.iops),typeof r===u?r.apply(e):r))+"</dd>\n        ",n}function x(e,t){var r="",i;r+='\n  <div class="option-group-head">'+a(n.i18n.call(e,"PROP_INSTANCE_ENI_DETAIL",{hash:{},data:t}))+'</div>\n  <div class="option-group">\n    <dl class="dl-vertical">\n      <dt>'+a(n.i18n.call(e,"PROP_ENI_DEVICE_NAME",{hash:{},data:t}))+"</dt>\n      <dd>"+a((i=(i=e&&e.eni,i==null||i===!1?i:i.name),typeof i===u?i.apply(e):i))+"</dd>\n\n      <dt>"+a(n.i18n.call(e,"PROP_ENI_ID",{hash:{},data:t}))+"</dt>\n      <dd>"+a((i=(i=e&&e.eni,i==null||i===!1?i:i.networkInterfaceId),typeof i===u?i.apply(e):i))+"</dd>\n\n      <dt>"+a(n.i18n.call(e,"PROP_ENI_STATE",{hash:{},data:t}))+'</dt>\n      <dd><i class="status status-'+a((i=(i=e&&e.eni,i==null||i===!1?i:i.status),typeof i===u?i.apply(e):i))+'"></i>'+a((i=(i=e&&e.eni,i==null||i===!1?i:i.status),typeof i===u?i.apply(e):i))+"</dd>\n\n      ",i=n["if"].call(e,(i=e&&e.eni,i==null||i===!1?i:i.description),{hash:{},inverse:f.noop,fn:f.program(24,T,t),data:t});if(i||i===0)r+=i;r+="\n\n      <dt>"+a(n.i18n.call(e,"PROP_INSTANCE_ENI_SOURCE_DEST_CHECK_DISP",{hash:{},data:t}))+"</dt>\n      <dd>"+a((i=(i=e&&e.eni,i==null||i===!1?i:i.sourceDestCheck),typeof i===u?i.apply(e):i))+'</dd>\n    </dl>\n\n    <div class="hidden-details">\n      <a href="#" class="toggle-details js-toggle-dropdown" data-toggle="self-only"><span class="details-off">+ '+a(n.i18n.call(e,"PROP_ENI_SHOW_DETAIL",{hash:{},data:t}))+'</span><span class="details-on">- '+a(n.i18n.call(e,"PROP_ENI_HIDE_DETAIL",{hash:{},data:t}))+'</span></a>\n\n      <dl class="dl-vertical">\n        <dt>'+a(n.i18n.call(e,"PROP_ENI_VPC_ID",{hash:{},data:t}))+"</dt>\n        <dd>"+a((i=(i=e&&e.eni,i==null||i===!1?i:i.vpcId),typeof i===u?i.apply(e):i))+"</dd>\n\n        <dt>"+a(n.i18n.call(e,"PROP_ENI_SUBNET_ID",{hash:{},data:t}))+"</dt>\n        <dd>"+a((i=(i=e&&e.eni,i==null||i===!1?i:i.subnetId),typeof i===u?i.apply(e):i))+"</dd>\n\n        ",i=n["if"].call(e,(i=e&&e.eni,i==null||i===!1?i:i.attachment),{hash:{},inverse:f.noop,fn:f.program(26,N,t),data:t});if(i||i===0)r+=i;r+='\n      </dl>\n      <dl class="dl-vertical">\n        <dt>'+a(n.i18n.call(e,"PROP_ENI_MAC_ADDRESS",{hash:{},data:t}))+"</dt>\n        <dd>"+a(n.emptyStr.call(e,(i=e&&e.eni,i==null||i===!1?i:i.macAddress),{hash:{},data:t}))+"</dd>\n\n        ",i=n["if"].call(e,(i=(i=e&&e.eni,i==null||i===!1?i:i.association),i==null||i===!1?i:i.publicDnsName),{hash:{},inverse:f.noop,fn:f.program(28,C,t),data:t});if(i||i===0)r+=i;r+="\n        ",i=n["if"].call(e,(i=e&&e.eni,i==null||i===!1?i:i.privateDnsName),{hash:{},inverse:f.noop,fn:f.program(30,k,t),data:t});if(i||i===0)r+=i;r+="\n        ",i=n["if"].call(e,(i=e&&e.eni,i==null||i===!1?i:i.ownerId),{hash:{},inverse:f.noop,fn:f.program(32,L,t),data:t});if(i||i===0)r+=i;r+='\n      </dl>\n    </div>\n    <table class="table table-small">\n      <tr>\n        <th>'+a(n.i18n.call(e,"PROP_INSTANCE_ENI_IP_ADDRESS",{hash:{},data:t}))+"</th>\n        <th>"+a(n.i18n.call(e,"PROP_INSTANCE_PUBLIC_IP",{hash:{},data:t}))+"</th>\n      </tr>\n      ",i=n.each.call(e,(i=e&&e.eni,i==null||i===!1?i:i.privateIpAddressesSet),{hash:{},inverse:f.noop,fn:f.program(34,A,t),data:t});if(i||i===0)r+=i;return r+="\n    </table>\n\n  </div>\n  ",r}function T(e,t){var r="",i;return r+="\n      <dt>"+a(n.i18n.call(e,"PROP_ENI_LBL_DESC",{hash:{},data:t}))+"</dt>\n      <dd>"+a((i=(i=e&&e.eni,i==null||i===!1?i:i.description),typeof i===u?i.apply(e):i))+"</dd>\n      ",r}function N(e,t){var r="",i;return r+="\n        <dt>"+a(n.i18n.call(e,"PROP_ENI_ATTACHMENT_ID",{hash:{},data:t}))+"</dt>\n        <dd>"+a(n.emptyStr.call(e,(i=(i=e&&e.eni,i==null||i===!1?i:i.attachment),i==null||i===!1?i:i.attachmentId),{hash:{},data:t}))+"</dd>\n\n        <dt>"+a(n.i18n.call(e,"PROP_ENI_Attachment_OWNER",{hash:{},data:t}))+"</dt>\n        <dd>"+a(n.emptyStr.call(e,(i=e&&e.eni,i==null||i===!1?i:i.instanceOwnerId),{hash:{},data:t}))+"</dd>\n\n        <dt>"+a(n.i18n.call(e,"PROP_ENI_Attachment_STATE",{hash:{},data:t}))+"</dt>\n        <dd>"+a(n.emptyStr.call(e,(i=(i=e&&e.eni,i==null||i===!1?i:i.attachment),i==null||i===!1?i:i.status),{hash:{},data:t}))+"</dd>\n        ",r}function C(e,t){var r="",i;return r+="\n        <dt>"+a(n.i18n.call(e,"PROP_INSTANCE_PUBLIC_DNS",{hash:{},data:t}))+"</dt>\n        <dd>"+a((i=(i=(i=e&&e.eni,i==null||i===!1?i:i.association),i==null||i===!1?i:i.publicDnsName),typeof i===u?i.apply(e):i))+"</dd>\n        ",r}function k(e,t){var r="",i;return r+="\n        <dt>"+a(n.i18n.call(e,"PROP_INSTANCE_PRIVATE_DNS",{hash:{},data:t}))+"</dt>\n        <dd>"+a((i=(i=e&&e.eni,i==null||i===!1?i:i.privateDnsName),typeof i===u?i.apply(e):i))+"</dd>\n        ",r}function L(e,t){var r="",i;return r+="\n        <dt>"+a(n.i18n.call(e,"PROP_ENI_IP_OWNER",{hash:{},data:t}))+"</dt>\n        <dd>"+a((i=(i=e&&e.eni,i==null||i===!1?i:i.ownerId),typeof i===u?i.apply(e):i))+"</dd>\n        ",r}function A(e,t){var r="",i;r+="\n      <tr>\n        <td>"+a((i=e&&e.privateIpAddress,typeof i===u?i.apply(e):i)),i=n["if"].call(e,e&&e.primary,{hash:{},inverse:f.noop,fn:f.program(35,O,t),data:t});if(i||i===0)r+=i;r+="</td>\n        <td>",i=n["if"].call(e,(i=e&&e.association,i==null||i===!1?i:i.publicIp),{hash:{},inverse:f.program(39,_,t),fn:f.program(37,M,t),data:t});if(i||i===0)r+=i;return r+="</td>\n      </tr>\n      ",r}function O(e,t){return"<span>(Primary)</span>"}function M(e,t){var n;return a((n=(n=e&&e.association,n==null||n===!1?n:n.publicIp),typeof n===u?n.apply(e):n))}function _(e,t){return"-"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<article class="property-app">\n  <div class="option-group-head expand">'+a(n.i18n.call(t,"PROP_INSTANCE_DETAIL",{hash:{},data:i}))+'\n  <a href="#" class="icon-syslog tooltip property-btn-get-system-log action-link" data-tooltip="'+a(n.i18n.call(t,"PROP_INSTANCE_TIP_GET_SYSTEM_LOG",{hash:{},data:i}))+'" ></a>\n</div>\n  <div class="option-group">\n    <dl class="dl-vertical">\n      <dt>'+a(n.i18n.call(t,"PROP_INSTANCE_INSTANCE_ID",{hash:{},data:i}))+"</dt>\n      <dd>"+a((o=t&&t.instanceId,typeof o===u?o.apply(t):o))+"</dd>\n\n      <dt>"+a(n.i18n.call(t,"PROP_INSTANCE_STATE",{hash:{},data:i}))+'</dt>\n      <dd><i class="status status-'+a((o=t&&t.state,typeof o===u?o.apply(t):o))+'"></i>'+a((o=t&&t.state,typeof o===u?o.apply(t):o))+"</dd>\n\n      <dt>"+a(n.i18n.call(t,"PROP_INSTANCE_LAUNCH_TIME",{hash:{},data:i}))+"</dt>\n      <dd>"+a(n.timeStr.call(t,t&&t.launchTime,{hash:{},data:i}))+'</dd>\n    </dl>\n\n    <dl class="dl-vertical">\n      <dt>'+a(n.i18n.call(t,"PROP_INSTANCE_PRIMARY_PUBLIC_IP",{hash:{},data:i}))+"</dt>\n      <dd>"+a(n.emptyStr.call(t,t&&t.publicIpAddress,{hash:{},data:i}))+"</dd>\n\n      <dt>"+a(n.i18n.call(t,"PROP_INSTANCE_PUBLIC_DNS",{hash:{},data:i}))+'</dt>\n      <dd class="click-select tooltip" data-tooltip="'+a(n.i18n.call(t,"PROP_ELB_TIP_CLICK_TO_SELECT_ALL",{hash:{},data:i}))+'">'+a(n.emptyStr.call(t,t&&t.dnsName,{hash:{},data:i}))+"</dd>\n\n      <dt>"+a(n.i18n.call(t,"PROP_INSTANCE_PRIMARY_PRIVATE_IP",{hash:{},data:i}))+"</dt>\n      <dd>"+a(n.emptyStr.call(t,t&&t.privateIpAddress,{hash:{},data:i}))+"</dd>\n\n      <dt>"+a(n.i18n.call(t,"PROP_INSTANCE_PRIVATE_DNS",{hash:{},data:i}))+'</dt>\n      <dd class="click-select tooltip" data-tooltip="'+a(n.i18n.call(t,"PROP_ELB_TIP_CLICK_TO_SELECT_ALL",{hash:{},data:i}))+'">'+a(n.emptyStr.call(t,t&&t.privateDnsName,{hash:{},data:i}))+'</dd>\n    </dl>\n\n    <dl class="dl-vertical">\n      <dt>'+a(n.i18n.call(t,"PROP_INSTANCE_AMI",{hash:{},data:i}))+'</dt>\n      <dd><a href="#" data-uid="'+a((o=t&&t.imageId,typeof o===u?o.apply(t):o))+'" id="property-app-ami">'+a((o=t&&t.imageId,typeof o===u?o.apply(t):o))+"</a><dd>\n\n      <dt>"+a(n.i18n.call(t,"PROP_INSTANCE_TYPE",{hash:{},data:i}))+"</dt>\n      <dd>"+a((o=t&&t.instanceType,typeof o===u?o.apply(t):o))+"</dd>\n\n      <dt>"+a(n.i18n.call(t,"PROP_INSTANCE_KEY_PAIR",{hash:{},data:i}))+"</dt>\n      ",o=n["if"].call(t,t&&t.app_view,{hash:{},inverse:f.program(6,p,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+="\n\n      <dt>"+a(n.i18n.call(t,"PROP_INSTANCE_CLOUDWATCH_DETAILED_MONITORING",{hash:{},data:i}))+"</dt>\n      <dd>"+a((o=t&&t.monitoringState,typeof o===u?o.apply(t):o))+'</dd>\n\n    </dl>\n\n    <dl class="dl-vertical">\n      <dt>'+a(n.i18n.call(t,"PROP_INSTANCE_EBS_OPTIMIZED",{hash:{},data:i}))+"</dt>\n      <dd>"+a(n.emptyStr.call(t,t&&t.ebsOptimized,{hash:{},data:i}))+"<dd>\n\n      <dt>"+a(n.i18n.call(t,"PROP_INSTANCE_TENANCY",{hash:{},data:i}))+"</dt>\n      <dd>"+a(n.emptyStr.call(t,(o=t&&t.placement,o==null||o===!1?o:o.tenancy),{hash:{},data:i}))+"</dd>\n\n      <dt>"+a(n.i18n.call(t,"PROP_INSTANCE_ROOT_DEVICE_TYPE",{hash:{},data:i}))+"</dt>\n      <dd>"+a(n.emptyStr.call(t,t&&t.rootDeviceType,{hash:{},data:i}))+"</dd>\n\n      <dt>"+a(n.i18n.call(t,"PROP_INSTANCE_BLOCK_DEVICE",{hash:{},data:i}))+"</dt>\n      <dd>"+a(n.emptyStr.call(t,t&&t.blockDevice,{hash:{},data:i}))+"</dd>\n    </dl>\n  </div>\n\n  ",o=n["if"].call(t,t&&t.rootDevice,{hash:{},inverse:f.noop,fn:f.program(14,y,i),data:i});if(o||o===0)s+=o;s+="\n\n  ",o=n["if"].call(t,t&&t.eni,{hash:{},inverse:f.noop,fn:f.program(23,x,i),data:i});if(o||o===0)s+=o;return s+='\n\n  <div class="option-group-head"> '+a(n.i18n.call(t,"PROP_INSTANCE_SG_DETAIL",{hash:{},data:i}))+'<span class="property-head-num-wrap">(<span id="property-head-sg-num"></span>)</span></div>\n  <div class="option-group sg-group"></div>\n\n</article>',s};return e.template(t)}),function(){define("workspaces/editor/property/instance/app_view",["../base/view","./template/app","i18n!/nls/lang.js","instance_model","kp_upload","Design","JsonExporter"],function(e,t,n,r,i,s,o){var u,a,f;return a=o.download,f=function(e,t){return function(){var n;return $("body").hasClass("safari")?n=null:n=new Blob([t]),n?(a(n,e),null):{data:"data://text/plain;,"+t,name:e}}},u=e.extend({__kpUpload:null,events:{"click #property-app-keypair":"keyPairClick","click #property-app-ami":"openAmiPanel","click .property-btn-get-system-log":"openSysLogModal"},kpModalClosed:!1,render:function(){var e;return e=this.model.toJSON(),e.windows=this.model.get("osType")==="windows",this.$el.html(t(e)),this.model.attributes.name},keyPairClick:function(e){return this.proccessKpStuff()},proccessKpStuff:function(e){var t,n,r,i,o;return o=this.model.get("keyName"),n=!1,e||(i=this.model.resModel.connectionTargets("KeypairUsage")[0],t=i&&i.isDefault()&&i.get("appId")==="DefaultKP---"+s.instance().get("id"),r=i&&!i.isDefault(),n=t||r,n&&this.model.downloadKp(o)),!n&&this.model.get("osType")==="windows"?this.decryptPassword(n):this.loginPrompt(n)},loginPrompt:function(e){var t,n;return t=this.model.get("keyName"),modal(MC.template.modalDownloadKP({name:t,loginCmd:this.model.get("loginCmd"),isOldKp:e,windows:this.model.get("osType")==="windows"})),n=this,$("#keypair-cmd").off("click").on("click",function(e){return e.currentTarget.select&&e.currentTarget.select(),e.stopPropagation()}),!1},decryptPassword:function(e){var t,n;return n=this,t=this.model.get("keyName"),e||this.model.getPasswordData(null,"check"),modal(MC.template.modalDecryptPassword({name:t,isOldKp:e})),$("#modal-wrap").on("closed",function(){return n.kpModalClosed=!0,null}),$("#do-kp-decrypt").off("click").on("click",function(e){return n.model.getPasswordData(n.__kpUpload.getData())}),this.kpModalClosed=!1,!1},updateKPModal:function(e,t,n,r){var s,o,u,a,l;if(this.kpModalClosed)return;if(e==="check")return t?(this.__kpUpload&&this.__kpUpload.remove(),this.__kpUpload=new i,this.__kpUpload.on("load",function(){return $("#do-kp-decrypt").prop("disabled",!1)}),$("#modal-box .import-zone").html(this.__kpUpload.render().el),$("#modal-box .decrypt-action").show()):($("#modal-box .import-zone").html(""),$("#modal-box .no-password").show());if(e==="got")return $("#do-kp-decrypt").prop("disabled",!0),s=$("#keypair-pwd"),u=s.get(0),s.val(t),u.select(),u.focus(),$("#do-kp-decrypt").text("Decrypted"),$(".change-pw-recommend").show();if(e==="download"){l=t,a=n,o=r||n,$("#keypair-kp-download").off("click").on("click",f(""+this.model.get("keyName")+".pem",o)),$("#keypair-loading").hide(),$("#keypair-body").show();if(this.model.get("osType")==="windows")return $("#keypair-pwd-old").val(a).off("click").on("click",function(){return this.select()}),$("#keypair-show").one("click",function(){return $("#keypair-pwd-old").prop("type","input")})}},openAmiPanel:function(e){return this.trigger("OPEN_AMI",$(e.target).data("uid")),!1},openSysLogModal:function(){var e,t,n;return t=this.model.get("instanceId"),n=this,e=s.instance().region(),r.GetConsoleOutput({sender:n},$.cookie("usercode"),$.cookie("session_id"),e,t),modal(MC.template.modalInstanceSysLog({instance_id:t,log_content:""},!0)),n.off("EC2_INS_GET_CONSOLE_OUTPUT_RETURN").on("EC2_INS_GET_CONSOLE_OUTPUT_RETURN",function(e){return e.is_error||void 0,n.refreshSysLog(e.resolved_data)}),!1},refreshSysLog:function(e){var t,n;return $("#modal-instance-sys-log .instance-sys-log-loading").hide(),e&&e.output?(n=MC.base64Decode(e.output),t=$("#modal-instance-sys-log .instance-sys-log-content"),t.html(MC.template.convertBreaklines({content:n})),t.show()):$("#modal-instance-sys-log .instance-sys-log-info").show(),modal.position()}}),new u})}.call(this),function(){define("workspaces/editor/property/instance/main",["../base/main","./model","./view","./app_model","./app_view","../sglist/main","constant","event"],function(e,t,n,r,i,s,o,u){var a,f;return f={},f[u.PROPERTY_REFRESH_ENI_IP_LIST]=function(){return this.model.getEni&&this.model.getEni(),this.view.refreshIPList&&this.view.refreshIPList(),null},a=e.extend({ideEvents:f,handleTypes:[o.RESTYPE.INSTANCE,"component_asg_instance"],onUnloadSubPanel:function(e){return s.onUnloadSubPanel(e),null},setupStack:function(){return this.view.on("OPEN_AMI",function(t){return e.loadSubPanel("STATIC",t)}),null},initStack:function(){return this.model=t,this.view=n,null},afterLoadStack:function(){return s.loadModule(this.model),null},setupApp:function(){var t;return t=this,this.model.on("KEYPAIR_DOWNLOAD",function(e,n,r){return t.view.updateKPModal("download",e,n,r)}),this.model.on("PASSWORD_STATE",function(e){return t.view.updateKPModal("check",e)}),this.model.on("PASSWORD_GOT",function(e){return t.view.updateKPModal("got",e)}),this.view.on("OPEN_AMI",function(t){return e.loadSubPanel("STATIC",t)}),null},initApp:function(){return this.model=r,this.view=i,null},afterLoadApp:function(){return s.loadModule(this.model),null}}),null})}.call(this),function(){define("workspaces/editor/property/servergroup/app_model",["../base/model","../instance/model","constant","i18n!/nls/lang.js","Design","CloudResources"],function(e,t,n,r,i,s){var o;return o=e.extend({init:function(e){var t,n,s,o,u,a;return this.set("uid",e),this.set("readOnly",!this.isAppEdit),s=i.instance().component(e),n=s.get("imageId"),t=s.getAmi()||s.get("cachedAmi"),t?(this.set("ami",{id:n,name:t.name||t.description||t.id,icon:""+t.osType+"."+t.architecture+"."+t.rootDeviceType+".png"}),this.set("type_editable",t.rootDeviceType!=="instance-store")):notification("warning",sprintf(r.ide.PROP_MSG_ERR_AMI_NOT_FOUND,n)),o=s.getBlockDeviceMapping(),o.length===1&&this.set("rootDevice",o[0]),a=s.get(!0),this.set("instance_type",s.getInstanceTypeList()),this.set("ebs_optimized",s.get("ebsOptimized")),this.set("can_set_ebs",s.isEbsOptimizedEnabled()),u=s.connectionTargets("RTB_Route").length,u&&this.set("number_disable",!0),this.set("number",s.get("count")),this.set("name",s.get("name")),this.set("monitoring",s.get("monitoring")),this.getGroupList(),this.getEni(),null},setCount:function(e){var t;return t=this.get("uid"),i.instance().component(t).setCount(e),this.getGroupList(),null},getGroupList:function(){var e,t,r,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E;v=this.get("uid"),t=i.instance().component(v),d=s(n.RESTYPE.INSTANCE,i.instance().region()),e=(w=s(n.RESTYPE.INSTANCE,i.instance().region()).get(t.get("appId")))!=null?w.toJSON():void 0,p=t.get("name"),a=[{appId:t.get("appId"),name:p+"-0",status:e?e.instanceState.name:"Unknown",launchTime:e?e.launchTime:""}],r=t.get("count"),t.groupMembers().length>r-1?h=t.groupMembers().slice(0,r-1):h=t.groupMembers();for(l=m=0,y=h.length;m<y;l=++m)c=h[l],a.push({name:p+"-"+(l+1),appId:c.appId,status:d.get(c.appId)?d.get(c.appId).attributes.instanceState.name:"Unknown",isNew:!c.appId,isOld:c.appId&&l+1>=r});while(a.length<r)a.push({name:p+"-"+a.length,isNew:!0,status:"Unknown"});u=0,E=t.groupMembers();for(f=g=0,b=E.length;g<b;f=++g){o=E[f];if(!o.appId)break;u=f+1}return u+=1,a.length>1?(this.set("group",a),u>r?a.increment="-"+(u-r):u<r&&(a.increment="+"+(r-u))):this.set("group",a[0]),null},getEni:t.getEni,setEbsOptimized:t.setEbsOptimized,canSetInstanceType:t.canSetInstanceType,setInstanceType:t.setInstanceType,setIp:t.setIp,canAddIP:t.canAddIP,isValidIp:t.isValidIp,addIp:t.addIp,removeIp:t.removeIp,attachEip:t.attachEip,setMonitoring:t.setMonitoring,setSourceCheck:t.setSourceCheck}),new o})}.call(this),define("workspaces/editor/property/servergroup/template/app",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){return'class="expand"'}function c(e,t){var r="",i;r+='\n  <div class="option-group-head expand">'+u(n.i18n.call(e,"PROP_INSTANCE_DETAIL",{hash:{},data:t}))+'</div>\n  <div class="option-group">\n    <section class="property-control-group" data-bind="true">\n      <label class="left" for="property-instance-count" >'+u(n.i18n.call(e,"PROP_INSTANCE_NUMBER",{hash:{},data:t}))+'</label>\n      <span class="required-input right">'+u(n.i18n.call(e,"PROP_INSTANCE_REQUIRE",{hash:{},data:t}))+'</span>\n      <input class="input tooltip" type="text" value="'+u((i=e&&e.number,typeof i===a?i.apply(e):i))+'" id="property-instance-count" data-ignore="true" data-required="true" data-type="digits" ',i=n["if"].call(e,e&&e.number_disable,{hash:{},inverse:f.program(6,p,t),fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;r+="/>\n    </section>\n\n    ",i=n["if"].call(e,e&&e.ami,{hash:{},inverse:f.noop,fn:f.program(8,d,t),data:t});if(i||i===0)r+=i;r+="\n\n    ",i=n["if"].call(e,e&&e.type_editable,{hash:{},inverse:f.program(21,S,t),fn:f.program(10,v,t),data:t});if(i||i===0)r+=i;r+='\n  </div>\n\n  <div class="option-group-head">'+u(n.i18n.call(e,"PROP_INSTANCE_ADVANCED_DETAIL",{hash:{},data:t}))+'</div>\n  <div class="option-group">\n    <section class="property-control-group">\n      <div class="checkbox">\n        ',i=n["if"].call(e,e&&e.monitoring,{hash:{},inverse:f.program(25,T,t),fn:f.program(23,x,t),data:t});if(i||i===0)r+=i;r+='\n        <label for="property-instance-enable-cloudwatch"></label>\n      </div>\n      <label for="property-instance-enable-cloudwatch" >'+u(n.i18n.call(e,"PROP_INSTANCE_CW_ENABLED",{hash:{},data:t}))+'</label>\n\n      <p class="',i=n.unless.call(e,e&&e.monitoring,{hash:{},inverse:f.noop,fn:f.program(17,w,t),data:t});if(i||i===0)r+=i;r+=' property-info" id="property-cloudwatch-warn">'+u(n.i18n.call(e,"PROP_INSTANCE_CW_WARN",{hash:{},data:t}))+'<a target="_blank" href="http://aws.amazon.com/cloudwatch">Amazon Cloud Watch product page</a></p>\n    </section>\n  </div>\n\n  ',i=n["if"].call(e,e&&e.rootDevice,{hash:{},inverse:f.noop,fn:f.program(27,N,t),data:t});if(i||i===0)r+=i;r+="\n\n  ",i=n["if"].call(e,e&&e.eni,{hash:{},inverse:f.noop,fn:f.program(32,L,t),data:t});if(i||i===0)r+=i;return r+='\n\n  <div class="option-group-head"> '+u(n.i18n.call(e,"PROP_INSTANCE_SG_DETAIL",{hash:{},data:t}))+'<span class="property-head-num-wrap">(<span id="property-head-sg-num"></span>)</span></div>\n  <div class="option-group sg-group"></div>\n  ',r}function h(e,t){var r="";return r+='disabled="disabled" data-tooltip="'+u(n.i18n.call(e,"PROP_INSTANCE_TIP_YOU_CANNOT_SPECIFY_INSTANCE_NUMBER",{hash:{},data:t}))+'"',r}function p(e,t){var r="";return r+='data-tooltip="'+u(n.i18n.call(e,"PROP_INSTANCE_TIP_IF_THE_QUANTITY_IS_MORE_THAN_1",{hash:{},data:t}))+'"',r}function d(e,t){var r="",i;return r+='\n    <section class="property-control-group">\n      <label>'+u(n.i18n.call(e,"PROP_INSTANCE_AMI",{hash:{},data:t}))+'</label>\n      <div id="property-ami" class="property-block-wrap clearfix" data-uid=\''+u((i=(i=e&&e.ami,i==null||i===!1?i:i.id),typeof i===a?i.apply(e):i))+'\'>\n        <img class="property-ami-icon left" src="/assets/images/ide/ami/'+u((i=(i=e&&e.ami,i==null||i===!1?i:i.icon),typeof i===a?i.apply(e):i))+'" / >\n        <div class="property-ami-label">'+u((i=(i=e&&e.ami,i==null||i===!1?i:i.name),typeof i===a?i.apply(e):i))+"</div>\n      </div>\n    </section>\n    ",r}function v(e,t){var r="",i;r+="\n    ",i=n["if"].call(e,(i=e&&e.instance_type,i==null||i===!1?i:i.length),{hash:{},inverse:f.noop,fn:f.program(11,m,t),data:t});if(i||i===0)r+=i;return r+="\n    ",r}function m(e,t){var r="",i;r+='\n    <section class="property-control-group">\n      <label class="left">'+u(n.i18n.call(e,"PROP_INSTANCE_TYPE",{hash:{},data:t}))+'</label>\n      <div class="selectbox selectbox-mega" id="instance-type-select">\n        <div class="selection"></div>\n        <ul class="dropdown">\n          ',i=n.each.call(e,e&&e.instance_type,{hash:{},inverse:f.noop,fn:f.program(12,g,t),data:t});if(i||i===0)r+=i;r+='\n        </ul>\n      </div>\n    </section>\n    <section class="property-control-group ',i=n.unless.call(e,e&&e.can_set_ebs,{hash:{},inverse:f.noop,fn:f.program(17,w,t),data:t});if(i||i===0)r+=i;r+='">\n      <div class="checkbox">\n        <input id="property-instance-ebs-optimized" type="checkbox" value="None" ',i=n["if"].call(e,e&&e.ebs_optimized,{hash:{},inverse:f.noop,fn:f.program(19,E,t),data:t});if(i||i===0)r+=i;return r+=' name="ebs-optimized" />\n        <label for="property-instance-ebs-optimized"></label>\n      </div>\n      <label for="property-instance-ebs-optimized">EBS Optimized</label>\n    </section>\n    ',r}function g(e,t){var r="",i;r+='\n          <li class="',i=n["if"].call(e,e&&e.selected,{hash:{},inverse:f.noop,fn:f.program(13,y,t),data:t});if(i||i===0)r+=i;r+='tooltip item" data-tooltip="'+u((i=e&&e.main,typeof i===a?i.apply(e):i))+'" data-id="'+u((i=e&&e.name,typeof i===a?i.apply(e):i))+'" ',i=n["if"].call(e,e&&e.hide,{hash:{},inverse:f.noop,fn:f.program(15,b,t),data:t});if(i||i===0)r+=i;return r+='>\n            <div class="main truncate">'+u((i=e&&e.main,typeof i===a?i.apply(e):i))+'</div>\n            <div class="sub"><span>'+u((i=e&&e.ecu,typeof i===a?i.apply(e):i))+"</span> <span>"+u((i=e&&e.core,typeof i===a?i.apply(e):i))+"</span> <span>"+u((i=e&&e.mem,typeof i===a?i.apply(e):i))+"</span></div>\n          </li>\n          ",r}function y(e,t){return"selected "}function b(e,t){return'style="display:none;"'}function w(e,t){return"hide"}function E(e,t){return'checked="checked"'}function S(e,t){var r="";return r+='\n    <section class="property-control-group">\n      <label>'+u(n.i18n.call(e,"PROP_INSTANCE_TYPE",{hash:{},data:t}))+'</label>\n      <p class="property-info">Updating instance type is disabled for instances using instance store for root device.</p>\n    </section>\n    ',r}function x(e,t){return'\n        <input id="property-instance-enable-cloudwatch" type="checkbox" checked="true" value="None" name="property-instance-enable-cloudwatch" />\n        '}function T(e,t){return'\n        <input id="property-instance-enable-cloudwatch" type="checkbox" value="None" name="property-instance-enable-cloudwatch" />\n        '}function N(e,t){var r="",i;r+='\n  <div class="option-group-head">Root Device</div>\n  <div class="option-group">\n    <article class="property-app">\n      <dl class="dl-vertical">\n        <dt>'+u(n.i18n.call(e,"PROP_VOLUME_DEVICE_NAME",{hash:{},data:t}))+"</dt>\n        <dd>"+u(n.emptyStr.call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.DeviceName),{hash:{},data:t}))+"</dd>\n        <dt>"+u(n.i18n.call(e,"PROP_VOLUME_TYPE",{hash:{},data:t}))+"</dt>\n        <dd>"+u(n.emptyStr.call(e,(i=(i=e&&e.rootDevice,i==null||i===!1?i:i.Ebs),i==null||i===!1?i:i.VolumeType),{hash:{},data:t}))+"</dd>\n        ",i=n["if"].call(e,(i=(i=e&&e.rootDevice,i==null||i===!1?i:i.Ebs),i==null||i===!1?i:i.SnapshotId),{hash:{},inverse:f.noop,fn:f.program(28,C,t),data:t});if(i||i===0)r+=i;r+="\n        <dt>"+u(n.i18n.call(e,"PROP_VOLUME_SIZE",{hash:{},data:t}))+"</dt>\n        <dd>"+u(n.emptyStr.call(e,(i=(i=e&&e.rootDevice,i==null||i===!1?i:i.Ebs),i==null||i===!1?i:i.VolumeSize),{hash:{},data:t}))+" GB</dd>\n        ",i=n["if"].call(e,(i=(i=e&&e.rootDevice,i==null||i===!1?i:i.Ebs),i==null||i===!1?i:i.Iops),{hash:{},inverse:f.noop,fn:f.program(30,k,t),data:t});if(i||i===0)r+=i;return r+="\n      </dl>\n    </article>\n  </div>\n  ",r}function C(e,t){var r="",i;return r+="\n        <dt>"+u(n.i18n.call(e,"PROP_VOLUME_SNAPSHOT_ID",{hash:{},data:t}))+"</dt>\n        <dd>"+u((i=(i=(i=e&&e.rootDevice,i==null||i===!1?i:i.Ebs),i==null||i===!1?i:i.SnapshotId),typeof i===a?i.apply(e):i))+"</dd>\n        ",r}function k(e,t){var n="",r;return n+="\n        <dt>IOPS</dt>\n        <dd>"+u((r=(r=(r=e&&e.rootDevice,r==null||r===!1?r:r.Ebs),r==null||r===!1?r:r.Iops),typeof r===a?r.apply(e):r))+"</dd>\n        ",n}function L(e,t){var r="",i;r+='\n  <div class="option-group-head">'+u(n.i18n.call(e,"PROP_INSTANCE_ENI_DETAIL",{hash:{},data:t}))+'</div>\n  <div class="option-group">\n    <section class="property-control-group">\n      <div class="checkbox">\n        ',i=n["if"].call(e,(i=e&&e.eni,i==null||i===!1?i:i.sourceDestCheck),{hash:{},inverse:f.program(35,O,t),fn:f.program(33,A,t),data:t});if(i||i===0)r+=i;return r+='\n        <label for="property-instance-source-check"></label>\n      </div>\n      <label for="property-instance-source-check">'+u(n.i18n.call(e,"PROP_INSTANCE_ENI_SOURCE_DEST_CHECK",{hash:{},data:t}))+'</label>\n    </section>\n    <section class="property-control-group">\n      <div class="network-list-wrap">\n        <div class="network-list-header clearfix">\n          '+u(n.i18n.call(e,"PROP_INSTANCE_ENI_IP_ADDRESS",{hash:{},data:t}))+'\n          <button id="instance-ip-add" class="right btn btn-blue btn-small tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_ENI_TIP_ADD_IP_ADDRESS",{hash:{},data:t}))+'">'+u(n.i18n.call(e,"PROP_INSTANCE_ENI_ADD_IP",{hash:{},data:t}))+'</button>\n        </div>\n        <ul class="network-list" id="property-network-list" data-bind="true"></ul>\n      </div>\n    </section>\n  </div>\n  ',r}function A(e,t){return'\n        <input id="property-instance-source-check" type="checkbox" checked="true" value="None" name="property-instance-source-check" />\n        '}function O(e,t){return'\n        <input id="property-instance-source-check" type="checkbox" value="None" name="property-instance-source-check" />\n        '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+='<article class="property-app">\n  <div id="prop-appedit-ami-list" ',o=n["if"].call(t,t&&t.readOnly,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+=">\n\n  </div>\n  ",o=n.unless.call(t,t&&t.readOnly,{hash:{},inverse:f.noop,fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;return s+="\n</article>",s};return e.template(t)}),define("workspaces/editor/property/servergroup/template/ami_list",["handlebars"],function(e){var t=function(e,t,n,r,i){function f(e,t){var r="",i;r+="\n",i=n.unless.call(e,(i=e&&e.group,i==null||i===!1?i:i.length),{hash:{},inverse:o.program(5,h,t),fn:o.program(2,l,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function l(e,t){var r="",i;r+='\n<div class="option-group-head ',i=n["if"].call(e,e&&e.readOnly,{hash:{},inverse:o.noop,fn:o.program(3,c,t),data:t});if(i||i===0)r+=i;return r+='">Instance Summary</div>\n<div class="option-group">\n  <dl class="dl-vertical">\n    <dt>'+u(n.i18n.call(e,"PROP_INSTANCE_INSTANCE_ID",{hash:{},data:t}))+"</dt>\n    <dd>"+u((i=(i=e&&e.group,i==null||i===!1?i:i.appId),typeof i===a?i.apply(e):i))+"</dd>\n\n    <dt>"+u(n.i18n.call(e,"PROP_INSTANCE_STATE",{hash:{},data:t}))+'</dt>\n    <dd><i class="status status-'+u((i=(i=e&&e.group,i==null||i===!1?i:i.status),typeof i===a?i.apply(e):i))+' icon-label"></i>'+u((i=(i=e&&e.group,i==null||i===!1?i:i.status),typeof i===a?i.apply(e):i))+"</dd>\n\n    <dt>"+u(n.i18n.call(e,"PROP_INSTANCE_LAUNCH_TIME",{hash:{},data:t}))+"</dt>\n    <dd>"+u(n.timeStr.call(e,(i=e&&e.group,i==null||i===!1?i:i.launchTime),{hash:{},data:t}))+"</dd>\n  </dl>\n<div>\n",r}function c(e,t){return"expand"}function h(e,t){var r="",i;r+='\n<div class="option-group-head ',i=n["if"].call(e,e&&e.readOnly,{hash:{},inverse:o.noop,fn:o.program(3,c,t),data:t});if(i||i===0)r+=i;r+='">Server Group Members<span class="property-head-num-wrap">('+u((i=(i=e&&e.group,i==null||i===!1?i:i.length),typeof i===a?i.apply(e):i))+')</span> <span class="appedit-head-meta appedit-head-meta-add">'+u((i=(i=e&&e.group,i==null||i===!1?i:i.increment),typeof i===a?i.apply(e):i))+'</span></div>\n<ul class="option-group property-list">\n  ',i=n.each.call(e,e&&e.group,{hash:{},inverse:o.noop,fn:o.program(6,p,t),data:t});if(i||i===0)r+=i;return r+="\n</ul>\n",r}function p(e,t){var r="",i;r+='\n    <li>\n      <i class="status status-'+u((i=e&&e.status,typeof i===a?i.apply(e):i))+' icon-label tooltip" data-tooltip="'+u((i=e&&e.status,typeof i===a?i.apply(e):i))+'"></i>'+u((i=e&&e.name,typeof i===a?i.apply(e):i))+"\n      ",i=n["if"].call(e,e&&e.appId,{hash:{},inverse:o.noop,fn:o.program(7,d,t),data:t});if(i||i===0)r+=i;r+="\n      ",i=n["if"].call(e,e&&e.isNew,{hash:{},inverse:o.program(11,m,t),fn:o.program(9,v,t),data:t});if(i||i===0)r+=i;return r+="\n    </li>\n  ",r}function d(e,t){var n="",r;return n+='<span class="subtitle">('+u((r=e&&e.appId,typeof r===a?r.apply(e):r))+")</span>",n}function v(e,t){return'<div class="subtitle subtitle-launch">Launch after applying updates</div>\n      '}function m(e,t){var r="",i;i=n["if"].call(e,e&&e.isOld,{hash:{},inverse:o.noop,fn:o.program(12,g,t),data:t});if(i||i===0)r+=i;return r+="\n      ",r}function g(e,t){return'<div class="subtitle subtitle-terminate">Terminate after applying updates</div>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o=this,u=this.escapeExpression,a="function";return s=n["if"].call(t,t&&t.group,{hash:{},inverse:o.noop,fn:o.program(1,f,i),data:i}),s||s===0?s:""};return e.template(t)}),function(){define("workspaces/editor/property/servergroup/app_view",["../base/view","../instance/view","./template/app","./template/ami_list","i18n!/nls/lang.js"],function(e,t,n,r,i){var s;return s=e.extend({events:{"change #property-instance-count":"countChange","click #property-ami":"openAmiPanel","OPTION_CHANGE #instance-type-select":"instanceTypeSelect","change #property-instance-ebs-optimized":"ebsOptimizedSelect","click .toggle-eip":"setEip","click #instance-ip-add":"addIp","click #property-network-list .icon-remove":"removeIp","change .input-ip":"syncIPList","change #property-instance-enable-cloudwatch":"cloudwatchSelect","change #property-instance-source-check":"sourceCheckChange"},render:function(){return this.$el.html(n(this.model.attributes)),this.updateInstanceList(),this.refreshIPList(),this.model.attributes.name},openAmiPanel:function(e){return this.trigger("OPEN_AMI",$(e.currentTarget).data("uid")),!1},updateInstanceList:function(){return $("#prop-appedit-ami-list").html(r(this.model.attributes)),null},countChange:function(e){var t,n;t=$(e.currentTarget),t.parsley("custom",function(e){if(isNaN(e)||e>99||e<1)return i.ide.PARSLEY_THIS_VALUE_MUST_BETWEEN_1_99});if(!t.parsley("validate"))return;return n=+t.val(),this.model.setCount(n),this.updateInstanceList(),this.setEditableIP(n===1),null},ebsOptimizedSelect:function(e){return this.model.setEbsOptimized(e.target.checked),null},instanceTypeSelect:t.instanceTypeSelect,cloudwatchSelect:t.cloudwatchSelect,sourceCheckChange:t.sourceCheckChange,addIp:t.addIp,removeIp:t.removeIp,setEip:t.setEip,syncIPList:t.syncIPList,refreshIPList:t.refreshIPList,updateIPAddBtnState:t.updateIPAddBtnState,setEditableIP:t.setEditableIP,validateIpItem:t.validateIpItem,bindIpItemValidate:t.bindIpItemValidate}),new s})}.call(this),function(){define("workspaces/editor/property/servergroup/main",["../base/main","./app_model","./app_view","../sglist/main","constant","event"],function(e,t,n,r,i,s){var o,u;return u={},u[s.PROPERTY_REFRESH_ENI_IP_LIST]=function(){return this.model.getEni(),this.view.refreshIPList(),null},o=e.extend({ideEvents:u,handleTypes:"component_server_group",onUnloadSubPanel:function(e){return r.onUnloadSubPanel(e),null},initApp:function(){return this.model=t,this.model.isAppEdit=!1,this.view=n,null},setupAppEdit:function(){return this.view.on("OPEN_AMI",function(t){return e.loadSubPanel("STATIC",t)}),null},initAppEdit:function(){return this.model=t,this.model.isAppEdit=!0,this.view=n,null},afterLoadAppEdit:function(){return r.loadModule(this.model),null}}),null})}.call(this),function(){define("workspaces/editor/property/connection/model",["../base/model","Design","constant"],function(e,t,n){var r;return r=e.extend({init:function(e){var r,i;return i=t.instance().component(e),i?(i.type==="EniAttachment"?r={name:"Instance-ENI Attachment",eniAsso:{instance:i.getTarget(n.RESTYPE.INSTANCE).get("name"),eni:i.getTarget(n.RESTYPE.ENI).get("name")}}:i.type==="ElbSubnetAsso"&&(r={name:"Load Balancer-Subnet Association",subnetAsso:{elb:i.getTarget(n.RESTYPE.ELB).get("name"),subnet:i.getTarget(n.RESTYPE.SUBNET).get("name")}}),this.set(r)):!1}}),new r})}.call(this),define("workspaces/editor/property/connection/template/stack",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var n="",r;return n+='\n	<div class="property-control-group">This is an attachment of '+a((r=(r=e&&e.eniAsso,r==null||r===!1?r:r.instance),typeof r===u?r.apply(e):r))+" to "+a((r=(r=e&&e.eniAsso,r==null||r===!1?r:r.eni),typeof r===u?r.apply(e):r))+"</div>\n",n}function c(e,t){var r="",i;r+="\n	",i=n["if"].call(e,e&&e.subnetAsso,{hash:{},inverse:f.noop,fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function h(e,t){var n="",r;return n+='\n  <div class="property-control-group">A Virtual Network Interface is placed in '+a((r=(r=e&&e.subnetAsso,r==null||r===!1?r:r.subnet),typeof r===u?r.apply(e):r))+" for "+a((r=(r=e&&e.subnetAsso,r==null||r===!1?r:r.elb),typeof r===u?r.apply(e):r))+" to allow traffic be routed to this availability zone.</div>\n  ",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+="<article>\n\n",o=n["if"].call(t,t&&t.eniAsso,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n\n</article>",s};return e.template(t)}),function(){define("workspaces/editor/property/connection/view",["../base/view","./template/stack"],function(e,t){var n;return n=e.extend({render:function(){return this.$el.html(t(this.model.attributes)),this.model.attributes.name}}),new n})}.call(this),function(){define("workspaces/editor/property/connection/main",["../base/main","./model","./view"],function(e,t,n){var r;return r=e.extend({handleTypes:["EniAttachment","ElbSubnetAsso"],initStack:function(){return this.model=t,this.view=n,null},initApp:function(){return this.model=t,this.view=n,null},initAppEdit:function(){return this.model=t,this.view=n,null}}),null})}.call(this),function(){define("workspaces/editor/property/staticsub/model",["../base/model","constant","../base/main","CloudResources","Design"],function(e,t,n,r,i){var s;return s=e.extend({init:function(e){var n,s,o;this.set("isApp",this.isApp),n=i.modelClassForType(t.RESTYPE.INSTANCE),s=r(t.RESTYPE.AMI,i.instance().region()).get(e);if(s){s=s.toJSON(),this.set(s),this.set("instance_type",(n.getInstanceType(s,i.instance().region())||[]).join(", ")),this.set("ami",!0),this.set("name",s.name);return}if(e.indexOf("ami-")===0){this.set("ami",{unavailable:!0}),this.set("name",e);return}return this.set("name",e),o=r(t.RESTYPE.SNAP,i.instance().region()).get(e),o?(this.set(o.attributes),!0):!1},canChangeAmi:function(e){var s,o,u,a;return s=i.instance().component(n.activeModule().uid),a=s.getAmi()||s.get("cachedAmi"),u=r(t.RESTYPE.AMI,i.instance().region()).get(e),u&&(u=u.toJSON()),!a&&!u?"Ami info is missing, please reopen stack and try again.":a.osType==="windows"&&u.osType!=="windows"?"Changing AMI platform is not supported. To use a "+u.osFamily+" AMI, please create a new instance instead.":a.osType!=="windows"&&u.osType==="windows"?"Changing AMI platform is not supported. To use a "+u.osFamily+" AMI, please create a new instance instead.":(o=i.modelClassForType(t.RESTYPE.INSTANCE).getInstanceType(u,i.instance().region()),o.indexOf(s.get("instanceType"))===-1?""+u.name+" does not support previously used instance type "+s.get("instanceType")+". Please change another AMI.":!0)},getAmiPngName:function(e){var n;return n=r(t.RESTYPE.AMI,i.instance().region()).get(e),n?(n=n.attributes,""+n.osType+"."+n.architecture+"."+n.rootDeviceType):"ami-not-available"},getAmiName:function(e){var n;return n=r(t.RESTYPE.AMI,i.instance().region()).get(e),n?n.get("name"):""},changeAmi:function(e){return i.instance().component(n.activeModule().uid).setAmi(e),this.init(e),null},getInstanceName:function(){return i.instance().component(n.activeModule().uid).get("name")}}),new s})}.call(this),define("workspaces/editor/property/staticsub/template/stack",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var r="",i;r+="\n\n",i=n["if"].call(e,e&&e.isApp,{hash:{},inverse:a.program(5,p,t),fn:a.program(2,c,t),data:t});if(i||i===0)r+=i;r+="\n\n    ",i=n.unless.call(e,(i=e&&e.ami,i==null||i===!1?i:i.unavailable),{hash:{},inverse:a.noop,fn:a.program(8,v,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function c(e,t){var r="",i;r+="\n    ",i=n["if"].call(e,(i=e&&e.ami,i==null||i===!1?i:i.unavailable),{hash:{},inverse:a.noop,fn:a.program(3,h,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function h(e,t){var r="";return r+='\n    <div class="property-control-group property-ami-info">\n        <p>'+u(n.i18n.call(e,"PROP_AMI_APP_NOT_AVAILABLE",{hash:{},data:t}))+"</p>\n    </div>\n    ",r}function p(e,t){var r="",i;r+="\n    ",i=n["if"].call(e,(i=e&&e.ami,i==null||i===!1?i:i.unavailable),{hash:{},inverse:a.noop,fn:a.program(6,d,t),data:t});if(i||i===0)r+=i;return r+='\n    <div class="property-control-group property-ami-info">\n        <div class="property-control-group tac">\n            <button id="changeAmi" class="btn btn-blue"><i class="icon-edit icon-label"></i>Change AMI</button>\n        </div>\n    </div>\n    <div class="property-control-group hide" id="changeAmiPanel">\n        <p>Drag image from Resource Panel and drop below to change AMI.</p>\n        <div id="changeAmiDropZone">\n            <p>Drop AMI Here</p>\n            <div class="resource-icon resource-icon-instance">\n                <img src="/assets/images/ide/ami/amazon.i386.ebs.png" width="39" height="27">\n                <div class="resource-label"></div>\n            </div>\n        </div>\n        <div class="hide" id="confirmChangeAmiWrap">\n            <p id="changeAmiWarning"></p>\n            <button id="confirmChangeAmi" class="btn btn-blue">Confirm Change AMI</button>\n        </div>\n        <button id="cancelChangeAmi" class="btn-link">Cancel</button>\n    </div>\n',r}function d(e,t){var r="";return r+='\n    <div class="property-control-group property-ami-info">\n        '+u(n.i18n.call(e,"PROP_AMI_STACK_NOT_AVAILABLE",{hash:{},data:t}))+"\n    </div>\n    ",r}function v(e,t){var r="",i;return r+='\n    <dl class="dl-vertical property-ami-info">\n    <dt>'+u(n.i18n.call(e,"PROP_INSTANCE_AMI_ID",{hash:{},data:t}))+"</dt>\n    <dd>"+u((i=e&&e.id,typeof i===f?i.apply(e):i))+"</dd>\n    <dt>"+u(n.i18n.call(e,"PROP_INSTANCE_AMI_NAME",{hash:{},data:t}))+"</dt>\n    <dd>"+u((i=e&&e.name,typeof i===f?i.apply(e):i))+"</dd>\n    <dt>"+u(n.i18n.call(e,"PROP_INSTANCE_AMI_DESC",{hash:{},data:t}))+"</dt>\n    <dd>"+u(n.emptyStr.call(e,e&&e.description,{hash:{},data:t}))+"</dd>\n    <dt>"+u(n.i18n.call(e,"PROP_INSTANCE_ROOT_DEVICE_TYPE",{hash:{},data:t}))+"</dt>\n    <dd>"+u(n.emptyStr.call(e,e&&e.rootDeviceType,{hash:{},data:t}))+"</dd>\n    <dt>"+u(n.i18n.call(e,"PROP_INSTANCE_AMI_ARCHITECH",{hash:{},data:t}))+"</dt>\n    <dd>"+u((i=e&&e.architecture,typeof i===f?i.apply(e):i))+"</dd>\n    <dt>"+u(n.i18n.call(e,"PROP_INSTANCE_AMI_VIRTUALIZATION",{hash:{},data:t}))+"</dt>\n    <dd>"+u(n.emptyStr.call(e,e&&e.virtualizationType,{hash:{},data:t}))+"</dd>\n    <dt>"+u(n.i18n.call(e,"PROP_INSTANCE_AMI_KERNEL_ID",{hash:{},data:t}))+"</dt>\n    <dd>"+u(n.emptyStr.call(e,e&&e.kernelId,{hash:{},data:t}))+"</dd>\n    <dt>"+u(n.i18n.call(e,"PROP_INSTANCE_AMI_OS_TYPE",{hash:{},data:t}))+"</dt>\n    <dd>"+u(n.emptyStr.call(e,e&&e.osType,{hash:{},data:t}))+"</dd>\n    <dt>"+u(n.i18n.call(e,"PROP_INSTANCE_AMI_SUPPORT_INSTANCE_TYPE",{hash:{},data:t}))+"</dt>\n    <dd>"+u(n.emptyStr.call(e,e&&e.instance_type,{hash:{},data:t}))+"</dd>\n    </dl>\n    ",r}function m(e,t){var r="",i;return r+='\n    <dl class="dl-vertical">\n    <dt>Snapshot ID</dt>\n    <dd>'+u((i=e&&e.id,typeof i===f?i.apply(e):i))+"</dd>\n    <dt>Volume ID</dt>\n    <dd>"+u((i=e&&e.volumeId,typeof i===f?i.apply(e):i))+"</dd>\n    <dt>Description</dt>\n    <dd>"+u(n.emptyStr.call(e,e&&e.description,{hash:{},data:t}))+"</dd>\n    <dt>Capacity</dt>\n    <dd>"+u(n.emptyStr.call(e,e&&e.volumeSize,{hash:{},data:t}))+"GB</dd>\n    <dt>Owner</dt>\n    <dd>"+u(n.emptyStr.call(e,e&&e.ownerId,{hash:{},data:t}))+"</dd>\n    <dt>Started</dt>\n    <dd>"+u(n.emptyStr.call(e,e&&e.startTime,{hash:{},data:t}))+"</dd>\n    </dl>\n",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a=this,f="function";s+='<article class="property-app">\n',o=n["if"].call(t,t&&t.ami,{hash:{},inverse:a.program(10,m,i),fn:a.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n\n</article>",s};return e.template(t)}),function(){define("workspaces/editor/property/staticsub/view",["../base/view","./template/stack"],function(e,t){var n;return n=e.extend({events:{"click #changeAmi":"showChangeAmiPanel","click #confirmChangeAmi":"changeAmi","click #cancelChangeAmi":"hideChangeAmiPanel"},render:function(){var e;this.$el.html(t(this.model.attributes)),this.model.attributes.name,e=this,$("#changeAmiDropZone").on("addItem_drop",function(t,n){return e.onDropAmi(n)})},showChangeAmiPanel:function(){return $("#changeAmiPanel").show().siblings(".property-ami-info").hide(),$("#changeAmiDropZone").children().hide().filter("p").show(),$("#confirmChangeAmiWrap").hide(),null},hideChangeAmiPanel:function(){return $("#changeAmiPanel").hide().siblings(".property-ami-info").show(),null},onDropAmi:function(e){var t,n;t=e.dataTransfer.imageId;if(!t)return;return $("#changeAmiPanel").data("amiId",t),$("#confirmChangeAmiWrap").show(),n=this.model.canChangeAmi(t),n===!0?($("#changeAmiWarning").hide(),$("#confirmChangeAmi").show()):($("#changeAmiWarning").html(n).show(),$("#confirmChangeAmi").hide()),$("#changeAmiDropZone").children().show().filter("p").hide(),$("#changeAmiDropZone").find("img").attr("src","/assets/images/ide/ami/"+this.model.getAmiPngName(t)+".png"),$("#changeAmiDropZone").find(".resource-label").html(this.model.getAmiName(t)),null},changeAmi:function(){var e;return e=$("#changeAmiPanel").data("amiId"),this.model.changeAmi(e),this.trigger("AMI_CHANGE"),null}}),new n})}.call(this),function(){define("workspaces/editor/property/staticsub/main",["../base/main","./model","./view","event","Design"],function(e,t,n,r,i){var s;return n.on("AMI_CHANGE",function(){var t;return t=i.instance().component(e.activeModule().uid),r.trigger(r.OPEN_PROPERTY,t.type,t.id),null}),s=e.extend({subPanelID:"STATIC",initStack:function(){return this.model=t,this.view=n,this.model.isApp=!1,null},initApp:function(){return this.model=t,this.view=n,this.model.isApp=!0,null},initAppEdit:function(){return this.model=t,this.view=n,this.model.isApp=!0,null}}),null})}.call(this),function(){define("workspaces/editor/property/missing/main",["../base/main","../base/model","../base/view","constant"],function(e,t,n,r){var i,s,o,u,a;return s=n.extend({render:function(){var e,t;return e=Design.instance().component(this.model.get("uid")),(t=Design.instance().get("state"))!=="Stopped"&&t!=="Stopping"||e.type!==r.RESTYPE.ASG?(this.$el.html(MC.template.missingPropertyPanel()),"Resource Unavailable"):(this.$el.html(MC.template.missingAsgWhenStop({asgName:e.get("name")})),""+e.get("name")+" Deleted")}}),a=new s,o=t.extend({init:function(e){return this.set("uid",e)}}),u=new o,i=e.extend({handleTypes:"Missing_Resource",initApp:function(){return this.model=u,this.view=a,null},initAppEdit:function(){return this.model=u,this.view=a,null}}),null})}.call(this),function(){define("workspaces/editor/property/sg/model",["../base/model","Design","constant","CloudResources"],function(e,t,n,r){var i;return i=e.extend({init:function(e){var n,r,i,s,o,u,a,f;this.component=n=t.instance().component(e);if(this.isReadOnly){this.appInit(e);return}o=[],f=n.connections("SgRuleSet");for(u=0,a=f.length;u<a;u++)s=f[u],o=o.concat(s.toPlainObjects(e,!0));i=_.map(n.getMemberList(),function(e){return e.get("name")}),this.set({uid:e,name:n.get("name"),description:n.get("description"),members:i,rules:o,color:n.color,ruleEditable:!0}),this.sortSGRule(),n.isElbSg()?r=!0:this.isAppEdit&&(r=n.get("appId"));if(r||n.isDefault())this.set("nameReadOnly",!0),this.set("descReadOnly",!0);return null},setDescription:function(e){return t.instance().component(this.get("uid")).set("description",e),null},sortSGRule:function(e){return this.attributes.rules=_.sortBy(this.attributes.rules,e||"direction"),null},addRule:function(e){var n,r,i,s,o,u,a,f,l,c;a=this.get("uid"),i=t.instance().component(a),e.relation[0]==="@"?u=t.instance().component(e.relation.substr(1)):u=i.createIpTarget(e.relation),n=t.modelClassForType("SgRuleSet"),o=new n(i,u),r=o.ruleCount(i.id),o.addRawRule(i.id,e.direction,e);if(r<o.ruleCount(i.id)){s=[],c=i.connections("SgRuleSet");for(f=0,l=c.length;f<l;f++)e=c[f],s=s.concat(e.toPlainObjects(a,!0));return this.attributes.rules=s,this.sortSGRule(),!0}return!1},createSGRuleData:function(){var e;return e=_.map(t.modelClassForType(n.RESTYPE.SG).allObjects(),function(e){return{id:e.id,color:e.color,name:e.get("name")}}),{isClassic:!1,sgList:e}},removeRule:function(e){var n;return n=t.instance().component(e.ruleSetId),n.removeRuleByPlainObj(e),null},appInit:function(e){var i,s,o,u,a,f,l,c,h,p,d;s=t.instance().region(),o=this.component.get("appId"),i=(p=r(n.RESTYPE.SG,s).get(o))!=null?p.toJSON():void 0,f=[],d=this.component.connections("SgRuleSet");for(c=0,h=d.length;c<h;c++)a=d[c],f=f.concat(a.toPlainObjects(e));return u=_.map(this.component.connectionTargets("SgAsso"),function(e){return e.get("name")}),l={uid:e,name:this.component.get("name"),color:this.component.color,groupName:i.groupName,description:i.groupDescription,groupId:i.groupId,ownerId:i.ownerId,vpcId:i.vpcId,members:u,rules:f},this.set(l),this.sortSGRule(),null}}),new i})}.call(this),define("workspaces/editor/property/sg/template/stack",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){return'disabled="disabled"'}function c(e,t){var r="";return r+='\n		<a href="#" class="icon-add tooltip add-rule action-link" id="sg-add-rule-icon" data-tooltip=\''+u(n.i18n.call(e,"PROP_SG_TIP_CREATE_RULE",{hash:{},data:t}))+"' ></a>\n		",r}function h(e,t){var n="";return n+='<li class="sg-member-name">'+u(typeof e===a?e.apply(e):e)+"</li>",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+='<article>\n	<div class="option-group-head expand">'+u(n.i18n.call(t,"PROP_SG_TIT_DETAIL",{hash:{},data:i}))+'</div>\n	<div class="option-group" data-bind="true">\n		<div class="property-control-group">\n			<label for="securitygroup-name" >'+u(n.i18n.call(t,"PROP_SG_DETAIL_LBL_NAME",{hash:{},data:i}))+'</label>\n			<span class="required-input right">'+u(n.i18n.call(t,"PROP_LBL_REQUIRED",{hash:{},data:i}))+'</span>\n			<input class="input"  type="text" id="securitygroup-name" ',o=n["if"].call(t,t&&t.nameReadOnly,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+=' value="'+u((o=t&&t.name,typeof o===a?o.apply(t):o))+'" maxlength="255" data-ignore="true" data-required-rollback="true"/>\n		</div>\n		<div class="property-control-group">\n			<label for="securitygroup-description" >'+u(n.i18n.call(t,"PROP_SG_DETAIL_LBL_DESCRIPTION",{hash:{},data:i}))+'</label>\n			<input class="input" type="text" id="securitygroup-description" ',o=n["if"].call(t,t&&t.descReadOnly,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+=' value="'+u((o=t&&t.description,typeof o===a?o.apply(t):o))+'" maxlength="255" data-type="ascii" data-ignore="true"/>\n		</div>\n	</div>\n\n	<div class="option-group-head expand">'+u(n.i18n.call(t,"PROP_SG_TIT_RULE",{hash:{},data:i}))+'\n		<span class="property-head-num-wrap">(<span id="rule-count">'+u((o=(o=t&&t.rules,o==null||o===!1?o:o.length),typeof o===a?o.apply(t):o))+"</span>)</span>\n		",o=n["if"].call(t,t&&t.ruleEditable,{hash:{},inverse:f.noop,fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;s+='\n	</div>\n	<div class="option-group">\n		<div class="rule-list-sort property-control-group">\n			<h5>'+u(n.i18n.call(t,"PROP_SG_RULE_SORT_BY",{hash:{},data:i}))+'</h5>\n			<div class="selectbox" id="sg-rule-filter-select">\n				<div class="selection">'+u(n.i18n.call(t,"PROP_SG_RULE_SORT_BY_DIRECTION",{hash:{},data:i}))+'</div>\n				<ul class="dropdown" tabindex="-1">\n					<li class="item selected" data-id="direction">'+u(n.i18n.call(t,"PROP_SG_RULE_SORT_BY_DIRECTION",{hash:{},data:i}))+'</li>\n					<li class="item" data-id="relation">'+u(n.i18n.call(t,"PROP_SG_RULE_SORT_BY_SRC_DEST",{hash:{},data:i}))+'</li>\n					<li class="item" data-id="protocol">'+u(n.i18n.call(t,"PROP_SG_RULE_SORT_BY_PROTOCOL",{hash:{},data:i}))+'</li>\n				</ul>\n			</div>\n		</div>\n\n		<ul class="sg-rule-list property-list" id="sg-rule-list"></ul>\n	</div>\n\n	<div class="option-group-head">'+u(n.i18n.call(t,"PROP_SG_TIT_MEMBER",{hash:{},data:i}))+'<span class="property-head-num-wrap">('+u((o=(o=t&&t.members,o==null||o===!1?o:o.length),typeof o===a?o.apply(t):o))+')</span>	</div>\n	<div class="option-group">\n		<ul class="sg-member-list property-list">\n			',o=n.each.call(t,t&&t.members,{hash:{},inverse:f.noop,fn:f.program(5,h,i),data:i});if(o||o===0)s+=o;return s+="\n		</ul>\n	</div>\n\n</article>",s};return e.template(t)}),define("workspaces/editor/property/sg/template/app",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var n="";return n+=' <li class="sg-member-name">'+a(typeof e===u?e.apply(e):e)+"</li> ",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<article>\n  <dl class="dl-vertical">\n    <dt>'+a(n.i18n.call(t,"PROP_SG_APP_SG_NAME",{hash:{},data:i}))+"</dt>\n    <dd>"+a((o=t&&t.groupName,typeof o===u?o.apply(t):o))+"</dd>\n\n    <dt>"+a(n.i18n.call(t,"PROP_SG_APP_SG_ID",{hash:{},data:i}))+"</dt>\n    <dd>"+a((o=t&&t.groupId,typeof o===u?o.apply(t):o))+"</dd>\n\n    <dt>"+a(n.i18n.call(t,"PROP_SG_DETAIL_LBL_DESCRIPTION",{hash:{},data:i}))+"</dt>\n    <dd>"+a((o=t&&t.description,typeof o===u?o.apply(t):o))+"</dd>\n\n    <dt>"+a(n.i18n.call(t,"PROP_SG_APP_VPC_ID",{hash:{},data:i}))+"</dt>\n    <dd>"+a((o=t&&t.vpcId,typeof o===u?o.apply(t):o))+'</dd>\n  </dl>\n\n  <div class="option-group-head expand">'+a(n.i18n.call(t,"PROP_SG_TIT_RULE",{hash:{},data:i}))+'\n    <span class="property-head-num-wrap">(<span id="rule-count">'+a((o=(o=t&&t.rules,o==null||o===!1?o:o.length),typeof o===u?o.apply(t):o))+'</span>)</span>\n  </div>\n  <div class="option-group">\n\n    <div class="rule-list-sort property-control-group">\n      <h5>'+a(n.i18n.call(t,"PROP_SG_RULE_SORT_BY",{hash:{},data:i}))+'</h5>\n      <div class="selectbox" id="sg-rule-filter-select">\n        <div class="selection">'+a(n.i18n.call(t,"PROP_SG_RULE_SORT_BY_DIRECTION",{hash:{},data:i}))+'</div>\n        <ul class="dropdown" tabindex="-1">\n          <li class="item selected" data-id="direction">'+a(n.i18n.call(t,"PROP_SG_RULE_SORT_BY_DIRECTION",{hash:{},data:i}))+'</li>\n          <li class="item" data-id="relation">'+a(n.i18n.call(t,"PROP_SG_RULE_SORT_BY_SRC_DEST",{hash:{},data:i}))+'</li>\n          <li class="item" data-id="protocol">'+a(n.i18n.call(t,"PROP_SG_RULE_SORT_BY_PROTOCOL",{hash:{},data:i}))+'</li>\n        </ul>\n      </div>\n    </div>\n\n    <ul class="sg-rule-list property-list" id="sg-rule-list"></ul>\n  </div>\n\n  <div class="option-group-head expand">'+a(n.i18n.call(t,"PROP_SG_TIT_MEMBER",{hash:{},data:i}))+'\n    <span class="property-head-num-wrap">(<span>'+a((o=(o=t&&t.members,o==null||o===!1?o:o.length),typeof o===u?o.apply(t):o))+'</span>)</span>\n  </div>\n  <div class="option-group">\n    <ul class="sg-member-list property-list">\n      ',o=n.each.call(t,t&&t.members,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n    </ul>\n  </div>\n</article>",s};return e.template(t)}),function(){define("workspaces/editor/property/sg/view",["../base/view","./template/stack","./template/app","constant","i18n!/nls/lang.js"],function(e,t,n,r,i){var s;return s=e.extend({events:{"click #sg-add-rule-icon":"showCreateRuleModal","click .sg-rule-delete":"removeRulefromList","change #securitygroup-name":"setSGName","change #securitygroup-description":"setSGDescription","OPTION_CHANGE #sg-rule-filter-select":"sortSgRule"},render:function(){var e;return e=this.model.isReadOnly?n:t,this.$el.html(e(this.model.toJSON())),this.refreshSgruleList(),this.setTitle(this.model.get("name")),this.prependTitle('<span class="sg-color" style="background-color:'+this.model.get("color")+'" ></span>'),this.forceShow(),setTimeout(function(){return $("#securitygroup-name").focus()},200),this.model.get("name")},refreshSgruleList:function(){var e;return e=this.model.get("rules"),e.deletable=this.model.get("ruleEditable"),$("#sg-rule-list").html(MC.template.sgRuleList(e))},showCreateRuleModal:function(e){return modal(MC.template.modalSGRule(this.model.createSGRuleData())),$("#sg-modal-direction").on("click","input",this.radioSgModalChange),$("#modal-protocol-select").on("OPTION_CHANGE",this.sgModalSelectboxChange),$("#protocol-icmp-main-select").on("OPTION_CHANGE",this.icmpMainSelect),$("#sg-protocol-select-result").on("OPTION_CHANGE",".protocol-icmp-sub-select",this.icmpSubSelect),$("#sg-modal-save").on("click",_.bind(this.saveSgModal,this)),$("#sg-add-model-source-select").on("OPTION_CHANGE",this.modalRuleSourceSelected),!1},radioSgModalChange:function(e){return $("#sg-modal-direction input:checked").val()==="inbound"?$("#rule-modal-ip-range").text("Source"):$("#rule-modal-ip-range").text("Destination")},sgModalSelectboxChange:function(e,t){return $("#sg-protocol-select-result").find(".show").removeClass("show"),$(".sg-protocol-option-input").removeClass("show"),$("#sg-protocol-"+t).addClass("show"),$(".protocol-icmp-sub-select").removeClass("shown"),$("#modal-protocol-select").data("protocal-type",t),null},icmpMainSelect:function(e,t){return $("#protocol-icmp-main-select").data("protocal-main",t),t==="3"||t==="5"||t==="11"||t==="12"?($(".protocol-icmp-sub-select").removeClass("shown"),$("#protocol-icmp-sub-select-"+t).addClass("shown")):$(".protocol-icmp-sub-select").removeClass("shown")},icmpSubSelect:function(e,t){return $("#protocol-icmp-main-select").data("protocal-sub",t)},modalRuleSourceSelected:function(e){var t,n;return n=$.trim($(e.target).find(".selected").attr("data-id")),t=n==="custom",$("#securitygroup-modal-description").toggle(t),$("#sg-add-model-source-select .selection").width(t?69:322),null},setSGName:function(e){var t,n,r;return r=$(e.currentTarget),t=r.val(),MC.aws.aws.checkResName(this.model.get("uid"),r,"SG")&&(n=this.model.get("name"),this.model.setName(t),this.setTitle(this.model.get("name")),this.prependTitle('<span class="sg-color" style="background-color:'+this.model.get("color")+'" ></span>'),$("#sg-rule-list").children().find(".rule-reference").each(function(){$(this).text()===n&&$(this).html(title)})),null},setSGDescription:function(e){return this.model.setDescription(e.target.value),null},sortSgRule:function(e){return this.model.sortSGRule($(e.target).find(".selected").attr("data-id")),this.refreshSgruleList(),null},removeRulefromList:function(e){var t,n,r;return t=$(e.target).closest("li"),n={ruleSetId:t.attr("data-uid"),port:t.attr("data-port"),protocol:t.attr("data-protocol"),direction:t.attr("data-direction"),relation:t.attr("data-relationid")},t.remove(),r=$("#sg-rule-list").children().length,$("#rule-count").text(r),this.model.removeRule(n),!1},saveSgModal:function(e){var t,n,r,s,o,u,a,f,l,c,h,p,d,v;c=$("#sg-modal-direction input:checked").val(),n=$("#securitygroup-modal-description"),p=$("#sg-protocol-tcp input"),d=$("#sg-protocol-udp input"),t=$("#sg-protocol-custom input"),o=$("#modal-protocol-select").data("protocal-type"),h=$.trim($("#sg-add-model-source-select").find(".selected").attr("data-id")),v={custom:{dom:t,method:function(e){return MC.validate.portRange(e)?Number(e)<0||Number(e)>255?i.ide.PARSLEY_THE_PROTOCOL_NUMBER_RANGE_MUST_BE_0_255:null:i.ide.PARSLEY_MUST_BE_A_VALID_FORMAT_OF_NUMBER}},tcp:{dom:p,method:function(e){var t;return t=[],t=MC.validate.portRange(e),t?MC.validate.portValidRange(t)?null:i.ide.PARSLEY_PORT_RANGE_BETWEEN_0_65535:i.ide.PARSLEY_MUST_BE_A_VALID_FORMAT_OF_PORT_RANGE}},udp:{dom:d,method:function(e){var t;return t=[],t=MC.validate.portRange(e),t?MC.validate.portValidRange(t)?null:i.ide.PARSLEY_PORT_RANGE_BETWEEN_0_65535:i.ide.PARSLEY_MUST_BE_A_VALID_FORMAT_OF_PORT_RANGE}}},o in v&&(r=v[o],r.dom.parsley("custom",r.method)),n.parsley("custom",function(e){return MC.validate("cidr",e)?null:i.ide.PARSLEY_MUST_BE_CIDR_BLOCK});if(h==="custom"&&!n.parsley("validate")||r&&!r.dom.parsley("validate"))return;l={protocol:o,direction:c||"inbound",fromPort:"",toPort:""};switch(o){case"tcp":case"udp":s=$("#sg-protocol-"+o+" input").val().split("-"),l.fromPort=s[0].trim(),s.length>=2&&(l.toPort=s[1].trim());break;case"icmp":u=$("#protocol-icmp-main-select").data("protocal-main"),a=$("#protocol-icmp-main-select").data("protocal-sub"),l.fromPort=u,l.toPort=a;break;case"custom":l.protocol=$("#sg-protocol-custom input").val()}return h==="custom"?l.relation=n.val():l.relation="@"+$("#sg-add-model-source-select").children("ul").children(".selected").attr("data-uid"),f=this.model.addRule(l),f?(this.refreshSgruleList(),modal.close()):notification("warning",i.ide.PROP_WARN_SG_RULE_EXIST)}}),new s})}.call(this),function(){define("workspaces/editor/property/sg/main",["../base/main","./model","./view"],function(e,t,n){var r;return r=e.extend({subPanelID:"SG",initStack:function(){return this.model=t,this.model.isReadOnly=!1,this.model.isAppEdit=!1,this.view=n,null},initApp:function(){return this.model=t,this.model.isReadOnly=!0,this.model.isAppEdit=!1,this.view=n,null},initAppEdit:function(){return this.model=t,this.model.isReadOnly=!1,this.model.isAppEdit=!0,this.view=n,null}}),null})}.call(this),function(){define("workspaces/editor/property/sgrule/model",["../base/model","Design"],function(e,t){var n;return n=e.extend({init:function(e){var n,r,i;i=t.instance().component(e);if(!i)return;return n=t.modelClassForType("SgRuleSet"),r=n.getRelatedSgRuleSets(i.port1Comp(),i.port2Comp()),this.set({uid:e,groups:n.getGroupedObjFromRuleSets(r),readOnly:this.isApp}),null}}),new n})}.call(this),define("workspaces/editor/property/sgrule/template/stack",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var n="",r;n+='\n  <div class="property-group-head truncate"><span class="sg-color sg-color-rule-header" style="background-color:'+a((r=e&&e.ownerColor,typeof r===u?r.apply(e):r))+'"></span>'+a((r=e&&e.ownerName,typeof r===u?r.apply(e):r))+'</div>\n  <ul class="property-group sg-rule-list property-list">',r=(r=e&&e.ruleListTpl,typeof r===u?r.apply(e):r);if(r||r===0)n+=r;return n+="</ul>\n  ",n}function c(e,t){var r="";return r+='\n  <div class="tac property-control-group">\n    <button class="btn" id="sg-edit-rule-button" style="width:180px;"><i class="icon-edit icon-label"></i>'+a(n.i18n.call(e,"PROP_SGRULE_BTN_EDIT_RULE",{hash:{},data:t}))+"</button>\n  </div>\n  ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<article>\n  <section class="property-info" style="margin-top:0;">\n    <div class="property-control-group">'+a(n.i18n.call(t,"PROP_SGRULE_DESCRIPTION",{hash:{},data:i}))+"</div>\n  </section>\n\n	",o=n.each.call(t,t&&t.groups,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+="\n\n  ",o=n.unless.call(t,t&&t.readOnly,{hash:{},inverse:f.noop,fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;return s+="\n\n</article>",s};return e.template(t)}),function(){define("workspaces/editor/property/sgrule/view",["../base/view","./template/stack","component/sgrule/SGRulePopup"],function(e,t,n){var r;return r=e.extend({events:{"click #sg-edit-rule-button":"onEditRule"},render:function(){var e,n,r,i;i=this.model.attributes.groups;for(n=0,r=i.length;n<r;n++)e=i[n],e.ruleListTpl=MC.template.sgRuleList(e.rules);return this.$el.html(t(this.model.attributes)),"Security Group Rule"},onEditRule:function(e){return new n(this.model.get("uid")),!1}}),new r})}.call(this),function(){define("workspaces/editor/property/sgrule/main",["../base/main","./model","./view"],function(e,t,n){var r;return r=e.extend({handleTypes:["ElbAmiAsso","SgRuleLine"],initStack:function(){return this.model=t,this.model.isApp=!1,this.view=n,null},initApp:function(){return this.model=t,this.model.isApp=!0,this.view=n,null},initAppEdit:function(){return this.model=t,this.model.isApp=!1,this.view=n,null}}),null})}.call(this),function(){define("workspaces/editor/property/volume/model",["../base/model","constant","Design","CloudResources"],function(e,t,n,r){var i;return i=e.extend({init:function(e){var i,s,o,u,a,f,l,c;return i=n.instance().component(e),u=i.attributes,u.owner?(f=i.isSupportEncrypted(),s=!0,f||(s=!1),u.snapshotId&&(f=!1),i.get("owner").type===t.RESTYPE.LC&&(s=!1),o=!1,f&&(o=(c=u.encrypted)==="true"||c===!0),l={isWin:u.name[0]!=="/",isStandard:u.volumeType==="standard",isIo1:u.volumeType==="io1",isGp2:u.volumeType==="gp2",iops:u.iops,volume_size:u.volumeSize,snapshot_id:u.snapshotId,name:u.name,displayEncrypted:s,support_encrypted:f,encrypted:o},l.isWin?l.editName=l.name.slice(-1):l.editName=l.name.slice(5),l.snapshot_id&&(a=r(t.RESTYPE.SNAP,n.instance().region()).get(l.snapshot_id),a&&(l.snapshot_size=a.get("volumeSize"),l.snapshot_desc=a.get("description"))),l.volume_size<10&&(l.iopsDisabled=!0),this.set("volume_detail",l),this.set("uid",e),null):(void 0,!1)},setDeviceName:function(e){var r,i,s,o,u,a,f,l,c,h,p,d,v;l=this.get("uid"),h=n.instance().component(l);if(!h){f=l.split("_"),i=f[2],o=f[0],s=n.instance().component(o),p=n.modelClassForType(t.RESTYPE.VOL),r=p&&p.allObjects()||[];for(d=0,v=r.length;d<v;d++){c=r[d];if(c.get("owner")===s&&c.get("name")===i){u=h.genFullName(e),a=""+f+"_volume_"+e,c.set("name",u),this.attributes.volume_detail.name=u,this.attributes.volume_detail.editName=e,this.set("uid",a);break}}}else u=h.genFullName(e),h.set("name",u),this.attributes.volume_detail.name=u;return null},setVolumeSize:function(e){var r,i,s,o,u,a,f,l,c,h,p;a=this.get("uid"),l=n.instance().component(a);if(!l){u=a.split("_"),i=u[2],o=u[0],s=n.instance().component(o),c=n.modelClassForType(t.RESTYPE.VOL),r=c&&c.allObjects()||[];for(h=0,p=r.length;h<p;h++){f=r[h];if(f.get("owner")===s&&f.get("name")===i){f.set("volumeSize",e);break}}}else l.set("volumeSize",e);return null},setVolumeType:function(e,t){var r;return r=n.instance().component(this.get("uid")),r.set({volumeType:e,iops:t}),null},setEncrypted:function(e){var t,r;return t=this.get("uid"),r=n.instance().component(t),!r||r.set("encrypted",e),null},genFullName:function(e){if(comp.name[0]!=="/"){if(comp.name==="xvd"+e)return!0}else if(comp.name.indexOf(e)!==-1)return!0},isDuplicate:function(e){var r,i,s,o,u,a,f,l,c,h,p;a=this.get("uid"),l=n.instance().component(a),c=n.modelClassForType(t.RESTYPE.VOL),r=c&&c.allObjects()||[];if(!l){u=a.split("_"),i=u[2],o=u[0],s=n.instance().component(o);for(h=0,p=r.length;h<p;h++){f=r[h];if(f.get("owner")===s){l=f;break}}}return _.some(r,function(t){var n;n=t.genFullName(e);if(t!==l&&t.get("name")===n)return!0})}}),new i})}.call(this),define("workspaces/editor/property/volume/template/stack",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var r="",i;r+='\n            <label for="volume-device">xvd</label>\n            <input class="input input-device"  type="text" value="'+a((i=(i=e&&e.volume_detail,i==null||i===!1?i:i.editName),typeof i===u?i.apply(e):i))+'" id="volume-device" data-ignore="true" data-required-rollback="true" maxlength="1" ',i=n["if"].call(e,e&&e.isAppEdit,{hash:{},inverse:f.noop,fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;return r+="/>\n            ",r}function c(e,t){return"disabled"}function h(e,t){var r="",i;r+='\n            <label for="volume-device">/dev/</label>\n            <input class="input input-device"  type="text" value="'+a((i=(i=e&&e.volume_detail,i==null||i===!1?i:i.editName),typeof i===u?i.apply(e):i))+'" id="volume-device" data-ignore="true" data-required-rollback="true" maxlength="5" ',i=n["if"].call(e,e&&e.isAppEdit,{hash:{},inverse:f.noop,fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;return r+="/>\n            ",r}function p(e,t){var r="",i;return r+='\n    <section class="property-control-group">\n        <label>'+a(n.i18n.call(e,"PROP_VOLUME_SNAPSHOT",{hash:{},data:t}))+'</label>\n        <div id="snapshot-info-group" class="clearfix property-block-wrap" data-uid=\''+a((i=(i=e&&e.volume_detail,i==null||i===!1?i:i.snapshot_id),typeof i===u?i.apply(e):i))+"'>\n            <div>"+a((i=(i=e&&e.volume_detail,i==null||i===!1?i:i.snapshot_id),typeof i===u?i.apply(e):i))+' <span class="mgl5">'+a((i=(i=e&&e.volume_detail,i==null||i===!1?i:i.snapshot_size),typeof i===u?i.apply(e):i))+"GB</span> </div>\n            <div><span>"+a((i=(i=e&&e.volume_detail,i==null||i===!1?i:i.snapshot_desc),typeof i===u?i.apply(e):i))+"</span></div>\n        </div>\n    </section>\n    ",r}function d(e,t){return'checked="checked"'}function v(e,t){var r="";return r+='class="tooltip" data-tooltip="'+a(n.i18n.call(e,"PROP_VOLUME_MSG_WARN",{hash:{},data:t}))+'"',r}function m(e,t){return'style="display:none"'}function g(e,t){return'style="display:block"'}function y(e,t){var r="",i;r+='\n            <input id="iops-ranged" type="text" class="input" value="100" name="iops-ranged" min="100" max="2000" required="" ',i=n["if"].call(e,e&&e.isAppEdit,{hash:{},inverse:f.noop,fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;return r+=">\n            ",r}function b(e,t){var r="",i;r+='\n            <input class="input" id="iops-ranged" type="text" value="'+a((i=(i=e&&e.volume_detail,i==null||i===!1?i:i.iops),typeof i===u?i.apply(e):i))+'" name="iops-ranged" min="100" max="2000" required="" ',i=n["if"].call(e,e&&e.isAppEdit,{hash:{},inverse:f.noop,fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;return r+=">\n            ",r}function w(e,t){var r="",i;r+='\n    <section class="property-control-group">\n        <label>'+a(n.i18n.call(e,"PROP_VOLUME_ENCRYPTED",{hash:{},data:t}))+'</label>\n        <div>\n            <div class="checkbox">\n                <input id="volume-property-encrypted-check" type="checkbox" ',i=n.unless.call(e,(i=e&&e.volume_detail,i==null||i===!1?i:i.support_encrypted),{hash:{},inverse:f.noop,fn:f.program(21,E,t),data:t});if(i||i===0)r+=i;r+=" ",i=n["if"].call(e,(i=e&&e.volume_detail,i==null||i===!1?i:i.encrypted),{hash:{},inverse:f.noop,fn:f.program(23,S,t),data:t});if(i||i===0)r+=i;r+="  ",i=n["if"].call(e,e&&e.isAppEdit,{hash:{},inverse:f.noop,fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;return r+='/>\n                <label for="volume-property-encrypted-check"></label>\n            </div>\n            <label for="volume-property-encrypted-check">'+a(n.i18n.call(e,"PROP_VOLUME_ENCRYPTED_LABEL",{hash:{},data:t}))+"</label>\n        </div>\n    </section>\n    ",r}function E(e,t){return'disabled="disabled"'}function S(e,t){return'checked="checked" '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<article id=\'property-panel-volume\' data-bind="true" data-focus="none">\n    <section class="property-control-group">\n        <label>'+a(n.i18n.call(t,"PROP_VOLUME_DEVICE_NAME",{hash:{},data:i}))+'</label>\n        <div class="name">\n            ',o=n["if"].call(t,(o=t&&t.volume_detail,o==null||o===!1?o:o.isWin),{hash:{},inverse:f.program(4,h,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+='\n        </div>\n    </section>\n    <section class="property-control-group">\n        <label>'+a(n.i18n.call(t,"PROP_VOLUME_SIZE",{hash:{},data:i}))+'</label>\n        <div class="ranged-number-input">\n            <label for="volume-size-ranged"></label>\n            <input id="volume-size-ranged" type="text" class="input" value="'+a((o=(o=t&&t.volume_detail,o==null||o===!1?o:o.volume_size),typeof o===u?o.apply(t):o))+'" name="volume-size-ranged" data-ignore="true" maxlength="4" data-required="true" data-required="true" data-type="number" ',o=n["if"].call(t,t&&t.isAppEdit,{hash:{},inverse:f.noop,fn:f.program(2,c,i),data:i});if(o||o===0)s+=o;s+='/>\n        <label for="volume-property-ranged-number" >GB</label>\n        </div>\n    </section>\n\n    ',o=n["if"].call(t,(o=t&&t.volume_detail,o==null||o===!1?o:o.snapshot_id),{hash:{},inverse:f.noop,fn:f.program(6,p,i),data:i});if(o||o===0)s+=o;s+='\n\n    <section class="property-control-group">\n        <label>'+a(n.i18n.call(t,"PROP_VOLUME_TYPE",{hash:{},data:i}))+'</label>\n        <div class="context" id="volume-type-radios">\n\n            <div>\n                <div class="radio">\n                    <input id="radio-standard" type="radio" name="volume-type" ',o=n["if"].call(t,(o=t&&t.volume_detail,o==null||o===!1?o:o.isStandard),{hash:{},inverse:f.noop,fn:f.program(8,d,i),data:i});if(o||o===0)s+=o;s+=' value="standard" ',o=n["if"].call(t,t&&t.isAppEdit,{hash:{},inverse:f.noop,fn:f.program(2,c,i),data:i});if(o||o===0)s+=o;s+='/>\n                    <label for="radio-standard"></label>\n                </div>\n                <label for="radio-standard">'+a(n.i18n.call(t,"PROP_VOLUME_TYPE_STANDARD",{hash:{},data:i}))+'</label>\n            </div>\n\n            <div>\n                <div class="radio">\n                    <input id="radio-gp2" type="radio" name="volume-type" ',o=n["if"].call(t,(o=t&&t.volume_detail,o==null||o===!1?o:o.isGp2),{hash:{},inverse:f.noop,fn:f.program(8,d,i),data:i});if(o||o===0)s+=o;s+=' value="gp2" ',o=n["if"].call(t,t&&t.isAppEdit,{hash:{},inverse:f.noop,fn:f.program(2,c,i),data:i});if(o||o===0)s+=o;s+='/>\n                    <label for="radio-gp2"></label>\n                </div>\n                <label for="radio-gp2">'+a(n.i18n.call(t,"PROP_VOLUME_TYPE_GP2",{hash:{},data:i}))+"</label>\n            </div>\n\n            <div ",o=n["if"].call(t,(o=t&&t.volume_detail,o==null||o===!1?o:o.iopsDisabled),{hash:{},inverse:f.noop,fn:f.program(10,v,i),data:i});if(o||o===0)s+=o;s+='>\n                <div class="radio">\n                    <input id="radio-io1" type="radio" name="volume-type" ',o=n["if"].call(t,(o=t&&t.volume_detail,o==null||o===!1?o:o.isIo1),{hash:{},inverse:f.noop,fn:f.program(8,d,i),data:i});if(o||o===0)s+=o;s+=' value="io1" ',o=n["if"].call(t,(o=t&&t.volume_detail,o==null||o===!1?o:o.iopsDisabled),{hash:{},inverse:f.noop,fn:f.program(2,c,i),data:i});if(o||o===0)s+=o;s+=" ",o=n["if"].call(t,t&&t.isAppEdit,{hash:{},inverse:f.noop,fn:f.program(2,c,i),data:i});if(o||o===0)s+=o;s+='/>\n                    <label for="radio-io1"></label>\n                </div>\n                <label for="radio-io1">'+a(n.i18n.call(t,"PROP_VOLUME_TYPE_IO1",{hash:{},data:i}))+'</label>\n            </div>\n\n        </div>\n    </section>\n\n    <section class="property-control-group" id="iops-group" ',o=n.unless.call(t,(o=t&&t.volume_detail,o==null||o===!1?o:o.isIo1),{hash:{},inverse:f.program(14,g,i),fn:f.program(12,m,i),data:i});if(o||o===0)s+=o;s+='>\n        <label>IOPS</label>\n        <div class="ranged-number-input">\n            <label for="iops-ranged"></label>\n            ',o=n["if"].call(t,(o=t&&t.volume_detail,o==null||o===!1?o:o.isStandard),{hash:{},inverse:f.program(18,b,i),fn:f.program(16,y,i),data:i});if(o||o===0)s+=o;s+='\n        <label for="volume-property-ranged-number" ></label>\n        </div>\n    </section>\n\n    ',o=n["if"].call(t,(o=t&&t.volume_detail,o==null||o===!1?o:o.displayEncrypted),{hash:{},inverse:f.noop,fn:f.program(20,w,i),data:i});if(o||o===0)s+=o;return s+="\n\n</article>",s};return e.template(t)}),function(){define("workspaces/editor/property/volume/view",["../base/view","./template/stack","event","i18n!/nls/lang.js"],function(e,t,n,r){var i;return i=e.extend({events:{"click #volume-type-radios input":"volumeTypeChecked","change #volume-device":"deviceNameChanged","keyup #volume-size-ranged":"sizeChanged","keyup  #volume-size-ranged":"processIops","keyup #iops-ranged":"sizeChanged","click #snapshot-info-group":"showSnapshotDetail","change #volume-property-encrypted-check":"encryptedCheck"},render:function(){return this.$el.html(t(_.extend({isAppEdit:this.model.isAppEdit},this.model.toJSON()))),$("#volume-size-ranged").parsley("custom",function(e){e=+e;if(!e||e>1024||e<1)return r.ide.PARSLEY_VOLUME_SIZE_MUST_IN_1_1024}),$("#iops-ranged").parsley("custom",function(e){var t;e=+e,t=parseInt($("#volume-size-ranged").val(),10);if(e>4e3||e<100)return r.ide.PARSLEY_IOPS_MUST_BETWEEN_100_4000;if(e>10*t)return r.ide.PARSLEY_IOPS_MUST_BE_LESS_THAN_10_TIMES_OF_VOLUME_SIZE}),this.model.attributes.volume_detail.name},volumeTypeChecked:function(e){var t,n;return this.processIops(),n=$("#volume-type-radios input:checked").val(),t=n==="io1"?$("#iops-ranged").val():"",n!=="io1"?$("#iops-group").hide():$("#iops-group").show(),this.model.setVolumeType(n,t),this.sizeChanged()},deviceNameChanged:function(e){var t,n,i,s,o;s=$(e.currentTarget),n=s.val(),t=s.prev("label").text(),o=t==="/dev/"?"linux":"windows",i=this,s.parsley("custom",function(e){if(!MC.validate.deviceName(e,o,!0))return o==="linux"?r.ide.PARSLEY_DEVICENAME_LINUX:r.ide.PARSLEY_DEVICENAME_WINDOWS;if(i.model.isDuplicate(e))return sprintf(r.ide.PARSLEY_VOLUME_NAME_INUSE,e)});if(s.parsley("validate"))return this.model.setDeviceName(n),this.setTitle(this.model.attributes.volume_detail.name)},processIops:function(e){var t,n;return n=parseInt($("#volume-size-ranged").val(),10),t=$("#radio-io1").is(":checked"),n>=10?this.enableIops():t||this.disableIops(),null},enableIops:function(){return $("#volume-type-radios > div").last().data("tooltip","").find("input").removeAttr("disabled")},disableIops:function(){return $("#volume-type-radios > div").last().data("tooltip","Volume size must be at least 10 GB to use Provisioned IOPS volume type.").find("input").attr("disabled","")},sizeChanged:function(e){var t,n,r,i;return r=parseInt($("#volume-size-ranged").val(),10),n=!0,i=$("#volume-size-ranged").parsley("validate"),t=$("#radio-io1").is(":checked"),t&&(n=$("#iops-ranged").parsley("validate")),i&&n&&(this.model.setVolumeSize(r),t&&this.model.setVolumeType("io1",$("#iops-ranged").val())),null},showSnapshotDetail:function(e){return this.trigger("OPEN_SNAPSHOT",$("#snapshot-info-group").data("uid")),null},encryptedCheck:function(e){return this.model.setEncrypted(e.target.checked),null}}),new i})}.call(this),function(){define("workspaces/editor/property/volume/app_model",["../base/model","Design","CloudResources","constant"],function(e,t,n,r){var i,s;return s=function(e){var i,s,o,u,a,f,l,c,h,p,d,v,m;a=e.get("owner").groupMembers()[0],o=e.get("name"),i=a.appId,u=n(r.RESTYPE.INSTANCE,t.instance().region()),c=n(r.RESTYPE.VOL,t.instance().region());if(!u)return null;s=(d=u.get(i))!=null?d.toJSON():void 0;if(s&&s.blockDeviceMapping){v=s.blockDeviceMapping;for(h=0,p=v.length;h<p;h++){f=v[h];if(s.rootDeviceName.indexOf(f.deviceName)!==-1)continue;l=(m=c.get(f.ebs.volumeId))!=null?m.attributes:void 0;if(!l)continue;if(l.device!==o)continue;return l}}return null},i=e.extend({init:function(e){var i,o,u;return o=t.instance().component(e),o?i=o.get("appId"):i=e,!i&&o.get("owner").type===r.RESTYPE.LC?u=s(o):(u=n(r.RESTYPE.VOL,t.instance().region()).get(i),u=u.attributes),u?(u.attachmentSet&&(u.name=u.attachmentSet[0].device),this.set(u)):!1}}),new i})}.call(this),define("workspaces/editor/property/volume/template/app",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var r="",i;return r+="\n    <dt>"+u(n.i18n.call(e,"PROP_VOLUME_SNAPSHOT_ID",{hash:{},data:t}))+"</dt>\n    <dd>"+u((i=e&&e.snapshotId,typeof i===a?i.apply(e):i))+"</dd>\n    ",r}function c(e,t){return"Encrypted"}function h(e,t){return"Not Encrypted"}function p(e,t){var n="",r;return n+="\n    <dt>IOPS</dt>\n    <dd>"+u((r=e&&e.iops,typeof r===a?r.apply(e):r))+"</dd>\n    ",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+='<article class="property-app">\n  <dl class="dl-vertical">\n    <dt>'+u(n.i18n.call(t,"PROP_VOLUME_ID",{hash:{},data:i}))+"</dt>\n    <dd>"+u(n.emptyStr.call(t,t&&t.volumeId,{hash:{},data:i}))+"</dd>\n    <dt>"+u(n.i18n.call(t,"PROP_VOLUME_DEVICE_NAME",{hash:{},data:i}))+"</dt>\n    <dd>"+u(n.emptyStr.call(t,t&&t.name,{hash:{},data:i}))+"</dd>\n    <dt>"+u(n.i18n.call(t,"PROP_VOLUME_STATE",{hash:{},data:i}))+'</dt>\n    <dd><i class="status status-'+u((o=t&&t.status,typeof o===a?o.apply(t):o))+'"></i>'+u((o=t&&t.status,typeof o===a?o.apply(t):o))+"</dd>\n    <dt>"+u(n.i18n.call(t,"PROP_VOLUME_CREATE_TIME",{hash:{},data:i}))+"</dt>\n    <dd>"+u(n.timeStr.call(t,t&&t.createTime,{hash:{},data:i}))+'</dd>\n  </dl>\n  <dl class="dl-vertical">\n    <dt>'+u(n.i18n.call(t,"PROP_VOLUME_TYPE",{hash:{},data:i}))+"</dt>\n    <dd>"+u(n.readableVt.call(t,t&&t.volumeType,{hash:{},data:i}))+"</dd>\n    ",o=n["if"].call(t,t&&t.snapshotId,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+="\n    <dt>"+u(n.i18n.call(t,"PROP_VOLUME_SIZE",{hash:{},data:i}))+"</dt>\n    <dd>"+u(n.emptyStr.call(t,t&&t.size,{hash:{},data:i}))+" GB</dd>\n    <dt>"+u(n.i18n.call(t,"PROP_VOLUME_ENCRYPTED",{hash:{},data:i}))+"</dt>\n    <dd>",o=n["if"].call(t,t&&t.encrypted,{hash:{},inverse:f.program(5,h,i),fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;s+="</dd>\n    ",o=n["if"].call(t,t&&t.iops,{hash:{},inverse:f.noop,fn:f.program(7,p,i),data:i});if(o||o===0)s+=o;return s+='\n  </dl>\n  <dl class="dl-vertical">\n    <dt>'+u(n.i18n.call(t,"PROP_VOLUME_ATTACHMENT_STATE",{hash:{},data:i}))+"</dt>\n    <dd>"+u(n.emptyStr.call(t,(o=(o=t&&t.attachmentSet,o==null||o===!1?o:o[0]),o==null||o===!1?o:o.state),{hash:{},data:i}))+"</dd>\n    <dt>"+u(n.i18n.call(t,"PROP_VOLUME_INSTANCE_ID",{hash:{},data:i}))+"</dt>\n    <dd>"+u(n.emptyStr.call(t,(o=(o=t&&t.attachmentSet,o==null||o===!1?o:o[0]),o==null||o===!1?o:o.instanceId),{hash:{},data:i}))+"</dd>\n    <dt>"+u(n.i18n.call(t,"PROP_VOLUME_ATTACHMENT_TIME",{hash:{},data:i}))+"</dt>\n    <dd>"+u(n.timeStr.call(t,(o=(o=t&&t.attachmentSet,o==null||o===!1?o:o[0]),o==null||o===!1?o:o.attachTime),{hash:{},data:i}))+"</dd>\n  </dl>\n</article>",s};return e.template(t)}),function(){define("workspaces/editor/property/volume/app_view",["../base/view","./template/app"],function(e,t){var n;return n=e.extend({render:function(){return this.$el.html(t(this.model.attributes)),this.model.attributes.name}}),new n})}.call(this),function(){define("workspaces/editor/property/volume/main",["../base/main","./model","./view","./app_model","./app_view","constant"],function(e,t,n,r,i,s){var o;return o=e.extend({handleTypes:[s.RESTYPE.VOL],setupStack:function(){return this.view.on("OPEN_SNAPSHOT",function(t){return e.loadSubPanel("STATIC",t),null}),null},initStack:function(e){var r,i;return i=Design.instance().component(e),r=i.get("owner"),this.model=t,this.view=n,r.type===s.RESTYPE.LC&&r.get("appId")?this.model.isAppEdit=!0:this.model.isAppEdit=!1,null},initApp:function(){return this.model=r,this.view=i,null},initAppEdit:function(){return this.model=r,this.view=i,null}}),null})}.call(this),function(){define("workspaces/editor/property/elb/model",["../base/model","Design","constant","sslcert_dropdown","CloudResources"],function(e,t,n,r,i){var s;return s=e.extend({init:function(e){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C;l=t.instance().component(e),this.getAppData(e),o=l!=null?l.toJSON():void 0,o.uid=e,o.isVpc=!0,v=l.getHealthCheckTarget(),o.pingProtocol=v[0],o.pingPort=v[1],o.pingPath=v[2],o.sslCert&&(o.sslCert=(T=o.sslCert)!=null?T.toJSON():void 0),N=o.listeners;for(y=0,E=N.length;y<E;y++){d=N[y];if(d.protocol==="SSL"||d.protocol==="HTTPS"){o.showCert=!0;break}}if(!o.isVpc){r=t.modelClassForType(n.RESTYPE.AZ),c={},C=l.connectionTargets("ElbAmiAsso");for(b=0,S=C.length;b<S;b++)s=C[b],s.parent().type===n.RESTYPE.ASG?u=s.parent().parent():u=s.parent(),c[u.get("name")]=!0;m=/-[\w]/g,g=function(e){return" "+e[1].toUpperCase()},p=function(e){return e.type===n.RESTYPE.INSTANCE},a=r.allPossibleAZ();for(w=0,x=a.length;w<x;w++)u=a[w],c[u.name]?(u.disabled=c[u.name],u.selected=!0):(u.disabled=!1,u.selected=o.AvailabilityZones.indexOf(u.name)!==-1),u.displayName=u.name.replace(m,g),u.displayName=u.displayName[0].toUpperCase()+u.displayName.substr(1),u.id&&(f=t.instance().component(u.id),u.instanceCount=_.filter(f.children(),p).length);o.azArray=a}return h=l.connectionTargets("SslCertUsage")[0],i=t.modelClassForType(n.RESTYPE.IAM).allObjects(),o.noSSLCert=!0,o.sslCertItem=_.map(i,function(e){var t;return h===e&&(o.noSSLCert=!1),t=!1,e.get("certId")&&e.get("arn")&&(t=!0),{uid:e.id,name:e.get("name"),selected:h===e,disableCertEdit:t}}),o.ConnectionDraining&&(o.ConnectionDraining.Enabled===!0?(o.connectionDrainingEnabled=!0,o.connectionDrainingTimeout=o.ConnectionDraining.Timeout):o.connectionDrainingEnabled=!1),this.set(o),null},getAppData:function(e){var r,s;e=e||this.get("uid"),s=t.instance().component(e),r=i(n.RESTYPE.ELB,t.instance().region()).get(s.get("appId"));if(!r)return;return r=r.attributes,this.set({appData:!0,isInternet:r.Scheme==="internet-facing",DNSName:r.Dnsname,CanonicalHostedZoneNameID:r.CanonicalHostedZoneNameID}),null},setScheme:function(e){return e=e==="internal",t.instance().component(this.get("uid")).setInternal(e),e||t.modelClassForType(n.RESTYPE.IGW).tryCreateIgw(),null},setElbCrossAZ:function(e){return t.instance().component(this.get("uid")).set("crossZone",!!e),null},setHealthProtocol:function(e){return t.instance().component(this.get("uid")).setHealthCheckTarget(e),null},setHealthPort:function(e){return t.instance().component(this.get("uid")).setHealthCheckTarget(void 0,e),null},setHealthPath:function(e){return t.instance().component(this.get("uid")).setHealthCheckTarget(void 0,void 0,e),null},setHealthInterval:function(e){return t.instance().component(this.get("uid")).set("healthCheckInterval",e),null},setHealthTimeout:function(e){return t.instance().component(this.get("uid")).set("healthCheckTimeout",e),null},setHealthUnhealth:function(e){return t.instance().component(this.get("uid")).set("unHealthyThreshold",e),null},setHealthHealth:function(e){return t.instance().component(this.get("uid")).set("healthyThreshold",e),null},setListener:function(e,n){return t.instance().component(this.get("uid")).setListener(e,n),null},removeListener:function(e){return t.instance().component(this.get("uid")).removeListener(e),null},setCert:function(e){return t.instance().component(this.get("uid")).connectionTargets("SslCertUsage")[0].set(e),null},addCert:function(e){var r;return r=t.modelClassForType(n.RESTYPE.IAM),(new r(e)).assignTo(t.instance().component(this.get("uid"))),null},removeCert:function(e){return t.instance().component(e).remove(),null},updateElbAZ:function(e){return t.instance().component(this.get("uid")).set("AvailabilityZones",e),null},changeCert:function(e){var n,r,i,s,o;r=t.instance();if(e)r.component(e).assignTo(r.component(this.get("uid")));else{o=r.component(this.get("uid")).connections("SslCertUsage");for(i=0,s=o.length;i<s;i++)n=o[i],n.remove()}return null},updateCert:function(e,n){return t.instance().component(e).updateValue(n),null},getOtherCertName:function(e){var r,i;return r=t.modelClassForType(n.RESTYPE.IAM).allObjects(),i=[],_.each(r,function(t){var n;n=t.get("name");if(e!==n)return i.push(n)}),i},setConnectionDraining:function(e,n){var r;return e||(n=null),r=t.instance().component(this.get("uid")),r.set("ConnectionDraining",{Enabled:e,Timeout:n})},setAdvancedProxyProtocol:function(e,n){var r;return r=t.instance().component(this.get("uid")),r.setPolicyProxyProtocol(e,n)},initNewSSLCertDropDown:function(e,n){var i,s,o,u;return u=this,i=t.instance().component(this.get("uid")),s=new r,s.uid=this.get("uid"),s.listenerNum=e,o=i.getSSLCert(e),o&&(s.sslCertName=o.get("name")),s},setIdletimeout:function(e){var n;return n=t.instance().component(this.get("uid")),n.set("idleTimeout",e)}}),new s})}.call(this),define("workspaces/editor/property/elb/template/stack",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var r="",i;r+='\n    <dl class="dl-vertical property-app">\n      <dt>'+u(n.i18n.call(e,"PROP_ELB_SCHEME",{hash:{},data:t}))+"</dt>\n      <dd>",i=n["if"].call(e,e&&e.isInternet,{hash:{},inverse:a.program(4,h,t),fn:a.program(2,c,t),data:t});if(i||i===0)r+=i;return r+="</dd>\n      <dt>"+u(n.i18n.call(e,"PROP_ELB_DNS_NAME",{hash:{},data:t}))+'</dt>\n      <dd>\n        <div class="click-select tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_ELB_TIP_CLICK_TO_SELECT_ALL",{hash:{},data:t}))+'">(A)'+u((i=e&&e.DNSName,typeof i===f?i.apply(e):i))+'</div>\n        <div class="click-select tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_ELB_TIP_CLICK_TO_SELECT_ALL",{hash:{},data:t}))+'">(AAAA)ipv6.'+u((i=e&&e.DNSName,typeof i===f?i.apply(e):i))+'</div>\n        <div class="click-select tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_ELB_TIP_CLICK_TO_SELECT_ALL",{hash:{},data:t}))+'">(A/AAAA)dualstack.'+u((i=e&&e.DNSName,typeof i===f?i.apply(e):i))+"</div>\n      </dd>\n      <dt>"+u(n.i18n.call(e,"PROP_ELB_HOST_ZONE_ID",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.CanonicalHostedZoneNameID,typeof i===f?i.apply(e):i))+"<dd>\n    </dl>\n	",r}function c(e,t){return"Internet Facing"}function h(e,t){return"Internal"}function p(e,t){var r="",i;r+='\n		<section class="property-control-group">\n			<label class="left" for="property-elb-name" >'+u(n.i18n.call(e,"PROP_ELB_NAME",{hash:{},data:t}))+'</label>\n			<span class="required-input right">'+u(n.i18n.call(e,"PROP_ELB_REQUIRED",{hash:{},data:t}))+'</span>\n			<input data-ignore="true" data-required-rollback="true" maxlength="17" class="input elb-name"  type="text" value="'+u((i=e&&e.name,typeof i===f?i.apply(e):i))+'" id="property-elb-name"/>\n		</section>\n\n		',i=n["if"].call(e,e&&e.isVpc,{hash:{},inverse:a.noop,fn:a.program(7,d,t),data:t});if(i||i===0)r+=i;return r+="\n	",r}function d(e,t){var r="",i;r+='\n		<section class="property-control-group">\n      <label>'+u(n.i18n.call(e,"PROP_ELB_SCHEME",{hash:{},data:t}))+'</label>\n      <div class="mgt5">\n        <div class="radio">\n            <input type="radio" ',i=n.unless.call(e,e&&e.internal,{hash:{},inverse:a.noop,fn:a.program(8,v,t),data:t});if(i||i===0)r+=i;r+=' value="internet" id="elb-scheme-select1" name="elb-schema-select"/>\n            <label for="elb-scheme-select1"></label>\n        </div>\n        <label for="elb-scheme-select1">Internet-facing</label>\n      </div>\n      <div class="mgt5">\n        <div class="radio">\n            <input type="radio" ',i=n["if"].call(e,e&&e.internal,{hash:{},inverse:a.noop,fn:a.program(8,v,t),data:t});if(i||i===0)r+=i;return r+=' value="internal" id="elb-scheme-select2" name="elb-schema-select"/>\n            <label for="elb-scheme-select2"></label>\n        </div>\n        <label for="elb-scheme-select2">Internal</label>\n    	</div>\n		</section>\n		',r}function v(e,t){return'checked="checked"'}function m(e,t){return"hide"}function g(e,t){var n;return u((n=e&&e.connectionDrainingTimeout,typeof n===f?n.apply(e):n))}function y(e,t){return"300"}function b(e,t){var r="",i;r+='\n		<li class="elb-property-listener">\n			<div class="elb-property-listener-item-remove icon-remove tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_ELB_TIP_REMOVE_LISTENER",{hash:{},data:t}))+'"></div>\n\n			<div class="property-control-group listener-item clearfix">\n				<div class="elb-property-listener-item-1">\n					<label class="left">Load Balancer Protocol</label>\n					<div class="selectbox elb-property-elb-protocol">\n						<div class="selection">'+u((i=e&&e.protocol,typeof i===f?i.apply(e):i))+'</div>\n						<ul class="dropdown">\n							<li data-id="HTTP" class="item ',i=n.ifCond.call(e,e&&e.protocol,"HTTP",{hash:{},inverse:a.noop,fn:a.program(17,w,t),data:t});if(i||i===0)r+=i;r+='">HTTP</li>\n							<li data-id="HTTPS" class="item ',i=n.ifCond.call(e,e&&e.protocol,"HTTPS",{hash:{},inverse:a.noop,fn:a.program(17,w,t),data:t});if(i||i===0)r+=i;r+='">HTTPS</li>\n							<li data-id="TCP" class="item ',i=n.ifCond.call(e,e&&e.protocol,"TCP",{hash:{},inverse:a.noop,fn:a.program(17,w,t),data:t});if(i||i===0)r+=i;r+='">TCP</li>\n							<li data-id="SSL" class="item ',i=n.ifCond.call(e,e&&e.protocol,"SSL",{hash:{},inverse:a.noop,fn:a.program(17,w,t),data:t});if(i||i===0)r+=i;r+='">SSL</li>\n						</ul>\n					</div>\n				</div>\n				<div class="elb-property-listener-item-2">\n					<label class="left">Port</label>\n					<input class="input elb-property-elb-port tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_ELB_TIP_25_80_443OR1024TO65535",{hash:{},data:t}))+'" type="text" value="'+u((i=e&&e.port,typeof i===f?i.apply(e):i))+'" data-ignore="true" data-required="true" data-type="digits" maxlength="5"/>\n				</div>\n			</div>\n\n			<div class="property-control-group listener-item clearfix">\n				<div class="left elb-property-listener-item-1">\n					<label class="left">Instance Protocol</label>\n					<div class="selectbox elb-property-instance-protocol">\n						<div class="selection">'+u((i=e&&e.instanceProtocol,typeof i===f?i.apply(e):i))+'</div>\n						<ul class="dropdown">\n							<li data-id="HTTP" class="item ',i=n.ifCond.call(e,e&&e.instanceProtocol,"HTTP",{hash:{},inverse:a.noop,fn:a.program(17,w,t),data:t});if(i||i===0)r+=i;r+='">HTTP</li>\n							<li data-id="HTTPS" class="item ',i=n.ifCond.call(e,e&&e.instanceProtocol,"HTTPS",{hash:{},inverse:a.noop,fn:a.program(17,w,t),data:t});if(i||i===0)r+=i;r+='">HTTPS</li>\n							<li data-id="TCP" class="item ',i=n.ifCond.call(e,e&&e.instanceProtocol,"TCP",{hash:{},inverse:a.noop,fn:a.program(17,w,t),data:t});if(i||i===0)r+=i;r+='">TCP</li>\n							<li data-id="SSL" class="item ',i=n.ifCond.call(e,e&&e.instanceProtocol,"SSL",{hash:{},inverse:a.noop,fn:a.program(17,w,t),data:t});if(i||i===0)r+=i;return r+='">SSL</li>\n						</ul>\n					</div>\n				</div>\n				<div class="left elb-property-listener-item-2">\n					<label class="left">Port</label>\n					<input class="input elb-property-instance-port tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_ELB_TIP_1_65535",{hash:{},data:t}))+'" type="text" value="'+u((i=e&&e.instancePort,typeof i===f?i.apply(e):i))+'" data-ignore="true" data-required="true" data-type="digits" maxlength="5"/>\n				</div>\n			</div>\n\n			<div class="property-control-group sslcert-select clearfix">\n				<label for="sslcert-placeholder">'+u(n.i18n.call(e,"PROP_ELB_SERVER_CERTIFICATE",{hash:{},data:t}))+'</label>\n				<div class="sslcert-placeholder"></div>\n			</div>\n		</li>\n		',r}function w(e,t){return"selected"}function E(e,t){return" selected"}function S(e,t){var r="",i;r+='\n								<li class="item',i=n["if"].call(e,e&&e.selected,{hash:{},inverse:a.noop,fn:a.program(19,E,t),data:t});if(i||i===0)r+=i;r+='" data-id="'+u((i=e&&e.uid,typeof i===f?i.apply(e):i))+'">\n									'+u((i=e&&e.name,typeof i===f?i.apply(e):i)),i=n.unless.call(e,e&&e.disableCertEdit,{hash:{},inverse:a.noop,fn:a.program(22,x,t),data:t});if(i||i===0)r+=i;return r+='<span class="icon-remove"></span>\n								</li>\n							',r}function x(e,t){return'<span class="icon-edit"></span>'}function T(e,t){return'disabled="disabled"'}function N(e,t){var r="";return r+='\n	<div class="option-group-head expand">'+u(n.i18n.call(e,"PROP_ELB_SG_DETAIL",{hash:{},data:t}))+'<span class="property-head-num-wrap">(<span id="property-head-sg-num"></span>)</span></div>\n	<div class="option-group sg-group"></div>\n\n	',r}function C(e,t){var r="",i;r+="\n		",i=n["if"].call(e,e&&e.azArray,{hash:{},inverse:a.noop,fn:a.program(29,k,t),data:t});if(i||i===0)r+=i;return r+="\n	",r}function k(e,t){var r="",i;r+='\n		<div class="option-group-head"> '+u(n.i18n.call(e,"PROP_ELB_AVAILABILITY_ZONE",{hash:{},data:t}))+' </div>\n		<div class="option-group" id="property-elb-az-cb-group">\n			',i=n.each.call(e,e&&e.azArray,{hash:{},inverse:a.noop,fn:a.program(30,L,t),data:t});if(i||i===0)r+=i;return r+="\n		</div>\n		",r}function L(e,t){var r="",i;r+='\n			<section class="property-control-group">\n				<div class="checkbox">\n					<input class="property-elb-az-checkbox" type="checkbox" ',i=n["if"].call(e,e&&e.disabled,{hash:{},inverse:a.noop,fn:a.program(24,T,t),data:t});if(i||i===0)r+=i;r+=" ",i=n["if"].call(e,e&&e.selected,{hash:{},inverse:a.noop,fn:a.program(8,v,t),data:t});if(i||i===0)r+=i;return r+=' data-name="'+u((i=e&&e.name,typeof i===f?i.apply(e):i))+'" id="property-elb-az-'+u((i=e&&e.name,typeof i===f?i.apply(e):i))+'"/>\n					<label for="property-elb-az-'+u((i=e&&e.name,typeof i===f?i.apply(e):i))+'"></label>\n				</div>\n				<label for="property-elb-az-'+u((i=e&&e.name,typeof i===f?i.apply(e):i))+'" class="checkbox-label-main">\n					<span>'+u((i=e&&e.displayName,typeof i===f?i.apply(e):i))+'</span></label>\n				<label for="property-elb-az-'+u((i=e&&e.name,typeof i===f?i.apply(e):i))+'" class="checkbox-label-minor">'+u((i=e&&e.instanceCount,typeof i===f?i.apply(e):i))+" instances</label>\n			</section>\n			",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a=this,f="function";s+='<article id="stack-elb-property-panel">\n\n	<div class="option-group-head expand">'+u(n.i18n.call(t,"PROP_ELB_DETAILS",{hash:{},data:i}))+'</div>\n	<div class="option-group" data-bind="true" >\n	',o=n["if"].call(t,t&&t.appData,{hash:{},inverse:a.program(6,p,i),fn:a.program(1,l,i),data:i});if(o||o===0)s+=o;s+='\n		<section class="property-control-group">\n			<div class="checkbox">\n				<input id="elb-cross-az-select" type="checkbox" ',o=n["if"].call(t,t&&t.crossZone,{hash:{},inverse:a.noop,fn:a.program(8,v,i),data:i});if(o||o===0)s+=o;s+='/>\n				<label for="elb-cross-az-select"></label>\n			</div>\n			<label for="elb-cross-az-select" >Enable cross-zone load balancing</label>\n			<a class="elb-info-icon tooltip icon-info" href="https://aws.amazon.com/about-aws/whats-new/2013/11/06/elastic-load-balancing-adds-cross-zone-load-balancing/" data-tooltip="'+u(n.i18n.call(t,"PROP_ELB_TIP_CLICK_TO_READ_RELATED_AWS_DOCUMENT",{hash:{},data:i}))+'" target="_blank"></a>\n		</section>\n		<section class="property-control-group">\n			<div class="checkbox">\n				<input id="elb-connection-draining-select" type="checkbox" ',o=n["if"].call(t,t&&t.connectionDrainingEnabled,{hash:{},inverse:a.noop,fn:a.program(8,v,i),data:i});if(o||o===0)s+=o;s+='/>\n				<label for="elb-connection-draining-select"></label>\n			</div>\n			<label for="elb-connection-draining-select" >Enable Connection Draining</label>\n			<a class="elb-info-icon tooltip icon-info" href="http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/config-conn-drain.html" data-tooltip="'+u(n.i18n.call(t,"PROP_ELB_TIP_CLICK_TO_READ_RELATED_AWS_DOCUMENT",{hash:{},data:i}))+'" target="_blank"></a>\n			<div class="elb-connection-draining-input-group ',o=n.unless.call(t,t&&t.connectionDrainingEnabled,{hash:{},inverse:a.noop,fn:a.program(10,m,i),data:i});if(o||o===0)s+=o;s+='">\n				<label for="elb-connection-draining-input" class="left">Timeout</label>\n				<input id="elb-connection-draining-input" class="input parsley-validated" type="text" value="',o=n["if"].call(t,t&&t.connectionDrainingTimeout,{hash:{},inverse:a.program(14,y,i),fn:a.program(12,g,i),data:i});if(o||o===0)s+=o;s+='" data-ignore="true" data-required="true" data-type="number">\n				<label for="elb-connection-draining-input">seconds</label>\n			</div>\n		</section>\n		<section class="property-control-group">\n			<label for="property-elb-idle-timeout" >'+u(n.i18n.call(t,"PROP_ELB_IDLE_TIMEOUT",{hash:{},data:i}))+'</label>\n			<input class="input input-short mgt5"  type="text" value="'+u((o=t&&t.idleTimeout,typeof o===f?o.apply(t):o))+'" name="property-elb-idle-timeout" id="property-elb-idle-timeout" data-required="true" data-type="digits" data-min="1" data-max="3600" data-ignore="true"/>\n			<label class="elb-property-right-text" for="property-elb-idle-timeout" >'+u(n.i18n.call(t,"PROP_ELB_HEALTH_CHECK_INTERVAL_SECONDS",{hash:{},data:i}))+'</label>\n		</section>\n	</div>\n\n	<!--\n	<div class="option-group-head">Advanced Configuration</div>\n	<div class="option-group" data-bind="true"> <ul id="elb-property-listener-list" class="property-list">\n		<section class="property-control-group">\n			<label>Proxy Protocol</label>\n			<div class="mgt5">\n				<div class="checkbox">\n					<input id="elb-advanced-proxy-protocol-select" type="checkbox" ',o=n["if"].call(t,(o=t&&t.otherPoliciesMap,o==null||o===!1?o:o.EnableProxyProtocol),{hash:{},inverse:a.noop,fn:a.program(8,v,i),data:i});if(o||o===0)s+=o;s+='/>\n					<label for="elb-advanced-proxy-protocol-select"></label>\n				</div>\n				<label for="elb-advanced-proxy-protocol-select">Enable Proxy Protocol</label>\n				<div id="elb-advanced-proxy-protocol-select-tip" class="property-info ',o=n.unless.call(t,(o=t&&t.otherPoliciesMap,o==null||o===!1?o:o.EnableProxyProtocol),{hash:{},inverse:a.noop,fn:a.program(10,m,i),data:i});if(o||o===0)s+=o;s+='">If you have a Proxy Protocol enabled proxy server in front of your load balancer, then you must not enable Proxy Protocol on your load balancer.</div>\n			</div>\n		</section>\n	</div>\n	-->\n\n	<div class="option-group-head"> '+u(n.i18n.call(t,"PROP_ELB_LISTENER_DETAIL",{hash:{},data:i}))+' </div>\n	<div class="option-group" data-bind="true"> <ul id="elb-property-listener-list" class="property-list">\n		',o=n.each.call(t,t&&t.listeners,{hash:{},inverse:a.noop,fn:a.program(16,b,i),data:i});if(o||o===0)s+=o;s+='\n		</ul>\n		<a href="#" id="elb-property-listener-content-add" class="add-to-list action-link">'+u(n.i18n.call(t,"PROP_ELB_BTN_ADD_LISTENER",{hash:{},data:i}))+'</a>\n<!-- 		<section class="property-control-group" id="property-control-group-cert-setting">\n			<label class="left">'+u(n.i18n.call(t,"PROP_ELB_SERVER_CERTIFICATE",{hash:{},data:i}))+'</label>\n			<div class="selectbox" id="sslcert-select">\n				<div class="selection"></div>\n				<div style="height: 120px; width:260px;" class="dropdown scroll-wrap scrollbar-auto-hide  clearfix">\n					<div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n					<div class="scroll-content">\n						<ul>\n							<li class="item',o=n["if"].call(t,t&&t.noSSLCert,{hash:{},inverse:a.noop,fn:a.program(19,E,i),data:i});if(o||o===0)s+=o;s+='">None</li>\n							',o=n.each.call(t,t&&t.sslCertItem,{hash:{},inverse:a.noop,fn:a.program(21,S,i),data:i});if(o||o===0)s+=o;s+='\n						</ul>\n					</div>\n				</div>\n				<div class="editor">\n					<a href="#" class="editbtn">Add New Certificate...</a>\n				</div>\n			</div>\n		</section> -->\n	</div>\n\n	<div class="option-group-head"> '+u(n.i18n.call(t,"PROP_ELB_HEALTH_CHECK_DETAILS",{hash:{},data:i}))+' </div>\n	<div class="option-group" data-bind="true" data-validate="parsley" >\n		<section class="property-control-group">\n			<label>'+u(n.i18n.call(t,"PROP_ELB_PING_PROTOCOL",{hash:{},data:i}))+'</label>\n			<div class="selectbox mgt5" id="elb-property-health-protocol-select">\n				<div class="selection">'+u((o=t&&t.pingProtocol,typeof o===f?o.apply(t):o))+'</div>\n				<ul class="dropdown" tabindex="-1">\n					<li class="item',o=n.ifCond.call(t,t&&t.pingProtocol,"TCP",{hash:{},inverse:a.noop,fn:a.program(19,E,i),data:i});if(o||o===0)s+=o;s+='" data-id="TCP">TCP</li>\n					<li class="item',o=n.ifCond.call(t,t&&t.pingProtocol,"HTTP",{hash:{},inverse:a.noop,fn:a.program(19,E,i),data:i});if(o||o===0)s+=o;s+='" data-id="HTTP">HTTP</li>\n					<li class="item',o=n.ifCond.call(t,t&&t.pingProtocol,"HTTPS",{hash:{},inverse:a.noop,fn:a.program(19,E,i),data:i});if(o||o===0)s+=o;s+='" data-id="HTTPS">HTTPS</li>\n					<li class="item',o=n.ifCond.call(t,t&&t.pingProtocol,"SSL",{hash:{},inverse:a.noop,fn:a.program(19,E,i),data:i});if(o||o===0)s+=o;s+='" data-id="SSL">SSL</li>\n				</ul>\n			</div>\n		</section>\n		<section class="property-control-group" data-bind="true">\n			<label for="property-elb-health-port" >'+u(n.i18n.call(t,"PROP_ELB_PING_PORT",{hash:{},data:i}))+'</label>\n			<input class="input mgt5" tooltip="1-65535" type="text" value="'+u((o=t&&t.pingPort,typeof o===f?o.apply(t):o))+'" name="property-elb-health-port" id="property-elb-health-port" data-required="true" data-type="digits" data-ignore="true" maxlength="5"/>\n		</section>\n		<section class="property-control-group">\n			<label for="property-elb-health-path" >'+u(n.i18n.call(t,"PROP_ELB_PING_PATH",{hash:{},data:i}))+'</label>\n			<div class="pos-r mgt5">\n				<input class="input" ',o=n.ifCond.call(t,t&&t.pingProtocol,"SSL",{hash:{},inverse:a.noop,fn:a.program(24,T,i),data:i});if(o||o===0)s+=o;o=n.ifCond.call(t,t&&t.pingProtocol,"TCP",{hash:{},inverse:a.noop,fn:a.program(24,T,i),data:i});if(o||o===0)s+=o;s+='type="text" value="'+u((o=t&&t.pingPath,typeof o===f?o.apply(t):o))+'" name="property-elb-health-path" id="property-elb-health-path" />\n				<span class="elb-pingpath-prefix">/</span>\n			</div>\n		</section>\n\n		<section class="property-control-group">\n			<label for="property-elb-health-interval" >'+u(n.i18n.call(t,"PROP_ELB_HEALTH_CHECK_INTERVAL",{hash:{},data:i}))+'</label>\n			<input class="input input-short mgt5"  type="text" value="'+u((o=t&&t.healthCheckInterval,typeof o===f?o.apply(t):o))+'" name="property-elb-health-interval" id="property-elb-health-interval" data-required="true" data-type="digits" data-ignore="true"/>\n			<label class="elb-property-right-text" for="property-elb-health-interval" >'+u(n.i18n.call(t,"PROP_ELB_HEALTH_CHECK_INTERVAL_SECONDS",{hash:{},data:i}))+'</label>\n		</section>\n		<section class="property-control-group">\n			<label for="property-elb-health-timout" >'+u(n.i18n.call(t,"PROP_ELB_HEALTH_CHECK_RESPOND_TIMEOUT",{hash:{},data:i}))+'</label>\n			<input class="input input-short mgt5"  type="text" value="'+u((o=t&&t.healthCheckTimeout,typeof o===f?o.apply(t):o))+'" name="property-elb-health-timeout" id="property-elb-health-timeout" data-required="true" data-type="digits" data-ignore="true"/>\n			<label class="elb-property-right-text" for="property-elb-health-timeout" >'+u(n.i18n.call(t,"PROP_ELB_HEALTH_CHECK_INTERVAL_SECONDS",{hash:{},data:i}))+'</label>\n		</section>\n\n		<section class="property-control-group">\n			<label>'+u(n.i18n.call(t,"PROP_ELB_UNHEALTH_THRESHOLD",{hash:{},data:i}))+'</label>\n			<div class="slider" id="elb-property-slider-unhealthy">\n				<a class="thumb"></a>\n				<ul class="marker"><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li></ul>\n			</div>\n		</section>\n		<section class="property-control-group">\n			<label>'+u(n.i18n.call(t,"PROP_ELB_HEALTH_THRESHOLD",{hash:{},data:i}))+'</label>\n			<div class="slider" id="elb-property-slider-healthy">\n				<a class="thumb"></a>\n				<ul class="marker"><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li></ul>\n			</div>\n		</section>\n	</div>\n\n	',o=n["if"].call(t,t&&t.isVpc,{hash:{},inverse:a.program(28,C,i),fn:a.program(26,N,i),data:i});if(o||o===0)s+=o;return s+="\n\n</article>",s};return e.template(t)}),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};define("workspaces/editor/property/elb/view",["../base/view","./template/stack","event","i18n!/nls/lang.js"],function(t,n,r,i){var s,o;return o={makeInRange:function(e,t,n,r){var i,s;return i=t[0],s=t[1],isFinite(e)?(e=+e,e<i?e=i:e>s&&(e=s)):e=r,n.val(e),e}},s=t.extend({events:{"keyup #property-elb-name":"elbNameChange","change #elb-scheme-select1":"schemeSelectChange","change #elb-scheme-select2":"schemeSelectChange","OPTION_CHANGE #elb-property-health-protocol-select":"healthProtocolSelect","change #property-elb-health-port":"healthPortChanged","change #property-elb-health-path":"healthPathChanged","change #property-elb-health-interval":"healthIntervalChanged","change #property-elb-health-timeout":"healthTimeoutChanged","OPTION_CHANGE .elb-property-elb-protocol":"protocolChanged","OPTION_CHANGE .elb-property-instance-protocol":"protocolChanged","change .elb-property-elb-port":"portChanged","change .elb-property-instance-port":"portChanged","click #elb-property-listener-content-add":"listenerItemAddClicked","click .elb-property-listener-item-remove":"listenerItemRemovedClicked","change #elb-property-cert-name-input":"listenerCertChanged","change #elb-property-cert-privatekey-input":"listenerCertChanged","change #elb-property-cert-publickey-input":"listenerCertChanged","change #elb-property-cert-chain-input":"listenerCertChanged","change .property-elb-az-checkbox":"azCheckChanged","mousedown .slider .thumb":"sliderMouseDown","mousedown .slider li":"sliderSelect","SLIDER_CHANGE .slider":"sliderChanged","change #elb-cross-az-select":"elbCrossAZSelect","click .editbtn":"elbSSLCertAdd","click #sslcert-select .item":"changeSSLCert","click #sslcert-select .item .icon-edit":"elbSSLCertEdit","click #sslcert-select .item .icon-remove":"elbSSLCertRemove","click #elb-connection-draining-select":"elbConnectionDrainSelectChange","change #elb-connection-draining-input":"elbConnectionDrainTimeoutChange","click #elb-advanced-proxy-protocol-select":"elbAdvancedProxyProtocolSelectChange","change #property-elb-idle-timeout":"elbIdleTimeoutChange"},render:function(){var e;return e=this,this.$el.html(n(this.model.attributes)),this.updateSlider($("#elb-property-slider-unhealthy"),this.model.get("unHealthyThreshold")-2),this.updateSlider($("#elb-property-slider-healthy"),this.model.get("healthyThreshold")-2),_.each(this.$(".sslcert-placeholder"),function(t,n){var r,i,s;return i=$(t),r=i.parents(".elb-property-listener"),s=e.model.initNewSSLCertDropDown(n),r.data("sslCertDropDown",s),i.html(s.render().el)}),this.updateCertView(),this.model.attributes.name},elbNameChange:function(e){var t,n,r,i;i=$(e.currentTarget),t=i.val(),r=this.model.get("name");if(MC.aws.aws.checkResName(this.model.get("uid"),i,"Load Balancer"))return this.model.setName(t),this.setTitle(t),r+="-sg",n=t+"-sg",$("#sg-info-list").children().each(function(){var e;e=$(this).find(".sg-name");if(e.text()===r)return e.text(n),!1})},schemeSelectChange:function(e){return this.model.setScheme(e.currentTarget.value),null},healthProtocolSelect:function(e,t){return t==="TCP"||t==="SSL"?$("#property-elb-health-path").attr("disabled","disabled"):$("#property-elb-health-path").removeAttr("disabled"),this.model.setHealthProtocol(t)},healthPortChanged:function(e){var t,n;return t=$(e.currentTarget),n=t.val(),n=o.makeInRange(n,[1,65535],t,1),this.model.setHealthPort(n)},healthPathChanged:function(e){return this.model.setHealthPath($(e.currentTarget).val())},healthIntervalChanged:function(e){var t,n,r;t=$(e.currentTarget),r=o.makeInRange(t.val(),[5,300],t,30),n=$("#property-elb-health-timeout"),t.parsley("custom",function(e){var t,r;return t=Number(e),r=Number(n.val()),t<=r?i.ide.PROP_ELB_HEALTH_INTERVAL_VALID:null});if(!t.parsley("validate"))return;return n.parsley("validate"),this.model.setHealthInterval(r)},healthTimeoutChanged:function(e){var t,n,r;n=$(e.currentTarget),r=o.makeInRange(n.val(),[2,60],n,5),t=$("#property-elb-health-interval"),n.parsley("custom",function(e){var n,r;return n=Number(t.val()),r=Number(e),n<=r?i.ide.PROP_ELB_HEALTH_INTERVAL_VALID:null});if(!n.parsley("validate"))return;return t.parsley("validate"),this.model.setHealthTimeout(r)},elbIdleTimeoutChange:function(e){var t;t=$(e.currentTarget);if(t.parsley("validate"))return this.model.setIdletimeout(Number(t.val()))},sliderChanged:function(e,t){var n,r;return r=$(e.target),n=e.target.id,t+=2,n==="elb-property-slider-unhealthy"?this.model.setHealthUnhealth(t):this.model.setHealthHealth(t)},listenerItemAddClicked:function(e){var t,n,r,i,s,o,u;return u=this,t=$("#elb-property-listener-list").children().eq(0).clone(),i=t.find("ul"),r=t.find("input.input"),r.val("80"),i.children(".selected").removeClass("selected"),i.children(":first-child").addClass("selected"),i.prev(".selection").text("HTTP"),$("#elb-property-listener-list").append(t),this.updateListener(t),s=t.find(".sslcert-placeholder"),n=s.parents(".elb-property-listener"),o=u.model.initNewSSLCertDropDown(t.index()),n.data("sslCertDropDown",o),s.html(o.render().el),!1},updateListener:function(e){var t;return t={port:e.find(".elb-property-elb-port").val(),protocol:e.find(".elb-property-elb-protocol .selected").text(),instancePort:e.find(".elb-property-instance-port").val(),instanceProtocol:e.find(".elb-property-instance-protocol .selected").text()},this.model.setListener(e.index(),t),this.updateCertView(),null},protocolChanged:function(e){var t,n,r,i,s,o,u,a,f,l,c,h;return n=$(e.currentTarget),e&&(c=$(e.target),h=c.find(".selection").text(),h&&(l=null,a=null,f=c.parents(".elb-property-listener"),c.hasClass("elb-property-elb-protocol")?(l=f.find(".elb-property-elb-port"),a=f.find(".elb-property-instance-protocol")):(l=f.find(".elb-property-instance-port"),a=f.find(".elb-property-elb-protocol")),h==="HTTPS"||h==="SSL"?l.val("443"):l.val("80"),s={HTTP:"application",HTTPS:"application",TCP:"transport",SSL:"transport"},i=h,u=a.find(".selection").text(),s[i]!==s[u]&&(a.find(".selection").text(i),t=a.find(".item"),t.removeClass("selected"),r=a.find("[data-id="+i+"]"),r.addClass("selected")),a.hasClass("elb-property-elb-protocol")?l=f.find(".elb-property-elb-port"):l=f.find(".elb-property-instance-port"),o=a.find(".selection").text(),o==="HTTPS"||o==="SSL"?l.val("443"):l.val("80"))),this.updateListener(n.closest("li")),null},portChanged:function(e){var t,n;return t=$(e.currentTarget),t.hasClass("elb-property-elb-port")?n=function(e){e=parseInt(e,10);if(!(e===25||e===80||e===443||1023<e&&e<65536))return i.ide.PARSLEY_LOAD_BALANCER_PORT_MUST_BE_SOME_PROT}:n=function(e){e=parseInt(e,10);if(!(0<e&&e<65536))return i.ide.PARSLEY_INSTANCE_PORT_MUST_BE_BETWEEN_1_AND_65535},t.parsley("custom",n),t.parsley("validate")&&this.updateListener(t.closest("li")),null},listenerItemChanged:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v;return e&&(d=$(e.target),v=d.find(".selection").text(),v&&(p=null,c=null,h=d.parents(".elb-property-listener-main"),d.hasClass("elb-property-listener-elb-protocol-select")?(p=h.find(".elb-property-listener-elb-port-input"),c=h.find(".elb-property-listener-instance-protocol-select")):(p=h.find(".elb-property-listener-instance-port-input"),c=h.find(".elb-property-listener-elb-protocol-select")),v==="HTTPS"||v==="SSL"?p.val("443"):p.val("80"),i={HTTP:"application",HTTPS:"application",TCP:"transport",SSL:"transport"},t=v,l=c.find(".selection").text(),i[t]!==i[l]&&c.find(".selection").text(t),c.hasClass("elb-property-listener-elb-protocol-select")?p=h.find(".elb-property-listener-elb-port-input"):p=h.find(".elb-property-listener-instance-port-input"),f=c.find(".selection").text(),f==="HTTPS"||f==="SSL"?p.val("443"):p.val("80"))),a=this,o=$("#accordion-group-elb-property-listener"),u=o.find(".elb-property-listener-main"),s=[],r=!1,n=!1,u.each(function(e,t){var n,i,o,u,a,f,l,c;c=$(this),o=$.trim(c.find(".elb-property-listener-elb-protocol-select .selection").text()),i=c.find(".elb-property-listener-elb-port-input").val(),f=$.trim(c.find(".elb-property-listener-instance-protocol-select .selection").text()),a=c.find(".elb-property-listener-instance-port-input").val(),n=c.find(".elb-property-listener-elb-port-input"),u=c.find(".elb-property-listener-instance-port-input"),elbPortValidate&&instancePortValidate&&!isNaN(parseInt(i,10))&&!isNaN(parseInt(a,10))&&(l={Listener:{LoadBalancerPort:i,InstanceProtocol:f,Protocol:o,SSLCertificateId:"",InstancePort:a},PolicyNames:""},s.push(l));if(o==="HTTPS"||o==="SSL")r=!0;return null}),this.model.setListenerAry(idx,listener),this.updateCertView(),null},listenerItemRemovedClicked:function(e){var t;return t=$(e.currentTarget).closest("li"),this.model.removeListener(t.index()),t.remove(),this.updateCertView(),!1},listenerCertChanged:function(e){return this.model.setCert({name:$("#elb-property-cert-name-input").val(),key:$("#elb-property-cert-privatekey-input").val(),body:$("#elb-property-cert-publickey-input").val(),chain:$("#elb-property-cert-chain-input").val()}),null},updateCertView:function(){return $("#elb-property-listener-list").children().each(function(){var e,t,n,r;return n=$(this).find(".elb-property-elb-protocol .selected").text(),e=$(this).find(".sslcert-select"),t=$(this),r=t.data("sslCertDropDown"),n==="HTTPS"||n==="SSL"?(r&&r.setDefault(),e.show()):(r&&r.dropdown.setSelection("None"),e.hide())}),null},azCheckChanged:function(e){var t;return t=_.map($("#property-elb-az-cb-group").find("input:checked"),function(e){return $(e).attr("data-name")}),this.model.updateElbAZ(t),null},updateSlider:function(e,t){var n,r,i;return r=e.children(".marker").children().length-1,i=e.width(),n=t*Math.floor(i/r),e.data("value",t).children(".thumb").css("left",n),null},sliderSelect:function(e){var t,n,r;return n=$(e.currentTarget),t=n.closest(".slider"),r=n.index(),this.updateSlider(t,r),t.trigger("SLIDER_CHANGE",r),null},sliderMouseDown:function(e){var t,n,r,i,s,o,u,a,f,l,c,h;return t=$("body"),r=$(e.currentTarget),n=r.closest(".slider"),a=n.children(".marker").children().length-1,h=n.width(),f=Math.floor(h/a),u=e.clientX,l=r.position().left,c=n.data("value"),i=0,s=function(e){var t,n,s,o,p;return p=e.clientX-u,t=Math.abs(p),s=f/2,t>=s?(t+=s,n=p>0?1:-1,i=Math.floor(t/f)*n,o=l+i*f,o<0?(o=0,i=-c):o>h&&(o=h,i=a-c)):(o=l,i=0),r.css("left",o),!1},o=function(){var e;return t.off("mousemove",s),e=c+i,n.data("value",e).trigger("SLIDER_CHANGE",e),null},t.on("mousemove",s),t.one("mouseup",o),!1},elbCrossAZSelect:function(e){return this.model.setElbCrossAZ(e.target.checked),null},elbSSLCertAdd:function(e){var t;return t=this,t.popSSLCertModal(!1),!1},elbSSLCertEdit:function(e){var t,n,r,i;return i=this,t=$(e.currentTarget),n=t.parents(".item"),r=n.attr("data-id"),r&&i.popSSLCertModal(!0,r),!1},elbSSLCertRemove:function(e){var t,n,i,s,o,u;return u=this,t=$(e.currentTarget),n=t.parents(".item"),o=n.attr("data-id"),i=Design.instance().component(o),i&&(s=i.get("name"),modal(MC.template.modalDeleteELBCert({cert_name:s},!0)),$("#modal-confirm-elb-cert-delete").one("click",function(){return u.model.removeCert(o),r.trigger(r.REFRESH_PROPERTY),modal.close()})),!1},changeSSLCert:function(e){var t,n,i;return i=this,t=$(e.currentTarget),n=t.attr("data-id"),i.model.changeCert(n),r.trigger(r.REFRESH_PROPERTY)},popSSLCertModal:function(t,n){var s,o,u,a,f,l,c,h;return h=this,modal(MC.template.modalSSLCertSetting({},!0)),o=$("#elb-ssl-cert-name-input"),u=$("#elb-ssl-cert-privatekey-input"),a=$("#elb-ssl-cert-publickey-input"),s=$("#elb-ssl-cert-chain-input"),l="",t&&n&&(f=Design.instance().component(n),f&&(l=f.get("name"),o.val(l),u.val(f.get("key")),a.val(f.get("body")),s.val(f.get("chain")))),c=h.model.getOtherCertName(l),$("#elb-ssl-cert-confirm").off("click").on("click",function(){var f,l,p,d,v;return l=!1,o.parsley("custom",function(t){return e.call(c,t)>=0?i.ide.PARSLEY_THIS_NAME_IS_ALREADY_IN_USING:null}),p=o.parsley("validate"),d=u.parsley("validate"),v=a.parsley("validate"),p&&d&&v&&(l=!0),l&&(f={name:o.val(),key:u.val(),body:a.val(),chain:s.val()},t&&n?h.model.updateCert(n,f):h.model.addCert(f),r.trigger(r.REFRESH_PROPERTY),modal.close()),null})},elbConnectionDrainSelectChange:function(e){var t,n,r,i,s,o;s=this,n=s.$("#elb-connection-draining-select"),t=s.$(".elb-connection-draining-input-group"),r=s.$("#elb-connection-draining-input"),i=n.prop("checked"),i?t.removeClass("hide"):t.addClass("hide"),o=Number(r.val()),i&&o&&s.model.setConnectionDraining(!0,o);if(!i)return s.model.setConnectionDraining(!1)},elbConnectionDrainTimeoutChange:function(e){var t,n,r,s,o;s=this,n=s.$("#elb-connection-draining-input"),t=s.$("#elb-connection-draining-select"),r=t.prop("checked"),o=Number(n.val()),n.parsley("custom",function(e){var t;return t=Number(n.val()),t>=1&&t<3600?null:i.ide.PROP_ELB_CONNECTION_DRAIN_TIMEOUT_INVALID});if(!n.parsley("validate"))return;if(r&&o)return s.model.setConnectionDraining(!0,o)},elbAdvancedProxyProtocolSelectChange:function(e){var t,n,r,i;return i=this,t=i.$("#elb-advanced-proxy-protocol-select"),n=$("#elb-advanced-proxy-protocol-select-tip"),r=t.prop("checked"),r?n.removeClass("hide"):n.addClass("hide"),i.model.setAdvancedProxyProtocol(r,[80])}}),new s})}.call(this),function(){define("workspaces/editor/property/elb/app_model",["../base/model","constant","Design","CloudResources"],function(e,t,n,r){var i;return i=e.extend({defaults:{id:null},init:function(e){var i,s,o,u,a,f,l,c;return this.set("id",e),this.set("uid",e),u=n.instance().component(e),i=r(t.RESTYPE.ELB,n.instance().region()).get(u.get("appId")),i?(i=i.toJSON(),i.ConnectionDraining?i.ConnectionDraining.Enabled?i.ConnectionDrainingInfo="Enabled; Timeout: "+i.ConnectionDraining.Timeout+" seconds":i.ConnectionDrainingInfo="Disabled":i.ConnectionDrainingInfo="Disabled",i.IdleTimeout=(c=i.ConnectionSettings)!=null?c.IdleTimeout:void 0,i.name=u.get("name"),i.isInternet=i.Scheme==="internet-facing",l=i.HealthCheck.Target,f=l.indexOf(":"),i.HealthCheck.protocol=l.substring(0,f),l=l.substring(f+1),a=parseInt(l,10),isNaN(a)&&(a=80),i.HealthCheck.port=a,i.HealthCheck.path=l.replace(/[^\/]+\//,"/"),i.CrossZone=u.get("crossZone")?"Enabled":"Disabled",i.listenerDisplay=[],i.ListenerDescriptions&&$.each(i.ListenerDescriptions,function(e,t){i.listenerDisplay.push(t);if(t.Listener.SSLCertificateId)return t.Listener.server_certificate=t.Listener.SSLCertificateId.split("/")[1],null}),i.isClassic=!1,i.defaultVPC=!1,i.distribution=[],s={},o=i.InstanceStates,_.each(o,function(e){var i,o,u,a,f,l,c,h,p,d,v,m,g;try{return a=e.InstanceId,h=e.ReasonCode,c=e.State,p=e.Description,u=n.modelClassForType(t.RESTYPE.INSTANCE).getEffectiveId(a),d=u.uid,o=n.instance().component(d),m="",o&&(l=o.get("name"),l===a&&(l=null),g={instance_name:l,instance_id:a,instance_state:c==="InService",instance_state_desc:p},v=null,o.parent()&&o.parent().parent()&&(v=o.parent().parent(),o.type===t.RESTYPE.LC&&(v=o.parent().parent().parent())),v&&(m=v.get("name"))),m||(f=r(t.RESTYPE.INSTANCE,n.instance().region()).get(a),f&&f.get("placement")&&(m=f.get("placement").availabilityZone)),s[m]=s[m]||[],s[m].push(g)}catch(y){return i=y,void 0}}),_.each(s,function(e,t){var n;return n=!0,_.each(e,function(e){return e.instance_state||(n=!1),null}),i.distribution.push({zone:t,instance:e,health:n})}),i.distribution=i.distribution.sort(function(e,t){return e.zone>t.zone}),this.set(i),this.set("componentUid",u.id)):!1}}),new i})}.call(this),define("workspaces/editor/property/elb/template/app",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){return"Internet Facing"}function c(e,t){return"Internal"}function h(e,t){var r="",i;return r+="\n        <dt>"+u(n.i18n.call(e,"PROP_ELB_IDLE_TIMEOUT",{hash:{},data:t}))+"</dt>\n        <dd>"+u((i=e&&e.IdleTimeout,typeof i===a?i.apply(e):i))+" seconds<dd>\n        ",r}function p(e,t){var r="",i;r+='\n      <li class="clearfix">\n        <div class="app-panel-li-col2-1">\n          <label>'+u(n.i18n.call(e,"PROP_ELB_ELB_PROTOCOL",{hash:{},data:t}))+"</label>\n          <div>"+u((i=(i=e&&e.Listener,i==null||i===!1?i:i.Protocol),typeof i===a?i.apply(e):i))+'</div>\n        </div>\n\n        <div class="app-panel-li-col2-2">\n          <label>'+u(n.i18n.call(e,"PROP_ELB_PORT",{hash:{},data:t}))+"</label>\n          <div>"+u((i=(i=e&&e.Listener,i==null||i===!1?i:i.LoadBalancerPort),typeof i===a?i.apply(e):i))+'</div>\n        </div>\n\n        <div class="app-panel-li-col2-1">\n          <label>'+u(n.i18n.call(e,"PROP_ELB_INSTANCE_PROTOCOL",{hash:{},data:t}))+"</label>\n          <div>"+u((i=(i=e&&e.Listener,i==null||i===!1?i:i.InstanceProtocol),typeof i===a?i.apply(e):i))+'</div>\n        </div>\n\n        <div class="app-panel-li-col2-2">\n          <label>'+u(n.i18n.call(e,"PROP_ELB_PORT",{hash:{},data:t}))+"</label>\n          <div>"+u((i=(i=e&&e.Listener,i==null||i===!1?i:i.InstancePort),typeof i===a?i.apply(e):i))+"</div>\n        </div>\n        ",i=n["if"].call(e,(i=e&&e.Listener,i==null||i===!1?i:i.server_certificate),{hash:{},inverse:f.noop,fn:f.program(8,d,t),data:t});if(i||i===0)r+=i;return r+="\n      </li>\n    ",r}function d(e,t){var r="",i;return r+='\n        <div class="app-panel-li-col2-full">\n          <label>'+u(n.i18n.call(e,"PROP_ELB_SERVER_CERTIFICATE",{hash:{},data:t}))+"</label>\n          <div>"+u((i=(i=e&&e.Listener,i==null||i===!1?i:i.server_certificate),typeof i===a?i.apply(e):i))+"</div>\n        </div>\n        ",r}function v(e,t){var r="",i;r+='\n  <div class="option-group-head">'+u(n.i18n.call(e,"PROP_ELB_INSTANCES",{hash:{},data:t}))+'</div>\n  <ul class="option-group property-list">\n    ',i=n.each.call(e,e&&e.distribution,{hash:{},inverse:f.noop,fn:f.program(11,m,t),data:t});if(i||i===0)r+=i;return r+="\n  </ul>\n  ",r}function m(e,t){var r="",i;r+='\n      <li>\n        <div class="list-row">\n            <i class="status status-',i=n["if"].call(e,e&&e.health,{hash:{},inverse:f.program(14,y,t),fn:f.program(12,g,t),data:t});if(i||i===0)r+=i;r+=' icon-label"></i>\n            <span class="app-panel-li-main">'+u((i=e&&e.zone,typeof i===a?i.apply(e):i))+'</span>\n        </div>\n        <div class="list-row">\n          <ul class="elb-property-instance-list">\n            ',i=n.each.call(e,e&&e.instance,{hash:{},inverse:f.noop,fn:f.program(16,b,t),data:t});if(i||i===0)r+=i;return r+="\n          </ul>\n        </div>\n      </li>\n    ",r}function g(e,t){return"green"}function y(e,t){return"red"}function b(e,t){var r="",i;r+='\n              <li>\n                <div class="instance-info">\n                  ',i=n["if"].call(e,e&&e.instance_name,{hash:{},inverse:f.noop,fn:f.program(17,w,t),data:t});if(i||i===0)r+=i;r+='\n                  <div class="instance-id ',i=n.unless.call(e,e&&e.instance_name,{hash:{},inverse:f.noop,fn:f.program(19,E,t),data:t});if(i||i===0)r+=i;r+='">('+u((i=e&&e.instance_id,typeof i===a?i.apply(e):i))+')</div>\n                </div>\n                <div class="instance-state">\n                  ',i=n["if"].call(e,e&&e.instance_state,{hash:{},inverse:f.program(23,x,t),fn:f.program(21,S,t),data:t});if(i||i===0)r+=i;r+="\n                  ",i=n.unless.call(e,e&&e.instance_state,{hash:{},inverse:f.noop,fn:f.program(25,T,t),data:t});if(i||i===0)r+=i;return r+="\n                </div>\n              </li>\n            ",r}function w(e,t){var n="",r;return n+='<div class="instance-name">'+u((r=e&&e.instance_name,typeof r===a?r.apply(e):r))+"</div>",n}function E(e,t){return"instance-id-down"}function S(e,t){return"InService"}function x(e,t){return"OutOfService"}function T(e,t){var n="",r;return n+='<a class="elb-info-icon tooltip icon-info" data-tooltip="'+u((r=e&&e.instance_state_desc,typeof r===a?r.apply(e):r))+'"></a>',n}function N(e,t){var r="";return r+='\n  <div class="option-group-head">'+u(n.i18n.call(e,"PROP_ELB_SG_DETAIL",{hash:{},data:t}))+'<span class="property-head-num-wrap">(<span id="property-head-sg-num"></span>)</span> </div>\n  <div class="option-group sg-group">Loading...</div>\n  ',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+='<article class="property-app">\n\n  <div class="option-group-head expand">'+u(n.i18n.call(t,"PROP_ELB_DETAILS",{hash:{},data:i}))+'</div>\n  <div class="option-group">\n      <dl class="dl-vertical">\n        <dt>'+u(n.i18n.call(t,"PROP_ELB_SCHEME",{hash:{},data:i}))+"</dt>\n        <dd>",o=n["if"].call(t,t&&t.isInternet,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+="</dd>\n        <dt>"+u(n.i18n.call(t,"PROP_ELB_DNS_NAME",{hash:{},data:i}))+'</dt>\n        <dd>\n          <div class="click-select tooltip" data-tooltip="'+u(n.i18n.call(t,"PROP_ELB_TIP_CLICK_TO_SELECT_ALL",{hash:{},data:i}))+'">(A)'+u((o=t&&t.Dnsname,typeof o===a?o.apply(t):o))+'</div>\n          <div class="click-select tooltip" data-tooltip="'+u(n.i18n.call(t,"PROP_ELB_TIP_CLICK_TO_SELECT_ALL",{hash:{},data:i}))+'">(AAAA)ipv6.'+u((o=t&&t.Dnsname,typeof o===a?o.apply(t):o))+'</div>\n          <div class="click-select tooltip" data-tooltip="'+u(n.i18n.call(t,"PROP_ELB_TIP_CLICK_TO_SELECT_ALL",{hash:{},data:i}))+'">(A/AAAA)dualstack.'+u((o=t&&t.Dnsname,typeof o===a?o.apply(t):o))+"</div>\n        </dd>\n        <dt>"+u(n.i18n.call(t,"PROP_ELB_HOST_ZONE_ID",{hash:{},data:i}))+"</dt>\n        <dd>"+u((o=t&&t.CanonicalHostedZoneNameID,typeof o===a?o.apply(t):o))+"<dd>\n        <dt>"+u(n.i18n.call(t,"PROP_ELB_CROSS_ZONE",{hash:{},data:i}))+"</dt>\n        <dd>"+u((o=t&&t.CrossZone,typeof o===a?o.apply(t):o))+"<dd>\n        <dt>"+u(n.i18n.call(t,"PROP_ELB_CONNECTION_DRAIN",{hash:{},data:i}))+"</dt>\n        <dd>"+u((o=t&&t.ConnectionDrainingInfo,typeof o===a?o.apply(t):o))+"<dd>\n        ",o=n["if"].call(t,t&&t.IdleTimeout,{hash:{},inverse:f.noop,fn:f.program(5,h,i),data:i});if(o||o===0)s+=o;s+='\n      </dl>\n  </div>\n\n  <div class="option-group-head">'+u(n.i18n.call(t,"PROP_ELB_LISTENER_DETAIL",{hash:{},data:i}))+'</div>\n  <div class="option-group">\n    <ul class="property-list">\n    ',o=n.each.call(t,t&&t.listenerDisplay,{hash:{},inverse:f.noop,fn:f.program(7,p,i),data:i});if(o||o===0)s+=o;s+='\n    </ul>\n  </div>\n\n  <div class="option-group-head">'+u(n.i18n.call(t,"PROP_ELB_HEALTH_CHECK_DETAILS",{hash:{},data:i}))+'</div>\n  <div class="option-group">\n      <dl class="dl-vertical">\n        <dt>'+u(n.i18n.call(t,"PROP_ELB_PING_PROTOCOL",{hash:{},data:i}))+"</dt>\n        <dd>"+u((o=(o=t&&t.HealthCheck,o==null||o===!1?o:o.protocol),typeof o===a?o.apply(t):o))+"</dd>\n        <dt>"+u(n.i18n.call(t,"PROP_ELB_PING_PORT",{hash:{},data:i}))+"</dt>\n        <dd>"+u((o=(o=t&&t.HealthCheck,o==null||o===!1?o:o.port),typeof o===a?o.apply(t):o))+"</dd>\n        <dt>"+u(n.i18n.call(t,"PROP_ELB_PING_PATH",{hash:{},data:i}))+"</dt>\n        <dd>"+u((o=(o=t&&t.HealthCheck,o==null||o===!1?o:o.path),typeof o===a?o.apply(t):o))+"</dd>\n\n        <dt>"+u(n.i18n.call(t,"PROP_ELB_HEALTH_CHECK_INTERVAL",{hash:{},data:i}))+"</dt>\n        <dd>"+u((o=(o=t&&t.HealthCheck,o==null||o===!1?o:o.Interval),typeof o===a?o.apply(t):o))+" "+u(n.i18n.call(t,"PROP_ELB_HEALTH_CHECK_INTERVAL_SECONDS",{hash:{},data:i}))+"</dd>\n        <dt>"+u(n.i18n.call(t,"PROP_ELB_HEALTH_CHECK_RESPOND_TIMEOUT",{hash:{},data:i}))+"</dt>\n        <dd>"+u((o=(o=t&&t.HealthCheck,o==null||o===!1?o:o.Timeout),typeof o===a?o.apply(t):o))+" "+u(n.i18n.call(t,"PROP_ELB_HEALTH_CHECK_INTERVAL_SECONDS",{hash:{},data:i}))+"</dd>\n        <dt>"+u(n.i18n.call(t,"PROP_ELB_UNHEALTH_THRESHOLD",{hash:{},data:i}))+"</dt>\n        <dd>"+u((o=(o=t&&t.HealthCheck,o==null||o===!1?o:o.UnhealthyThreshold),typeof o===a?o.apply(t):o))+"</dd>\n        <dt>"+u(n.i18n.call(t,"PROP_ELB_HEALTH_THRESHOLD",{hash:{},data:i}))+"</dt>\n        <dd>"+u((o=(o=t&&t.HealthCheck,o==null||o===!1?o:o.HealthyThreshold),typeof o===a?o.apply(t):o))+"</dd>\n      </dl>\n  </div>\n\n  ",o=n["if"].call(t,(o=t&&t.distribution,o==null||o===!1?o:o.length),{hash:{},inverse:f.noop,fn:f.program(10,v,i),data:i});if(o||o===0)s+=o;s+="\n\n  ",o=n.unless.call(t,t&&t.isclassic,{hash:{},inverse:f.noop,fn:f.program(27,N,i),data:i});if(o||o===0)s+=o;return s+="\n\n</article>",s};return e.template(t)}),function(){define("workspaces/editor/property/elb/app_view",["../base/view","./template/app"],function(e,t){var n;return n=e.extend({render:function(){return this.$el.html(t(this.model.attributes)),this.model.attributes.name}}),new n})}.call(this),function(){define("workspaces/editor/property/elb/main",["../base/main","./model","./view","./app_model","./app_view","../sglist/main","constant"],function(e,t,n,r,i,s,o){var u;return u=e.extend({handleTypes:o.RESTYPE.ELB,onUnloadSubPanel:function(e){return s.onUnloadSubPanel(e),null},initStack:function(){return this.model=t,this.view=n,null},afterLoadStack:function(){return s.loadModule(this.model),null},initApp:function(){return this.model=r,this.view=i,null},afterLoadApp:function(){return s.loadModule(this.model),null},initAppEdit:function(){return this.model=t,this.view=n,null},afterLoadAppEdit:function(){return s.loadModule(t),null}}),null})}.call(this),function(){define("workspaces/editor/property/az/model",["../base/model","Design","constant","CloudResources"],function(e,t,n,r){var i;return i=e.extend({init:function(e){var i,s,o,u,a,f,l,c,h,p;a=t.instance(),o=r(n.RESTYPE.AZ,t.instance().region()).where({category:a.get("region")}),u=a.component(e);if(!u||!o)return!1;l=u.get("name"),c={},i=t.modelClassForType(n.RESTYPE.AZ),_.each(i.allObjects(),function(e){return c[e.get("name")]=!0,null}),f=[];for(h=0,p=o.length;h<p;h++)s=o[h],s=s.attributes,(s.id===l||!c[s.id])&&f.push({name:s.id,selected:s.id===l});return this.set({uid:e,name:l,list:f}),null}}),new i})}.call(this),define("workspaces/editor/property/az/template/stack",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){return"\n  <div>Cannot edit existing availability zone. However, newly created availability zone is editable.</div>\n  "}function c(e,t){var r="",i;r+='\n  <label class="left">'+f(n.i18n.call(e,"PROP_AZ_LBL_SWITCH",{hash:{},data:t}))+'</label>\n  <div class="selectbox selectbox-mega" id="az-quick-select">\n    <div class="selection">'+f((i=e&&e.name,typeof i===a?i.apply(e):i))+'</div>\n    <ul class="dropdown" tabindex="-1">\n      ',i=n.each.call(e,e&&e.list,{hash:{},inverse:u.noop,fn:u.program(4,h,t),data:t});if(i||i===0)r+=i;return r+="\n    </ul>\n  </div>\n  ",r}function h(e,t){var r="",i;r+='<li class="item',i=n["if"].call(e,e&&e.selected,{hash:{},inverse:u.noop,fn:u.program(5,p,t),data:t});if(i||i===0)r+=i;return r+='" data-id="'+f((i=e&&e.name,typeof i===a?i.apply(e):i))+'">'+f((i=e&&e.name,typeof i===a?i.apply(e):i))+"</li>",r}function p(e,t){return" selected"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this,a="function",f=this.escapeExpression;s+='<section class="property-control-group">\n  ',o=n["if"].call(t,t&&t.appEdit,{hash:{},inverse:u.program(3,c,i),fn:u.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n</section>",s};return e.template(t)}),function(){define("workspaces/editor/property/az/view",["../base/view","./template/stack"],function(e,t){var n;return n=e.extend({events:{"OPTION_CHANGE #az-quick-select":"azSelect"},render:function(){var e;return this.isAppEdit?e={appEdit:!0}:e=this.model.attributes,this.$el.html(t(e)),"Availability Zone"},azSelect:function(e,t){this.model.setName(t)}}),new n})}.call(this),function(){define("workspaces/editor/property/az/main",["../base/main","./model","./view","constant"],function(e,t,n,r){var i;return i=e.extend({handleTypes:r.RESTYPE.AZ,initStack:function(){this.model=t,this.view=n,this.view.isAppEdit=!1},initApp:function(){return!1},initAppEdit:function(){this.model=t,this.view=n,this.view.isAppEdit=!0}}),null})}.call(this),function(){define("workspaces/editor/property/subnet/model",["../base/model","constant","Design","CloudResources"],function(e,t,n,r){var i;return i=e.extend({defaults:{isAppEdit:!1},init:function(e){var i,s,o,u,a,f,l,c,h,p;return h=n.instance().component(e),h?(i=n.modelClassForType(t.RESTYPE.ACL),c=h.connectionTargets("AclAsso")[0],s=null,a=[],_.each(i.allObjects(),function(e){var t;return t={uid:e.id,name:e.get("name"),isUsed:e===c,rule:e.getRuleCount(),association:e.getAssoCount()},e.isDefault()?(s=t,t.isDefault=!0):a.splice(_.sortedIndex(a,t,"name"),0,t),null}),s&&a.splice(0,0,s),this.set({uid:e,name:h.get("name"),networkACL:a,isAppEdit:this.isAppEdit}),this.isAppEdit&&(l=(p=r(t.RESTYPE.SUBNET,n.instance().region()).get(h.get("appId")))!=null?p.toJSON():void 0,l=_.clone(l),f=h.connectionTargets("RTB_Asso")[0],u=f.get("appId"),f.get("main")&&(o=f.get("appId")),l.routeTable=u?u:o,this.set(l)),this.getCidr(),null):!1},getCidr:function(){var e,t,r;return t=n.instance().component(this.get("uid")),r=t.get("cidr"),e=this.genCIDRDivAry(t.parent().parent().get("cidr"),r),this.set("CIDRPrefix",e[0]),this.set("CIDR",r?e[1]:""),null},genCIDRDivAry:function(e,t){var n,r,i,s,o,u;return t||(t=e),u=Number(e.split("/")[1]),s=t.split("/"),o=Number(s[1]),i=s[0].split("."),u>23?(n=i[0]+"."+i[1]+"."+i[2]+".",r=i[3]+"/"+o):(n=i[0]+"."+i[1]+".",r=i[2]+"."+i[3]+"/"+o),[n,r]},createAcl:function(){var e,r;return e=n.modelClassForType(t.RESTYPE.ACL),r=new e,this.setACL(r.id),r.id},removeAcl:function(e){return n.instance().component(e).remove(),null},setCidr:function(e){return n.instance().component(this.get("uid")).setCidr(e)},setACL:function(e){return n.instance().component(this.get("uid")).setAcl(e),null},isValidCidr:function(e){return n.instance().component(this.get("uid")).isValidCidr(e)}}),new i})}.call(this),define("workspaces/editor/property/subnet/template/stack",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var r="",i;return r+='\n\n  <div class="option-group">\n    <dl class="dl-vertical">\n      <dt>'+u(n.i18n.call(e,"PROP_SUBNET_APP_ID",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.subnetId,typeof i===a?i.apply(e):i))+"</dd>\n\n      <dt>"+u(n.i18n.call(e,"PROP_SUBNET_APP_STATE",{hash:{},data:t}))+'</dt>\n      <dd><i class="status status-'+u((i=e&&e.state,typeof i===a?i.apply(e):i))+'"></i>'+u((i=e&&e.state,typeof i===a?i.apply(e):i))+"</dd>\n\n      <dt>"+u(n.i18n.call(e,"PROP_SUBNET_APP_CIDR",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.cidrBlock,typeof i===a?i.apply(e):i))+"</dd>\n\n      <dt>"+u(n.i18n.call(e,"PROP_SUBNET_APP_AVAILABLE_IP",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.availableIpAddressCount,typeof i===a?i.apply(e):i))+"</dd>\n\n      <dt>"+u(n.i18n.call(e,"PROP_SUBNET_APP_VPC_ID",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.vpcId,typeof i===a?i.apply(e):i))+"</dd>\n\n      <dt>"+u(n.i18n.call(e,"PROP_SUBNET_APP_RT_ID",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.routeTable,typeof i===a?i.apply(e):i))+"</dd>\n    </dl>\n  </div>\n\n  ",r}function c(e,t){var r="",i;return r+='\n  <div class="option-group">\n    <section class="property-control-group" data-bind="true">\n      <label class="left" for="property-subnet-name">'+u(n.i18n.call(e,"PROP_SUBNET_DETAIL_LBL_NAME",{hash:{},data:t}))+'</label>\n      <span class="required-input right">'+u(n.i18n.call(e,"PROP_LBL_REQUIRED",{hash:{},data:t}))+'</span>\n      <input class="input" type="text" value="'+u((i=e&&e.name,typeof i===a?i.apply(e):i))+'" lastValue="'+u((i=e&&e.name,typeof i===a?i.apply(e):i))+'" id="property-subnet-name" maxlength="255" data-required-rollback="true" data-ignore="true"/>\n    </section>\n\n    <section class="property-control-group">\n      <label class="left" for="property-cidr-block">'+u(n.i18n.call(e,"PROP_SUBNET_DETAIL_LBL_CIDR_BLOCK",{hash:{},data:t}))+'</label>\n      <span class="required-input right">'+u(n.i18n.call(e,"PROP_LBL_REQUIRED",{hash:{},data:t}))+'</span>\n      <div class="subnet-cidr-wrapper">\n        <span class="cidr-prefix" id="property-cidr-prefix">'+u((i=e&&e.CIDRPrefix,typeof i===a?i.apply(e):i))+'</span>\n        <input data-ignore="true" data-ignore-regexp="^[0-9./]*$" class="input cidr-rest tooltip" type="text" value="'+u((i=e&&e.CIDR,typeof i===a?i.apply(e):i))+'" lastValue="'+u((i=e&&e.CIDR,typeof i===a?i.apply(e):i))+'" id="property-cidr-block" data-empty-remove="true" data-tooltip="'+u(n.i18n.call(e,"PROP_SUBNET_TIP_CIDR_BLOCK",{hash:{},data:t}))+'"/>\n      </div>\n    </section>\n  </div>\n  ',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+='<article data-bind="true">\n  <div class="option-group-head expand" id="subnet-property-detail">'+u(n.i18n.call(t,"PROP_SUBNET_TIT_DETAIL",{hash:{},data:i}))+"</div>\n  ",o=n["if"].call(t,t&&t.isAppEdit,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+='\n\n  <div class="option-group-head expand">'+u(n.i18n.call(t,"PROP_SUBNET_TIT_ASSOC_ACL",{hash:{},data:i}))+'</div>\n  <div class="option-group">\n    <ul id="networkacl-list" class="acl-sg-info-list acl-info-list property-list stack-property-acl-list"></ul>\n    <a href="#" class="add-to-list action-link" id="networkacl-create">'+u(n.i18n.call(t,"PROP_SUBNET_BTN_CREATE_NEW_ACL",{hash:{},data:i}))+"</a>\n  </div>\n</article>",s};return e.template(t)}),define("workspaces/editor/property/subnet/template/acl",["handlebars"],function(e){var t=function(e,t,n,r,i){function f(e,t){var r="",i;r+='\n<li class="clearfix" data-uid="'+u((i=e&&e.uid,typeof i===o?i.apply(e):i))+'">\n  <div class="col1"> <div class="radio">\n    <input id="ppty-acl-'+u((i=t==null||t===!1?t:t.index,typeof i===o?i.apply(e):i))+'" class="ppty-acl-cb" type="radio" ',i=n["if"].call(e,e&&e.isUsed,{hash:{},inverse:a.noop,fn:a.program(2,l,t),data:t});if(i||i===0)r+=i;r+='/>\n    <label for="ppty-acl-'+u((i=t==null||t===!1?t:t.index,typeof i===o?i.apply(e):i))+'"></label>\n  </div> </div>\n  <div class="col3 tooltip icon-btn-details" data-tooltip=\''+u(n.i18n.call(e,"PROP_SUBNET_ACL_TIP_DETAIL",{hash:{},data:t}))+'\'></div>\n  <div class="col2">\n    <div class="col2-1 truncate">'+u((i=e&&e.name,typeof i===o?i.apply(e):i))+'</div>\n    <div class="col2-2 truncate">'+u((i=e&&e.rule,typeof i===o?i.apply(e):i))+" "+u(n.i18n.call(e,"PROP_SUBNET_ACL_LBL_RULE",{hash:{},data:t}))+", "+u((i=e&&e.association,typeof i===o?i.apply(e):i))+" "+u(n.i18n.call(e,"PROP_SUBNET_ACL_LBL_ASSOC",{hash:{},data:t})),i=n.unless.call(e,e&&e.isDefault,{hash:{},inverse:a.noop,fn:a.program(4,c,t),data:t});if(i||i===0)r+=i;return r+="</div>\n  </div>\n</li>\n",r}function l(e,t){return'checked="checked"'}function c(e,t){var r="",i;return r+=' | <a class="sg-list-delete-btn" data-name="'+u((i=e&&e.name,typeof i===o?i.apply(e):i))+'" data-count="'+u((i=e&&e.association,typeof i===o?i.apply(e):i))+'">'+u(n.i18n.call(e,"PROP_SUBNET_ACL_BTN_DELETE",{hash:{},data:t}))+"</a>",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o="function",u=this.escapeExpression,a=this;return s=n.each.call(t,t&&t.networkACL,{hash:{},inverse:a.noop,fn:a.program(1,f,i),data:i}),s||s===0?s:""};return e.template(t)}),function(){define("workspaces/editor/property/subnet/view",["../base/view","./template/stack","./template/acl","event","Design"],function(e,t,n,r,i){var s;return s=e.extend({events:{"change #property-subnet-name":"onChangeName","focus #property-cidr-block":"onFocusCIDR","keypress #property-cidr-block":"onPressCIDR","blur #property-cidr-block":"onBlurCIDR","click #networkacl-create":"createAcl","click .icon-btn-details":"openAcl","click .ppty-acl-cb":"changeAcl","click .sg-list-delete-btn":"deleteAcl"},render:function(){return this.$el.html(t(this.model.attributes)),this.refreshACLList(),this.model.attributes.name},onChangeName:function(e){var t,n;n=$(e.currentTarget),t=n.val();if(MC.aws.aws.checkResName(this.model.get("uid"),n,"Subnet"))return this.model.setName(t),this.setTitle(t)},onPressCIDR:function(e){return e.keyCode===13&&$("#property-cidr-block").blur(),null},onFocusCIDR:function(e){return this.disabledAllOperabilityArea(!0),null},onBlurCIDR:function(e){var t,n,r,s,o,u,a,f;return t=$("#property-cidr-prefix").html(),n=$("#property-cidr-block").val(),a=t+n,u="Remove Subnet",n?MC.validate("cidr",a)?(s=this.model.isValidCidr(a),s!==!0&&(o=s.error,r=s.detail,s.shouldRemove===!1&&(u=""))):(o=""+a+" is not a valid form of CIDR block.",r="Please provide a valid IP range. For example, 10.0.0.1/24."):(o="CIDR block is required.",r="Please provide a subset of IP ranges of this VPC."),o?(f=this,modal(MC.template.setupCIDRConfirm({main_content:o,desc_content:r,remove_content:u}),!1,null,{$source:$(e.target)}),$(".modal-close").click(function(){return $("#property-cidr-block").focus()}),$("#cidr-remove").click(function(){return i.instance().component(f.model.get("uid")).remove(),f.disabledAllOperabilityArea(!1),modal.close()})):(this.model.setCidr(a),this.disabledAllOperabilityArea(!1))},createAcl:function(){return this.trigger("OPEN_ACL",this.model.createAcl())},openAcl:function(e){var t;return t=$(e.currentTarget).closest("li").attr("data-uid"),this.trigger("OPEN_ACL",t),null},deleteAcl:function(e){var t,n,r,i,s,o;return t=$(e.currentTarget),i=parseInt(t.attr("data-count"),10),r=t.closest("li").attr("data-uid"),i?(o=this,n=t.attr("data-name"),s=MC.template.modalDeleteSGOrACL({title:"Delete Network ACL",main_content:"Are you sure you want to delete "+n+"?",desc_content:"Subnets associated with "+n+" will use DefaultACL."}),modal(s,!1,function(){return $("#modal-confirm-delete").click(function(){return o.model.removeAcl(r),o.refreshACLList(),modal.close()})})):(this.model.removeAcl(r),this.refreshACLList())},changeAcl:function(e){return this.model.setACL($(e.currentTarget).closest("li").attr("data-uid")),this.refreshACLList()},refreshACLList:function(){return this.model.init(this.model.get("uid")),$("#networkacl-list").html(n(this.model.attributes))}}),new s})}.call(this),function(){define("workspaces/editor/property/subnet/app_model",["../base/model","constant","Design","CloudResources"],function(e,t,n,r){var i;return i=e.extend({init:function(e){var i,s,o,u,a,f;return o=n.instance().component(e),a=(f=r(t.RESTYPE.SUBNET,n.instance().region()).get(o.get("appId")))!=null?f.toJSON():void 0,a?(a=_.clone(a),a.name=o.get("name"),a.acl=this.getACL(e),a.uid=e,u=o.connectionTargets("RTB_Asso")[0],s=u.get("appId"),u.get("main")&&(i=u.get("appId")),a.routeTable=s?s:i,this.set(a),null):!1},getACL:function(e){var t;return t=n.instance().component(e).connectionTargets("AclAsso")[0],t?{id:t.id,name:t.get("name"),rule:t.getRuleCount(),association:t.getAssoCount()}:null}}),new i})}.call(this),define("workspaces/editor/property/subnet/template/app",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var r="",i;return r+='\n  <div class="option-group-head expand">'+u(n.i18n.call(e,"PROP_SUBNET_TIT_ASSOC_ACL",{hash:{},data:t}))+'</div>\n  <div class="option-group">\n    <ul class="acl-sg-info-list property-list acl-info-list">\n      <li>\n        <div class="col3 tooltip icon-btn-details" data-uid="'+u((i=(i=e&&e.acl,i==null||i===!1?i:i.id),typeof i===a?i.apply(e):i))+"\" data-tooltip='"+u(n.i18n.call(e,"PROP_SUBNET_ACL_TIP_DETAIL",{hash:{},data:t}))+'\'></div>\n        <div class="col2">\n          <div class="col2-1 truncate">'+u((i=(i=e&&e.acl,i==null||i===!1?i:i.name),typeof i===a?i.apply(e):i))+'</div>\n          <div class="col2-2 truncate">'+u((i=(i=e&&e.acl,i==null||i===!1?i:i.rule),typeof i===a?i.apply(e):i))+" "+u(n.i18n.call(e,"PROP_SUBNET_ACL_LBL_RULE",{hash:{},data:t}))+", "+u((i=(i=e&&e.acl,i==null||i===!1?i:i.association),typeof i===a?i.apply(e):i))+" "+u(n.i18n.call(e,"PROP_SUBNET_ACL_LBL_ASSOC",{hash:{},data:t}))+"</div>\n        </div>\n      </li>\n    </ul>\n  </div>\n  ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+='<article class="property-app">\n\n  <div class="option-group-head expand">'+u(n.i18n.call(t,"PROP_SUBNET_TIT_DETAIL",{hash:{},data:i}))+'</div>\n  <div class="option-group">\n    <dl class="dl-vertical">\n      <dt>'+u(n.i18n.call(t,"PROP_SUBNET_APP_ID",{hash:{},data:i}))+"</dt>\n      <dd>"+u((o=t&&t.subnetId,typeof o===a?o.apply(t):o))+"</dd>\n\n      <dt>"+u(n.i18n.call(t,"PROP_SUBNET_APP_STATE",{hash:{},data:i}))+'</dt>\n      <dd><i class="status status-'+u((o=t&&t.state,typeof o===a?o.apply(t):o))+'"></i>'+u((o=t&&t.state,typeof o===a?o.apply(t):o))+"</dd>\n\n      <dt>"+u(n.i18n.call(t,"PROP_SUBNET_APP_CIDR",{hash:{},data:i}))+"</dt>\n      <dd>"+u((o=t&&t.cidrBlock,typeof o===a?o.apply(t):o))+"</dd>\n\n      <dt>"+u(n.i18n.call(t,"PROP_SUBNET_APP_AVAILABLE_IP",{hash:{},data:i}))+"</dt>\n      <dd>"+u((o=t&&t.availableIpAddressCount,typeof o===a?o.apply(t):o))+"</dd>\n\n      <dt>"+u(n.i18n.call(t,"PROP_SUBNET_APP_VPC_ID",{hash:{},data:i}))+"</dt>\n      <dd>"+u((o=t&&t.vpcId,typeof o===a?o.apply(t):o))+"</dd>\n\n      <dt>"+u(n.i18n.call(t,"PROP_SUBNET_APP_RT_ID",{hash:{},data:i}))+"</dt>\n      <dd>"+u((o=t&&t.routeTable,typeof o===a?o.apply(t):o))+"</dd>\n    </dl>\n  </div>\n\n  ",o=n["if"].call(t,t&&t.acl,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n</article>",s};return e.template(t)}),function(){define("workspaces/editor/property/subnet/app_view",["../base/view","./template/app"],function(e,t){var n;return n=e.extend({events:{"click .acl-sg-info-list .icon-btn-details":"showACLDetail"},render:function(){return this.$el.html(t(this.model.toJSON())),this.setTitle(this.model.get("name")),null},showACLDetail:function(e){return this.trigger("OPEN_ACL",$(e.currentTarget).data("uid")),null}}),new n})}.call(this),function(){define("workspaces/editor/property/subnet/main",["../base/main","./model","./view","./app_model","./app_view","constant"],function(e,t,n,r,i,s){var o;return i.on("OPEN_ACL",function(t){return e.loadSubPanel("ACL",t)}),n.on("OPEN_ACL",function(t){return e.loadSubPanel("ACL",t),null}),o=e.extend({handleTypes:s.RESTYPE.SUBNET,onUnloadSubPanel:function(e){if(e==="ACL"&&this.view.refreshACLList)return this.view.refreshACLList()},initStack:function(){return this.view=n,this.model=t,this.model.isAppEdit=!1,null},initApp:function(){return this.view=i,this.model=r,null},initAppEdit:function(){return this.view=n,this.model=t,this.model.isAppEdit=!0,null}}),null})}.call(this),function(){define("workspaces/editor/property/vpc/model",["../base/model","Design","constant","CloudResources"],function(e,t,n,r){var i;return i=e.extend({defaults:{isAppEdit:!1},init:function(e){var i,s,o,u,a,f,l,c,h,p,d;return a=t.instance().component(e),c=a.get("dhcp"),l=$.extend({},c.attributes),l.none=c.isAuto(),l["default"]=c.isDefault(),l.hasDhcp=!l.none&&!l["default"],f={uid:e,dnsSupport:a.get("dnsSupport"),dnsHosts:a.get("dnsHostnames"),defaultTenancy:a.isDefaultTenancy(),name:a.get("name"),cidr:a.get("cidr"),dhcp:l,isAppEdit:this.isAppEdit},this.isAppEdit&&(h=t.instance().component(e),p=(d=r(n.RESTYPE.VPC,t.instance().region()).get(h.get("appId")))!=null?d.toJSON():void 0,p=_.clone(p),u=n.RESTYPE.RT,o=n.RESTYPE.ACL,s=t.modelClassForType(u),i=t.modelClassForType(o),p.mainRTB=s.getMainRouteTable(),p.mainRTB&&(p.mainRTB=p.mainRTB.get("appId"),p.defaultACL=i.getDefaultAcl()),p.defaultACL&&(p.defaultACL=p.defaultACL.get("appId")),this.set(p)),this.set(f),null},setCidr:function(e){return t.instance().component(this.get("uid")).setCidr(e)?(this.attributes.cidr=e,!0):!1},setTenancy:function(e){return t.instance().component(this.get("uid")).setTenancy(e),null},setDnsSupport:function(e){var n;return n=this.get("uid"),t.instance().component(n).set("dnsSupport",e),null},setDnsHosts:function(e){var n;return n=this.get("uid"),t.instance().component(n).set("dnsHostnames",e),null},setAmazonDns:function(e){var n;return n=this.get("uid"),t.instance().component(n).get("dhcp").set("amazonDNS",e),null},removeDhcp:function(e){var n,r;return r=this.get("uid"),n=t.instance().component(r).get("dhcp"),e?n.setDefault():n.setAuto(),null},setDhcp:function(e){var n,r;return r=this.get("uid"),n=t.instance().component(r).get("dhcp"),n.setDhcp(e),null},setDHCPOptions:function(e,n){var r,i;return i=this.get("uid"),r=t.instance().component(i).get("dhcp"),r.set(e,n),null}}),new i})}.call(this),define("workspaces/editor/property/vpc/template/stack",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var r="",i;r+='\n  <div class="option-group">\n    <dl class="dl-vertical">\n      <dt>'+u(n.i18n.call(e,"PROP_VPC_APP_VPC_ID",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.vpcId,typeof i===a?i.apply(e):i))+"</dd>\n      <dt>"+u(n.i18n.call(e,"PROP_VPC_APP_STATE",{hash:{},data:t}))+'</dt>\n      <dd><i class="status status-'+u((i=e&&e.state,typeof i===a?i.apply(e):i))+'"></i>'+u((i=e&&e.state,typeof i===a?i.apply(e):i))+"</dd>\n      <dt>"+u(n.i18n.call(e,"PROP_VPC_APP_CIDR",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.cidrBlock,typeof i===a?i.apply(e):i))+"</dd>\n      <dt>"+u(n.i18n.call(e,"PROP_VPC_DETAIL_LBL_TENANCY",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.instanceTenancy,typeof i===a?i.apply(e):i))+"</dd>\n      <dt>"+u(n.i18n.call(e,"PROP_VPC_APP_MAIN_RT",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.mainRTB,typeof i===a?i.apply(e):i))+"</dd>\n      <dt>"+u(n.i18n.call(e,"PROP_VPC_APP_DEFAULT_ACL",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.defaultACL,typeof i===a?i.apply(e):i))+'</dd>\n    </dl>\n    <section class="property-control-group">\n      <div class="checkbox">\n        <input id="property-dns-resolution" type="checkbox"',i=n["if"].call(e,e&&e.dnsSupport,{hash:{},inverse:f.noop,fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;r+=' name="dns-resolution">\n        <label for="property-dns-resolution"></label>\n      </div>\n      <label for="property-dns-resolution">'+u(n.i18n.call(e,"PROP_VPC_DETAIL_LBL_ENABLE_DNS_RESOLUTION",{hash:{},data:t}))+'</label>\n    </section>\n\n\n    <section class="property-control-group">\n      <div class="checkbox">\n        <input id="property-dns-hostname" type="checkbox"',i=n["if"].call(e,e&&e.dnsHosts,{hash:{},inverse:f.noop,fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;return r+=' name="dns-hostname">\n        <label for="property-dns-hostname"></label>\n      </div>\n      <label for="property-dns-hostname">'+u(n.i18n.call(e,"PROP_VPC_DETAIL_LBL_ENABLE_DNS_HOSTNAME_SUPPORT",{hash:{},data:t}))+'</label>\n    </section>\n\n    <section class="property-control-group">\n      <label class="left">'+u(n.i18n.call(e,"PROP_VPC_TIT_DHCP_OPTION",{hash:{},data:t}))+'</label>\n      <div id="dhcp-dropdown"></div>\n    </section>\n  </div>\n\n\n  ',r}function c(e,t){return' checked="checked"'}function h(e,t){var r="",i;r+='\n  <div class="option-group" data-bind="true">\n    <section class="property-control-group clearfix">\n      <label class="left" for="property-vpc-name">'+u(n.i18n.call(e,"PROP_VPC_DETAIL_LBL_NAME",{hash:{},data:t}))+'</label>\n      <span class="required-input right">'+u(n.i18n.call(e,"PROP_LBL_REQUIRED",{hash:{},data:t}))+'</span>\n      <input class="input vpc-name" type="text" value="'+u((i=e&&e.name,typeof i===a?i.apply(e):i))+'" id="property-vpc-name" maxlength="255" data-ignore="true" data-required-rollback="true"/>\n    </section>\n\n    <section class="property-control-group clearfix">\n      <label class="left" for="property-cidr-block">'+u(n.i18n.call(e,"PROP_VPC_DETAIL_LBL_CIDR_BLOCK",{hash:{},data:t}))+'</label>\n      <span class="required-input right">'+u(n.i18n.call(e,"PROP_LBL_REQUIRED",{hash:{},data:t}))+'</span>\n      <input class="input cidr-block tooltip" type="text" value="'+u((i=e&&e.cidr,typeof i===a?i.apply(e):i))+'" id="property-cidr-block" data-tooltip="'+u(n.i18n.call(e,"PROP_VPC_TIP_EG_10_0_0_0_16",{hash:{},data:t}))+'" maxlength="255" data-ignore="true" data-required-rollback="true" data-trigger="change" data-type="awsCidr"/>\n    </section>\n\n    <section class="property-control-group">\n      <label class="left">'+u(n.i18n.call(e,"PROP_VPC_DETAIL_LBL_TENANCY",{hash:{},data:t}))+'</label>\n      <div class="selectbox selectbox-mega" id="property-tenancy">\n        <div class="selection">',i=n["if"].call(e,e&&e.defaultTenancy,{hash:{},inverse:f.program(7,d,t),fn:f.program(5,p,t),data:t});if(i||i===0)r+=i;r+='</div>\n        <ul class="dropdown" tabindex="-1">\n          <li class="item',i=n["if"].call(e,e&&e.defaultTenancy,{hash:{},inverse:f.noop,fn:f.program(9,v,t),data:t});if(i||i===0)r+=i;r+='" data-id="default">'+u(n.i18n.call(e,"PROP_VPC_DETAIL_TENANCY_LBL_DEFAULT",{hash:{},data:t}))+'</li>\n          <li class="item',i=n.unless.call(e,e&&e.defaultTenancy,{hash:{},inverse:f.noop,fn:f.program(9,v,t),data:t});if(i||i===0)r+=i;r+='" data-id="dedicated">'+u(n.i18n.call(e,"PROP_VPC_DETAIL_TENANCY_LBL_DEDICATED",{hash:{},data:t}))+'</li>\n        </ul>\n      </div>\n      <div id="desc-dedicated" class="property-info">Selecting \'Dedicated\' forces all instances launched into this VPC to run on single-tenant hardware. <a target="_blank" href="http://aws.amazon.com/dedicated-instances/">Additional charges will apply.</a></div>\n    </section>\n\n    <section class="property-control-group">\n      <div class="checkbox">\n        <input id="property-dns-resolution" type="checkbox"',i=n["if"].call(e,e&&e.dnsSupport,{hash:{},inverse:f.noop,fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;r+=' name="dns-resolution">\n        <label for="property-dns-resolution"></label>\n      </div>\n      <label for="property-dns-resolution">'+u(n.i18n.call(e,"PROP_VPC_DETAIL_LBL_ENABLE_DNS_RESOLUTION",{hash:{},data:t}))+'</label>\n    </section>\n\n\n    <section class="property-control-group">\n      <div class="checkbox">\n        <input id="property-dns-hostname" type="checkbox"',i=n["if"].call(e,e&&e.dnsHosts,{hash:{},inverse:f.noop,fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;return r+=' name="dns-hostname">\n        <label for="property-dns-hostname"></label>\n      </div>\n      <label for="property-dns-hostname">'+u(n.i18n.call(e,"PROP_VPC_DETAIL_LBL_ENABLE_DNS_HOSTNAME_SUPPORT",{hash:{},data:t}))+'</label>\n    </section>\n\n    <section class="property-control-group">\n        <label class="left">'+u(n.i18n.call(e,"PROP_VPC_TIT_DHCP_OPTION",{hash:{},data:t}))+'</label>\n        <div id="dhcp-dropdown"></div>\n    </section>\n  </div>\n\n  ',r}function p(e,t){var r;return r=n.i18n.call(e,"PROP_VPC_DETAIL_TENANCY_LBL_DEFAULT",{hash:{},data:t}),r||r===0?r:""}function d(e,t){return"Dedicated"}function v(e,t){return" selected"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+='<article>\n  <div class="option-group-head expand" id="vpc-property-detail">'+u(n.i18n.call(t,"PROP_VPC_TIT_DETAIL",{hash:{},data:i}))+"</div>\n\n  ",o=n["if"].call(t,t&&t.isAppEdit,{hash:{},inverse:f.program(4,h,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n\n</article>",s};return e.template(t)}),function(){define("workspaces/editor/property/vpc/view",["../base/view","./template/stack","i18n!/nls/lang.js","dhcp","UI.modalplus"],function(e,t,n,r,i){var s,o;return o=function(e){var t,n,r,i,s;t=$(e),r=[];for(i=0,s=t.length;i<s;i++)n=t[i],n.value&&r.push(n.value);return r},s=e.extend({events:{"change #property-vpc-name":"onChangeName","change #property-cidr-block":"onChangeCidr","change #property-dns-resolution":"onChangeDnsSupport","change #property-dns-hostname":"onChangeDnsHostname","OPTION_CHANGE #property-tenancy":"onChangeTenancy","change .property-control-group-sub .input":"onChangeDhcpOptions","OPTION_CHANGE #property-netbios-type":"onChangeDhcpOptions","REMOVE_ROW #property-dhcp-options":"onChangeDhcpOptions","ADD_ROW .multi-input":"processParsley"},render:function(){var e;return e=this.model.toJSON(),this.$el.html(t(e)),multiinputbox.update($("#property-domain-server")),this.dhcp=new r({resModel:this.model}),this.dhcp.off("change"),this.dhcp.on("change",function(e){return function(t){return e.changeDhcp(t)}}(this)),this.dhcp.on("manage",function(e){return function(){return void 0}}(this)),this.$el.find("#dhcp-dropdown").html(this.dhcp.dropdown.el),this.initDhcpSelection(),e.name},initDhcpSelection:function(){var e,t;return e=this.model.attributes.dhcp.appId,e===""?t={isAuto:!0}:e==="default"?t={isDefault:!0}:t={id:e},this.dhcp.setSelection(t)},changeDhcp:function(e){return e.id==="default"?this.model.removeDhcp(!0):e.id===""?this.model.removeDhcp(!1):this.model.setDhcp(e.id)},onChangeName:function(e){var t,n;return n=$(e.currentTarget),t=n.val(),MC.aws.aws.checkResName(this.model.get("uid"),n,"Route Table")&&(this.model.setName(t),this.setTitle(t)),null},onChangeCidr:function(e){var t,r;return r=$(e.currentTarget),t=r.val(),r.parsley("validate")&&(this.model.setCidr(t)||(r.val(this.model.get("cidr")),notification(n.ide.NOTIFY_MSG_WARN_CANNT_AUTO_ASSIGN_CIDR_FOR_SUBNET))),null},onChangeTenancy:function(e,t){return this.model.setTenancy(t),null},onChangeDnsSupport:function(e){return this.model.setDnsSupport(e.target.checked),null},onChangeDnsHostname:function(e){return this.model.setDnsHosts(e.target.checked),null},onChangeAmazonDns:function(e){var t,n,r,i;return i=$("#property-amazon-dns").is(":checked"),r=i?3:4,t=$("#property-domain-server").attr("data-max-row",r),n=t.children(),t.toggleClass("max",n.length>=r),this.model.setAmazonDns(i),null},onUseDHCP:function(e){return $("#property-dhcp-desc").hide(),$("#property-dhcp-options").show(),this.model.useDhcp(),null},onChangeDhcpOptions:function(e){var t;if(e&&!$(e.currentTarget).closest("[data-bind=true]").parsley("validate"))return;return t={domainName:$("#property-dhcp-domain").val(),domainServers:o("#property-domain-server .input"),ntpServers:o("#property-ntp-server .input"),netbiosServers:o("#property-netbios-server .input"),netbiosType:parseInt($("#property-netbios-type .selection").html(),10)||0},this.model.setDHCPOptions(t),null}}),new s})}.call(this),function(){define("workspaces/editor/property/vpc/app_model",["../base/model","Design","constant","CloudResources"],function(e,t,n,r){var i;return i=e.extend({init:function(e){var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y;h=t.instance().component(e),p=(d=r(n.RESTYPE.VPC,t.instance().region()).get(h.get("appId")))!=null?d.attributes:void 0,a=r(n.RESTYPE.DHCP,t.instance().region());if(!p)return!1;p=$.extend(!0,{},p),p.name=h.get("name"),u=n.RESTYPE.RT,o=n.RESTYPE.ACL,s=t.modelClassForType(u),i=t.modelClassForType(o),p.mainRTB=s.getMainRouteTable(),p.mainRTB&&(p.mainRTB=p.mainRTB.get("appId")),p.defaultACL=i.getDefaultAcl(),p.defaultACL&&(p.defaultACL=p.defaultACL.get("appId"));if(p.dhcpOptionsId)if(!a.get(p.dhcpOptionsId))p.default_dhcp=!0;else{l=(v=a.get(h!=null?(m=h.toJSON().dhcp)!=null?m.toJSON().appId:void 0:void 0))!=null?v.attributes:void 0,p.dhcpOptionsId=h!=null?(g=h.toJSON().dhcp)!=null?(y=g.toJSON())!=null?y.appId:void 0:void 0:void 0,f=null;if(l){f={};for(c in l)f[MC.camelCase(c)]=l[c]}p.dhcp=f}return this.set(p),null}}),new i})}.call(this),define("workspaces/editor/property/vpc/template/app",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var r="";return r+='\n  <div class="property-control-group">\n    <p>'+u(n.i18n.call(e,"PROP_VPC_DHCP_LBL_DEFAULT",{hash:{},data:t}))+"</p>\n  ",r}function c(e,t){var r="",i;r+="\n  ",i=n["if"].call(e,e&&e.defaultDhcp,{hash:{},inverse:a.noop,fn:a.program(4,h,t),data:t});if(i||i===0)r+=i;return r+="\n  ",r}function h(e,t){var r="";return r+='\n    <dl class="dl-vertical">\n        <dd>'+u(n.i18n.call(e,"PROP_VPC_DHCP_LBL_NONE",{hash:{},data:t}))+"</dd>\n    </dl>\n  </div>\n  ",r}function p(e,t){var r="",i;r+='\n  <dl class="dl-vertical">\n    <dt>'+u(n.i18n.call(e,"PROP_VPC_DHCP_OPTION_SET_ID",{hash:{},data:t}))+"</dt>\n    <dd>",i=n["if"].call(e,e&&e.dhcpOptionsId,{hash:{},inverse:a.program(9,v,t),fn:a.program(7,d,t),data:t});if(i||i===0)r+=i;r+="</dd>\n\n    ",i=n["if"].call(e,(i=e&&e.dhcp,i==null||i===!1?i:i.domainName),{hash:{},inverse:a.noop,fn:a.program(11,m,t),data:t});if(i||i===0)r+=i;r+="\n\n    ",i=n["if"].call(e,(i=(i=e&&e.dhcp,i==null||i===!1?i:i.domainNameServers),i==null||i===!1?i:i.length),{hash:{},inverse:a.noop,fn:a.program(14,y,t),data:t});if(i||i===0)r+=i;r+="\n\n    ",i=n["if"].call(e,(i=(i=e&&e.dhcp,i==null||i===!1?i:i.ntpServers),i==null||i===!1?i:i.length),{hash:{},inverse:a.noop,fn:a.program(16,b,t),data:t});if(i||i===0)r+=i;r+="\n\n\n    ",i=n["if"].call(e,(i=(i=e&&e.dhcp,i==null||i===!1?i:i.netbiosNameServers),i==null||i===!1?i:i.length),{hash:{},inverse:a.noop,fn:a.program(18,w,t),data:t});if(i||i===0)r+=i;r+="\n\n    ",i=n["if"].call(e,(i=e&&e.dhcp,i==null||i===!1?i:i.netbiosNodeType),{hash:{},inverse:a.noop,fn:a.program(20,E,t),data:t});if(i||i===0)r+=i;return r+="\n\n  </dl>\n  ",r}function d(e,t){var n;return u((n=e&&e.dhcpOptionsId,typeof n===f?n.apply(e):n))}function v(e,t){var n;return u((n=(n=e&&e.dhcp,n==null||n===!1?n:n.dhcpOptionsId),typeof n===f?n.apply(e):n))}function m(e,t){var r="",i;r+="\n    <dt>"+u(n.i18n.call(e,"PROP_VPC_DHCP_SPECIFIED_LBL_DOMAIN_NAME",{hash:{},data:t}))+"</dt>\n    <dd>",i=n.each.call(e,(i=e&&e.dhcp,i==null||i===!1?i:i.domainName),{hash:{},inverse:a.noop,fn:a.program(12,g,t),data:t});if(i||i===0)r+=i;return r+="</dd>\n    ",r}function g(e,t){var n="";return n+="<p>"+u(typeof e===f?e.apply(e):e)+"</p>",n}function y(e,t){var r="",i;r+="\n    <dt>"+u(n.i18n.call(e,"PROP_VPC_DHCP_SPECIFIED_LBL_DOMAIN_NAME_SERVER",{hash:{},data:t}))+"</dt>\n    <dd>",i=n.each.call(e,(i=e&&e.dhcp,i==null||i===!1?i:i.domainNameServers),{hash:{},inverse:a.noop,fn:a.program(12,g,t),data:t});if(i||i===0)r+=i;return r+="\n    </dd>\n    ",r}function b(e,t){var r="",i;r+="\n    <dt>"+u(n.i18n.call(e,"PROP_VPC_DHCP_SPECIFIED_LBL_NTP_SERVER",{hash:{},data:t}))+"</dt>\n    <dd>",i=n.each.call(e,(i=e&&e.dhcp,i==null||i===!1?i:i.ntpServers),{hash:{},inverse:a.noop,fn:a.program(12,g,t),data:t});if(i||i===0)r+=i;return r+="\n    </dd>\n    ",r}function w(e,t){var r="",i;r+="\n    <dt>"+u(n.i18n.call(e,"PROP_VPC_DHCP_SPECIFIED_LBL_NETBIOS_NAME_SERVER",{hash:{},data:t}))+"</dt>\n    <dd>",i=n.each.call(e,(i=e&&e.dhcp,i==null||i===!1?i:i.netbiosNameServers),{hash:{},inverse:a.noop,fn:a.program(12,g,t),data:t});if(i||i===0)r+=i;return r+="\n    </dd>\n    ",r}function E(e,t){var r="",i;return r+="\n    <dt>"+u(n.i18n.call(e,"PROP_VPC_DHCP_SPECIFIED_LBL_NETBIOS_NODE_TYPE",{hash:{},data:t}))+"</dt>\n    <dd>"+u((i=(i=(i=e&&e.dhcp,i==null||i===!1?i:i.netbiosNodeType),i==null||i===!1?i:i[0]),typeof i===f?i.apply(e):i))+"</dd>\n    ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a=this,f="function";s+='<article class="property-app">\n\n  <div class="option-group-head expand">'+u(n.i18n.call(t,"PROP_VPC_TIT_DETAIL",{hash:{},data:i}))+'</div>\n  <div class="option-group">\n    <dl class="dl-vertical">\n      <dt>'+u(n.i18n.call(t,"PROP_VPC_APP_VPC_ID",{hash:{},data:i}))+"</dt>\n      <dd>"+u((o=t&&t.id,typeof o===f?o.apply(t):o))+"</dd>\n      <dt>"+u(n.i18n.call(t,"PROP_VPC_APP_STATE",{hash:{},data:i}))+'</dt>\n      <dd><i class="status status-'+u((o=t&&t.state,typeof o===f?o.apply(t):o))+'"></i>'+u((o=t&&t.state,typeof o===f?o.apply(t):o))+"</dd>\n      <dt>"+u(n.i18n.call(t,"PROP_VPC_APP_CIDR",{hash:{},data:i}))+"</dt>\n      <dd>"+u((o=t&&t.cidrBlock,typeof o===f?o.apply(t):o))+"</dd>\n      <dt>"+u(n.i18n.call(t,"PROP_VPC_DETAIL_LBL_TENANCY",{hash:{},data:i}))+"</dt>\n      <dd>"+u((o=t&&t.instanceTenancy,typeof o===f?o.apply(t):o))+"</dd>\n      <dt>"+u(n.i18n.call(t,"PROP_VPC_APP_MAIN_RT",{hash:{},data:i}))+"</dt>\n      <dd>"+u((o=t&&t.mainRTB,typeof o===f?o.apply(t):o))+"</dd>\n      <dt>"+u(n.i18n.call(t,"PROP_VPC_APP_DEFAULT_ACL",{hash:{},data:i}))+"</dt>\n      <dd>"+u((o=t&&t.defaultACL,typeof o===f?o.apply(t):o))+'</dd>\n    </dl>\n  </div>\n\n  <div class="option-group-head expand">'+u(n.i18n.call(t,"PROP_VPC_TIT_DHCP_OPTION",{hash:{},data:i}))+'</div>\n  <div class="option-group">\n\n  ',o=n["if"].call(t,t&&t.autoDhcp,{hash:{},inverse:a.program(3,c,i),fn:a.program(1,l,i),data:i});if(o||o===0)s+=o;s+="\n\n  ",o=n.unless.call(t,t&&t.defaultDhcp,{hash:{},inverse:a.noop,fn:a.program(6,p,i),data:i});if(o||o===0)s+=o;return s+="\n  </div>\n\n  \n</article>",s};return e.template(t)}),function(){define("workspaces/editor/property/vpc/app_view",["../base/view","./template/app"],function(e,t){var n;return n=e.extend({render:function(){var e;return e=this.model.attributes,e.dhcpOptionsId==="default"?(e.defaultDhcp=!0,e.autoDhcp=!1):!e.dhcpOptionsId||!e.dhcp?(e.autoDhcp=!0,e.defaultDhcp=!1):e.dhcpOptionsId[0]!=="@"&&(e.autoDhcp=!1,e.defaultDhcp=!1),this.$el.html(t(e)),this.model.attributes.name}}),new n})}.call(this),function(){define("workspaces/editor/property/vpc/main",["../base/main","./model","./view","./app_model","./app_view","constant"],function(e,t,n,r,i,s){var o;return o=e.extend({handleTypes:s.RESTYPE.VPC,initStack:function(){return this.model=t,this.model.isAppEdit=!1,this.view=n,null},initApp:function(){return this.model=r,this.view=i,null},initAppEdit:function(){return this.model=t,this.model.isAppEdit=!0,this.view=n,null}}),null})}.call(this),function(){define("workspaces/editor/property/rtb/model",["../base/model","Design","constant","CloudResources"],function(e,t,n,r){var i;return i=e.extend({defaults:{isAppEdit:!1},setMainRT:function(){return t.instance().component(this.get("uid")).setMain(),this.isAppEdit&&(this.setMainMessage(this.get("uid")),this.set("isMain",t.instance().component(this.get("uid")).get("main"))),null},reInit:function(){return this.init(this.get("uid")),null},init:function(e){var r,i,s,o,u,a,f,l,c,h,p,d;u=t.instance(),s=u.component(e),a=n.RESTYPE;if(s.node_line){l=s.getTarget(a.SUBNET),s=s.getTarget(a.RT);if(l){this.set({title:"Subnet-RT Association",association:{subnet:l.get("name"),rtb:s.get("name")}});return}}r=t.modelClassForType(a.VPC),f=[],o={uid:s.id,title:s.get("name"),isMain:s.get("main"),local_route:r.theVPC().get("cidr"),routes:f,isAppEdit:this.isAppEdit},d=s.connections();for(h=0,p=d.length;h<p;h++){i=d[h];if(i.type!=="RTB_Route")continue;c=i.getOtherTarget(a.RT),f.push({name:c.get("name"),type:c.type,ref:i.id,isVgw:c.type===a.VGW,isProp:i.get("propagate"),cidr_set:i.get("routes")})}return f=_.sortBy(f,"type"),this.isAppEdit&&(this.set("vpcId",s.parent().get("appId")),this.set("routeTableId",s.get("appId")),this.setMainMessage(e)),this.set(o),!0},setMainMessage:function(e){var i,s,o,u,a,f,l,c,h;u=t.instance().component(e),i=(c=r(n.RESTYPE.RT,t.instance().region()).get(u.get("appId")))!=null?c.toJSON():void 0,o=!1;if(i&&i.associationSet&&i.associationSet.length){h=i.associationSet;for(f=0,l=h.length;f<l;f++)s=h[f],s.main===!0&&(o=!0)}return a=t.modelClassForType(n.RESTYPE.RT).getMainRouteTable(),o&&a.id!==u.id?this.set("main","Yes (Set as No after applying updates)"):o&&a.id===u.id?this.set("main","Yes"):!o&&a.id===u.id?this.set("main","No (Set as Yes after applying updates)"):this.set("main","No")},setPropagation:function(e){var r,i;return i=t.instance().component(this.get("uid")),r=_.find(i.connections(),function(e){return e.getTarget(n.RESTYPE.VGW)!==null}),r.setPropagate(e),null},setRoutes:function(e,n){return _.each(n,function(e,t){var r;return r=MC.getValidCIDR(e),n[t]=r}),t.instance().component(e).set("routes",n),null},isCidrConflict:function(e,r){return t.modelClassForType(n.RESTYPE.SUBNET).isCidrConflict(e,r)}}),new i})}.call(this),define("workspaces/editor/property/rtb/template/stack",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var r="",i;return r+='\n	<div class="property-control-group">'+u(n.i18n.call(e,"PROP_RT_ASSOCIATION",{hash:{},data:t}))+" "+u((i=(i=e&&e.association,i==null||i===!1?i:i.subnet),typeof i===a?i.apply(e):i))+" "+u(n.i18n.call(e,"PROP_RT_ASSOCIATION_TO",{hash:{},data:t}))+" "+u((i=(i=e&&e.association,i==null||i===!1?i:i.rtb),typeof i===a?i.apply(e):i))+"</div>\n",r}function c(e,t){var r="",i;r+='\n	<div class="property-control-group" data-bind="true">\n		<label class="left" for="rt-name">'+u(n.i18n.call(e,"PROP_RT_NAME",{hash:{},data:t}))+'</label>\n		<input class="input" type="text" data-required="true" data-ignore="true" data-required-rollback="true" ',i=n["if"].call(e,e&&e.isAppEdit,{hash:{},inverse:f.noop,fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;r+=' value="'+u((i=e&&e.title,typeof i===a?i.apply(e):i))+'" id="rt-name">\n	</div>\n\n	',i=n["if"].call(e,e&&e.isAppEdit,{hash:{},inverse:f.program(9,v,t),fn:f.program(6,p,t),data:t});if(i||i===0)r+=i;r+='\n\n\n\n	<div class="option-group-head expand">'+u(n.i18n.call(e,"PROP_RT_LBL_ROUTE",{hash:{},data:t}))+'</div>\n	<div class="option-group" data-bind="true">\n		<ul class="property-list property-list-no-padding route-list">\n			<li><table class="table-no-style">\n			  <tr class="route-target">\n			    <td class="route-label">'+u(n.i18n.call(e,"PROP_RT_TARGET",{hash:{},data:t}))+'</td>\n			    <td class="route-target-resource">'+u(n.i18n.call(e,"PROP_RT_LOCAL",{hash:{},data:t}))+'</td>\n			  </tr>\n			  <tr>\n			    <td class="route-label">'+u(n.i18n.call(e,"PROP_RT_DESTINATION",{hash:{},data:t}))+'</td>\n			    <td class="route-destination-input">\n			    	<div class="route-destination-input multi-input"><input class="input" disabled="disabled" value="'+u((i=e&&e.local_route,typeof i===a?i.apply(e):i))+'"></div>\n			    </td>\n			  </tr>\n			</table></li>\n\n			',i=n.each.call(e,e&&e.routes,{hash:{},inverse:f.noop,fn:f.program(14,y,t),data:t});if(i||i===0)r+=i;return r+="\n		</ul>\n	</div>\n",r}function h(e,t){return'disabled="disabled"'}function p(e,t){var r="",i;r+='\n	  <dl class="dl-vertical">\n	    <dt>'+u(n.i18n.call(e,"PROP_RT_ID",{hash:{},data:t}))+"</dt>\n	    <dd>"+u((i=e&&e.routeTableId,typeof i===a?i.apply(e):i))+"</dd>\n\n	    <dt>"+u(n.i18n.call(e,"PROP_RT_LBL_MAIN_RT",{hash:{},data:t}))+"</dt>\n	    <dd>"+u((i=e&&e.main,typeof i===a?i.apply(e):i))+"</dd>\n\n	    <dt>"+u(n.i18n.call(e,"PROP_RT_VPC_ID",{hash:{},data:t}))+"</dt>\n	    <dd>"+u((i=e&&e.vpcId,typeof i===a?i.apply(e):i))+"</dd>\n	  </dl>\n\n	  	",i=n.unless.call(e,e&&e.isMain,{hash:{},inverse:f.noop,fn:f.program(7,d,t),data:t});if(i||i===0)r+=i;return r+="\n\n	",r}function d(e,t){var r="";return r+='\n	  	<div class="tac property-control-group">\n			<button class="btn btn-primary" id="set-main-rt" style="width: 200px;">'+u(n.i18n.call(e,"PROP_RT_SET_MAIN",{hash:{},data:t}))+'</button>\n			<p class="hide">'+u(n.i18n.call(e,"PROP_RT_LBL_MAIN_RT",{hash:{},data:t}))+"</p>\n		</div>\n		",r}function v(e,t){var r="",i;r+='\n		<div class="tac property-control-group">\n			',i=n["if"].call(e,e&&e.isMain,{hash:{},inverse:f.program(12,g,t),fn:f.program(10,m,t),data:t});if(i||i===0)r+=i;return r+="\n		</div>\n	",r}function m(e,t){var r="";return r+="\n			<p>"+u(n.i18n.call(e,"PROP_RT_LBL_MAIN_RT",{hash:{},data:t}))+"</p>\n			",r}function g(e,t){var r="";return r+='\n			<button class="btn btn-primary" id="set-main-rt" style="width: 200px;">'+u(n.i18n.call(e,"PROP_RT_SET_MAIN",{hash:{},data:t}))+'</button>\n			<p class="hide">'+u(n.i18n.call(e,"PROP_RT_LBL_MAIN_RT",{hash:{},data:t}))+"</p>\n			",r}function y(e,t){var r="",i;r+='\n			<li><table class="table-no-style">\n			  <tr class="route-target">\n			    <td class="route-label">'+u(n.i18n.call(e,"PROP_RT_TARGET",{hash:{},data:t}))+'</td>\n			    <td class="route-target-resource">'+u((i=e&&e.name,typeof i===a?i.apply(e):i))+'</td>\n			  </tr>\n\n			  <tr>\n			    <td class="route-label">'+u(n.i18n.call(e,"PROP_RT_DESTINATION",{hash:{},data:t}))+'</td>\n			    <td class="route-destination-input">\n			    	<div class="route-destination-input multi-input" data-ref="'+u((i=e&&e.ref,typeof i===a?i.apply(e):i))+'">\n\n						',i=n.each.call(e,e&&e.cidr_set,{hash:{},inverse:f.program(17,w,t),fn:f.program(15,b,t),data:t});if(i||i===0)r+=i;r+="\n				    </div>\n\n				    ",i=n["if"].call(e,e&&e.isVgw,{hash:{},inverse:f.noop,fn:f.program(19,E,t),data:t});if(i||i===0)r+=i;return r+="\n			    </td>\n			  </tr>\n			</table></li>\n			",r}function b(e,t){var n="";return n+='\n						<div class="multi-ipt-row">\n		          <span class="ipt-controls"><a href="#" class="icon-del"></a><a href="#" class="icon-add"></a></span>\n		          <span class="ipt-wrapper"><input class="ip-main-input input" data-ignore="true" data-ignore-regexp="^[0-9./]*$" data-type="cidr" data-trigger="change" placeholder="eg. 0.0.0.0/0" value="'+u(typeof e===a?e.apply(e):e)+'" type="text"></span>\n		        </div>\n						',n}function w(e,t){return'\n						<div class="multi-ipt-row">\n		          <span class="ipt-controls"><a href="#" class="icon-del"></a><a href="#" class="icon-add"></a></span>\n		          <span class="ipt-wrapper"><input class="input tooltip" data-ignore="true" data-ignore-regexp="^[0-9./]*$" placeholder="eg. 0.0.0.0/0" data-empty-remove="true" type="text"></span>\n		        </div>\n			      '}function E(e,t){var r="",i;r+='\n				    <div class="property-control-group">\n							<div class="checkbox">\n								<input id="propagate_'+u((i=t==null||t===!1?t:t.index,typeof i===a?i.apply(e):i))+'" type="checkbox" class="propagation" ',i=n["if"].call(e,e&&e.isProp,{hash:{},inverse:f.noop,fn:f.program(20,S,t),data:t});if(i||i===0)r+=i;return r+='>\n								<label for="propagate_'+u((i=t==null||t===!1?t:t.index,typeof i===a?i.apply(e):i))+'"></label>\n							</div>\n							<label for="propagate_'+u((i=t==null||t===!1?t:t.index,typeof i===a?i.apply(e):i))+'">Allow propagation</label>\n						</div>\n						',r}function S(e,t){return'checked="true"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+="<article>\n",o=n["if"].call(t,t&&t.association,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n</article>",s};return e.template(t)}),function(){define("workspaces/editor/property/rtb/view",["../base/view","./template/stack"],function(e,t){var n;return n=e.extend({events:{"REMOVE_ROW  .multi-input":"removeIp","ADD_ROW     .multi-input":"processParsley","BEFORE_REMOVE_ROW  .multi-input":"beforeRemoveIp","change #rt-name":"changeName","click #set-main-rt":"setMainRT","change .propagation":"changePropagation","focus .ipt-wrapper .input":"onFocusCIDR","keypress .ipt-wrapper .input":"onPressCIDR","blur .ipt-wrapper .input":"onBlurCIDR"},render:function(){return this.$el.html(t(this.model.attributes)),this.model.attributes.title},processParsley:function(e){return $(e.currentTarget).find("input").last().focus().removeClass("parsley-validated").removeClass("parsley-error").next(".parsley-error-list").remove(),null},beforeRemoveIp:function(e){var t;return t=$(e.currentTarget).find("input").filter(function(){return this.value.length}),t.length<=1&&e.value?!1:null},removeIp:function(e){var t,n;return t=$(e.currentTarget),n=_.map(t.find("input"),function(e){return e.value}),this.model.setRoutes(t.attr("data-ref"),_.uniq(n)),null},changeName:function(e){var t,n;n=$(e.currentTarget),t=n.val();if(MC.aws.aws.checkResName(this.model.get("uid"),n,"Route Table"))return this.model.setName(t),this.setTitle(t)},setMainRT:function(){return this.model.isAppEdit?(this.model.setMainRT(),this.render()):($("#set-main-rt").hide().parent().find("p").show(),this.model.setMainRT()),null},changePropagation:function(e){return this.model.setPropagation($(e.target).is(":checked")),null},onPressCIDR:function(e){if(e.keyCode===13)return $(e.currentTarget).blur()},onFocusCIDR:function(e){return this.disabledAllOperabilityArea(!0),null},onBlurCIDR:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d;u=$(e.currentTarget),a=u.val(),c=u.closest(".multi-input"),r=c.attr("data-ref"),f=[],c.find("input").each(function(){return this!==e.currentTarget&&this.value&&f.push(this.value),null}),t=_.uniq(f),c.closest("li").siblings().each(function(){var e;return e=[],$(this).find("input").each(function(){return this.value&&e.push(this.value),null}),t=t.concat(_.uniq(e)),null});if(!a)u.closest(".multi-ipt-row").siblings().length===0&&(l="CIDR block is required.",i="Please provide a IP ranges for this route.");else if(!MC.validate("cidr",a))l=""+a+" is not a valid form of CIDR block.",i="Please provide a valid IP range. For example, 10.0.0.1/24.";else for(o=p=0,d=t.length;p<d;o=++p){n=t[o];if(a===n){l=""+a+" conflicts with other route.",i="Please choose a CIDR block not conflicting with existing route.";break}if(o===0&&n!=="0.0.0.0/0"&&this.model.isCidrConflict(a,n)){l=""+a+" conflicts with local route.",i="Please choose a CIDR block not conflicting with local route.";break}}if(!l){a&&f.push(a),this.model.setRoutes(r,_.uniq(f)),this.disabledAllOperabilityArea(!1);return}return s=MC.template.setupCIDRConfirm({remove_content:"Remove Route",main_content:l,desc_content:i}),h=this,modal(s,!1,function(){return $(".modal-close").click(function(){return u.focus()}),$("#cidr-remove").click(function(){return Design.instance().component(r).remove(),h.disabledAllOperabilityArea(!1),modal.close()})},{$source:$(e.target)}),null}}),new n})}.call(this),function(){define("workspaces/editor/property/rtb/app_model",["../base/model","constant","Design","CloudResources"],function(e,t,n,r){var i;return i=e.extend({processTarget:function(e){return e.routeSet=_.map(e.routeSet,function(e){return e.target=e.instanceId||e.networkInterfaceId||e.gatewayId,e.target!=="local"&&n.instance().eachComponent(function(t){if(t.get("appId")===e.target){e.target=t.get("name");return}return null}),e}),null},init:function(e){var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L;d=n.instance().component(e);if(d.type===t.RESTYPE.RT)h=d;else{o={},s=d.getOtherTarget(t.RESTYPE.RT),h=d.getTarget(t.RESTYPE.RT),s.type===t.RESTYPE.SUBNET&&(o.subnet=s.get("name"),a=!0),o.rtb=h.get("name"),e=h.id;if(a){this.set("association",o),this.set("name","Subnet-RT Association");return}}p=(T=r(t.RESTYPE.RT,n.instance().region()).get(h.get("appId")))!=null?T.toJSON():void 0;if(!p)return!1;p=$.extend(!0,{},p),p.name=h.get("name"),u=!1;if(p.associationSet&&p.associationSet.length){N=p.associationSet;for(m=0,w=N.length;m<w;m++)i=N[m],i.main===!0&&(u=!0)}u?p.main="Yes":p.main="No",C=p.routeSet;for(g=0,E=C.length;g<E;g++)f=C[g],f.state==="active"&&(f.active=!0);c={};if(p.propagatingVgwSet&&p.propagatingVgwSet.length){k=p.propagatingVgwSet;for(y=0,S=k.length;y<S;y++)f=k[y],c[f.gatewayId]=!0}L=p.routeSet;for(l=b=0,x=L.length;b<x;l=++b)v=L[l],c[v.gatewayId]&&(v.propagate=!0);return this.processTarget(p),this.set(p)}}),new i})}.call(this),define("workspaces/editor/property/rtb/template/app",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var r="",i;return r+='\n  <div class="property-control-group">'+u(n.i18n.call(e,"PROP_RT_ASSOCIATION",{hash:{},data:t}))+" "+u((i=(i=e&&e.association,i==null||i===!1?i:i.subnet),typeof i===a?i.apply(e):i))+" "+u(n.i18n.call(e,"PROP_RT_ASSOCIATION_TO",{hash:{},data:t}))+" "+u((i=(i=e&&e.association,i==null||i===!1?i:i.rtb),typeof i===a?i.apply(e):i))+"</div>\n  ",r}function c(e,t){var r="",i;r+='\n\n  <dl class="dl-vertical">\n    <dt>'+u(n.i18n.call(e,"PROP_RT_ID",{hash:{},data:t}))+"</dt>\n    <dd>"+u((i=e&&e.id,typeof i===a?i.apply(e):i))+"</dd>\n\n    <dt>"+u(n.i18n.call(e,"PROP_RT_LBL_MAIN_RT",{hash:{},data:t}))+"</dt>\n    <dd>"+u((i=e&&e.main,typeof i===a?i.apply(e):i))+"</dd>\n\n    <dt>"+u(n.i18n.call(e,"PROP_RT_VPC_ID",{hash:{},data:t}))+"</dt>\n    <dd>"+u((i=e&&e.vpcId,typeof i===a?i.apply(e):i))+'</dd>\n  </dl>\n\n  <div class="option-group-head expand">'+u(n.i18n.call(e,"PROP_RT_LBL_ROUTE",{hash:{},data:t}))+'</div>\n  <div class="option-group">\n    <table class="table table-small">\n      <thead>\n        <tr>\n          <th></th>\n          <th>'+u(n.i18n.call(e,"PROP_RT_DESTINATION",{hash:{},data:t}))+"</th>\n          <th>"+u(n.i18n.call(e,"PROP_RT_TARGET",{hash:{},data:t}))+"</th>\n          <th></th>\n        </tr>\n      </thead>\n      ",i=n.each.call(e,e&&e.routeSet,{hash:{},inverse:f.noop,fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;return r+="\n    </table>\n  </div>\n  ",r}function h(e,t){var r="",i;r+="\n      <tr>\n        ",i=n["if"].call(e,e&&e.active,{hash:{},inverse:f.program(7,d,t),fn:f.program(5,p,t),data:t});if(i||i===0)r+=i;r+="\n        <td>"+u((i=e&&e.destinationCidrBlock,typeof i===a?i.apply(e):i))+"</td>\n        <td>"+u((i=e&&e.target,typeof i===a?i.apply(e):i))+"</td>\n        ",i=n["if"].call(e,e&&e.propagate,{hash:{},inverse:f.program(11,m,t),fn:f.program(9,v,t),data:t});if(i||i===0)r+=i;return r+="\n      </tr>\n      ",r}function p(e,t){var r="";return r+='\n        <td><i class="status status-green tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_RT_TIP_ACTIVE",{hash:{},data:t}))+'"></i></td>\n        ',r}function d(e,t){var r="";return r+='\n        <td><i class="status status-red tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_RT_TIP_BLACKHOLE",{hash:{},data:t}))+'"></i></td>\n        ',r}function v(e,t){var r="";return r+='\n        <td><i class="icon-info tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_RT_TIP_PROPAGATED",{hash:{},data:t}))+'"></i></td>\n        ',r}function m(e,t){return"\n        <td></td>\n        "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+='<article class="property-app">\n\n  ',o=n["if"].call(t,t&&t.association,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n</article>",s};return e.template(t)}),function(){define("workspaces/editor/property/rtb/app_view",["../base/view","./template/app"],function(e,t){var n;return n=e.extend({render:function(){return this.$el.html(t(this.model.attributes)),this.model.attributes.name}}),new n})}.call(this),function(){define("workspaces/editor/property/rtb/main",["../base/main","./model","./view","./app_model","./app_view","event","constant"],function(e,t,n,r,i,s,o){var u;return u=e.extend({handleTypes:[o.RESTYPE.RT,"RTB_Route","RTB_Asso"],initStack:function(){return this.model=t,this.model.isAppEdit=!1,this.view=n,null},initApp:function(){return this.model=r,this.view=i,null},initAppEdit:function(){return this.model=t,this.model.isAppEdit=!0,this.view=n,null}}),null})}.call(this),function(){define("workspaces/editor/property/static/model",["../base/model","Design","constant","CloudResources"],function(e,t,n,r){var i;return i=e.extend({init:function(e){var i,s,o,u,a;return s=t.instance().component(e),u=s.type===n.RESTYPE.IGW,this.set("isIGW",u),this.isApp&&(this.set("readOnly",!0),i=s.get("appId"),o=(a=r(s.type,t.instance().region()).get(i))!=null?a.toJSON():void 0),o&&(o.attachments&&o.attachments.length?o.attachment_state=o.attachments[0].state:o.attachmentSet&&o.attachmentSet.length&&(o.attachment_state=o.attachmentSet[0].state),this.set(o),this.set("appId",o.id)),null}}),new i})}.call(this),define("workspaces/editor/property/static/template/stack",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var r="",i;r+='\n  <article class="property-app">\n  <dl class="dl-vertical">\n    <dt>',i=n["if"].call(e,e&&e.isIGW,{hash:{},inverse:f.program(4,h,t),fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;r+=" ID</dt>\n    <dd>"+a(n.emptyStr.call(e,e&&e.appId,{hash:{},data:t}))+"</dd>\n    ",i=n["if"].call(e,e&&e.isIGW,{hash:{},inverse:f.program(8,d,t),fn:f.program(6,p,t),data:t});if(i||i===0)r+=i;r+="\n    ",i=n["if"].call(e,e&&e.type,{hash:{},inverse:f.noop,fn:f.program(10,v,t),data:t});if(i||i===0)r+=i;return r+="\n    <dt>VPC</dt>\n    <dd>"+a(n.emptyStr.call(e,e&&e.vpcId,{hash:{},data:t}))+"</dd>\n  </dl>\n",r}function c(e,t){return"Internet Gateway"}function h(e,t){return"VPN Gateway"}function p(e,t){var n="",r;return n+='\n      <dt>State</dt>\n      <dd><i class="status status-xgw-'+a((r=e&&e.state,typeof r===u?r.apply(e):r))+'"></i>'+a((r=e&&e.state,typeof r===u?r.apply(e):r))+"</dd>\n    ",n}function d(e,t){var n="",r;return n+='\n      <dt>State</dt>\n      <dd><i class="status status-xgw-'+a((r=e&&e.state,typeof r===u?r.apply(e):r))+'"></i>'+a((r=e&&e.state,typeof r===u?r.apply(e):r))+'</dd>\n      <dt>Attachment State</dt>\n      <dd><i class="status status-xgw-'+a((r=e&&e.attachment_state,typeof r===u?r.apply(e):r))+'"></i>'+a((r=e&&e.attachment_state,typeof r===u?r.apply(e):r))+"</dd>\n    ",n}function v(e,t){var n="",r;return n+="\n    <dt>type</dt>\n    <dd>"+a((r=e&&e.type,typeof r===u?r.apply(e):r))+"</dd>\n    ",n}function m(e,t){var r="",i;r+='\n  <article>\n  <div  class="property-control-group">\n  ',i=n["if"].call(e,e&&e.isIGW,{hash:{},inverse:f.program(15,y,t),fn:f.program(13,g,t),data:t});if(i||i===0)r+=i;return r+="\n  </div>\n",r}function g(e,t){var r="";return r+="\n    "+a(n.i18n.call(e,"PROP_IGW_TXT_DESCRIPTION",{hash:{},data:t}))+"\n  ",r}function y(e,t){var r="";return r+="\n    "+a(n.i18n.call(e,"PROP_VGW_TXT_DESCRIPTION",{hash:{},data:t}))+"\n  ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;o=n["if"].call(t,t&&t.readOnly,{hash:{},inverse:f.program(12,m,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n</article>",s};return e.template(t)}),function(){define("workspaces/editor/property/static/view",["../base/view","./template/stack"],function(e,t){var n;return n=e.extend({render:function(){return this.$el.html(t(this.model.attributes)),this.model.get("isIGW")?"Internet-gateway":"VPN-gateway"}}),new n})}.call(this),function(){define("workspaces/editor/property/static/main",["../base/main","./model","./view","constant"],function(e,t,n,r){var i;return i=e.extend({handleTypes:[r.RESTYPE.VGW,r.RESTYPE.IGW],initStack:function(){return this.model=t,this.view=n,this.model.isApp=!1,null},initApp:function(){return this.model=t,this.view=n,this.model.isApp=!0,null},initAppEdit:function(){return this.model=t,this.view=n,this.model.isApp=!0,null}}),null})}.call(this),function(){define("workspaces/editor/property/cgw/model",["../base/model","Design","constant"],function(e,t,n){var r;return r=e.extend({init:function(e){var n;return n=t.instance().component(e),this.set({uid:e,name:n.get("name"),BGP:n.get("bgpAsn"),ip:n.get("ip")}),null},setIP:function(e){return t.instance().component(this.get("uid")).set("ip",e),null},setBGP:function(e){return t.instance().component(this.get("uid")).set("bgpAsn",e),null}}),new r})}.call(this),define("workspaces/editor/property/cgw/template/stack",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){return'checked="checked" '}function c(e,t){return'style="display:none;"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+='<article id="property-cgw" data-bind="true">\n	<div class="property-control-group clearfix">\n		<label class="left" for="property-cgw-name">'+u(n.i18n.call(t,"PROP_CGW_LBL_NAME",{hash:{},data:i}))+'</label>\n		<span class="required-input right">'+u(n.i18n.call(t,"PROP_LBL_REQUIRED",{hash:{},data:i}))+'</span>\n		<input class="input" type="text" value="'+u((o=t&&t.name,typeof o===a?o.apply(t):o))+'" id="property-cgw-name" data-ignore="true"/>\n	</div>\n\n	<div class="property-control-group clearfix">\n		<label class="left" for="property-cgw-ip">'+u(n.i18n.call(t,"PROP_CGW_LBL_IPADDR",{hash:{},data:i}))+'</label>\n		<span class="required-input right">'+u(n.i18n.call(t,"PROP_LBL_REQUIRED",{hash:{},data:i}))+'</span>\n		<input class="input tooltip" type="text" value="'+u((o=t&&t.ip,typeof o===a?o.apply(t):o))+'" data-ignore="true" data-ignore-regexp="^[0-9.]*$" id="property-cgw-ip" data-empty-remove="true" data-tooltip="'+u(n.i18n.call(t,"PROP_CGW_TIP_THIS_ADDRESS_MUST_BE_STATIC",{hash:{},data:i}))+'"/>\n	</div>\n\n	<div class="property-control-group clearfix cgw-routing">\n		<label>'+u(n.i18n.call(t,"PROP_CGW_LBL_ROUTING",{hash:{},data:i}))+'</label>\n		<p></p>\n		<div class="radio">\n			<input id="property-routing-static" type="radio" name="routing-type" ',o=n.unless.call(t,t&&t.BGP,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+='value="static" />\n			<label for="property-routing-static"></label>\n		</div>\n		<label for="property-routing-static">'+u(n.i18n.call(t,"PROP_CGW_LBL_STATIC",{hash:{},data:i}))+'</label>\n	</div>\n\n	<div class="property-control-group clearfix cgw-routing">\n		<div class="radio">\n			<input id="property-routing-dynamic" type="radio" name="routing-type" ',o=n["if"].call(t,t&&t.BGP,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+='value="dynamic" />\n			<label for="property-routing-dynamic"></label>\n		</div>\n		<label for="property-routing-dynamic">'+u(n.i18n.call(t,"PROP_CGW_LBL_DYNAMIC",{hash:{},data:i}))+'</label>\n	</div>\n\n	<div class="property-control-group clearfix" ',o=n.unless.call(t,t&&t.BGP,{hash:{},inverse:f.noop,fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;return s+=' id="property-cgw-bgp-wrapper">\n		<label class="left" for="property-cgw-bgp">'+u(n.i18n.call(t,"PROP_CGW_LBL_BGP_ASN",{hash:{},data:i}))+'</label>\n		<span class="required-input right">'+u(n.i18n.call(t,"PROP_LBL_REQUIRED",{hash:{},data:i}))+'</span>\n		<input class="input tooltip" type="text" value="'+u((o=t&&t.BGP,typeof o===a?o.apply(t):o))+'" id="property-cgw-bgp" maxlength="5" data-tooltip="'+u(n.i18n.call(t,"PROP_CGW_TIP_1TO65534",{hash:{},data:i}))+'" data-type="digits" />\n	</div>\n\n</article>',s};return e.template(t)}),function(){define("workspaces/editor/property/cgw/view",["i18n!/nls/lang.js","../base/view","./template/stack","constant","Design"],function(e,t,n,r,i){var s;return s=t.extend({events:{"click #property-cgw .cgw-routing input":"onChangeRouting","change #property-cgw-bgp":"onChangeBGP","change #property-cgw-name":"onChangeName","focus #property-cgw-ip":"onFocusIP","keypress #property-cgw-ip":"onPressIP","blur #property-cgw-ip":"onBlurIP"},render:function(){return this.$el.html(n(this.model.toJSON())),this.model.get("name")},onChangeRouting:function(){return $("#property-cgw-bgp-wrapper").toggle($("#property-routing-dynamic").is(":checked")),this.model.setBGP("")},onChangeBGP:function(t){var n,r;n=$(t.currentTarget),r=i.instance().region();if(!n.val()){this.model.setBGP("");return}return n.parsley("custom",function(t){t=+t;if(t<1||t>65534)return e.ide.PARSLEY_MUST_BE_BETWEEN_1_AND_65534;if(t===7224&&r==="us-east-1")return e.ide.PARSLEY_ASN_NUMBER_7224_RESERVED;if(t===9059&&r==="eu-west-1")return e.ide.PARSLEY_ASN_NUMBER_9059_RESERVED_IN_IRELAND}),n.parsley("validate")&&this.model.setBGP(n.val()),null},onChangeName:function(e){var t,n;n=$(e.currentTarget),t=n.val();if(MC.aws.aws.checkResName(this.model.get("uid"),n,"Customer Gateway"))return this.model.setName(t),this.setTitle(t)},onPressIP:function(e){if(e.keyCode===13)return $("#property-cgw-ip").blur()},onFocusIP:function(e){return this.disabledAllOperabilityArea(!0),null},onBlurIP:function(e){var t,n,r,s,o,u;s=$("#property-cgw-ip").val(),r=!0,s?MC.validate("ipv4",s)?MC.aws.aws.isValidInIPRange(s,"private")?(o="IP Address "+s+" is invalid for customer gateway.",t="The address must be static and can't be behind a device performing network address translation (NAT)."):r=!1:(o=""+s+" is not a valid IP Address.",t="Please provide a valid IP Address. For example, 192.168.1.1."):(o="IP Address is required.",t="Please provide a IP Address of this Customer Gateway.");if(!r){this.model.setIP(e.target.value),this.disabledAllOperabilityArea(!1);return}return n=MC.template.setupCIDRConfirm({remove_content:"Remove Customer Gateway",main_content:o,desc_content:t}),u=this,modal(n,!1,function(){return $(".modal-close").click(function(){return $("#property-cgw-ip").focus()}),$("#cidr-remove").click(function(){return i.instance().component(u.model.get("uid")).remove(),u.disabledAllOperabilityArea(!1),modal.close()})},{$source:$(e.target)})}}),new s})}.call(this),function(){define("workspaces/editor/property/cgw/app_model",["../base/model","Design","constant","CloudResources"],function(e,t,n,r){var i;return i=e.extend({init:function(e){var i,s,o;return s=t.instance().component(e),i=(o=r(n.RESTYPE.CGW,t.instance().region()).get(s.get("appId")))!=null?o.toJSON():void 0,i?(i=$.extend(!0,{},i),i.name=s.get("name"),this.set(i),null):!1}}),new i})}.call(this),define("workspaces/editor/property/cgw/template/app",["handlebars"],function(e){var t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function";return s+='<article class="property-app">\n  <dl class="dl-vertical">\n    <dt>'+u(n.i18n.call(t,"PROP_CGW_APP_CGW_LBL_ID",{hash:{},data:i}))+"</dt>\n    <dd>"+u((o=t&&t.customerGatewayId,typeof o===a?o.apply(t):o))+"</dd>\n    <dt>"+u(n.i18n.call(t,"PROP_CGW_APP_CGW_LBL_STATE",{hash:{},data:i}))+'</dt>\n    <dd><i class="status status-xgw-'+u((o=t&&t.state,typeof o===a?o.apply(t):o))+'"></i>'+u((o=t&&t.state,typeof o===a?o.apply(t):o))+"</dd>\n    <dt>"+u(n.i18n.call(t,"PROP_CGW_LBL_IPADDR",{hash:{},data:i}))+"</dt>\n    <dd>"+u((o=t&&t.ipAddress,typeof o===a?o.apply(t):o))+"</dd>\n    <dt>"+u(n.i18n.call(t,"PROP_CGW_APP_CGW_LBL_TYPE",{hash:{},data:i}))+"</dt>\n    <dd>"+u((o=t&&t.type,typeof o===a?o.apply(t):o))+"</dd>\n    <dt>"+u(n.i18n.call(t,"PROP_CGW_LBL_BGP_ASN",{hash:{},data:i}))+"</dt>\n    <dd>"+u((o=t&&t.bgpAsn,typeof o===a?o.apply(t):o))+"</dd>\n  </dl>\n</article>",s};return e.template(t)}),function(){define("workspaces/editor/property/cgw/app_view",["../base/view","./template/app"],function(e,t){var n;return n=e.extend({render:function(){var e;return this.$el.html(t((e=this.model)!=null?e.toJSON():void 0)),this.model.get("id")}}),new n})}.call(this),function(){define("workspaces/editor/property/cgw/main",["../base/main","./model","./view","./app_model","./app_view","constant"],function(e,t,n,r,i,s){var o;return o=e.extend({handleTypes:s.RESTYPE.CGW,initStack:function(){return this.model=t,this.view=n,null},initApp:function(){return this.model=r,this.view=i,null},initAppEdit:function(){return this.model=r,this.view=i,null}}),null})}.call(this),function(){define("workspaces/editor/property/vpn/model",["../base/model","Design","constant","CloudResources"],function(e,t,n,r){var i,s;return s=function(e,t){var n,r;return n="{}",t.customerGatewayConfiguration?(t=$.xml2json($.parseXML(t.customerGatewayConfiguration)),t?(t=t.vpn_connection,r=_.map(e,function(e){var n,r;return n={vpnConnectionId:t["@attributes"].id||"",vpnGatewayId:t.vpn_gateway_id||"",customerGatewayId:t.customer_gateway_id||""},n.tunnel=_.map(t.ipsec_tunnel,function(e,t){var n;return n={},n.number=t+1,n.ike_protocol_method=e.ike.authentication_protocol||"",n.ike_pre_shared_key=e.ike.pre_shared_key||"",n.ike_authentication_protocol_algorithm=e.ike.authentication_protocol||"",n.ike_encryption_protocol=e.ike.encryption_protocol||"",n.ike_lifetime=e.ike.lifetime||"",n.ike_mode=e.ike.mode||"",n.ike_perfect_forward_secrecy=e.ike.perfect_forward_secrecy||"",n.ipsec_protocol=e.ipsec.protocol||"",n.ipsec_authentication_protocol=e.ipsec.authentication_protocol||"",n.ipsec_encryption_protocol=e.ipsec.encryption_protocol||"",n.ipsec_lifetime=e.ipsec.lifetime||"",n.ipsec_mode=e.ipsec.mode||"",n.ipsec_perfect_forward_secrecy=e.ipsec.perfect_forward_secrecy||"",n.ipsec_interval=e.ipsec.dead_peer_detection.interval||"",n.ipsec_retries=e.ipsec.dead_peer_detection.retries||"",n.tcp_mss_adjustment=e.ipsec.tcp_mss_adjustment||"",n.clear_df_bit=e.ipsec.clear_df_bit||"",n.fragmentation_before_encryption=e.ipsec.fragmentation_before_encryption||"",n.customer_gateway_outside_address=e.customer_gateway.tunnel_outside_address.ip_address||"",n.vpn_gateway_outside_address=e.vpn_gateway.tunnel_outside_address.ip_address||"",n.customer_gateway_inside_address=e.customer_gateway.tunnel_inside_address.ip_address+"/"+e.customer_gateway.tunnel_inside_address.network_cidr||"",n.vpn_gateway_inside_address=e.vpn_gateway.tunnel_inside_address.ip_address+"/"+e.customer_gateway.tunnel_inside_address.network_cidr||"",n.next_hop=e.vpn_gateway.tunnel_inside_address.ip_address||"",n.isStaticRouting=!0,e.customer_gateway.bgp&&e.customer_gateway.bgp.asn&&(n.isStaticRouting=!1,n.customer_gateway_bgp_asn=e.customer_gateway.bgp.asn||"",n.vpn_gateway_bgp_asn=e.vpn_gateway.bgp.asn||"",n.neighbor_ip_address=e.vpn_gateway.tunnel_inside_address.ip_address||"",n.customer_gateway_bgp_hold_time=e.customer_gateway.bgp.hold_time||""),n}),r=n.vpnConnectionId||"download_configuration",n=MC.template.configurationDownload(n),'{"download":true, "filecontent":"'+window.btoa(n)+'", "filename":"'+r+'", "btnname":"'+e.name+'"}'}),"[ "+r.join(",")+" ]"):n):n},i=e.extend({init:function(e){var r,i,s;return s=t.instance().component(e),i=s.getTarget(n.RESTYPE.VGW),r=s.getTarget(n.RESTYPE.CGW),(this.isApp||this.isAppEdit)&&this.getAppData(s.get("appId")),this.set({uid:e,name:"vpn:"+r.get("name"),ips:s.get("routes"),dynamic:r.isDynamic()}),null},updateIps:function(e){return _.each(e,function(t,n){var r;r=MC.getValidCIDR(t),e[n]=r}),t.instance().component(this.get("uid")).set("routes",e),null},getAppData:function(e){var i,o,u,a;return i=(a=r(n.RESTYPE.VPN,t.instance().region()).get(e))!=null?a.toJSON():void 0,i=_.clone(i),i&&(u=s([{type:"download_configuration",name:"Download Configuration"}],i),o=JSON.parse(u),o&&o.length>0&&this.set("vpncfg",o[0])),i.vgwTelemetry&&i.vgwTelemetry.item&&(i.vgwTelemetry=_.map(i.vgwTelemetry.item,function(e,t){return e=$.extend(!0,{},e),e.index=t+1,e})),i.isApp=this.isApp,this.set(i)},isCidrConflict:function(e,r){return t.modelClassForType(n.RESTYPE.SUBNET).isCidrConflict(e,r)}}),new i})}.call(this),define("workspaces/editor/property/vpn/template/stack",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var r="",i;r+='\n  <div class="option-group-head expand">VPN Summary</div>\n  <div class="option-group">\n    <dl class="dl-vertical">\n      <dt>'+a(n.i18n.call(e,"PROP_CGW_APP_VPN_LBL_ID",{hash:{},data:t}))+"</dt>\n      <dd>"+a((i=e&&e.vpnConnectionId,typeof i===u?i.apply(e):i))+"</dd>\n\n      <dt>"+a(n.i18n.call(e,"PROP_CGW_APP_VPN_LBL_STATE",{hash:{},data:t}))+'</dt>\n      <dd><i class="status status-xgw-'+a((i=e&&e.state,typeof i===u?i.apply(e):i))+'"></i>'+a((i=e&&e.state,typeof i===u?i.apply(e):i))+"</dd>\n\n      <dt>"+a(n.i18n.call(e,"PROP_CGW_APP_VPN_LBL_TYPE",{hash:{},data:t}))+"</dt>\n      <dd>"+a((i=e&&e.type,typeof i===u?i.apply(e):i))+"</dd>\n\n      <dt>"+a(n.i18n.call(e,"PROP_CGW_LBL_ROUTING",{hash:{},data:t}))+"</dt>\n      <dd>",i=n["if"].call(e,(i=e&&e.options,i==null||i===!1?i:i.staticRoutesOnly),{hash:{},inverse:f.program(4,h,t),fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;r+="</dd>\n\n      <a class='btn btn-primary vpn-download' href=\"data://text/plain;base64,",i=(i=(i=e&&e.vpncfg,i==null||i===!1?i:i.filecontent),typeof i===u?i.apply(e):i);if(i||i===0)r+=i;r+='" download="',i=(i=(i=e&&e.vpncfg,i==null||i===!1?i:i.filename),typeof i===u?i.apply(e):i);if(i||i===0)r+=i;r+='.txt" style="padding:8px;">'+a(n.i18n.call(e,"PROP_CGW_APP_TIT_DOWNLOAD_CONF",{hash:{},data:t}))+"</a>\n\n    </dl>\n  </div>\n\n  ",i=n["if"].call(e,e&&e.vgwTelemetry,{hash:{},inverse:f.noop,fn:f.program(6,p,t),data:t});if(i||i===0)r+=i;r+="\n\n\n  ",i=n["if"].call(e,e&&e.isApp,{hash:{},inverse:f.noop,fn:f.program(14,y,t),data:t});if(i||i===0)r+=i;return r+="\n\n",r}function c(e,t){return"Static"}function h(e,t){return"Dynamic"}function p(e,t){var r="",i;r+='\n  <div class="option-group-head expand">'+a(n.i18n.call(e,"PROP_CGW_APP_VPN_LBL_TUNNEL",{hash:{},data:t}))+'</div>\n  <div class="option-group"> <table class="table">\n    <thead> <tr>\n      <th style="width:20px">'+a(n.i18n.call(e,"PROP_CGW_APP_VPN_COL_TUNNEL",{hash:{},data:t}))+'</th>\n      <th style="width:100px">'+a(n.i18n.call(e,"PROP_CGW_APP_VPN_COL_IP",{hash:{},data:t}))+"</th>\n    </tr> </thead>\n    <tbody>\n    ",i=n.each.call(e,e&&e.vgwTelemetry,{hash:{},inverse:f.noop,fn:f.program(7,d,t),data:t});if(i||i===0)r+=i;return r+="\n    </tbody>\n  </table> </div>\n  ",r}function d(e,t){var r="",i;r+='\n      <tr>\n        <td><i class="status status-'+a((i=e&&e.status,typeof i===u?i.apply(e):i))+' icon-label tooltip" data-tooltip="',i=n.ifCond.call(e,e&&e.status,"DOWN",{hash:{},inverse:f.program(10,m,t),fn:f.program(8,v,t),data:t});if(i||i===0)r+=i;r+=" since "+a((i=e&&e.lastStatusChange,typeof i===u?i.apply(e):i)),i=n["if"].call(e,e&&e.statusMessage,{hash:{},inverse:f.noop,fn:f.program(12,g,t),data:t});if(i||i===0)r+=i;return r+='"></i>'+a((i=e&&e.index,typeof i===u?i.apply(e):i))+"</td>\n        <td>"+a((i=e&&e.outsideIpAddress,typeof i===u?i.apply(e):i))+"</td>\n      </tr>\n    ",r}function v(e,t){return"DOWN"}function m(e,t){return"UP"}function g(e,t){var n="",r;return n+="because "+a((r=e&&e.statusMessage,typeof r===u?r.apply(e):r)),n}function y(e,t){var r="",i;r+=" ",i=n["if"].call(e,(i=e&&e.routes,i==null||i===!1?i:i.item),{hash:{},inverse:f.noop,fn:f.program(15,b,t),data:t});if(i||i===0)r+=i;return r+=" ",r}function b(e,t){var r="",i;r+='\n  <div class="option-group-head expand">'+a(n.i18n.call(e,"PROP_CGW_APP_VPN_LBL_STATUS_RT",{hash:{},data:t}))+'</div>\n  <div class="option-group"> <table class="table">\n    <thead> <tr>\n      <th style="width:100px">'+a(n.i18n.call(e,"PROP_CGW_APP_VPN_COL_IP_PREFIX",{hash:{},data:t}))+'</th>\n      <th style="width:100px">'+a(n.i18n.call(e,"PROP_CGW_APP_VPN_COL_SOURCE",{hash:{},data:t}))+"</th>\n    </tr> </thead>\n    <tbody>\n      ",i=n.each.call(e,(i=e&&e.routes,i==null||i===!1?i:i.item),{hash:{},inverse:f.noop,fn:f.program(16,w,t),data:t});if(i||i===0)r+=i;return r+="\n    </tbody>\n  </table> </div>\n  ",r}function w(e,t){var n="",r;return n+='\n      <tr>\n        <td><i class="status status-'+a((r=e&&e.state,typeof r===u?r.apply(e):r))+' icon-label tooltip" data-tooltip="'+a((r=e&&e.state,typeof r===u?r.apply(e):r))+'"></i>'+a((r=e&&e.destinationCidrBlock,typeof r===u?r.apply(e):r))+"</td>\n        <td>"+a((r=e&&e.source,typeof r===u?r.apply(e):r))+"</td>\n      </tr>\n      ",n}function E(e,t){var r="",i;r+="\n  ",i=n["if"].call(e,e&&e.dynamic,{hash:{},inverse:f.noop,fn:f.program(19,S,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function S(e,t){return'\n    <section class="property-control-group"> Since the Customer Gateway this VPN is connected to has dynamic routing enabled no configuration is necessary. </section>\n  '}function x(e,t){var r="",i;r+=" ",i=n.unless.call(e,e&&e.dynamic,{hash:{},inverse:f.noop,fn:f.program(22,T,t),data:t});if(i||i===0)r+=i;return r+=" ",r}function T(e,t){var r="",i;r+="\n  ",i=n["if"].call(e,e&&e.vpnConnectionId,{hash:{},inverse:f.noop,fn:f.program(23,N,t),data:t});if(i||i===0)r+=i;r+='\n  <section class="property-control-group">\n    <div class="clearfix">\n      <label class="left" for="property-vpc-ips">'+a(n.i18n.call(e,"PROP_VPN_LBL_IP_PREFIX",{hash:{},data:t}))+'</label>\n      <span class="required-input right">'+a(n.i18n.call(e,"PROP_LBL_REQUIRED",{hash:{},data:t}))+'</span>\n    </div>\n    <div id="property-vpn-ips" class="multi-input" data-max-row="100" data-bind="true">\n      ',i=n.each.call(e,e&&e.ips,{hash:{},inverse:f.program(27,k,t),fn:f.program(25,C,t),data:t});if(i||i===0)r+=i;r+="\n    </div>\n  </section>\n",i=n["if"].call(e,e&&e.vpnConnectionId,{hash:{},inverse:f.noop,fn:f.program(29,L,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function N(e,t){var r="";return r+='\n  <div class="option-group-head expand">'+a(n.i18n.call(e,"PROP_CGW_APP_VPN_LBL_STATUS_RT",{hash:{},data:t}))+'</div>\n  <div class="option-group">\n  ',r}function C(e,t){var r="";return r+='\n      <div class="multi-ipt-row">\n        <span class="ipt-controls"><a href="#" class="icon-del"></a><a href="#" class="icon-add"></a></span>\n        <span class="ipt-wrapper"><input data-ignore="true" data-ignore-regexp="^[0-9./]*$" class="input tooltip" data-tooltip="'+a(n.i18n.call(e,"PROP_VPN_TIP_EG_192_168_0_0_16",{hash:{},data:t}))+'" placeholder="'+a(n.i18n.call(e,"PROP_VPN_TIP_EG_192_168_0_0_16",{hash:{},data:t}))+'" value="'+a(typeof e===u?e.apply(e):e)+'" type="text"></span>\n      </div>\n      ',r}function k(e,t){var r="";return r+='\n      <div class="multi-ipt-row">\n        <span class="ipt-controls"><a href="#" class="icon-del"></a><a href="#" class="icon-add"></a></span>\n        <span class="ipt-wrapper"><input data-ignore="true" data-empty-remove="true" data-ignore-regexp="^[0-9./]*$" class="input tooltip" data-tooltip="'+a(n.i18n.call(e,"PROP_VPN_TIP_EG_192_168_0_0_16",{hash:{},data:t}))+'" placeholder="'+a(n.i18n.call(e,"PROP_VPN_TIP_EG_192_168_0_0_16",{hash:{},data:t}))+'" type="text"></span>\n      </div>\n      ',r}function L(e,t){return" </div> "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+="<article>\n",o=n["if"].call(t,t&&t.vpnConnectionId,{hash:{},inverse:f.program(18,E,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+="\n\n",o=n.unless.call(t,t&&t.isApp,{hash:{},inverse:f.noop,fn:f.program(21,x,i),data:i});if(o||o===0)s+=o;return s+="\n\n</article>",s};return e.template(t)}),function(){define("workspaces/editor/property/vpn/view",["../base/view","./template/stack"],function(e,t){var n;return n=e.extend({events:{"BEFORE_REMOVE_ROW #property-vpn-ips":"beforeRemoveIP","REMOVE_ROW #property-vpn-ips":"removeIP","ADD_ROW #property-vpn-ips":"addIP","focus #property-vpn-ips input":"onFocusCIDR","keypress #property-vpn-ips input":"onPressCIDR","blur #property-vpn-ips input":"onBlurCIDR"},render:function(){return this.$el.html(t(this.model.attributes)),this.model.attributes.name},addIP:function(){return $("#property-vpn-ips input").last().focus(),null},beforeRemoveIP:function(e){var t;return e.value&&(t=$("#property-vpn-ips").find("input").filter(function(){return this.value.length>0}),t.length<2&&e.preventDefault()),null},removeIP:function(e,t){var n;if(!t)return;return n=[],$("#property-vpn-ips input").each(function(){return n.push($(this).val())}),this.model.updateIps(n),null},onPressCIDR:function(e){return e.keyCode===13&&$(e.currentTarget).blur(),null},onFocusCIDR:function(e){return this.disabledAllOperabilityArea(!0),null},onBlurCIDR:function(e){var t,n,r,i,s,o,u,a,f,l,c;s=$(e.currentTarget),o=s.val(),u=[],$("#property-vpn-ips input").each(function(){return this.value&&u.push(this.value),null}),t=_.uniq(u);if(!o)s.parents(".multi-ipt-row").siblings().length===0&&(a="CIDR block is required.",r="Please provide a IP ranges for this IP Prefix.");else if(!MC.validate("cidr",o))a=""+o+" is not a valid form of CIDR block.",r="Please provide a valid IP range. For example, 10.0.0.1/24.";else for(l=0,c=t.length;l<c;l++){n=t[l];if(n!==o&&this.model.isCidrConflict(o,n)){a=""+o+" conflicts with other IP Prefix.",r="Please choose a CIDR block not conflicting with existing IP Prefix.";break}}if(!a){this.model.updateIps(t),this.disabledAllOperabilityArea(!1);return}return i=MC.template.setupCIDRConfirm({remove_content:"Remove Connection",main_content:a,desc_content:r}),f=this,modal(i,!1,function(){return $(".modal-close").click(function(){return s.focus()}),$("#cidr-remove").click(function(){return Design.instance().component(f.model.get("uid")).remove(),f.disabledAllOperabilityArea(!1),modal.close()})},{$source:$(e.target)})}}),new n})}.call(this),function(){define("workspaces/editor/property/vpn/main",["../base/main","./model","./view","constant","event"],function(e,t,n,r,i){var s;return s=e.extend({handleTypes:r.RESTYPE.VPN,initStack:function(){return this.view=n,this.model=t,this.model.isApp=!1,this.model.isAppEdit=!1,null},initApp:function(){return this.view=n,this.model=t,this.model.isApp=!0,this.model.isAppEdit=!1,null},initAppEdit:function(){return this.view=n,this.model=t,this.model.isApp=!1,this.model.isAppEdit=!0,null}}),null})}.call(this),function(){define("workspaces/editor/property/eni/model",["../base/model","constant","Design","i18n!/nls/lang.js","CloudResources"],function(e,t,n,r,i){var s;return s=e.extend({defaults:{uid:null,isAppEdit:!1},init:function(e){var t,r;return t=n.instance().component(e),r={uid:e,name:t.get("name"),desc:t.get("description"),sourceDestCheck:t.get("sourceDestCheck"),isAppEdit:this.isAppEdit,isGroupMode:this.isGroupMode,attached:t.connections("EniAttachment").length>0},this.set(r),this.getIpList(),this.isAppEdit&&this.getEniGroup(e),null},getIpList:function(){var e;return e=n.instance().component(this.get("uid")).getIpArray(),e[0].unDeletable=!0,this.isAppEdit&&(e[0].editable=!1),this.set("ips",e),null},setEniDesc:function(e){return n.instance().component(this.get("uid")).set("description",e),null},setSourceDestCheck:function(e){return n.instance().component(this.get("uid")).set("sourceDestCheck",e),null},attachEip:function(e,r){return n.instance().component(this.get("uid")).setIp(e,null,null,r),this.attributes.ips[e].hasEip=r,r&&n.modelClassForType(t.RESTYPE.IGW).tryCreateIgw(),null},removeIp:function(e){return n.instance().component(this.get("uid")).removeIp(e),null},getEniGroup:function(e){var r,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x;u=n.instance().component(e),v=i(t.RESTYPE.ENI,n.instance().region()),r=(w=v.get(u.get("appId")))!=null?w.toJSON():void 0,d=u.get("name"),f=[{appId:u.get("appId"),name:d+"-0",desc:u.get("description"),status:r?r.status:"Unknown",sourceDestCheck:u.get("sourceDestCheck")?"enabled":"disabled"}],s=u.serverGroupCount(),u.groupMembers().length>s-1?p=u.groupMembers().slice(0,s-1):p=u.groupMembers();for(c=m=0,y=p.length;m<y;c=++m)h=p[c],f.push({name:d+"-"+(c+1),appId:h.appId,status:(v!=null?(E=v.get(h.appId))!=null?E.toJSON():void 0:void 0)?(S=v.get(h.appId))!=null?S.toJSON().status:void 0:"Unknown",isNew:!h.appId,isOld:h.appId&&c+1>=s});while(f.length<s)f.push({name:d+"-"+f.length,isNew:!0,status:"Unknown"});a=0,x=u.groupMembers();for(l=g=0,b=x.length;g<b;l=++g){o=x[l];if(!o.appId)break;a=l+1}return a+=1,f.length>1?(this.set("group",f),a>s?f.increment="-"+(a-s):a<s&&(f.increment="+"+(s-a))):this.set("group",f[0]),this.set("readOnly",!1),null},addIp:function(){var e,t;return e=n.instance().component(this.get("uid")),e.addIp(),t=e.getIpArray(),t[0].unDeletable=!0,this.set("ips",t),null},isValidIp:function(e){return n.instance().component(this.get("uid")).isValidIp(e)},canAddIP:function(){return n.instance().component(this.get("uid")).canAddIp()},setIp:function(e,t,r){return n.instance().component(this.get("uid")).setIp(e,t,r),null}}),new s})}.call(this),define("workspaces/editor/property/eni/template/stack",["handlebars"],function(e){var t=function(e,t,n,r,i){function f(e,t){var r="";return r+='\n<article class="property-control-group">'+o(n.i18n.call(e,"PROP_ENI_LBL_ATTACH_WARN",{hash:{},data:t}))+"</article>\n",r}function l(e,t){var r="",i;r+='\n\n<article>\n  <div id="prop-appedit-eni-list" class="expand"></div>\n\n  <div class="option-group-head expand">'+o(n.i18n.call(e,"PROP_ENI_LBL_DETAIL",{hash:{},data:t}))+'</div>\n  <div class="option-group">\n',i=n.unless.call(e,e&&e.isAppEdit,{hash:{},inverse:a.noop,fn:a.program(4,c,t),data:t});if(i||i===0)r+=i;r+='\n    <section class="property-control-group">\n      <div class="checkbox">\n        <input id="property-eni-source-check" type="checkbox" ',i=n["if"].call(e,e&&e.sourceDestCheck,{hash:{},inverse:a.noop,fn:a.program(6,h,t),data:t});if(i||i===0)r+=i;return r+=' />\n        <label for="property-eni-source-check"></label>\n      </div>\n      <label for="property-eni-source-check">'+o(n.i18n.call(e,"PROP_ENI_SOURCE_DEST_CHECK",{hash:{},data:t}))+'</label>\n    </section>\n\n    <section class="property-control-group">\n      <div class="network-list-wrap">\n        <div class="network-list-header">\n          '+o(n.i18n.call(e,"PROP_ENI_IP_ADDRESS",{hash:{},data:t}))+'\n          <button id="property-eni-ip-add" class="right btn btn-blue btn-small tooltip" data-tooltip="'+o(n.i18n.call(e,"PROP_ENI_TIP_ADD_IP_ADDRESS",{hash:{},data:t}))+'">'+o(n.i18n.call(e,"PROP_ENI_ADD_IP",{hash:{},data:t}))+'</button>\n        </div>\n        <ul class="network-list" id="property-eni-list" data-bind="true">\n        </ul>\n      </div>\n    </section>\n  </div>\n\n  <div class="option-group-head expand">'+o(n.i18n.call(e,"PROP_ENI_SG_DETAIL",{hash:{},data:t}))+'<span class="property-head-num-wrap">(<span id="property-head-sg-num"></span>)</span></div>\n  <div class="option-group sg-group"></div>\n</article>\n\n',r}function c(e,t){var r="",i;return r+='\n    <section class="property-control-group" data-bind="true">\n      <label class="left" for="property-eni-desc">'+o(n.i18n.call(e,"PROP_ENI_LBL_DESC",{hash:{},data:t}))+'</label>\n      <textarea id="property-eni-desc" data-type="ascii" data-ignore="true" class="input">'+o((i=e&&e.desc,typeof i===u?i.apply(e):i))+"</textarea>\n    </section>\n",r}function h(e,t){return'checked="checked"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o=this.escapeExpression,u="function",a=this;return s=n.unless.call(t,t&&t.attached,{hash:{},inverse:a.program(3,l,i),fn:a.program(1,f,i),data:i}),s||s===0?s:""};return e.template(t)}),define("workspaces/editor/property/eni/template/eni_list",["handlebars"],function(e){var t=function(e,t,n,r,i){function f(e,t){var r="",i;r+="\n",i=n.unless.call(e,(i=e&&e.group,i==null||i===!1?i:i.length),{hash:{},inverse:a.program(7,p,t),fn:a.program(2,l,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function l(e,t){var r="",i;r+='\n<div class="option-group-head ',i=n["if"].call(e,e&&e.readOnly,{hash:{},inverse:a.noop,fn:a.program(3,c,t),data:t});if(i||i===0)r+=i;r+='">Network Interface Summary</div>\n<div class="option-group">\n  <dl class="dl-vertical">\n    <dt>'+o(n.i18n.call(e,"PROP_ENI_DEVICE_NAME",{hash:{},data:t}))+"</dt>\n    <dd>"+o((i=(i=e&&e.group,i==null||i===!1?i:i.name),typeof i===u?i.apply(e):i))+"</dd>\n    <dt>"+o(n.i18n.call(e,"PROP_ENI_ID",{hash:{},data:t}))+"</dt>\n    <dd>"+o((i=(i=e&&e.group,i==null||i===!1?i:i.appId),typeof i===u?i.apply(e):i))+"</dd>\n    <dt>"+o(n.i18n.call(e,"PROP_ENI_STATE",{hash:{},data:t}))+'</dt>\n    <dd><i class="status status-'+o((i=(i=e&&e.group,i==null||i===!1?i:i.status),typeof i===u?i.apply(e):i))+'"></i>'+o((i=(i=e&&e.group,i==null||i===!1?i:i.status),typeof i===u?i.apply(e):i))+"</dd>\n    ",i=n["if"].call(e,(i=e&&e.group,i==null||i===!1?i:i.description),{hash:{},inverse:a.noop,fn:a.program(5,h,t),data:t});if(i||i===0)r+=i;return r+="\n    <dt>"+o(n.i18n.call(e,"PROP_INSTANCE_ENI_SOURCE_DEST_CHECK_DISP",{hash:{},data:t}))+"</dt>\n    <dd>"+o((i=(i=e&&e.group,i==null||i===!1?i:i.sourceDestCheck),typeof i===u?i.apply(e):i))+"</dd>\n  </dl>\n<div>\n\n",r}function c(e,t){return"expand"}function h(e,t){var r="",i;return r+="\n    <dt>"+o(n.i18n.call(e,"PROP_ENI_LBL_DESC",{hash:{},data:t}))+"</dt>\n    <dd>"+o((i=(i=e&&e.group,i==null||i===!1?i:i.desc),typeof i===u?i.apply(e):i))+"</dd>\n    ",r}function p(e,t){var r="",i;r+='\n<div class="option-group-head ',i=n["if"].call(e,e&&e.readOnly,{hash:{},inverse:a.noop,fn:a.program(3,c,t),data:t});if(i||i===0)r+=i;r+='">Network Interface Group Members<span class="property-head-num-wrap">('+o((i=(i=e&&e.group,i==null||i===!1?i:i.length),typeof i===u?i.apply(e):i))+')</span> <span class="appedit-head-meta appedit-head-meta-add">'+o((i=(i=e&&e.group,i==null||i===!1?i:i.increment),typeof i===u?i.apply(e):i))+'</span></div>\n<ul class="option-group property-list">\n  ',i=n.each.call(e,e&&e.group,{hash:{},inverse:a.noop,fn:a.program(8,d,t),data:t});if(i||i===0)r+=i;return r+="\n</ul>\n",r}function d(e,t){var r="",i;r+='\n    <li>\n      <i class="status status-'+o((i=e&&e.status,typeof i===u?i.apply(e):i))+' icon-label tooltip" data-tooltip="'+o((i=e&&e.status,typeof i===u?i.apply(e):i))+'"></i>'+o((i=e&&e.name,typeof i===u?i.apply(e):i))+"\n      ",i=n["if"].call(e,e&&e.appId,{hash:{},inverse:a.noop,fn:a.program(9,v,t),data:t});if(i||i===0)r+=i;r+="\n      ",i=n["if"].call(e,e&&e.isNew,{hash:{},inverse:a.program(13,g,t),fn:a.program(11,m,t),data:t});if(i||i===0)r+=i;return r+="\n    </li>\n  ",r}function v(e,t){var n="",r;return n+='<span class="subtitle">('+o((r=e&&e.appId,typeof r===u?r.apply(e):r))+")</span>",n}function m(e,t){return'<div class="subtitle subtitle-launch">Create after applying updates</div>\n      '}function g(e,t){var r="",i;i=n["if"].call(e,e&&e.isOld,{hash:{},inverse:a.noop,fn:a.program(14,y,t),data:t});if(i||i===0)r+=i;return r+="\n      ",r}function y(e,t){return'<div class="subtitle subtitle-terminate">Delete after applying updates</div>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o=this.escapeExpression,u="function",a=this;return s=n["if"].call(t,t&&t.group,{hash:{},inverse:a.noop,fn:a.program(1,f,i),data:i}),s||s===0?s:""};return e.template(t)}),function(){define("workspaces/editor/property/eni/view",["../base/view","./template/stack","./template/eni_list","i18n!/nls/lang.js"],function(e,t,n,r){var i,s;return s=function(){return null},i=e.extend({events:{"change #property-eni-desc":"setEniDesc","change #property-eni-source-check":"setEniSourceDestCheck","click .toggle-eip":"setEip","click #property-eni-ip-add":"addIp","click #property-eni-list .icon-remove":"removeIp","keyup .input-ip":"syncIPList"},render:function(){return this.$el.html(t(this.model.attributes)),this.refreshIpList(),$("#prop-appedit-eni-list").html(n(this.model.attributes)),this.bindIpItemValidate(),this.model.attributes.name},setEniDesc:function(e){return this.model.setEniDesc(e.target.value),null},setEniSourceDestCheck:function(e){return this.model.setSourceDestCheck(e.target.checked),null},addIp:function(){if($("#property-eni-ip-add").hasClass("disabled"))return;return this.model.addIp(),this.refreshIpList(),null},setEip:function(e){var t,n,i,s;return t=$(e.currentTarget),i=t.closest("li").index(),n=!t.hasClass("associated"),n?s=r.ide.PROP_INSTANCE_IP_MSG_4:s=r.ide.PROP_INSTANCE_IP_MSG_3,t.toggleClass("associated",n).data("tooltip",s),this.model.attachEip(i,n),null},removeIp:function(e){var t,n;return t=$(e.currentTarget).closest("li"),n=t.index(),t.remove(),this.model.removeIp(n),this.updateIPAddBtnState(!0),null},syncIPList:function(e){var t,n,r,i,s;i=$("#property-eni-list .input-ip-item"),t=$(e.currentTarget);if(!t.parsley("validate"))return;return s=t.val(),r=t.siblings(".input-ip-prefix").text()+s,n=s==="x"||s==="x.x",this.model.setIp(t.closest(".input-ip-item").index(),r,n),null},refreshIpList:function(e){return $("#property-eni-list").html(MC.template.propertyIpList(this.model.attributes.ips)),this.updateIPAddBtnState(),this.bindIpItemValidate(),null},bindIpItemValidate:function(){var e;return e=this,$(".input-ip").each(function(){var t;return t=$(this),t.parsley("custom",function(n){var r,i,s,o,u,a,f;f=t,i=n,s=f.siblings(".input-ip-prefix").text(),r=s+i,u=s.split("."),o=!1,u.length===4?i==="x"?o=!0:MC.validate("ipaddress",s+i)&&(o=!0):i==="x.x"?o=!0:MC.validate("ipaddress",s+i)&&(o=!0);if(!o)return"Invalid IP address";a=e.model.isValidIp(r);if(a!==!0)return a})})},updateIPAddBtnState:function(e){var t;return e===void 0&&(e=this.model.canAddIP()),e===!0?t="Add IP Address":(_.isString(e)?t=e:t="Cannot add IP address",e=!1),$("#property-eni-ip-add").toggleClass("disabled",!e).data("tooltip",t),null}}),new i})}.call(this),function(){define("workspaces/editor/property/eni/app_model",["../base/model","Design","constant","CloudResources"],function(e,t,n,r){var i;return i=e.extend({init:function(e){var i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T;l=[],m=t.instance().component(e);if(!m){i=t.modelClassForType("AWS.VPC.NetworkInterface").allObjects();for(y=0,w=i.length;y<w;y++){o=i[y];if(o.get("appId")===e){m=o,g=o!=null?o.toJSON():void 0;break}S=o.groupMembers();for(d in S){p=S[d];if(p.appId===e){v=+d+1,m=o,g=p;break}}}}else g=m!=null?m.toJSON():void 0;s=r(n.RESTYPE.ENI,t.instance().region()),this.isGroupMode?l=[g].concat(m.groupMembers()):l.push(g),f=[];for(h in l){a=l[h],((x=s.get(a.appId))!=null?x.toJSON():void 0)?u=$.extend(!0,{},s.get(a.appId).toJSON()):u={privateIpAddressesSet:[]},T=u.privateIpAddressesSet;for(b=0,E=T.length;b<E;b++)c=T[b],c.primary=c.primary===!0;u.id=a.appId,u.name=a.name?""+a.name+"-0":""+m.get("name")+"-"+(v||h),u.idx=v||h,u.sourceDestCheck=u.sourceDestCheck?"enabled":"disabled",f.push(u)}return this.isGroupMode?(this.set("group",_.sortBy(f,"idx")),this.set("readOnly",!0),this.set("isGroupMode",!0),this.set("name",m.get("name"))):(u=f[0],u.readOnly=!0,u.isGroupMode=!1,u.id=e,u.uid=m?m.id:e,this.set(u)),null}}),new i})}.call(this),define("workspaces/editor/property/eni/template/app",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var r="",i;r+='\n  <div class="option-group-head expand">Network Interface Details</div>\n  <div class="option-group">\n    <dl class="dl-vertical">\n      <dt>'+u(n.i18n.call(e,"PROP_ENI_DEVICE_NAME",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.name,typeof i===a?i.apply(e):i))+"</dd>\n      <dt>"+u(n.i18n.call(e,"PROP_ENI_ID",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.networkInterfaceId,typeof i===a?i.apply(e):i))+"</dd>\n      <dt>"+u(n.i18n.call(e,"PROP_ENI_STATE",{hash:{},data:t}))+'</dt>\n      <dd><i class="status status-'+u((i=e&&e.status,typeof i===a?i.apply(e):i))+'"></i>'+u((i=e&&e.status,typeof i===a?i.apply(e):i))+"</dd>\n      ",i=n["if"].call(e,e&&e.description,{hash:{},inverse:f.noop,fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;r+="\n      <dt>"+u(n.i18n.call(e,"PROP_INSTANCE_ENI_SOURCE_DEST_CHECK_DISP",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.sourceDestCheck,typeof i===a?i.apply(e):i))+'</dd>\n    </dl>\n    <div class="hidden-details">\n      <a href="#" class="toggle-details js-toggle-dropdown" data-toggle="self-only"><span class="details-off">+ '+u(n.i18n.call(e,"PROP_ENI_SHOW_DETAIL",{hash:{},data:t}))+'</span><span class="details-on">- '+u(n.i18n.call(e,"PROP_ENI_HIDE_DETAIL",{hash:{},data:t}))+'</span></a>\n      <dl class="dl-vertical">\n        <dt>'+u(n.i18n.call(e,"PROP_ENI_VPC_ID",{hash:{},data:t}))+"</dt>\n        <dd>"+u((i=e&&e.vpcId,typeof i===a?i.apply(e):i))+"</dd>\n        <dt>"+u(n.i18n.call(e,"PROP_ENI_SUBNET_ID",{hash:{},data:t}))+"</dt>\n        <dd>"+u((i=e&&e.subnetId,typeof i===a?i.apply(e):i))+"</dd>\n        ",i=n["if"].call(e,e&&e.attachment,{hash:{},inverse:f.noop,fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;r+="\n        <dt>"+u(n.i18n.call(e,"PROP_ENI_MAC_ADDRESS",{hash:{},data:t}))+"</dt>\n        <dd>"+u((i=e&&e.macAddress,typeof i===a?i.apply(e):i))+"</dd>\n        ",i=n["if"].call(e,(i=e&&e.association,i==null||i===!1?i:i.publicDnsName),{hash:{},inverse:f.noop,fn:f.program(6,p,t),data:t});if(i||i===0)r+=i;r+="\n        ",i=n["if"].call(e,e&&e.privateDnsName,{hash:{},inverse:f.noop,fn:f.program(8,d,t),data:t});if(i||i===0)r+=i;r+="\n        ",i=n["if"].call(e,e&&e.ownerId,{hash:{},inverse:f.noop,fn:f.program(10,v,t),data:t});if(i||i===0)r+=i;r+='\n      </dl>\n    </div>\n\n    <table class="table">\n      <tr>\n        <th>'+u(n.i18n.call(e,"PROP_INSTANCE_ENI_IP_ADDRESS",{hash:{},data:t}))+"</th>\n        <th>"+u(n.i18n.call(e,"PROP_INSTANCE_PUBLIC_IP",{hash:{},data:t}))+"</th>\n      </tr>\n      ",i=n.each.call(e,e&&e.privateIpAddressesSet,{hash:{},inverse:f.noop,fn:f.program(12,m,t),data:t});if(i||i===0)r+=i;return r+='\n    </table>\n  </div>\n\n\n  <div class="option-group-head">'+u(n.i18n.call(e,"PROP_ENI_SG_DETAIL",{hash:{},data:t}))+'<span class="property-head-num-wrap">(<span id="property-head-sg-num"></span>)</span></div>\n  <div class="option-group sg-group"></div>\n\n  ',r}function c(e,t){var r="",i;return r+="\n      <dt>"+u(n.i18n.call(e,"PROP_ENI_LBL_DESC",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.description,typeof i===a?i.apply(e):i))+"</dd>\n      ",r}function h(e,t){var r="",i;return r+="\n        <dt>"+u(n.i18n.call(e,"PROP_ENI_ATTACHMENT_ID",{hash:{},data:t}))+"</dt>\n        <dd>"+u((i=(i=e&&e.attachment,i==null||i===!1?i:i.attachmentId),typeof i===a?i.apply(e):i))+"</dd>\n        <dt>"+u(n.i18n.call(e,"PROP_ENI_Attachment_OWNER",{hash:{},data:t}))+"</dt>\n        <dd>"+u((i=(i=e&&e.attachment,i==null||i===!1?i:i.instanceOwnerId),typeof i===a?i.apply(e):i))+"</dd>\n        <dt>"+u(n.i18n.call(e,"PROP_ENI_Attachment_STATE",{hash:{},data:t}))+"</dt>\n        <dd>"+u((i=(i=e&&e.attachment,i==null||i===!1?i:i.status),typeof i===a?i.apply(e):i))+"</dd>\n        ",r}function p(e,t){var r="",i;return r+="\n        <dt>"+u(n.i18n.call(e,"PROP_INSTANCE_PUBLIC_DNS",{hash:{},data:t}))+"</dt>\n        <dd>"+u((i=(i=e&&e.association,i==null||i===!1?i:i.publicDnsName),typeof i===a?i.apply(e):i))+"</dd>\n        ",r}function d(e,t){var r="",i;return r+="\n        <dt>"+u(n.i18n.call(e,"PROP_INSTANCE_PRIVATE_DNS",{hash:{},data:t}))+"</dt>\n        <dd>"+u((i=e&&e.privateDnsName,typeof i===a?i.apply(e):i))+"</dd>\n        ",r}function v(e,t){var r="",i;return r+="\n        <dt>"+u(n.i18n.call(e,"PROP_ENI_IP_OWNER",{hash:{},data:t}))+"</dt>\n        <dd>"+u((i=e&&e.ownerId,typeof i===a?i.apply(e):i))+"</dd>\n        ",r}function m(e,t){var r="",i;r+="\n      <tr>\n        <td>"+u((i=e&&e.privateIpAddress,typeof i===a?i.apply(e):i)),i=n["if"].call(e,e&&e.primary,{hash:{},inverse:f.noop,fn:f.program(13,g,t),data:t});if(i||i===0)r+=i;r+="</td>\n        <td>",i=n["if"].call(e,(i=e&&e.association,i==null||i===!1?i:i.publicIp),{hash:{},inverse:f.program(17,b,t),fn:f.program(15,y,t),data:t});if(i||i===0)r+=i;return r+="</td>\n      </tr>\n      ",r}function g(e,t){return"<span>(Primary)</span>"}function y(e,t){var n;return u((n=(n=e&&e.association,n==null||n===!1?n:n.publicIp),typeof n===a?n.apply(e):n))}function b(e,t){return"-"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+='<article class="property-app">\n  <div id="prop-appedit-eni-list" class="expand"></div>\n\n  ',o=n.unless.call(t,t&&t.isGroupMode,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n</article>",s};return e.template(t)}),function(){define("workspaces/editor/property/eni/app_view",["../base/view","./template/app","./template/eni_list"],function(e,t,n){var r;return r=e.extend({render:function(){return this.$el.html(t(this.model.attributes)),this.model.isGroupMode&&$("#prop-appedit-eni-list").html(n(this.model.attributes)),this.model.attributes.name}}),new r})}.call(this),function(){define("workspaces/editor/property/eni/main",["../base/main","./model","./view","./app_model","./app_view","../sglist/main","event","constant"],function(e,t,n,r,i,s,o,u){var a,f;return f={},f[o.PROPERTY_REFRESH_ENI_IP_LIST]=function(){return this.model.getIpList(),this.view.refreshIpList(),null},a=e.extend({ideEvents:f,handleTypes:[u.RESTYPE.ENI,"component_eni_group"],onUnloadSubPanel:function(e){return s.onUnloadSubPanel(e),null},initStack:function(){return this.model=t,this.model.isAppEdit=!1,this.model.isGroupMode=!1,this.view=n,null},afterLoadStack:function(){if(!this.model.attributes.association)return s.loadModule(this.model)},initApp:function(){return this.model=r,this.model.isGroupMode=this.handle==="component_eni_group",this.view=i,null},afterLoadApp:function(){return this.model.isGroupMode||s.loadModule(this.model),null},initAppEdit:function(){return this.model=t,this.model.isAppEdit=!0,this.view=n,null},afterLoadAppEdit:function(){return s.loadModule(this.model),null}}),null})}.call(this),function(){define("workspaces/editor/property/acl/model",["../base/model","Design","constant","i18n!/nls/lang.js"],function(e,t,n,r){var i,s,o;return o={0:"Echo Reply(0)",3:"Destination Unreachable(3)",4:"Source Quench(4)",5:"Redirect Message(5)",6:"Alternate Host Address(6)",8:"Echo Request(8)",9:"Router Advertisement(9)",10:"Router Solicitation(10)",11:"Time Exceeded(11)",12:"Parameter Problem: Bad IP header(12)",13:"Timestamp(13)",14:"Timestamp Reply(14)",15:"Information Request(15)",16:"Information Reply(16)",17:"Address Mask Request(17)",18:"Address Mask Reply(18)",30:"Traceroute(30)",31:"Datagram Conversion Error(31)",32:"Mobile Host Redirect(32)",33:"Where Are You(33)",34:"Here I Am(34)",35:"Mobile Registration Request(35)",36:"Mobile Registration Reply(36)",37:"Domain Name Request(37)",38:"Domain Name Reply(38)",39:"SKIP Algorithm Discovery Protocol(39)",40:"Photuris Security Failures(40)","-1":"All(-1)"},s={3:{"-1":"All(-1)",0:"destination network unreachable(0)",1:"destination host unreachable(1)",2:"destination protocol unreachable(2)",3:"destination port unreachable(3)",4:"fragmentation required and DF flag set(4)",5:"source route failed(5)",6:"destination network unknown(6)",7:"destination host unknown(7)",8:"source host isolated(8)",9:"network administratively prohibited(9)",10:"host administratively prohibited(10)",11:"network unreachable for TOS(11)",12:"host unreachable for TOS(12)",13:"communication administratively prohibited(13)"},5:{"-1":"All(-1)",0:"redirect datagram for the network(0)",1:"redirect datagram for the host(1)",2:"redirect datagram for the TOS & network(2)",3:"redirect datagram for the TOS & host(3)"},11:{"-1":"All(-1)",0:"TTL expired transit(0)",1:"fragmentation reasembly time exceeded(1)"},12:{"-1":"All(-1)",0:"pointer indicates the error(0)",1:"missing a required option(1)",2:"bad length(2)"}},i=e.extend({init:function(e){var r,i;return r=t.instance().component(e),i=_.map(r.connectionTargets("AclAsso"),function(e){return{name:e.get("name"),cidr:e.get("cidr")}}),this.set({uid:e,isDefault:r.isDefault(),appId:r.get("appId"),name:r.get("name"),vpcId:t.modelClassForType(n.RESTYPE.VPC).theVPC().get("appId"),rules:null,isApp:this.isApp,associations:_.sortBy(i,name)}),this.getRules(),this.sortRules(),null},getRules:function(){var e,n,r;return r=$.extend(!0,[],t.instance().component(this.get("uid")).get("rules")),n=this.get("isDefault"),e=this.isApp,_.each(r,function(t){var r,i,u,a;t.port||(t.port="All");if(t.number===32767)t.number="*",t.readOnly=!0;else if(t.number===100&&n||e)t.readOnly=!0;switch(t.protocol){case-1:t.protocol="ALL";break;case 1:t.protocol="ICMP";break;case 6:t.protocol="TCP";break;case 17:t.protocol="UDP"}t.tooltip="Port";try{t.protocol==="ICMP"?(u=t.port.split("/"),a="",u[0]&&(a=o[u[0]]),r="",u[1]&&(s[u[0]]?r=s[u[0]][u[1]]:r="All(-1)"),a&&!r?t.tooltip="Type: "+a:a&&r&&(t.tooltip="Type: "+a+", "+"Code: "+r)):t.tooltip="Port: "+t.port}catch(f){i=f,void 0}return null}),this.set("rules",r)},sortRules:function(){var e,t;return t=this.get("sortKey")||"number",t==="number"?e=function(e,t){var n,r;n=parseInt(e.number,10)||-1,r=parseInt(t.number,10)||-1;if(n>r)return 1;if(n===r)return 0;if(n<r)return-1}:e=function(e,n){if(e[t]>n[t])return 1;if(e[t]===n[t])return 0;if(e[t]<n[t])return-1},this.attributes.rules=this.attributes.rules.sort(e),null},setSortOption:function(e){return this.set("sortKey",e),this.sortRules(),null},removeAclRule:function(e){return t.instance().component(this.get("uid")).removeRule(e)},addAclRule:function(e){return t.instance().component(this.get("uid")).addRule(e),this.getRules(),this.sortRules(),this.trigger("REFRESH_RULE_LIST"),null},checkRuleNumber:function(e){var n;return e=parseInt(e,10),0<e&&e<32768?this.get("isDefault")&&e===100?r.ide.PARSLEY_RULE_NUMBER_100_HAS_EXISTED:(n=_.find(t.instance().component(this.get("uid")).get("rules"),function(t){return t.number===e}),n?sprintf(r.ide.PARSLEY_RULENUMBER_ALREADY_EXISTS,e):!0):r.ide.PARSLEY_VALID_RULE_NUMBER_1_TO_32767}}),new i})}.call(this),define("workspaces/editor/property/acl/template/stack",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var r="",i;return r+='\n  <section class="property-control-group">\n    <dl class="dl-vertical">\n      <dt>'+u(n.i18n.call(e,"PROP_ACL_APP_ID",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.appId,typeof i===a?i.apply(e):i))+"</dd>\n\n      <dt>"+u(n.i18n.call(e,"PROP_ACL_APP_IS_DEFAULT",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.isDefault,typeof i===a?i.apply(e):i))+"</dd>\n\n      <dt>"+u(n.i18n.call(e,"PROP_ACL_APP_VPC_ID",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.vpcId,typeof i===a?i.apply(e):i))+"</dd>\n    </dl>\n  </section>\n  ",r}function c(e,t){var r="",i;r+='\n  <section class="property-control-group" data-bind="true">\n    <label class="left" for="property-acl-name">'+u(n.i18n.call(e,"PROP_ACL_LBL_NAME",{hash:{},data:t}))+'</label>\n    <span class="required-input right">'+u(n.i18n.call(e,"PROP_LBL_REQUIRED",{hash:{},data:t}))+'</span>\n    <input class="input" type="text" value="'+u((i=e&&e.name,typeof i===a?i.apply(e):i))+'" ',i=n["if"].call(e,e&&e.isDefault,{hash:{},inverse:f.noop,fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;return r+=' id="property-acl-name" maxlength="255" data-ignore="true" data-required-rollback="true"/>\n  </section>\n  ',r}function h(e,t){return'disabled="disabled"'}function p(e,t){var r="";return r+='\n    <a href="#" class="icon-add add-rule tooltip action-link" id="acl-add-rule-icon" data-tooltip=\''+u(n.i18n.call(e,"PROP_ACL_BTN_CREATE_NEW_RULE",{hash:{},data:t}))+"'></a>\n    ",r}function d(e,t){var n="",r;return n+="<li>"+u((r=e&&e.name,typeof r===a?r.apply(e):r))+" ("+u((r=e&&e.cidr,typeof r===a?r.apply(e):r))+")</li>",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+="<article>\n  ",o=n["if"].call(t,t&&t.appId,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+='\n\n\n  <div class="option-group-head acl-header expand">'+u(n.i18n.call(t,"PROP_ACL_TIT_RULE",{hash:{},data:i}))+'\n    <span class="property-head-num-wrap">(<span id="acl-rule-count">'+u((o=(o=t&&t.rules,o==null||o===!1?o:o.length),typeof o===a?o.apply(t):o))+"</span>)</span>\n    ",o=n.unless.call(t,t&&t.isApp,{hash:{},inverse:f.noop,fn:f.program(6,p,i),data:i});if(o||o===0)s+=o;s+='\n  </div>\n  <div class="option-group">\n    <div class="rule-list-sort property-control-group">\n      <h5>'+u(n.i18n.call(t,"PROP_ACL_RULE_SORT_BY",{hash:{},data:i}))+'</h5>\n      <div class="selectbox" id="acl-sort-rule-select">\n        <div class="selection">'+u(n.i18n.call(t,"PROP_ACL_RULE_SORT_BY_NUMBER",{hash:{},data:i}))+'</div>\n        <ul class="dropdown" tabindex="-1">\n          <li data-id="number" class="item selected">'+u(n.i18n.call(t,"PROP_ACL_RULE_SORT_BY_NUMBER",{hash:{},data:i}))+'</li>\n          <li data-id="action" class="item">'+u(n.i18n.call(t,"PROP_ACL_RULE_SORT_BY_ACTION",{hash:{},data:i}))+'</li>\n          <li data-id="direction" class="item">'+u(n.i18n.call(t,"PROP_ACL_RULE_SORT_BY_DIRECTION",{hash:{},data:i}))+'</li>\n          <li data-id="source/destination" class="item">'+u(n.i18n.call(t,"PROP_ACL_RULE_SORT_BY_SRC_DEST",{hash:{},data:i}))+'</li>\n        </ul>\n      </div>\n    </div>\n    <ul class="property-list acl-rule-list" id="acl-rule-list">'+u((o=t&&t.acl_list,typeof o===a?o.apply(t):o))+'</ul>\n  </div>\n\n  <div class="option-group-head acl-header expand">'+u(n.i18n.call(t,"PROP_ACL_TIT_ASSOC",{hash:{},data:i}))+'<span class="property-head-num-wrap">(<span id="acl-assn-count">'+u((o=(o=t&&t.associations,o==null||o===!1?o:o.length),typeof o===a?o.apply(t):o))+'</span>)</span>\n  </div>\n\n  <ul class="option-group property-list">',o=n.each.call(t,t&&t.associations,{hash:{},inverse:f.noop,fn:f.program(8,d,i),data:i});if(o||o===0)s+=o;return s+="</ul>\n</article>",s};return e.template(t)}),define("workspaces/editor/property/acl/template/rule_item",["handlebars"],function(e){var t=function(e,t,n,r,i){function f(e,t){var r="",i;r+='\n<li data-uid="'+o((i=e&&e.id,typeof i===u?i.apply(e):i))+'">\n  <div class="acl-rule-number"><span class="tooltip" data-tooltip=\''+o(n.i18n.call(e,"PROP_ACL_TIP_RULE_NUMBER",{hash:{},data:t}))+"'>"+o((i=e&&e.number,typeof i===u?i.apply(e):i))+'</span></div>\n\n  <div class="acl-rule-details">\n    <div class="rule-list-row">\n      <div class="acl-rule-allow-cb tooltip icon-'+o((i=e&&e.action,typeof i===u?i.apply(e):i))+"\" data-tooltip='",i=n.ifCond.call(e,e&&e.action,"deny",{hash:{},inverse:a.program(4,c,t),fn:a.program(2,l,t),data:t});if(i||i===0)r+=i;r+="'></div>\n      ",i=n["if"].call(e,e&&e.egress,{hash:{},inverse:a.program(8,p,t),fn:a.program(6,h,t),data:t});if(i||i===0)r+=i;r+='\n      <span class="tooltip" data-tooltip=\''+o(n.i18n.call(e,"PROP_ACL_TIP_CIDR_BLOCK",{hash:{},data:t}))+"'>"+o((i=e&&e.cidr,typeof i===u?i.apply(e):i))+'</span>\n    </div>\n    <div class="rule-list-row">\n      <div><span class="rule-protocol tooltip" data-tooltip=\''+o(n.i18n.call(e,"PROP_ACL_TIP_PROTOCOL",{hash:{},data:t}))+"'>"+o((i=e&&e.protocol,typeof i===u?i.apply(e):i))+'</span></div>\n      <div class="tooltip" data-tooltip=\''+o((i=e&&e.tooltip,typeof i===u?i.apply(e):i))+"'>"+o((i=e&&e.port,typeof i===u?i.apply(e):i))+"</div>\n    </div>\n    ",i=n.unless.call(e,e&&e.readOnly,{hash:{},inverse:a.noop,fn:a.program(10,d,t),data:t});if(i||i===0)r+=i;return r+="\n  </div>\n</li>\n",r}function l(e,t){var r;return r=n.i18n.call(e,"PROP_ACL_TIP_ACTION_DENY",{hash:{},data:t}),r||r===0?r:""}function c(e,t){var r;return r=n.i18n.call(e,"PROP_ACL_TIP_ACTION_ALLOW",{hash:{},data:t}),r||r===0?r:""}function h(e,t){var r="",i;r+='<span class="icon-outbound tooltip" data-tooltip=\'',i=n.i18n.call(e,"PROP_ACL_TIP_OUTBOUND",{hash:{},data:t});if(i||i===0)r+=i;return r+="'></span>\n      ",r}function p(e,t){var r="",i;r+='<span class="icon-inbound tooltip" data-tooltip=\'',i=n.i18n.call(e,"PROP_ACL_TIP_INBOUND",{hash:{},data:t});if(i||i===0)r+=i;return r+="'></span>\n      ",r}function d(e,t){var r="";return r+='<a class="icon-remove rule-remove-icon tooltip" data-tooltip=\''+o(n.i18n.call(e,"PROP_ACL_TIP_REMOVE_RULE",{hash:{},data:t}))+"'></a>",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o=this.escapeExpression,u="function",a=this;return s=n.each.call(t,t,{hash:{},inverse:a.noop,fn:a.program(1,f,i),data:i}),s||s===0?s:""};return e.template(t)}),define("workspaces/editor/property/acl/template/dialog",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var n="",r;return n+='\n				<li class="item tooltip" data-id="'+a((r=e&&e.cidr,typeof r===u?r.apply(e):r))+'"><div class="main truncate">'+a((r=e&&e.name,typeof r===u?r.apply(e):r))+"</div></li>\n			",n}function c(e,t){var r="";return r+='\n			  <li class="item" data-id="custom">'+a(n.i18n.call(e,"POP_ACLRULE_PROTOCOL_CUSTOM",{hash:{},data:t}))+'</li>\n			  <li class="item" data-id="all">'+a(n.i18n.call(e,"POP_ACLRULE_PROTOCOL_ALL",{hash:{},data:t}))+"</li>\n			  ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div id="modal-acl-rule" data-bind="true">\n  <div class="modal-header"><h3>'+a(n.i18n.call(t,"POP_ACLRULE_TITLE_ADD",{hash:{},data:i}))+'</h3><i class="modal-close">&times;</i></div>\n  <div class="modal-body" style="width:450px;">\n	<div class="modal-control-group clearfix">\n	  <label class="label-short" for="modal-acl-number">'+a(n.i18n.call(t,"POP_ACLRULE_LBL_RULE_NUMBER",{hash:{},data:i}))+'</label>\n	  <div class="prefix-input left">\n  		<label for="modal-acl-number">#</label>\n  		<input class="input" type="text" id="modal-acl-number" required data-ignore="true" data-ignore-regexp="^[0-9]*$" data-required="true" autofocus>\n	  </div>\n	</div>\n	<div class="modal-control-group clearfix">\n		<label class="label-short">'+a(n.i18n.call(t,"POP_ACLRULE_LBL_ACTION",{hash:{},data:i}))+'</label>\n		<div class="radio-group-horizontal">\n			<div class="radio">\n				<input type="radio" id="acl-add-model-action-allow" checked="checked" name="acl-add-model-action-select"/>\n				<label for="acl-add-model-action-allow"></label>\n			</div>\n			<label class="radio-label" for="acl-add-model-action-allow">'+a(n.i18n.call(t,"POP_ACLRULE_LBL_ACTION_ALLOW",{hash:{},data:i}))+'</label>\n		</div>\n		<div class="radio-group-horizontal">\n			<div class="radio">\n				<input type="radio" id="acl-add-model-action-deny" name="acl-add-model-action-select"/>\n				<label for="acl-add-model-action-deny"></label>\n			</div>\n			<label class="radio-label" for="acl-add-model-action-deny">'+a(n.i18n.call(t,"POP_ACLRULE_LBL_ACTION_DENY",{hash:{},data:i}))+'</label>\n		</div>\n	</div>\n	<div class="modal-control-group clearfix">\n		<label class="label-short">'+a(n.i18n.call(t,"POP_ACLRULE_LBL_DIRECTION",{hash:{},data:i}))+'</label>\n		<div class="radio-group-horizontal">\n			<div class="radio">\n				<input type="radio" id="acl-add-model-direction-inbound" checked="checked" name="acl-add-model-direction-select"/>\n				<label for="acl-add-model-direction-inbound"></label>\n			</div>\n			<label class="radio-label" for="acl-add-model-direction-inbound">'+a(n.i18n.call(t,"POP_ACLRULE_LBL_INBOUND",{hash:{},data:i}))+'</label>\n		</div>\n		<div class="radio-group-horizontal">\n			<div class="radio">\n				<input type="radio" id="acl-add-model-direction-outbound" name="acl-add-model-direction-select"/>\n				<label for="acl-add-model-direction-outbound"></label>\n			</div>\n			<label class="radio-label" for="acl-add-model-direction-outbound">'+a(n.i18n.call(t,"POP_ACLRULE_LBL_OUTBOUND",{hash:{},data:i}))+'</label>\n		</div>\n	</div>\n	<div class="modal-control-group acl-source-dest clearfix">\n	  <label class="label-short" id="acl-add-model-bound-label">'+a(n.i18n.call(t,"POP_ACLRULE_LBL_SOURCE",{hash:{},data:i}))+'</label>\n		<div class="selectbox" id="acl-add-model-source-select">\n			<div class="selection">'+a(n.i18n.call(t,"POP_ACLRULE_PROTOCOL_CUSTOM",{hash:{},data:i}))+'</div>\n			<ul class="dropdown">\n			<li class="item tooltip selected" data-id="custom">'+a(n.i18n.call(t,"POP_ACLRULE_PROTOCOL_CUSTOM",{hash:{},data:i}))+"</li>\n			",o=n.each.call(t,t&&t.subnets,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+='\n			</ul>\n	  </div>\n	  <input class="input" type="text" id="modal-acl-source-input" data-ignore="true" data-ignore-regexp="^[0-9./]*$" data-required="true" placeholder=\''+a(n.i18n.call(t,"POP_ACLRULE_PLACEHOLD_SOURCE",{hash:{},data:i}))+'\' >\n	</div>\n\n	<div class="modal-control-group clearfix">\n	  <label class="label-short" >'+a(n.i18n.call(t,"POP_ACLRULE_LBL_PROTOCOL",{hash:{},data:i}))+'</label>\n		  <div class="selectbox modal-protocol-select" id="modal-protocol-select"  data-protocal-type="tcp">\n			<div class="selection">'+a(n.i18n.call(t,"POP_ACLRULE_PROTOCOL_TCP",{hash:{},data:i}))+'</div>\n			<ul class="dropdown scroll-wrap scrollbar-auto-hide context-wrap" tabindex="-1">\n			  <div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n			  <li class="selected item" data-id="tcp">'+a(n.i18n.call(t,"POP_ACLRULE_PROTOCOL_TCP",{hash:{},data:i}))+'</li>\n			  <li class="item" data-id="udp">'+a(n.i18n.call(t,"POP_ACLRULE_PROTOCOL_UDP",{hash:{},data:i}))+'</li>\n			  <li class="item" data-id="icmp">'+a(n.i18n.call(t,"POP_ACLRULE_PROTOCOL_ICMP",{hash:{},data:i}))+"</li>\n			  ",o=n.unless.call(t,t&&t.classic,{hash:{},inverse:f.noop,fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;return s+='\n			</ul>\n		  </div>\n\n	  <div id="sg-protocol-select-result">\n		  <div class="sg-protocol-option-input show" id="sg-protocol-tcp">\n			<input class="input" type="text" placeholder=\''+a(n.i18n.call(t,"POP_ACLRULE_PLACEHOLD_PORT_RANGE",{hash:{},data:i}))+'\' required data-ignore="true" data-ignore-regexp="^[0-9-]*$" data-required="true"/>\n		  </div>\n		  <div class="sg-protocol-option-input" id="sg-protocol-udp">\n			<input class="input" type="text" placeholder=\''+a(n.i18n.call(t,"POP_ACLRULE_PLACEHOLD_PORT_RANGE",{hash:{},data:i}))+'\' required data-ignore="true" data-ignore-regexp="^[0-9-]*$" data-required="true"/>\n		  </div>\n		  <div class="sg-protocol-option-input" id="sg-protocol-icmp">\n			<div class="selectbox" id="protocol-icmp-main-select" data-protocal-main="0"  data-protocal-sub="-1">\n			  <div class="selection">Echo Reply(0)</div>\n			  <div class="dropdown scroll-wrap scrollbar-auto-hide context-wrap" style="height:300px;">\n				<div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n				<ul tabindex="-1" class="scroll-content">\n				  <li class="item selected" data-id="0">Echo Reply(0)</li>\n				  <li class="item" data-id="3">Destination Unreachable(3) ...</li>\n				  <li class="item" data-id="4">Source Quench(4)</li>\n				  <li class="item" data-id="5">Redirect Message(5) ...</li>\n				  <li class="item" data-id="6">Alternate Host Address(6)</li>\n				  <li class="item" data-id="8">Echo Request(8)</li>\n				  <li class="item" data-id="9">Router Advertisement(9)</li>\n				  <li class="item" data-id="10">Router Solicitation(10)</li>\n				  <li class="item" data-id="11">Time Exceeded(11) ...</li>\n				  <li class="item" data-id="12">Parameter Problem: Bad IP header(12) ...</li>\n				  <li class="item" data-id="13">Timestamp(13)</li>\n				  <li class="item" data-id="14">Timestamp Reply(14)</li>\n				  <li class="item" data-id="15">Information Request(15)</li>\n				  <li class="item" data-id="16">Information Reply(16)</li>\n				  <li class="item" data-id="17">Address Mask Request(17)</li>\n				  <li class="item" data-id="18">Address Mask Reply(18)</li>\n				  <li class="item" data-id="30">Traceroute(30)</li>\n				  <li class="item" data-id="31">Datagram Conversion Error(31)</li>\n				  <li class="item" data-id="32">Mobile Host Redirect(32)</li>\n				  <li class="item" data-id="33">Where Are You(33)</li>\n				  <li class="item" data-id="34">Here I Am(34)</li>\n				  <li class="item" data-id="35">Mobile Registration Request(35)</li>\n				  <li class="item" data-id="36">Mobile Registration Reply(36)</li>\n				  <li class="item" data-id="37">Domain Name Request(37)</li>\n				  <li class="item" data-id="38">Domain Name Reply(38)</li>\n				  <li class="item" data-id="39">SKIP Algorithm Discovery Protocol(39)</li>\n				  <li class="item" data-id="40">Photuris Security Failures(40)</li>\n				  <li class="item" data-id="-1">All(-1)</li>\n				</ul>\n			  </div>\n		  </div>\n		  <div class="selectbox protocol-icmp-sub-select" id="protocol-icmp-sub-select-3">\n			<div class="selection">All(-1)</div>\n			<div class="dropdown scroll-wrap scrollbar-auto-hide context-wrap" style="height:300px;">\n				<div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n				<ul class="scroll-content" tabindex="-1">\n				  <li class="item selected" data-id="-1">All(-1)</li>\n				  <li class="item" data-id="0">destination network unreachable(0)</li>\n				  <li class="item" data-id="1">destination host unreachable(1)</li>\n				  <li class="item" data-id="2">destination protocol unreachable(2)</li>\n				  <li class="item" data-id="3">destination port unreachable(3)</li>\n				  <li class="item" data-id="4">fragmentation required and DF flag set(4)</li>\n				  <li class="item" data-id="5">source route failed(5)</li>\n				  <li class="item" data-id="6">destination network unknown(6)</li>\n				  <li class="item" data-id="7">destination host unknown(7)</li>\n				  <li class="item" data-id="8">source host isolated(8)</li>\n				  <li class="item" data-id="9">network administratively prohibited(9)</li>\n				  <li class="item" data-id="10">host administratively prohibited(10)</li>\n				  <li class="item" data-id="11">network unreachable for TOS(11)</li>\n				  <li class="item" data-id="12">host unreachable for TOS(12)</li>\n				  <li class="item" data-id="13">communication administratively prohibited(13)</li>\n				</ul>\n			</div>\n		  </div>\n		  <div class="selectbox protocol-icmp-sub-select" id="protocol-icmp-sub-select-5">\n			<div class="selection">All(-1)</div>\n			<ul class="dropdown" tabindex="-1">\n			  <li class="selected item" data-id="-1">All(-1)</li>\n			  <li class="item" data-id="0">redirect datagram for the network(0)</li>\n			  <li class="item" data-id="1">redirect datagram for the host(1)</li>\n			  <li class="item" data-id="2">redirect datagram for the TOS & network(2)</li>\n			  <li class="item" data-id="3">redirect datagram for the TOS & host(3)</li>\n			</ul>\n		  </div>\n		  <div class="selectbox protocol-icmp-sub-select" id="protocol-icmp-sub-select-11">\n			<div class="selection">All(-1)</div>\n			<ul class="dropdown" tabindex="-1">\n			  <li class="item selected" data-id="-1">All(-1)</li>\n			  <li class="item" data-id="0">TTL expired transit(0)</li>\n			  <li class="item" data-id="1">fragmentation reasembly time exceeded(1)</li>\n			</ul>\n		  </div>\n		  <div class="selectbox protocol-icmp-sub-select" id="protocol-icmp-sub-select-12">\n			<div class="selection">All(-1)</div>\n			<ul class="dropdown" role="menu">\n			  <li class="item selected" data-id="-1">All(-1)</li>\n			  <li class="item" data-id="0">pointer indicates the error(0)</li>\n			  <li class="item" data-id="1">missing a required option(1)</li>\n			  <li class="item" data-id="2">bad length(2)</li>\n			</ul>\n		  </div>\n		  </div>\n		  <div class="sg-protocol-option-input" id="sg-protocol-custom">\n				<input class="input" type="string" value="1" min="1" max="255" required="" required data-ignore="true" data-ignore-regexp="^[0-9-]*$" data-required="true">\n		  </div>\n		  <div class="sg-protocol-option-input" id="sg-protocol-all" required data-ignore="true" data-ignore-regexp="^[0-9-]*$"> '+a(n.i18n.call(t,"POP_ACLRULE_LBL_PORT_RANGE_ALL",{hash:{},data:i}))+' </div>\n	  </div>\n	  <ul class="simple-protocol-select">\n			<li>SSH</li>\n			<li>SMTP</li>\n			<li>DNS</li>\n			<li>HTTP</li>\n			<li>POP3</li>\n			<li>IMAP</li>\n			<li>LDAP</li>\n			<li>HTTPS</li>\n			<li>SMTPS</li>\n			<li>IMAPS</li>\n			<li>POP3S</li>\n			<li>MS SQL</li>\n			<li>MYSQL</li>\n			<li>RDP</li>\n		</ul>\n	</div>\n\n  </div>\n  <div class="modal-footer">\n	<button class="btn btn-blue" id="acl-modal-rule-save-btn">'+a(n.i18n.call(t,"POP_ACLRULE_BTN_SAVE",{hash:{},data:i}))+'</button>\n	<button class="btn btn-silver modal-close">'+a(n.i18n.call(t,"POP_ACLRULE_BTN_CANCEL",{hash:{},data:i}))+"</button>\n  </div>\n</div>",s};return e.template(t)}),function(){define("workspaces/editor/property/acl/view",["../base/view","Design","constant","./template/stack","./template/rule_item","./template/dialog","i18n!/nls/lang.js"],function(e,t,n,r,i,s,o){var u;return u=e.extend({events:{"change #property-acl-name":"aclNameChanged","click #acl-add-rule-icon":"showCreateRuleModal","OPTION_CHANGE #acl-sort-rule-select":"sortAclRule","click .acl-rule-details .rule-remove-icon":"removeAclRule"},render:function(){return this.$el.html(r(this.model.attributes)),this.refreshRuleList(),this.model.attributes.name},aclNameChanged:function(e){var t,n;n=$(e.currentTarget),t=n.val();if(MC.aws.aws.checkResName(this.model.get("uid"),n,"ACL"))return this.model.setName(t),this.setTitle(t)},sortAclRule:function(e){var t,n;return t=$("#acl-rule-list"),n=$(e.target).find(".selected").attr("data-id"),this.model.setSortOption(n),this.refreshRuleList(),null},refreshRuleList:function(){return $("#acl-rule-list").html(i(this.model.attributes.rules)),$("#acl-rule-count").text(this.model.attributes.rules.length),null},removeAclRule:function(e){var t,n;return t=$(e.currentTarget).closest("li"),n=t.attr("data-uid"),this.model.removeAclRule(n)&&t.remove(),null},showCreateRuleModal:function(){var e,r;return e=t.modelClassForType(n.RESTYPE.SUBNET),r={classic:!1,subnets:_.map(e.allObjects(),function(e){return{name:e.get("name"),cidr:e.get("cidr")}})},modal(s(r)),$("#acl-modal-rule-save-btn").on("click",_.bind(this.saveRule,this)),$("#acl-add-model-source-select").on("OPTION_CHANGE",this.modalRuleSourceSelected),$("#modal-protocol-select").on("OPTION_CHANGE",this.modalRuleProtocolSelected),$("#protocol-icmp-main-select").on("OPTION_CHANGE",this.modalRuleICMPSelected),$("#acl-add-model-direction-outbound").on("change",this.changeBoundInModal),$("#acl-add-model-direction-inbound").on("change",this.changeBoundInModal),$(".simple-protocol-select li").on("click",this.clickSimpleProtocolSelect),!1},saveRule:function(){var e,t,n,r,i,s,u,a,f,l,c,h;n=$("#modal-acl-number"),u=$("#modal-acl-number").val(),l=this.model.checkRuleNumber(u),n.parsley("custom",function(e){return _.isString(l)?l:null});if(!n.parsley("validate"))return;c=$("#acl-add-model-source-select").find(".selected").attr("data-id");if(c==="custom"){e=$("#modal-acl-source-input"),e.parsley("custom",function(e){return MC.validate("cidr",e)?null:o.ide.PARSLEY_MUST_BE_CIDR_BLOCK});if(!e.parsley("validate"))return;c=e.val()}t=$("#modal-protocol-select").find(".selected"),f=t.attr("data-id"),h={tcp:{dom:$("#sg-protocol-tcp input"),method:function(e){var t;return t=[],t=MC.validate.portRange(e),t?MC.validate.portValidRange(t)?null:"Port range needs to be a number or a range of numbers between 0 and 65535.":"Must be a valid format of port range."}},udp:{dom:$("#sg-protocol-udp input"),method:function(e){var t;return t=[],t=MC.validate.portRange(e),t?MC.validate.portValidRange(t)?null:"Port range needs to be a number or a range of numbers between 0 and 65535.":"Must be a valid format of port range."}},custom:{dom:$("#sg-protocol-custom input"),method:function(e){return MC.validate.port(e)?null:"Must be a valid format of port."}}};if(h[f]){s=h[f],s.dom.parsley("custom",s.method);if(!s.dom.parsley("validate"))return}return f==="tcp"?(a=$("#sg-protocol-"+f+" input").val(),f="6"):f==="udp"?(a=$("#sg-protocol-"+f+" input").val(),f="17"):f==="icmp"?(i=$("#protocol-icmp-main-select").find(".selected").attr("data-id"),r=$("#protocol-icmp-sub-select-"+i).find(".selected").attr("data-id")||"-1",f="1",a=i+"/"+r):f==="custom"?(f=$("#sg-protocol-"+f+" input").val(),a=""):f==="all"&&(f="-1",a=""),this.model.addAclRule({number:u,action:$("#acl-add-model-action-allow").is(":checked")?"allow":"deny",egress:$("#acl-add-model-direction-outbound").is(":checked"),cidr:c,protocol:f,port:a}),modal.close(),null},modalRuleSourceSelected:function(e){var t;return t=$.trim($(e.target).find(".selected").attr("data-id")),t==="custom"?($("#modal-acl-source-input").show(),$("#acl-add-model-source-select .selection").width(68)):($("#modal-acl-source-input").hide(),$("#acl-add-model-source-select .selection").width(322))},modalRuleProtocolSelected:function(e){var t,n,r,i;return r=$(e.target),i=r.find(".selected").attr("data-id"),i&&($("#sg-protocol-custom").hide(),$("#sg-protocol-all").hide(),$("#sg-protocol-select-result .sg-protocol-option-input").hide(),$("#sg-protocol-"+i).show(),t=$("#protocol-icmp-main-select"),n=t.find(".selected").attr("data-id"),n!=="3"&&n!=="5"&&n!=="11"&&n!=="12"&&$(".protocol-icmp-sub-select").hide()),null},modalRuleICMPSelected:function(e){var t,n,r;return t=$(e.target),n=t.find(".selected").attr("data-id"),r=$("#protocol-icmp-sub-select-"+n),$(".protocol-icmp-sub-select").hide(),r.show(),null},changeBoundInModal:function(e){var t;return t=$("#acl-add-model-direction-inbound").prop("checked"),t?$("#acl-add-model-bound-label").text(o.ide.POP_ACLRULE_LBL_SOURCE):$("#acl-add-model-bound-label").text(o.ide.POP_ACLRULE_LBL_DEST)},clickSimpleProtocolSelect:function(e){var t,n,r,i;return n=$(e.currentTarget).text(),i=function(e){var t,n;return t=e.toLowerCase(),n=$("#modal-protocol-select"),n.find("li.item").removeClass("selected"),n.find("li.item[data-id="+t+"]").addClass("selected"),n.find(".selection").text(e),n.trigger("OPTION_CHANGE")},t={SSH:22,SMTP:25,DNS:53,HTTP:80,POP3:110,IMAP:143,LDAP:289,HTTPS:443,SMTPS:465,IMAPS:993,POP3S:995,"MS SQL":1433,MYSQL:3306,RDP:3389},r=t[n],n==="DNS"?(i("UDP"),$("#sg-protocol-udp input").val(r)):(i("TCP"),$("#sg-protocol-tcp input").val(r))}}),new u})}.call(this),function(){define("workspaces/editor/property/acl/main",["../base/main","./model","./view","event"],function(e,t,n){var r;return t.on("REFRESH_RULE_LIST",function(){return n.refreshRuleList()}),r=e.extend({subPanelID:"ACL",initStack:function(){return this.model=t,this.model.isApp=!1,this.view=n,null},initApp:function(){return this.model=t,this.model.isApp=!0,this.view=n,null},initAppEdit:function(){return this.model=t,this.model.isApp=!1,this.view=n,null}}),null})}.call(this),function(){define("workspaces/editor/property/launchconfig/model",["../base/model","keypair_model","constant","Design","CloudResources"],function(e,t,n,r,i){var s;return s=e.extend({initialize:function(){var e;return e=this,this.on("EC2_KPDOWNLOAD_RETURN",function(t){var n,r;r=t.param[3],n=t.param[4];if(e.get("keyName")!==n)return;return e.trigger("KP_DOWNLOADED",t.resolved_data),null})},downloadKP:function(e){var n,i;return i=$.cookie("usercode"),n=$.cookie("session_id"),t.download({sender:this},i,n,r.instance().region(),e),null},init:function(e){var t,n,i,s,o;this.lc=r.instance().component(e);if(!this.lc)return!1;n=this.lc.toJSON(),n.uid=e,n.isEditable=this.isAppEdit,n.app_view=r.instance().modeIsAppView(),this.set(n),this.set("displayAssociatePublicIp",!0),this.set("monitorEnabled",!0),this.set("can_set_ebs",this.lc.isEbsOptimizedEnabled()),this.getInstanceType(),this.getAmi(),this.getKeyPair(),i=r.instance(),t=i.get("agent"),this.set("stackAgentEnable",t.enabled);if(this.isApp){this.getAppLaunch(e),s=this.lc.connectionTargets("KeypairUsage")[0],this.set("keyName",s&&s.get("appId")||this.lc.get("keyName")),o=this.lc.getBlockDeviceMapping(),o.length===1&&this.set("rootDevice",o[0]);return}return null},getInstanceType:function(e,t){var n,i,s;return n=this.lc.get("instanceType"),i=r.instance().region(),s=_.map(this.lc.getInstanceType(),function(e){var t;return t=App.model.getInstanceTypeConfig(i),t?(t=t[e].formated_desc,{main:t[0],ecu:t[1],core:t[2],mem:t[3],name:e,selected:n===e}):{}}),this.set("instance_type",s),null},setEbsOptimized:function(e){return this.lc.set("ebsOptimized",e)},setCloudWatch:function(e){return this.lc.set("monitoring",e)},setUserData:function(e){return this.lc.set("userData",e)},setPublicIp:function(e){this.lc.set("publicIp",e);if(e)return r.modelClassForType(n.RESTYPE.IGW).tryCreateIgw()},setInstanceType:function(e){return this.lc.setInstanceType(e),this.lc.isEbsOptimizedEnabled()},getAmi:function(){var e,t,n,i,s,o,u,a;return t=this.get("imageId"),n=r.instance().component(this.get("uid")),e=this.lc.getAmi(),e?i={name:e.name||e.description||e.id,icon:e.osType+"."+e.architecture+"."+e.rootDeviceType+".png"}:i={name:t+" is not available.",icon:"ami-not-available.png",unavailable:!0},this.set("instance_ami",i),e&&e.blockDeviceMapping&&!$.isEmptyObject(e.blockDeviceMapping)&&(u=e.rootDeviceName,o=e.blockDeviceMapping[u],u&&!o&&(_.each(e.blockDeviceMapping,function(e,t){if(u.indexOf(t)!==-1&&!o)return o=e,u=t,null}),null),s=n.get("rdType"),a={name:u,size:parseInt(n.get("rdSize"),10),iops:n.get("rdIops"),isStandard:s==="standard",isIo1:s==="io1",isGp2:s==="gp2"},a.size<10&&(a.iops="",a.iopsDisabled=!0),this.set("rootDevice",a)),this.set("min_volume_size",n.getAmiRootDeviceVolumeSize()),null},getKeyPair:function(){var e;return e=r.instance().component(this.get("uid")).connectionTargets("KeypairUsage")[0],e&&this.set("keypair",e.getKPList()),null},addKP:function(e){var t,i,s,o,u;t=r.modelClassForType(n.RESTYPE.KP),u=t.allObjects();for(s=0,o=u.length;s<o;s++){i=u[s];if(i.get("name")===e)return!1}return i=new t({name:e}),i.id},deleteKP:function(e){return r.instance().component(e).remove(),null},setKP:function(e){var t,n;return t=r.instance(),n=t.component(this.get("uid")),t.component(e).assignTo(n),null},isSGListReadOnly:function(){if(this.get("appId"))return!0},getAppLaunch:function(e){var t,s;return t=(s=i(n.RESTYPE.LC,r.instance().region()).get(this.lc.get("appId")))!=null?s.toJSON():void 0,this.set("ebsOptimized",this.lc.get("ebsOptimized")+""),this.set("name",this.lc.get("name")),this.set("lc",t),this.set("uid",e),null},getStateData:function(){return r.instance().component(this.get("uid")).getStateData()},setIops:function(e){return r.instance().component(this.get("uid")).set("rdIops",e),null},setVolumeType:function(e){return r.instance().component(this.get("uid")).set("rdType",e),null},setVolumeSize:function(e){return r.instance().component(this.get("uid")).set("rdSize",e),null}}),new s})}.call(this),define("workspaces/editor/property/launchconfig/template/stack",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){return'style="color:red;"'}function c(e,t){var r="",i;r+='\n		<section class="property-control-group">\n			<label class="left">'+f(n.i18n.call(e,"PROP_INSTANCE_TYPE",{hash:{},data:t}))+'</label>\n			<div class="selectbox selectbox-mega" id="instance-type-select">\n				<div class="selection"></div>\n				<ul class="dropdown">\n					',i=n.each.call(e,e&&e.instance_type,{hash:{},inverse:u.noop,fn:u.program(4,h,t),data:t});if(i||i===0)r+=i;return r+="\n				</ul>\n			</div>\n		</section>\n		",r}function h(e,t){var r="",i;r+='\n					<li class="',i=n["if"].call(e,e&&e.selected,{hash:{},inverse:u.noop,fn:u.program(5,p,t),data:t});if(i||i===0)r+=i;return r+='tooltip item" data-tooltip="'+f((i=e&&e.main,typeof i===a?i.apply(e):i))+'" data-id="'+f((i=e&&e.name,typeof i===a?i.apply(e):i))+'">\n						<div class="main  truncate">'+f((i=e&&e.main,typeof i===a?i.apply(e):i))+'</div>\n						<div class="sub"><span>'+f((i=e&&e.ecu,typeof i===a?i.apply(e):i))+"</span> <span>"+f((i=e&&e.core,typeof i===a?i.apply(e):i))+"</span> <span>"+f((i=e&&e.mem,typeof i===a?i.apply(e):i))+"</span></div>\n					</li>\n					",r}function p(e,t){return"selected "}function d(e,t){return"hide"}function v(e,t){return'\n				<input id="property-instance-ebs-optimized" type="checkbox" value="None" checked="true" name="ebs-optimized" />\n				'}function m(e,t){return'\n				<input id="property-instance-ebs-optimized" type="checkbox" value="None" name="ebs-optimized" />\n				'}function g(e,t){var r="",i;r+='\n			<section class="property-control-group">\n				<div class="checkbox">\n					<input id="property-instance-public-ip" type="checkbox" ',i=n["if"].call(e,e&&e.publicIp,{hash:{},inverse:u.noop,fn:u.program(14,y,t),data:t});if(i||i===0)r+=i;return r+=' value="None" name="property-instance-public-ip" />\n					<label for="property-instance-public-ip"></label>\n				</div>\n				<label for="property-instance-public-ip">'+f(n.i18n.call(e,"PROP_INSTANCE_ENI_AUTO_PUBLIC_IP",{hash:{},data:t}))+"</label>\n			</section>\n		",r}function y(e,t){return'checked="checked"'}function b(e,t){var r;return r=n["if"].call(e,e&&e.monitoring,{hash:{},inverse:u.noop,fn:u.program(17,w,t),data:t}),r||r===0?r:""}function w(e,t){return'checked="true"'}function E(e,t){return'disabled="disabled"'}function S(e,t){var r="";return r+='\n			<div class="property-info"> User Data is disabled to allow installing OpsAgent for VisualOps. <a href="'+f(n.i18n.call(e,"PROP_AGENT_USER_DATA_URL",{hash:{},data:t}))+'" target="_blank">View content</a>.\n			</div>\n			',r}function x(e,t){var r="",i;return r+='\n				<label for="property-instance-user-data">'+f(n.i18n.call(e,"PROP_INSTANCE_USER_DATA",{hash:{},data:t}))+'</label>\n				<textarea id="property-instance-user-data">'+f((i=e&&e.userData,typeof i===a?i.apply(e):i))+"</textarea>\n			",r}function T(e,t){var r="",i;r+='\n	<div class="option-group-head">Root Device</div>\n	<div class="option-group">\n    <section class="property-control-group">\n      <label>'+f(n.i18n.call(e,"PROP_VOLUME_DEVICE_NAME",{hash:{},data:t}))+"</label>\n      <div>"+f((i=(i=e&&e.rootDevice,i==null||i===!1?i:i.name),typeof i===a?i.apply(e):i))+'</div>\n    </section>\n    <section class="property-control-group">\n      <label>'+f(n.i18n.call(e,"PROP_VOLUME_SIZE",{hash:{},data:t}))+'</label>\n      <div class="ranged-number-input">\n          <label for="volume-size-ranged"></label>\n          <input id="volume-size-ranged" type="text" class="input" value="'+f((i=(i=e&&e.rootDevice,i==null||i===!1?i:i.size),typeof i===a?i.apply(e):i))+'" name="volume-size-ranged" data-ignore="true" maxlength="4" data-required="true" data-required="true" data-type="number"/>\n      <label for="volume-size-ranged" >GB</label>\n      </div>\n    </section>\n\n    <section class="property-control-group">\n        <label>'+f(n.i18n.call(e,"PROP_VOLUME_TYPE",{hash:{},data:t}))+'</label>\n        <div id="volume-type-radios">\n          <div>\n             <div class="radio">\n                  <input id="radio-standard" type="radio" name="volume-type" ',i=n["if"].call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.isStandard),{hash:{},inverse:u.noop,fn:u.program(14,y,t),data:t});if(i||i===0)r+=i;r+=' value="standard" />\n                  <label for="radio-standard"></label>\n              </div>\n              <label for="radio-standard">'+f(n.i18n.call(e,"PROP_VOLUME_TYPE_STANDARD",{hash:{},data:t}))+'</label>\n          </div>\n          <div>\n             <div class="radio">\n                  <input id="radio-gp2" type="radio" name="volume-type" ',i=n["if"].call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.isGp2),{hash:{},inverse:u.noop,fn:u.program(14,y,t),data:t});if(i||i===0)r+=i;r+=' value="gp2" />\n                  <label for="radio-gp2"></label>\n              </div>\n              <label for="radio-gp2">'+f(n.i18n.call(e,"PROP_VOLUME_TYPE_GP2",{hash:{},data:t}))+"</label>\n          </div>\n          <div ",i=n["if"].call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.iopsDisabled),{hash:{},inverse:u.noop,fn:u.program(26,N,t),data:t});if(i||i===0)r+=i;r+=' data-tooltip="'+f(n.i18n.call(e,"PROP_VOLUME_MSG_WARN",{hash:{},data:t}))+'">\n            <div class="radio">\n              <input id="radio-io1" type="radio" name="volume-type" ',i=n["if"].call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.isIo1),{hash:{},inverse:u.noop,fn:u.program(14,y,t),data:t});if(i||i===0)r+=i;r+=" ",i=n["if"].call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.iopsDisabled),{hash:{},inverse:u.noop,fn:u.program(28,C,t),data:t});if(i||i===0)r+=i;r+=' value="io1" />\n              <label for="radio-io1"></label>\n            </div>\n            <label for="radio-io1">'+f(n.i18n.call(e,"PROP_VOLUME_TYPE_IO1",{hash:{},data:t}))+'</label>\n          </div>\n        </div>\n    </section>\n\n    <section class="property-control-group" id="iops-group" ',i=n.unless.call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.isIo1),{hash:{},inverse:u.noop,fn:u.program(30,k,t),data:t});if(i||i===0)r+=i;r+='>\n        <label>IOPS</label>\n        <div class="ranged-number-input">\n          <label for="iops-ranged"></label>\n          <input id="iops-ranged" type="text" class="input" min="100" max="2000" value="'+f((i=(i=e&&e.rootDevice,i==null||i===!1?i:i.iops),typeof i===a?i.apply(e):i))+'">\n        </div>\n    </section>\n\n<!--     <section class="property-control-group">\n        <label>'+f(n.i18n.call(e,"PROP_VOLUME_ENCRYPTED",{hash:{},data:t}))+"</label>\n        <div>",i=n["if"].call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.encrypted),{hash:{},inverse:u.program(34,A,t),fn:u.program(32,L,t),data:t});if(i||i===0)r+=i;return r+="</div>\n    </section> -->\n\n	</div>\n  ",r}function N(e,t){return'class="tooltip"'}function C(e,t){return"disabled"}function k(e,t){return'style="display:none"'}function L(e,t){return"Yes"}function A(e,t){return"No"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this,a="function",f=this.escapeExpression;s+='<article>\n\n	<div class="option-group-head expand">'+f(n.i18n.call(t,"PROP_LC_TITLE",{hash:{},data:i}))+'</div>\n	<div class="option-group">\n		<section class="property-control-group" data-bind="true">\n			<label class="left" for="property-instance-name" >'+f(n.i18n.call(t,"PROP_LC_NAME",{hash:{},data:i}))+'</label>\n			<span class="required-input right">'+f(n.i18n.call(t,"PROP_INSTANCE_REQUIRE",{hash:{},data:i}))+'</span>\n			<input class="input launch-configuration-name"  type="text" value="'+f((o=t&&t.name,typeof o===a?o.apply(t):o))+'" name="property-instance-name" id="property-instance-name" maxlength="240" data-required-rollback="true" data-ignore="true"/>\n		</section>\n		<section class="property-control-group">\n			<label>'+f(n.i18n.call(t,"PROP_INSTANCE_AMI",{hash:{},data:i}))+'</label>\n			<div id="property-ami" class="property-block-wrap clearfix" data-uid="'+f((o=t&&t.imageId,typeof o===a?o.apply(t):o))+'">\n				<img class="property-ami-icon left" src="/assets/images/ide/ami/'+f((o=(o=t&&t.instance_ami,o==null||o===!1?o:o.icon),typeof o===a?o.apply(t):o))+'" / >\n				<div class="property-ami-label" ',o=n["if"].call(t,(o=t&&t.instance_ami,o==null||o===!1?o:o.unavailable),{hash:{},inverse:u.noop,fn:u.program(1,l,i),data:i});if(o||o===0)s+=o;s+=">"+f((o=(o=t&&t.instance_ami,o==null||o===!1?o:o.name),typeof o===a?o.apply(t):o))+"</div>\n			</div>\n		</section>\n		",o=n["if"].call(t,(o=t&&t.instance_type,o==null||o===!1?o:o.length),{hash:{},inverse:u.noop,fn:u.program(3,c,i),data:i});if(o||o===0)s+=o;s+='\n		<section class="property-control-group ',o=n.unless.call(t,t&&t.can_set_ebs,{hash:{},inverse:u.noop,fn:u.program(7,d,i),data:i});if(o||o===0)s+=o;s+='">\n			<div class="checkbox">\n				',o=n["if"].call(t,t&&t.ebsOptimized,{hash:{},inverse:u.program(11,m,i),fn:u.program(9,v,i),data:i});if(o||o===0)s+=o;s+='\n				<label for="property-instance-ebs-optimized"></label>\n			</div>\n			<label for="property-instance-ebs-optimized">EBS Optimized</label>\n		</section>\n		<section class="property-control-group">\n			<label class="left">'+f(n.i18n.call(t,"PROP_INSTANCE_KEY_PAIR",{hash:{},data:i}))+'</label>\n			<i class="icon-info tooltip default-kp-info" data-tooltip="'+f(n.i18n.call(t,"POP_INSTANCE_KEYPAIR_INFO_TIP",{hash:{},data:i}))+'"></i>\n            <div id="kp-placeholder"></div>\n		</section>\n		',o=n["if"].call(t,t&&t.displayAssociatePublicIp,{hash:{},inverse:u.noop,fn:u.program(13,g,i),data:i});if(o||o===0)s+=o;s+='\n	</div>\n\n	<div class="option-group-head">'+f(n.i18n.call(t,"PROP_INSTANCE_ADVANCED_DETAIL",{hash:{},data:i}))+'</div>\n	<div class="option-group">\n		<section class="property-control-group">\n			<div class="checkbox">\n				<input id="property-instance-enable-cloudwatch" type="checkbox" ',o=n["if"].call(t,t&&t.monitorEnabled,{hash:{},inverse:u.program(19,E,i),fn:u.program(16,b,i),data:i});if(o||o===0)s+=o;s+=' value="None" name="property-instance-enable-cloudwatch" />\n				<label for="property-instance-enable-cloudwatch"></label>\n			</div>\n			<label for="property-instance-enable-cloudwatch">'+f(n.i18n.call(t,"PROP_INSTANCE_CW_ENABLED",{hash:{},data:i}))+'</label>\n\n			<p class="',o=n.unless.call(t,t&&t.monitoring,{hash:{},inverse:u.noop,fn:u.program(7,d,i),data:i});if(o||o===0)s+=o;s+=' property-info" id="property-cloudwatch-warn">'+f(n.i18n.call(t,"PROP_INSTANCE_CW_WARN",{hash:{},data:i}))+'<a target="_blank" href="http://aws.amazon.com/cloudwatch">Amazon Cloud Watch product page</a></p>\n		</section>\n		<section class="property-control-group">\n			',o=n["if"].call(t,t&&t.stackAgentEnable,{hash:{},inverse:u.program(23,x,i),fn:u.program(21,S,i),data:i});if(o||o===0)s+=o;s+="\n		</section>\n	</div>\n\n	",o=n["if"].call(t,t&&t.rootDevice,{hash:{},inverse:u.noop,fn:u.program(25,T,i),data:i});if(o||o===0)s+=o;return s+='\n\n	<div class="option-group-head">'+f(n.i18n.call(t,"PROP_INSTANCE_SG_DETAIL",{hash:{},data:i}))+'<span class="property-head-num-wrap">(<span id="property-head-sg-num"></span>)</span></div>\n  <div class="option-group sg-group"></div>\n</article>',s};return e.template(t)}),function(){define("workspaces/editor/property/launchconfig/view",["../base/view","./template/stack","event","constant","i18n!/nls/lang.js","kp_dropdown"],function(e,t,n,r,i,s){var o;return o=e.extend({events:{"change .launch-configuration-name":"lcNameChange","change .instance-type-select":"instanceTypeSelect","change #property-instance-ebs-optimized":"ebsOptimizedSelect","change #property-instance-enable-cloudwatch":"cloudwatchSelect","change #property-instance-user-data":"userdataChange","change #property-instance-public-ip":"publicIpChange","OPTION_CHANGE #instance-type-select":"instanceTypeSelect","OPTION_CHANGE #keypair-select":"setKP","EDIT_UPDATE #keypair-select":"addKP","EDIT_FINISHED #keypair-select":"updateKPSelect","click #property-ami":"openAmiPanel","click #volume-type-radios input":"changeVolumeType","keyup #iops-ranged":"changeIops","keyup #volume-size-ranged":"sizeChanged"},changeVolumeType:function(e){var t,n,r,i;t=$(e.currentTarget);if(t.is(":disabled"))return;return r=t.val(),$("#iops-group").toggle(r==="io1"),r==="io1"?(i=parseInt($("#volume-size-ranged").val(),10),n=i*10,$("#iops-ranged").val(n).keyup()):(this.model.setIops(""),$("#iops-ranged").val("")),this.model.setVolumeType(r),null},changeIops:function(){return $("#iops-ranged").parsley("validate")&&this.model.setIops($("#iops-ranged").val()),null},sizeChanged:function(e){var t,n,r,i;if(!$("#volume-size-ranged").parsley("validate"))return;return i=parseInt($("#volume-size-ranged").val(),10),this.model.setVolumeSize(i),i<10&&(this.model.setIops(""),r=!0),t=$("#volume-type-radios").children("div").last().toggleClass("tooltip",r).find("input"),r?(t.attr("disabled","disabled"),$("#radio-standard").click(),$("#iops-group").hide()):t.removeAttr("disabled"),n=parseInt($("#iops-ranged").val(),10)||0,n&&(n>i*10&&(n=i*10,$("#iops-ranged").val(n)),$("#iops-ranged").keyup()),null},render:function(){var e,n,r;return this.$el.html(t(this.model.attributes)),e=Design.instance().component(this.model.get("uid")),n=new s({resModel:e}),this.addSubView(n),this.$("#kp-placeholder").html(n.render().el),r=this,$("#volume-size-ranged").parsley("custom",function(e){e=+e;if(!e||e>1024||e<r.model.attributes.min_volume_size)return sprintf(i.ide.PARSLEY_VOLUME_SIZE_OF_ROOTDEVICE_MUST_IN_RANGE,r.model.attributes.min_volume_size)}),$("#iops-ranged").parsley("custom",function(e){var t;e=+e,t=parseInt($("#volume-size-ranged").val(),10);if(e>4e3||e<100)return i.ide.PARSLEY_IOPS_MUST_BETWEEN_100_4000;if(e>10*t)return i.ide.PARSLEY_IOPS_MUST_BE_LESS_THAN_10_TIMES_OF_VOLUME_SIZE}),this.model.attributes.name},publicIpChange:function(e){return this.model.setPublicIp(e.currentTarget.checked),null},lcNameChange:function(e){var t,n;return n=$(e.currentTarget),t=n.val(),MC.aws.aws.checkResName(this.model.get("uid"),n,"LaunchConfiguration")&&(this.model.setName(t),this.setTitle(t)),null},instanceTypeSelect:function(e,t){var n,r;r=this.model.setInstanceType(t),n=$("#property-instance-ebs-optimized"),n.closest(".property-control-group").toggle(r);if(!r)return n.prop("checked",!1)},ebsOptimizedSelect:function(e){return this.model.setEbsOptimized(e.target.checked),null},cloudwatchSelect:function(e){return this.model.setCloudWatch(e.target.checked),$("#property-cloudwatch-warn").toggle($("#property-instance-enable-cloudwatch").is(":checked"))},userdataChange:function(e){return this.model.setUserData(e.target.value)},setKP:function(e,t){return this.model.setKP(t)},addKP:function(e,t){var n;n=this.model.addKP(t);if(!n)return notification("error",i.ide.NOTIFY_MSG_WARN_KEYPAIR_NAME_ALREADY_EXISTS),n},updateKPSelect:function(){return $("#keypair-select").find(".item:last-child").append('<span class="icon-remove"></span>')},openAmiPanel:function(e){return this.trigger("OPEN_AMI",$("#property-ami").attr("data-uid")),null},deleteKP:function(e){var t,n,r,i,s,o;return r=this,t=$(e.currentTarget).closest("li"),s=t.hasClass("selected"),o=o==="true"?!0:s,i=function(){return t.remove(),s&&$("#keypair-select").find(".item").eq(0).click(),r.model.deleteKP(t.attr("data-id"))},o?(n={title:"Delete Key Pair",confirm:"Delete",color:"red",body:"<p class='modal-text-major'>Are you sure to delete "+t.text()+"?</p><p class='modal-text-minor'>Resources using this key pair will change automatically to use DefaultKP.</p>"},modal(MC.template.modalApp(n)),$("#btn-confirm").one("click",function(){return i(),modal.close()})):i(),!1},disableUserDataInput:function(e){var t;t=$("#property-instance-user-data");if(e===!0)return t.attr("disabled","disabled"),t.addClass("tooltip").attr("data-tooltip",i.ide.PROP_INSTANCE_USER_DATA_DISABLE);if(e===!1)return t.removeAttr("disabled"),t.removeClass("tooltip").removeAttr("data-tooltip")}}),new o})}.call(this),define("workspaces/editor/property/launchconfig/template/app",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var n="",r;return n+="\n      <dd>"+a((r=e&&e.keyName,typeof r===u?r.apply(e):r))+"</dd>\n      ",n}function c(e,t){var r="",i;r+='\n  <div class="option-group-head">Root Device</div>\n  <div class="option-group">\n    <article class="property-app">\n      <dl class="dl-vertical">\n        <dt>'+a(n.i18n.call(e,"PROP_VOLUME_DEVICE_NAME",{hash:{},data:t}))+"</dt>\n        <dd>"+a(n.emptyStr.call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.DeviceName),{hash:{},data:t}))+'</dd>\n      </dl>\n      <dl class="dl-vertical">\n        <dt>'+a(n.i18n.call(e,"PROP_VOLUME_TYPE",{hash:{},data:t}))+"</dt>\n        <dd>"+a(n.readableVt.call(e,(i=(i=e&&e.rootDevice,i==null||i===!1?i:i.Ebs),i==null||i===!1?i:i.VolumeType),{hash:{},data:t}))+"</dd>\n        ",i=n["if"].call(e,(i=(i=e&&e.rootDevice,i==null||i===!1?i:i.Ebs),i==null||i===!1?i:i.SnapshotId),{hash:{},inverse:f.noop,fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;r+="\n        <dt>"+a(n.i18n.call(e,"PROP_VOLUME_SIZE",{hash:{},data:t}))+"</dt>\n        <dd>"+a(n.emptyStr.call(e,(i=(i=e&&e.rootDevice,i==null||i===!1?i:i.Ebs),i==null||i===!1?i:i.VolumeSize),{hash:{},data:t}))+" GB</dd>\n<!--         <dt>"+a(n.i18n.call(e,"PROP_VOLUME_ENCRYPTED",{hash:{},data:t}))+"</dt>\n        <dd>",i=n["if"].call(e,(i=e&&e.rootDevice,i==null||i===!1?i:i.encrypted),{hash:{},inverse:f.program(8,d,t),fn:f.program(6,p,t),data:t});if(i||i===0)r+=i;r+="</dd> -->\n        ",i=n["if"].call(e,(i=(i=e&&e.rootDevice,i==null||i===!1?i:i.Ebs),i==null||i===!1?i:i.Iops),{hash:{},inverse:f.noop,fn:f.program(10,v,t),data:t});if(i||i===0)r+=i;return r+="\n      </dl>\n    </article>\n  </div>\n  ",r}function h(e,t){var r="",i;return r+="\n        <dt>"+a(n.i18n.call(e,"PROP_VOLUME_SNAPSHOT_ID",{hash:{},data:t}))+"</dt>\n        <dd>"+a((i=(i=(i=e&&e.rootDevice,i==null||i===!1?i:i.Ebs),i==null||i===!1?i:i.SnapshotId),typeof i===u?i.apply(e):i))+"</dd>\n        ",r}function p(e,t){return"Yes"}function d(e,t){return"No"}function v(e,t){var n="",r;return n+="\n        <dt>IOPS</dt>\n        <dd>"+a((r=(r=(r=e&&e.rootDevice,r==null||r===!1?r:r.Ebs),r==null||r===!1?r:r.Iops),typeof r===u?r.apply(e):r))+"</dd>\n        ",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<article class="property-app">\n  <div class="option-group-head expand">'+a(n.i18n.call(t,"PROP_LC_TITLE",{hash:{},data:i}))+'</div>\n  <div class="option-group">\n\n    <dl class="dl-vertical">\n      <dt>'+a(n.i18n.call(t,"PROP_LC_CREATE_TIME",{hash:{},data:i}))+"</dt>\n      <dd>"+a(n.timeStr.call(t,(o=t&&t.lc,o==null||o===!1?o:o.CreatedTime),{hash:{},data:i}))+'</dd>\n    </dl>\n\n    <dl class="dl-vertical">\n      <dt>'+a(n.i18n.call(t,"PROP_INSTANCE_AMI",{hash:{},data:i}))+"</dt>\n      <dd>"+a((o=t&&t.imageId,typeof o===u?o.apply(t):o))+"<dd>\n      <dt>"+a(n.i18n.call(t,"PROP_INSTANCE_TYPE",{hash:{},data:i}))+"</dt>\n      <dd>"+a((o=t&&t.instanceType,typeof o===u?o.apply(t):o))+"</dd>\n      <dt>"+a(n.i18n.call(t,"PROP_INSTANCE_KEY_PAIR",{hash:{},data:i}))+"</dt>\n      ",o=n["if"].call(t,t&&t.app_view,{hash:{},inverse:f.program(1,l,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+='\n    </dl>\n\n    <dl class="dl-vertical">\n      <dt>'+a(n.i18n.call(t,"PROP_INSTANCE_EBS_OPTIMIZED",{hash:{},data:i}))+"</dt>\n      <dd>"+a((o=t&&t.ebsOptimized,typeof o===u?o.apply(t):o))+"<dd>\n    </dl>\n  </div>\n\n  ",o=n["if"].call(t,t&&t.rootDevice,{hash:{},inverse:f.noop,fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;return s+='\n\n  <div class="option-group-head expand">'+a(n.i18n.call(t,"PROP_INSTANCE_SG_DETAIL",{hash:{},data:i}))+'<span class="property-head-num-wrap">(<span id="property-head-sg-num"></span>)</span></div>\n  <div class="option-group sg-group"></div>\n</article>',s};return e.template(t)}),function(){define("workspaces/editor/property/launchconfig/app_view",["../base/view","./template/app"],function(e,t){var n;return n=e.extend({events:{"change #property-instance-enable-cloudwatch":"cloudwatchSelect","change #property-instance-user-data":"userdataChange","keyup #property-instance-name":"checkInstanceName"},kpModalClosed:!1,render:function(){var e;return e=this.model.toJSON(),this.$el.html(t(e)),e.name},cloudwatchSelect:function(e){return this.model.setCloudWatch(e.target.checked),$("#property-cloudwatch-warn").toggle($("#property-instance-enable-cloudwatch").is(":checked"))},userdataChange:function(e){return this.model.setUserData(e.target.value)},elbNameChange:function(e){var t,n;n=$(e.currentTarget),t=n.val();if(MC.aws.aws.checkResName(this.model.get("uid"),n,"Launch Configuration"))return this.model.setName(t),this.setTitle(t)}}),new n})}.call(this),function(){define("workspaces/editor/property/launchconfig/main",["../base/main","./model","./view","./app_view","../sglist/main","constant","event"],function(e,t,n,r,i,s,o){var u;return t.on("KP_DOWNLOADED",function(e,t){return r.updateKPModal(e,t)}),r.on("OPEN_AMI",function(t){return e.loadSubPanel("STATIC",t)}),n.on("OPEN_AMI",function(t){return e.loadSubPanel("STATIC",t)}),u=e.extend({handleTypes:s.RESTYPE.LC,onUnloadSubPanel:function(e){return i.onUnloadSubPanel(e),null},initStack:function(){return this.model=t,this.model.isApp=!1,this.view=n,null},afterLoadStack:function(){return i.loadModule(this.model),null},initApp:function(){return this.model=t,this.model.isApp=!0,this.view=r,null},initAppEdit:function(){return this.model=t,this.model.isApp=!0,this.view=r,null},afterLoadApp:function(){return i.loadModule(this.model),null},afterLoadAppEdit:function(){return i.loadModule(this.model),null}}),null})}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};define("workspaces/editor/property/asg/model",["../base/model","constant","Design"],function(t,n,r){var i;return i=t.extend({init:function(e){var t,n,i,s;t=r.instance().component(e),t.type==="ExpandedAsg"&&(t=t.get("originalAsg"),e=t.id),n=t!=null?t.toJSON():void 0,n.uid=e,this.set(n),i=t.getLc();if(!i){this.set("emptyAsg",!0);return}return this.set("has_elb",!!i.connections("ElbAmiAsso").length),this.set("isEC2HealthCheck",t.isEC2HealthCheckType()),s=t.getNotification(),this.set("notification",s),this.set("has_notification",s.instanceLaunch||s.instanceLaunchError||s.instanceTerminate||s.instanceTerminateError||s.test),this.notiObject=t.getNotiObject(),this.set("policies",_.map(n.policies,function(e){return n=$.extend(!0,{},e.attributes),n.alarmData.period=Math.round(n.alarmData.period/60),n})),null},setHealthCheckType:function(e){return r.instance().component(this.get("uid")).set("healthCheckType",e)},setASGMin:function(e){return r.instance().component(this.get("uid")).set("minSize",e)},setASGMax:function(e){return r.instance().component(this.get("uid")).set("maxSize",e)},setASGDesireCapacity:function(e){return r.instance().component(this.get("uid")).set("capacity",e)},setASGCoolDown:function(e){return r.instance().component(this.get("uid")).set("cooldown",e)},setHealthCheckGrace:function(e){return r.instance().component(this.get("uid")).set("healthCheckGracePeriod",e)},setNotification:function(e){var t;return t=r.instance().component(this.get("uid")).setNotification(e),this.notiObject=t,null},removeTopic:function(){var e;return e=r.instance().component(this.get("uid")).setNotification(notification),e!=null?e.removeTopic():void 0},getNotificationTopicName:function(){return r.instance().component(this.get("uid")).getNotificationTopicName()},setNotificationTopic:function(e,t){return r.instance().component(this.get("uid")).setNotificationTopic(e,t)},setTerminatePolicy:function(e){return r.instance().component(this.get("uid")).set("terminationPolicies",e),this.set("terminationPolicies",e),null},delPolicy:function(e){return r.instance().component(e).remove(),null},isDupPolicyName:function(e,t){return _.some(r.instance().component(this.get("uid")).get("policies"),function(n){if(n.id!==e&&n.get("name")===t)return!0})},defaultScalingPolicyName:function(){var t,n,i,s,o;t=r.instance().component(this.get("uid")),t.type==="ExpandedAsg"&&(t=t.get("originalAsg")),o=t.get("policies"),n=o.length,s=""+this.attributes.name+"-policy-"+n,i=_.map(o,function(e){return e.get("name")});while(e.call(i,s)>=0)s=""+this.attributes.name+"-policy-"+ ++n;return s},getPolicy:function(e){var t;return t=$.extend(!0,{},r.instance().component(e).attributes),t.alarmData.period=Math.round(t.alarmData.period/60),t},setPolicy:function(e){var t,i,s,o;return s=r.instance().component(this.get("uid")),s.type==="ExpandedAsg"&&(s=s.get("originalAsg")),e.uid?(o=r.instance().component(e.uid),i=e.alarmData,o.setAlarm(i),delete e.alarmData,o.set(e),e.alarmData=i):(t=r.modelClassForType(n.RESTYPE.SP),o=new t(e),s.addScalingPolicy(o),e.uid=o.id,this.get("policies").push(o.toJSON())),e.sendNotification&&e.topic&&o.setTopic(e.topic.appId,e.topic.name),null}}),new i})}.call(this),define("workspaces/editor/property/asg/template/stack",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var r="";return r+='\n  <div class="property-control-group">'+u(n.i18n.call(e,"PROP_ASG_MSG_DROP_LC",{hash:{},data:t}))+"</div>\n  ",r}function c(e,t){var r="",i;r+='\n	<div class="option-group-head expand">'+u(n.i18n.call(e,"PROP_ASG_DETAILS",{hash:{},data:t}))+'</div>\n	<div class="option-group" data-bind="true">\n		<section class="property-control-group">\n			<label class="left" for="property-asg-name" >'+u(n.i18n.call(e,"PROP_ASG_NAME",{hash:{},data:t}))+'</label>\n			<span class="required-input right">'+u(n.i18n.call(e,"PROP_ASG_REQUIRED",{hash:{},data:t}))+'</span>\n			<input class="input" type="text" value="'+u((i=e&&e.name,typeof i===a?i.apply(e):i))+'" id="property-asg-name" maxlength="255" data-ignore="true" data-required-rollback="true"/>\n		</section>\n\n		<section class="property-control-group clearfix">\n			<div class="left property-asg-size">\n				<label class="left" for="property-asg-min">'+u(n.i18n.call(e,"PROP_ASG_MIN_SIZE",{hash:{},data:t}))+'</label>\n				<input class="input" type="text" id="property-asg-min" value="'+u((i=e&&e.minSize,typeof i===a?i.apply(e):i))+'" maxlength="255" data-type="digits" data-ignore="true" data-required-rollback="true">\n			</div>\n			<div class="right property-asg-size">\n				<label class="left" for="property-asg-max">'+u(n.i18n.call(e,"PROP_ASG_MAX_SIZE",{hash:{},data:t}))+'</label>\n				<input class="input" type="text" id="property-asg-max" value="'+u((i=e&&e.maxSize,typeof i===a?i.apply(e):i))+'" maxlength="255" data-type="digits" data-ignore="true" data-required-rollback="true">\n			</div>\n	  </section>\n\n		<section class="property-control-group property-asg-size">\n			<label class="left" for="property-asg-capacity">'+u(n.i18n.call(e,"PROP_ASG_DESIRE_CAPACITY",{hash:{},data:t}))+'</label>\n			<input class="input" type="text" id="property-asg-capacity" value="'+u((i=e&&e.capacity,typeof i===a?i.apply(e):i))+'" maxlength="255" data-type="digits" data-ignore="true">\n		</section>\n\n		<section class="property-control-group">\n			<label class="left" for="property-asg-cooldown">'+u(n.i18n.call(e,"PROP_ASG_COOL_DOWN",{hash:{},data:t}))+'</label>\n			<input class="input input-short" type="text" id="property-asg-cooldown" value="'+u((i=e&&e.cooldown,typeof i===a?i.apply(e):i))+'" data-type="digits" max="86400">\n			<span>'+u(n.i18n.call(e,"PROP_ASG_UNIT_SECONDS",{hash:{},data:t}))+'</span>\n		</section>\n\n		<section class="property-control-group clearfix">\n			<label clas="left">'+u(n.i18n.call(e,"PROP_ASG_HEALTH_CHECK_TYPE",{hash:{},data:t}))+'</label>\n			<div class="asg-radio-group">\n				<div class="radio">\n					<input id="property-asg-ec2" type="radio" value="ec2" ',i=n["if"].call(e,e&&e.isEC2HealthCheck,{hash:{},inverse:f.noop,fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;r+=' name="property-asg-hc-option" />\n					<label for="property-asg-ec2"></label>\n				</div>\n				<label for="property-asg-ec2">EC2</label>\n			</div>\n			<div ',i=n.unless.call(e,e&&e.has_elb,{hash:{},inverse:f.program(8,d,t),fn:f.program(6,p,t),data:t});if(i||i===0)r+=i;r+='>\n				<div class="radio">\n					<input id="property-asg-elb" type="radio" ',i=n.unless.call(e,e&&e.has_elb,{hash:{},inverse:f.noop,fn:f.program(10,v,t),data:t});if(i||i===0)r+=i;r+=' value="elb" ',i=n.unless.call(e,e&&e.isEC2HealthCheck,{hash:{},inverse:f.noop,fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;r+=' name="property-asg-hc-option" />\n					<label for="property-asg-elb"></label>\n				</div>\n				<label for="property-asg-elb">ELB</label>\n                <p id="property-asg-elb-warn" class="hide property-info" ',i=n.unless.call(e,e&&e.isEC2HealthCheck,{hash:{},inverse:f.noop,fn:f.program(12,m,t),data:t});if(i||i===0)r+=i;r+=">"+u(n.i18n.call(e,"PROPERTY_ASG_ELB_WARN",{hash:{},data:t}))+'</p>\n			</div>\n		</section>\n\n		<section class="property-control-group">\n			<label class="left" for="property-asg-healthcheck">'+u(n.i18n.call(e,"PROP_ASG_HEALTH_CHECK_CRACE_PERIOD",{hash:{},data:t}))+'</label>\n			<input class="input input-short" type="text" id="property-asg-healthcheck" value="'+u((i=e&&e.healthCheckGracePeriod,typeof i===a?i.apply(e):i))+'" maxlength="255" data-type="digits" data-ignore="true">\n			<span>'+u(n.i18n.call(e,"PROP_ASG_UNIT_SECONDS",{hash:{},data:t}))+'</span>\n		</section>\n	</div>\n\n	<div class="option-group-head">'+u(n.i18n.call(e,"PROP_ASG_POLICY",{hash:{},data:t}))+'</div>\n	<div class="option-group">\n		<section class="property-control-group pos-r property-term-p">\n			<h5>'+u(n.i18n.call(e,"PROP_ASG_TERMINATION_POLICY",{hash:{},data:t}))+'</h5>\n			<div class="termination-policy-brief">'+u((i=e&&e.term_policy_brief,typeof i===a?i.apply(e):i))+'</div>\n			<div class="asg-p-action"><i class="icon-edit tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_ASG_TERMINATION_EDIT",{hash:{},data:t}))+'" id="property-asg-term-edit"></i></div>\n		</section>\n\n		<ul id="property-asg-policies" class="property-list">\n			<li class="pos-r hide">\n        <h5 class="property-asg-policy-name name"></h5>\n				<span class="asg-p-metric asg-p-tag" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_ALARM_METRIC",{hash:{},data:t}))+'"></span>\n        <span class="asg-p-eval asg-p-tag" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_THRESHOLD",{hash:{},data:t}))+'"></span>\n        <span class="asg-p-periods asg-p-tag" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_PERIOD",{hash:{},data:t}))+'"></span>\n        <span class="asg-p-trigger asg-p-tag" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_ACTION",{hash:{},data:t}))+'"></span>\n        <span class="asg-p-adjust asg-p-tag" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_ADJUSTMENT",{hash:{},data:t}))+'"></span>\n        <div class="asg-p-action">\n	        <i class="icon-edit tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_EDIT",{hash:{},data:t}))+'"></i>\n	        <i class="icon-remove icon-del tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_REMOVE",{hash:{},data:t}))+'"></i>\n        </div>\n      </li>\n      ',i=n.each.call(e,e&&e.policies,{hash:{},inverse:f.noop,fn:f.program(14,g,t),data:t});if(i||i===0)r+=i;r+='\n\n		</ul>\n		<div class="property-control-group tac">\n			<button class="btn btn-blue ',i=n.unless.call(e,e&&e.can_add_policy,{hash:{},inverse:f.noop,fn:f.program(16,y,t),data:t});if(i||i===0)r+=i;r+='" id="property-asg-policy-add" data-tooltip="'+u(n.i18n.call(e,"PROP_ASG_TIP_YOU_CAN_ONLY_ADD_25_SCALING_POLICIES",{hash:{},data:t}))+'">'+u(n.i18n.call(e,"PROP_ASG_BTN_ADD_SCALING_POLICY",{hash:{},data:t}))+'</button>\n		</div>\n	</div>\n\n	<div class="option-group-head">'+u(n.i18n.call(e,"PROP_ASG_LBL_NOTIFICATION",{hash:{},data:t}))+'</div>\n	<div class="option-group" id="property-asg-sns">\n		<div class="property-control-group property-asg-notification-wrap">\n			<p>'+u(n.i18n.call(e,"PROP_ASG_LBL_SEND_NOTIFICATION",{hash:{},data:t}))+'</p>\n			<div><div class="checkbox">\n				<input id="property-asg-sns1" type="checkbox" data-key="instanceLaunch" ',i=n["if"].call(e,(i=e&&e.notification,i==null||i===!1?i:i.instanceLaunch),{hash:{},inverse:f.noop,fn:f.program(18,b,t),data:t});if(i||i===0)r+=i;r+='/>\n				<label for="property-asg-sns1"></label>\n			</div>\n			<label for="property-asg-sns1">'+u(n.i18n.call(e,"PROP_ASG_LBL_SUCCESS_INSTANCES_LAUNCH",{hash:{},data:t}))+'</label></div>\n\n			<div><div class="checkbox">\n				<input id="property-asg-sns2" type="checkbox" data-key="instanceLaunchError" ',i=n["if"].call(e,(i=e&&e.notification,i==null||i===!1?i:i.instanceLaunchError),{hash:{},inverse:f.noop,fn:f.program(18,b,t),data:t});if(i||i===0)r+=i;r+='/>\n				<label for="property-asg-sns2"></label>\n			</div>\n			<label for="property-asg-sns2">'+u(n.i18n.call(e,"PROP_ASG_LBL_FAILED_INSTANCES_LAUNCH",{hash:{},data:t}))+'</label></div>\n\n			<div><div class="checkbox">\n				<input id="property-asg-sns3" type="checkbox" data-key="instanceTerminate" ',i=n["if"].call(e,(i=e&&e.notification,i==null||i===!1?i:i.instanceTerminate),{hash:{},inverse:f.noop,fn:f.program(18,b,t),data:t});if(i||i===0)r+=i;r+='/>\n				<label for="property-asg-sns3"></label>\n			</div>\n			<label for="property-asg-sns3">'+u(n.i18n.call(e,"PROP_ASG_LBL_SUCCESS_INSTANCES_TERMINATE",{hash:{},data:t}))+'</label></div>\n\n			<div><div class="checkbox">\n				<input id="property-asg-sns4" type="checkbox" data-key="instanceTerminateError" ',i=n["if"].call(e,(i=e&&e.notification,i==null||i===!1?i:i.instanceTerminateError),{hash:{},inverse:f.noop,fn:f.program(18,b,t),data:t});if(i||i===0)r+=i;r+='/>\n				<label for="property-asg-sns4"></label>\n			</div>\n			<label for="property-asg-sns4">'+u(n.i18n.call(e,"PROP_ASG_LBL_FAILED_INSTANCES_TERMINATE",{hash:{},data:t}))+'</label></div>\n\n			<div><div class="checkbox">\n				<input id="property-asg-sns5" type="checkbox" data-key="test" ',i=n["if"].call(e,(i=e&&e.notification,i==null||i===!1?i:i.test),{hash:{},inverse:f.noop,fn:f.program(18,b,t),data:t});if(i||i===0)r+=i;return r+='/>\n				<label for="property-asg-sns5"></label>\n			</div>\n			<label for="property-asg-sns5">'+u(n.i18n.call(e,"PROP_ASG_LBL_VALIDATE_SNS",{hash:{},data:t}))+'</label></div>\n\n		</div>\n\n		<div class="property-control-group sns-group" style="display:none;">\n			<label for="sns-placeholder">Select SNS Topic</label>\n			<div id="sns-placeholder"></div>\n		</div>\n\n	</div>\n	',r}function h(e,t){return'checked="true"'}function p(e,t){var r="";return r+='data-tooltip="'+u(n.i18n.call(e,"PROP_ASG_HAS_ELB_WARN",{hash:{},data:t}))+'" class="asg-radio-group tooltip"',r}function d(e,t){return'class="asg-radio-group"'}function v(e,t){return'disabled="disabled"'}function m(e,t){return' style="display: block"'}function g(e,t){var r="",i;return r+='\n      <li class="pos-r" data-uid="'+u((i=e&&e.id,typeof i===a?i.apply(e):i))+'">\n        <h5 class="property-asg-policy-name name" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_NAME",{hash:{},data:t}))+'">'+u((i=e&&e.name,typeof i===a?i.apply(e):i))+'</h5>\n      	<span class="asg-p-metric asg-p-tag" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_ALARM_METRIC",{hash:{},data:t}))+'">'+u((i=(i=e&&e.alarmData,i==null||i===!1?i:i.metricName),typeof i===a?i.apply(e):i))+'</span>\n        <span class="asg-p-eval asg-p-tag" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_THRESHOLD",{hash:{},data:t}))+'">'+u((i=(i=e&&e.alarmData,i==null||i===!1?i:i.comparisonOperator),typeof i===a?i.apply(e):i))+" "+u((i=(i=e&&e.alarmData,i==null||i===!1?i:i.threshold),typeof i===a?i.apply(e):i))+u((i=e&&e.unit,typeof i===a?i.apply(e):i))+'</span>\n        <span class="asg-p-periods asg-p-tag" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_PERIOD",{hash:{},data:t}))+'">'+u((i=(i=e&&e.alarmData,i==null||i===!1?i:i.evaluationPeriods),typeof i===a?i.apply(e):i))+"x"+u((i=(i=e&&e.alarmData,i==null||i===!1?i:i.period),typeof i===a?i.apply(e):i))+'m</span>\n        <span class="asg-p-trigger asg-p-tag asg-p-trigger-'+u((i=e&&e.state,typeof i===a?i.apply(e):i))+'" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_ACTION",{hash:{},data:t}))+'">'+u((i=e&&e.state,typeof i===a?i.apply(e):i))+'</span>\n        <span class="asg-p-adjust asg-p-tag" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_ADJUSTMENT",{hash:{},data:t}))+'">'+u((i=e&&e.adjustment,typeof i===a?i.apply(e):i))+" "+u((i=e&&e.adjustmentType,typeof i===a?i.apply(e):i))+'</span>\n        <div class="asg-p-action">\n	        <i class="icon-edit tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_EDIT",{hash:{},data:t}))+'"></i>\n	        <i class="icon-remove icon-del tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_REMOVE",{hash:{},data:t}))+'"></i>\n        </div>\n      </li>\n      ',r}function y(e,t){return"disabled tooltip"}function b(e,t){return'checked="checked"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+="<article>\n  ",o=n["if"].call(t,t&&t.emptyAsg,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n\n</article>",s};return e.template(t)}),define("workspaces/editor/property/asg/template/policy",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){return"readonly"}function c(e,t){return'checked="checked"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div class="scroll-wrap" style="max-height:500px;" id="asg-termination-policy" data-bind="true">\n	<div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n	<div class="modal-body scroll-content" id="property-asg-policy" data-uid="'+a((o=t&&t.uid,typeof o===u?o.apply(t):o))+'">\n\n		<label for="asg-policy-name" class="modal-text-major">'+a(n.i18n.call(t,"PROP_ASG_POLICY_TLT_NAME",{hash:{},data:i}))+'</label>\n		<input type="text" class="input" value="'+a((o=t&&t.name,typeof o===u?o.apply(t):o))+'" id="asg-policy-name" data-required-rollback="true" data-ignore="true" maxlength="255" data-required="true" ',o=n["if"].call(t,t&&t.isOld,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+='>\n\n\n		<section class="modal-control-group">\n			<h5>'+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_ALARM",{hash:{},data:i}))+'</h5>\n			<div class="control-sentence">\n				<span>'+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_WHEN",{hash:{},data:i}))+'</span>\n\n				<div class="selectbox" id="asg-policy-metric">\n					<div class="selection">CPU Utillization</div>\n					<ul class="dropdown" tabindex="-1">\n						<li data-id="CPUUtilization" class="item selected">CPU Utilization</li>\n						<li data-id="DiskReadBytes" class="item">Disk Reads</li>\n						<li data-id="DiskReadOps" class="item">Disk Read Operations</li>\n						<li data-id="DiskWriteBytes" class="item">Disk Writes</li>\n						<li data-id="DiskWriteOps" class="item">Disk Write Operations</li>\n						<li data-id="NetworkIn" class="item">Network In</li>\n						<li data-id="NetworkOut" class="item">Network Out</li>\n						<li data-id="StatusCheckFailed" class="item">Status Check Failed (Any)</li>\n						<li data-id="StatusCheckFailed_Instance" class="item">Status Check Failed (Instance)</li>\n						<li data-id="StatusCheckFailed_System" class="item">Status Check Failed (System)</li>\n					</ul>\n				</div>\n\n				<span>'+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_IS",{hash:{},data:i}))+'</span>\n\n				<div class="selectbox" id="asg-policy-eval">\n					<div class="selection">&gt;=</div>\n					<ul class="dropdown" tabindex="-1">\n						<li data-id=">" class="item">&gt;</li>\n						<li data-id=">=" class="item selected">&gt;=</li>\n						<li data-id="<" class="item">&lt;</li>\n						<li data-id="<=" class="item">&lt;=</li>\n					</ul>\n				</div>\n\n				<input type="text" class="input" id="asg-policy-threshold" value="'+a((o=(o=t&&t.alarmData,o==null||o===!1?o:o.threshold),typeof o===u?o.apply(t):o))+'" placeholder="'+a(n.i18n.call(t,"PROP_ASG_POLICY_TLT_THRESHOLD",{hash:{},data:i}))+'" data-ignore="true" data-ignore-regexp="^[0-9]*\\.?[0-9]*$" data-required="true">\n\n				<span id="asg-policy-unit">'+a((o=t&&t.unit,typeof o===u?o.apply(t):o))+"</span>\n\n				<br />\n\n				<span>"+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_FOR",{hash:{},data:i}))+'</span>\n\n				<input type="text" class="input" id="asg-policy-periods" value="'+a((o=(o=t&&t.alarmData,o==null||o===!1?o:o.evaluationPeriods),typeof o===u?o.apply(t):o))+'" data-required="true" data-ignore="true" data-type="digits">\n\n				<span>'+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_PERIOD",{hash:{},data:i}))+'</span>\n\n				<input type="text" class="input" id="asg-policy-second" value="'+a((o=(o=t&&t.alarmData,o==null||o===!1?o:o.period),typeof o===u?o.apply(t):o))+'" data-required="true" data-ignore="true" data-type="digits">\n\n				<span>'+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_SECONDS",{hash:{},data:i}))+"</span>\n\n				<br />\n\n				<span>"+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_START_SCALING",{hash:{},data:i}))+'</span>\n\n				<div class="selectbox" id="asg-policy-trigger">\n					<div class="selection">ALARM</div>\n					<ul class="dropdown" tabindex="-1">\n						<li data-id="ALARM" class="item selected">ALARM</li>\n						<li data-id="INSUFFICIANT_DATA" class="item">INSUFFICIANT_DATA</li>\n						<li data-id="OK" class="item">OK</li>\n					</ul>\n				</div>\n\n				<span>'+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_STATE",{hash:{},data:i}))+'</span>\n			</div>\n		</section>\n\n		<section class="modal-control-group">\n			<h5>'+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_SCALING_ACTIVITY",{hash:{},data:i}))+'</h5>\n			<div class="control-sentence">\n				<span>'+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_ADJUSTMENT",{hash:{},data:i}))+'</span>\n				<div class="selectbox" id="asg-policy-adjust-type">\n					<div class="selection">Change in Capacity</div>\n					<ul class="dropdown" tabindex="-1">\n						<li data-id="ChangeInCapacity" class="item selected">Change in Capacity</li>\n						<li data-id="ExactCapacity" class="item">Exact Capacity</li>\n						<li data-id="PercentChangeInCapacity" class="item">Percent Change in Capacity</li>\n					</ul>\n				</div>\n				<span>'+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_ADJUSTMENT_OF",{hash:{},data:i}))+'</span>\n				<input type="text" class="input tooltip" id="asg-policy-adjust" data-required="true" value="'+a((o=t&&t.adjustment,typeof o===u?o.apply(t):o))+'" placeholder="e.g. -1" data-ignore="true" data-ignore-regexp="^-?[0-9]*$">\n				<span class="hide pecentcapcity">%</span>\n				<span>.</span>\n			</div>\n		</section>\n\n		<h5>'+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_ADVANCED",{hash:{},data:i}))+'</h5>\n		<div class="asg-policy-advanced">\n			<section id="asg-policy-statistics" class="modal-control-group">\n				<h5>'+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_ADVANCED_ALARM_OPTION",{hash:{},data:i}))+'</h5>\n				<div class="clearfix">\n					<label>'+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_ADVANCED_STATISTIC",{hash:{},data:i}))+'</label>\n					<div class="selectbox" id="asg-policy-statistics">\n						<div class="selection">'+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_ADVANCED_STATISTIC_AVG",{hash:{},data:i}))+'</div>\n						<ul class="dropdown" tabindex="-1">\n							<li data-id="Average" class="item selected">'+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_ADVANCED_STATISTIC_AVG",{hash:{},data:i}))+'</li>\n							<li data-id="Minimum" class="item">'+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_ADVANCED_STATISTIC_MIN",{hash:{},data:i}))+'</li>\n							<li data-id="Maximum" class="item">'+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_ADVANCED_STATISTIC_MAX",{hash:{},data:i}))+'</li>\n							<li data-id="SampleCount" class="item">'+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_ADVANCED_STATISTIC_SAMPLE",{hash:{},data:i}))+'</li>\n							<li data-id="Sum" class="item">'+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_ADVANCED_STATISTIC_SUM",{hash:{},data:i}))+'</li>\n						</ul>\n					</div>\n				</div>\n			</section>\n\n			<section id="asg-policy-scaling" class="modal-control-group">\n				<h5>'+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_ADVANCED_SCALING_OPTION",{hash:{},data:i}))+'</h5>\n				<div class="clearfix">\n					<label for="asg-policy-cooldown">'+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_ADVANCED_COOLDOWN_PERIOD",{hash:{},data:i}))+'</label>\n					<input type="text" class="input tooltip" data-tooltip="'+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_ADVANCED_TIP_COOLDOWN_PERIOD",{hash:{},data:i}))+'" value="'+a((o=t&&t.cooldown,typeof o===u?o.apply(t):o))+'" maxlength="5" placeholder="'+a(n.i18n.call(t,"PROP_ASG_DEFAULT_COOL_DOWN",{hash:{},data:i}))+'" data-ignore="true" data-type="digits" id="asg-policy-cooldown">\n					<span>'+a(n.i18n.call(t,"PROP_ASG_UNIT_SECONDS",{hash:{},data:i}))+'</span>\n				</div>\n\n				<div id="asg-policy-step-wrapper" class="hide clearfix pecentcapcity">\n					<label>'+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_ADVANCED_MIN_ADJUST_STEP",{hash:{},data:i}))+'</label>\n					<input type="text" class="input tooltip" data-tooltip="'+a(n.i18n.call(t,"PROP_ASG_ADD_POLICY_ADVANCED_TIP_MIN_ADJUST_STEP",{hash:{},data:i}))+'" id="asg-policy-step" value="'+a((o=t&&t.minAdjustStep,typeof o===u?o.apply(t):o))+'" data-ignore="true" maxlength="5" data-type="digits">\n				</div>\n			</section>\n\n			<section class="modal-control-group">\n				<h5>'+a(n.i18n.call(t,"PROP_ASG_LBL_NOTIFICATION",{hash:{},data:i}))+'</h5>\n				<div class="checkbox">\n					<input id="asg-policy-notify" type="checkbox" ',o=n["if"].call(t,t&&t.sendNotification,{hash:{},inverse:f.noop,fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;return s+='/>\n					<label for="asg-policy-notify"></label>\n				</div>\n				<label id="asg-policy-notify-label" for="asg-policy-notify">'+a(n.i18n.call(t,"PROP_ASG_LBL_SEND_NOTIFICATION_D",{hash:{},data:i}))+'</label>\n\n				<div class="sns-policy-field">\n					<label>Select SNS Topic</label>\n					<div class="policy-sns-placeholder"></div>\n				</div>\n\n			</section>\n		</div>\n	</div>\n</div>\n</div>',s};return e.template(t)}),define("workspaces/editor/property/asg/template/term",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var r="",i;r+="\n          <li ",i=n["if"].call(e,e&&e.checked,{hash:{},inverse:u.noop,fn:u.program(2,c,t),data:t});if(i||i===0)r+=i;r+='>\n            <div class="checkbox">\n              <input id="property-asg-term'+f((i=t==null||t===!1?t:t.index,typeof i===a?i.apply(e):i))+'" type="checkbox" ',i=n["if"].call(e,e&&e.checked,{hash:{},inverse:u.noop,fn:u.program(4,h,t),data:t});if(i||i===0)r+=i;return r+='/>\n              <label for="property-asg-term'+f((i=t==null||t===!1?t:t.index,typeof i===a?i.apply(e):i))+'"></label>\n            </div>\n            <label for="property-asg-term'+f((i=t==null||t===!1?t:t.index,typeof i===a?i.apply(e):i))+'" class="list-name">'+f((i=e&&e.name,typeof i===a?i.apply(e):i))+'</label>\n            <span class="drag-handle tooltip icon-sort" data-tooltip="'+f(n.i18n.call(e,"PROP_ASG_TERMINATION_MSG_DRAG",{hash:{},data:t}))+'"></span>\n          </li>\n          ',r}function c(e,t){return'class="enabled"'}function h(e,t){return'checked="checked"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this,a="function",f=this.escapeExpression;s+='<div style="width:420px">\n   <div class="modal-header">\n      <h3>'+f(n.i18n.call(t,"PROP_ASG_TERMINATION_EDIT",{hash:{},data:i}))+'</h3>\n      <i class="modal-close">&times;</i>\n   </div>\n   <div class="modal-body" id="property-asg-term">\n\n      <p class="modal-text-minor">'+f(n.i18n.call(t,"PROP_ASG_TERMINATION_TEXT_WARN",{hash:{},data:i}))+'</p>\n      <div class="drag-sort-list-wrap">\n        <ul class="drag-sort-list" id="property-term-list">\n          ',o=n.each.call(t,t,{hash:{},inverse:u.noop,fn:u.program(1,l,i),data:i});if(o||o===0)s+=o;s+='\n        </ul>\n\n        <ul class="drag-sort-list">\n          <li ',o=n["if"].call(t,t&&t.useDefault,{hash:{},inverse:u.noop,fn:u.program(2,c,i),data:i});if(o||o===0)s+=o;s+='>\n            <div class="checkbox">\n              <input id="property-asg-term-def" type="checkbox" ',o=n["if"].call(t,t&&t.useDefault,{hash:{},inverse:u.noop,fn:u.program(4,h,i),data:i});if(o||o===0)s+=o;return s+='/>\n              <label for="property-asg-term-def"></label>\n            </div>\n            <span>Default</span>\n          </li>\n        </ul>\n      </div>\n   </div>\n   <div class="modal-footer">\n      <button id="property-asg-term-done" class="btn btn-blue">Done</button>\n      <button class="btn modal-close btn-silver">Cancel</button>\n   </div>\n</div>',s};return e.template(t)}),function(){define("workspaces/editor/property/asg/view",["../base/view","./template/stack","./template/policy","./template/term","i18n!/nls/lang.js","sns_dropdown","UI.modalplus"],function(e,t,n,r,i,s,o){var u,a,f,l,c,h;return c={CPUUtilization:"CPU Utilization",DiskReadBytes:"Disk Reads",DiskReadOps:"Disk Read Operations",DiskWriteBytes:"Disk Writes",DiskWriteOps:"Disk Write Operations",NetworkIn:"Network In",NetworkOut:"Network Out",StatusCheckFailed:"Status Check Failed (Any)",StatusCheckFailed_Instance:"Status Check Failed (Instance)",StatusCheckFailed_System:"Status Check Failed (System)"},a={ChangeInCapacity:"Change in Capacity",ExactCapacity:"Exact Capacity",PercentChangeInCapacity:"Percent Change in Capacity"},l={ChangeInCapacity:"eg. -1",ExactCapacity:"eg. 5",PercentChangeInCapacity:"eg. -30"},f={ChangeInCapacity:"Increase or decrease existing capacity by integer you input here. A positive value adds to the current capacity and a negative value removes from the current capacity.",ExactCapacity:"Change the current capacity of your Auto Scaling group to the exact value specified.",PercentChangeInCapacity:"Increase or decrease the desired capacity by a percentage of the desired capacity. A positive value adds to the current capacity and a negative value removes from the current capacity"},h={CPUUtilization:"%",DiskReadBytes:"B",DiskWriteBytes:"B",NetworkIn:"B",NetworkOut:"B"},u=e.extend({events:{"click #property-asg-term-edit":"showTermPolicy","click #property-asg-sns input[type=checkbox]":"setNotification","change #property-asg-elb":"setHealthyCheckELBType","change #property-asg-ec2":"setHealthyCheckEC2Type","change #property-asg-name":"setASGName","change #property-asg-min":"setSizeGroup","change #property-asg-max":"setSizeGroup","change #property-asg-capacity":"setSizeGroup","change #property-asg-cooldown":"setASGCoolDown","change #property-asg-healthcheck":"setHealthCheckGrace","click #property-asg-policy-add":"addScalingPolicy","click #property-asg-policies .icon-edit":"editScalingPolicy","click #property-asg-policies .icon-del":"delScalingPolicy"},render:function(){var e,n,r,i,o,u;r=this.model.getNotificationTopicName(),this.snsNotiDropdown=new s({selection:r}),this.snsNotiDropdown.on("change",this.model.setNotificationTopic,this.model),this.addSubView(this.snsNotiDropdown),e=this.model.toJSON(),u=e.policies;for(i=0,o=u.length;i<o;i++)n=u[i],n.unit=h[n.alarmData.metricName],n.alarmData.metricName=c[n.alarmData.metricName],n.adjustmentType=a[n.adjustmentType];return e.term_policy_brief=e.terminationPolicies.join(" > "),e.can_add_policy=e.policies.length<25,this.$el.html(t(e)),this.processNotiTopic(null,!0),e.name},wheatherHasNoti:function(){var e,t;return e=(t=this.model.notiObject)!=null?t.toJSON():void 0,e&&(e.instanceLaunch||e.instanceLaunchError||e.instanceTerminate||e.instanceTerminateError||e.test)},processNotiTopic:function(e,t){var n;n=this.wheatherHasNoti();if(t&&n)return this.$("#sns-placeholder").html(this.snsNotiDropdown.render().el),this.$(".sns-group").show();if(!e&&n)return this.$("#sns-placeholder").html(this.snsNotiDropdown.render(!0).el),this.$(".sns-group").show();if(e&&!n)return this.snsNotiDropdown=new s,this.model.removeTopic(),this.$(".sns-group").hide()},processPolicyTopic:function(e,t,n){var r,i;return i=t?t.getTopicName():null,r=new s({selection:i}),this.addSubView(r),e?($(".policy-sns-placeholder").html(r.render(n).el),$(".sns-policy-field").show()):(r=new s,$(".sns-policy-field").hide())},setASGCoolDown:function(e){var t;t=$(e.target),t.parsley("custom",function(e){return _.isNumber(+e)&&+e>86400?i.ide.PARSLEY_MAX_VALUE_86400:null});if(t.parsley("validate"))return this.model.setASGCoolDown(t.val())},setASGName:function(e){var t,n;n=$(e.currentTarget),t=n.val();if(MC.aws.aws.checkResName(this.model.get("uid"),n,"ASG"))return this.model.setName(t),this.setTitle(t)},setSizeGroup:function(e){var t,n,r,s;s=this,r=this.$el.find("#property-asg-min"),n=this.$el.find("#property-asg-max"),t=this.$el.find("#property-asg-capacity"),r.parsley("custom",function(e){return+e>+n.val()?i.ide.PARSLEY_MINIMUM_SIZE_MUST_BE_LESSTHAN_MAXIMUM_SIZE:s.constantCheck(e)}),n.parsley("custom",function(e){return+e<+r.val()?i.ide.PARSLEY_MAXIMUM_SIZE_MUST_BE_MORETHAN_MINIMUM_SIZE:s.constantCheck(e)}),t.parsley("custom",function(e){return+e<+r.val()||+e>+n.val()?i.ide.PARSLEY_DESIRED_CAPACITY_IN_ALLOW_SCOPE:s.constantCheck(e)});if($(e.currentTarget).parsley("validateForm"))return this.model.setASGMin(r.val()),this.model.setASGMax(n.val()),this.model.setASGDesireCapacity(t.val())},constantCheck:function(e){return e=+e,e<1?sprintf(i.ide.PARSLEY_VALUE_MUST_BE_GREATERTHAN_VAR,1):e>65534?sprintf(i.ide.PARSLEY_VALUE_MUST_BE_LESSTHAN_VAR,65534):null},setHealthCheckGrace:function(e){var t;t=$(e.currentTarget),t.parsley("custom",function(e){e=+e;if(e<0||e>86400)return sprintf(i.ide.PARSLEY_VALUE_MUST_IN_ALLOW_SCOPE,0,86400)});if(t.parsley("validate"))return this.model.setHealthCheckGrace(t.val())},showTermPolicy:function(){var e,t,n,s,o,u,a,f,l,c,h;t=[],e={},c=this.model.get("terminationPolicies");for(u=0,f=c.length;u<f;u++)s=c[u],s==="Default"?t.useDefault=!0:(t.push({name:s,checked:!0}),e[s]=!0);h=[i.ide.PROP_ASG_TERMINATION_POLICY_OLDEST,i.ide.PROP_ASG_TERMINATION_POLICY_NEWEST,i.ide.PROP_ASG_TERMINATION_POLICY_OLDEST_LAUNCH,i.ide.PROP_ASG_TERMINATION_POLICY_CLOSEST];for(a=0,l=h.length;a<l;a++)n=h[a],e[n]||t.push({name:n,checked:!1});return modal(r(t),!0),o=this,$("#property-asg-term").on("click","input",function(){var t,n;return t=$("#property-asg-term").find("input:checked"),t.length===0?!1:(n=$(this),e=n.is(":checked"),n.closest("li").toggleClass("enabled",e))}),$("#property-asg-term-done").on("click",function(){return o.onEditTermPolicy(),modal.close()}),$("#property-asg-term").on("mousedown",".drag-handle",function(){return $(this).trigger("mouseleave")}),$("#property-term-list").sortable({handle:".drag-handle"})},onEditTermPolicy:function(){var e;return e=[],$("#property-term-list .list-name").each(function(){var t;return t=$(this),t.closest("li").hasClass("enabled")&&e.push(t.text()),null}),$("#property-asg-term-def").is(":checked")&&e.push("Default"),$(".termination-policy-brief").text(e.join(" > ")),this.model.setTerminatePolicy(e)},delScalingPolicy:function(e){var t,n;return t=$(e.currentTarget).closest("li"),n=t.data("uid"),t.remove(),$("#property-asg-policy-add").removeClass("tooltip disabled"),this.model.delPolicy(n)},updateScalingPolicy:function(e){var t,n,r,i,s;i=c[e.alarmData.metricName],r=a[e.adjustmentType],s=h[e.alarmData.metricName]||"";if(!e.uid){void 0;return}return n=$("#property-asg-policies"),t=n.children("[data-uid='"+e.uid+"']"),t.length===0&&(t=n.children(".hide").clone().attr("data-uid",e.uid).removeClass("hide").appendTo(n),$("#property-asg-policy-add").toggleClass("tooltip disabled",$("#property-asg-policies").children().length>=26)),t.find(".name").html(e.name),t.find(".asg-p-metric").html(i),t.find(".asg-p-eval").html(e.alarmData.comparisonOperator+" "+e.alarmData.threshold+s),t.find(".asg-p-periods").html(e.alarmData.evaluationPeriods+"x"+Math.round(e.alarmData.period/60)+"m"),t.find(".asg-p-trigger").html(e.state).attr("class","asg-p-trigger asg-p-tag asg-p-trigger-"+e.state),t.find(".asg-p-adjust").html(e.adjustment+" "+e.adjustmentType)},editScalingPolicy:function(e){var t,n,r,s,o,u,a,f,l,c,h,p;f=$(e.currentTarget).closest("li").data("uid"),s=this.model.getPolicy(f),s.uid=f,s.title=i.ide.PROP_ASG_ADD_POLICY_TITLE_EDIT,this.showScalingPolicy(s),a={metric:s.alarmData.metricName,eval:s.alarmData.comparisonOperator,trigger:s.state,"adjust-type":s.adjustmentType,statistics:s.alarmData.statistic};for(u in a){l=a[u],n=$("#asg-policy-"+u),r=null,p=n.find(".item");for(c=0,h=p.length;c<h;c++){o=p[c],t=$(o);if(t.data("id")===l){r=t;break}}r&&(n.find(".selected").removeClass("selected"),n.find(".selection").html(r.addClass("selected").html()))}return $(".pecentcapcity").toggle($("#asg-policy-adjust-type").find(".selected").data("id")==="PercentChangeInCapacity")},addScalingPolicy:function(e){return $(e.currentTarget).hasClass("disabled")?!1:(this.showScalingPolicy(),!1)},openPolicyModal:function(e){var t,r,s;return r={template:n(e),title:i.ide.PROP_ASG_ADD_POLICY_TITLE_ADD+" "+i.ide.PROP_ASG_ADD_POLICY_TITLE_CONTENT,width:"480px",compact:!0,confirm:{text:"Done"}},t=new o(r),s=this,t.on("confirm",function(){var e;return e=$("#asg-termination-policy").parsley("validate"),e===!1?!1:(s.onPolicyDone(),t.close())},this)},showScalingPolicy:function(e){var t,n;return e||(e={title:i.ide.PROP_ASG_ADD_POLICY_TITLE_ADD,name:this.model.defaultScalingPolicyName(),minAdjustStep:1,alarmData:{evaluationPeriods:2,period:5}}),e.uid&&(t=Design.instance().component(e.uid)),e.alarmData&&e.alarmData.metricName?e.unit=h[e.alarmData.metricName]:e.unit="%",this.openPolicyModal(e),n=this,$("#asg-policy-name").parsley("custom",function(e){var t;t=$("#property-asg-policy").data("uid");if(n.model.isDupPolicyName(t,e))return"Duplicated policy name in this autoscaling group"}),$("#asg-policy-periods").on("change",function(){var e;e=parseInt($(this).val(),10),(!e||e<1)&&$(this).val("1");if(e>86400)return $(this).val(86400)}),$("#asg-policy-second").on("change",function(){var e;e=parseInt($(this).val(),10),(!e||e<1)&&$(this).val("1");if(e>1440)return $(this).val(1440)}),$("#asg-policy-adjust-type").on("OPTION_CHANGE",function(){var e;return e=$(this).find(".selected").data("id"),e==="PercentChangeInCapacity"?($(".pecentcapcity").toggle(!0),$("#asg-policy-step").val()===""&&$("#asg-policy-step").val(1)):$(".pecentcapcity").toggle(!1),$("#asg-policy-adjust").attr("placeholder",l[e]).data("tooltip",f[e]).trigger("change")}),$("#asg-policy-adjust").on("change",function(){var e,t;return e=$("#asg-policy-adjust-type").find(".selected").data("id"),t=parseInt($(this).val(),10),e==="ExactCapacity"?(!t||t<1)&&$(this).val("1"):e==="PercentChangeInCapacity"&&(t?t<-100&&$(this).val("-100"):$(this).val("0")),t<-65534?$(this).val(-65534):t>65534&&$(this).val(65534),$("#").data("tooltip",f[e]).trigger("change")}),$("#asg-policy-cooldown").on("change",function(){var e,t;e=$("#asg-policy-cooldown"),t=parseInt(e.val(),10);if(isNaN(t))return;return t<0?t=0:t>86400&&(t=86400),e.val(t)}),$("#asg-policy-step").on("change",function(){var e,t;e=$("#asg-policy-step"),t=parseInt(e.val(),10);if(isNaN(t))return;return t<0?t=0:t>65534&&(t=65534),e.val(t)}),$("#asg-policy-threshold").on("change",function(){var e,t;e=$("#asg-policy-metric .selected").data("id"),t=parseInt($(this).val(),10);if(e==="CPUUtilization"){if(isNaN(t)||t<1)return $(this).val("1");if(t>100)return $(this).val("100")}}),this.processPolicyTopic($("#asg-policy-notify").prop("checked"),t,!1),$("#asg-policy-notify").off("click").on("click",function(e){return e.stopPropagation(),n.processPolicyTopic(e.target.checked,t,!0),null}),$("#asg-policy-metric").on("OPTION_CHANGE",function(){return $("#asg-policy-unit").html(h[$(this).find(".selected").data("id")]||""),$("#asg-policy-threshold").val("")}),null},onPolicyDone:function(){var e,t;return e={uid:$("#property-asg-policy").data("uid"),name:$("#asg-policy-name").val(),cooldown:$("#asg-policy-cooldown").val(),minAdjustStep:"",adjustment:$("#asg-policy-adjust").val(),adjustmentType:$("#asg-policy-adjust-type .selected").data("id"),state:$("#asg-policy-trigger .selected").data("id"),sendNotification:$("#asg-policy-notify").is(":checked"),alarmData:{metricName:$("#asg-policy-metric .selected").data("id"),comparisonOperator:$("#asg-policy-eval .selected").data("id"),period:$("#asg-policy-second").val()*60,evaluationPeriods:$("#asg-policy-periods").val(),statistic:$("#asg-policy-statistics .selected").data("id"),threshold:$("#asg-policy-threshold").val()}},e.adjustmentType==="PercentChangeInCapacity"&&(e.minAdjustStep=$("#asg-policy-step").val()),e.sendNotification&&(t=$(".policy-sns-placeholder .selected").data(),t&&t.id&&t.name&&(e.topic={appId:t.id,name:t.name})),this.model.setPolicy(e),this.updateScalingPolicy(e),null},setNotification:function(){var e,t,n;return e={},t=!1,$("#property-asg-sns input[type = checkbox]").each(function(){var n;return n=$(this).is(":checked"),e[$(this).attr("data-key")]=n,n&&(t=!0),null}),t?$("#property-asg-sns-info").show():$("#property-asg-sns-info").hide(),n=this.wheatherHasNoti(),this.model.setNotification(e),this.processNotiTopic(n)},setHealthyCheckELBType:function(e){return this.model.setHealthCheckType("ELB"),$("#property-asg-elb-warn").toggle($("#property-asg-elb").is(":checked"))},setHealthyCheckEC2Type:function(e){return this.model.setHealthCheckType("EC2"),$("#property-asg-elb-warn").toggle($("#property-asg-elb").is(":checked"))}}),new u})}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};define("workspaces/editor/property/asg/app_model",["../base/model","constant","Design","CloudResources"],function(t,n,r,i){var s;return s=t.extend({init:function(e){var t,s,o,u,a,f,l,c;t=o=r.instance().component(e),u={uid:e,name:t.get("name"),minSize:t.get("minSize"),maxSize:t.get("maxSize"),capacity:t.get("capacity"),isEditable:this.isAppEdit},this.set(u),l=r.instance().region(),s=(c=i(n.RESTYPE.ASG,l).get(t.get("appId")))!=null?c.toJSON():void 0,s&&(this.set("hasData",!0),this.set("awsResName",s.AutoScalingGroupName),this.set("arn",s.id),this.set("createTime",s.CreatedTime),s.TerminationPolicies&&s.TerminationPolicies&&this.set("term_policy_brief",s.TerminationPolicies.join(" > ")),this.handleInstance(t,s));if(!this.isAppEdit){if(!s)return!1;this.set("lcName",s.LaunchConfigurationName),this.set("cooldown",s.DefaultCooldown),this.set("healCheckType",s.HealthCheckType),this.set("healthCheckGracePeriod",s.HealthCheckGracePeriod),this.handlePolicy(t,s),this.handleNotify(t,s)}else{u=o!=null?o.toJSON():void 0,u.uid=e,this.set(u),a=t.getLc();if(!a){this.set("emptyAsg",!0);return}this.set("has_elb",!!a.connections("ElbAmiAsso").length),this.set("isEC2HealthCheck",o.isEC2HealthCheckType()),this.set("detail_monitor",!!a.get("monitoring")),f=o.getNotification(),this.set("notification",f),this.set("has_notification",f.instanceLaunch||f.instanceLaunchError||f.instanceTerminate||f.instanceTerminateError||f.test),this.notiObject=o.getNotiObject(),this.set("policies",_.map(u.policies,function(e){return u=$.extend(!0,{},e.attributes),u.alarmData.period=Math.round(u.alarmData.period/60),u}))}return null},handleInstance:function(e,t){var n,r,i,s,o,u,a,f,l,c,h;o=0,u=[],f={};if(t.Instances&&t.Instances){o=t.Instances.length,h=t.Instances;for(i=l=0,c=h.length;l<c;i=++l)s=h[i],n={status:s.HealthStatus==="Healthy"?"green":"red",healthy:s.HealthStatus,name:s.InstanceId},r=s.AvailabilityZone,f[r]?f[r].push(n):f[r]=[n];for(r in f)a=f[r],u.push({name:r,instances:a})}else o=0;return this.set("instance_groups",u),this.set("instance_count",o)},handleNotify:function(e,t){var s,o,u,a,f,l,c,h,p;a=r.instance().region(),u=i(n.RESTYPE.NC,a).findWhere({AutoScalingGroupName:t.AutoScalingGroupName}),f=!1,s=[!1,!1,!1,!1,!1],o={"autoscaling:EC2_INSTANCE_LAUNCH":0,"autoscaling:EC2_INSTANCE_LAUNCH_ERROR":1,"autoscaling:EC2_INSTANCE_TERMINATE":2,"autoscaling:EC2_INSTANCE_TERMINATE_ERROR":3,"autoscaling:TEST_NOTIFICATION":4};if(u){p=u.get("NotificationType");for(c=0,h=p.length;c<h;c++)l=p[c],s[o[l]]=!0,f=!0}return this.set("notifies",s),this.set("sendNotify",f)},handlePolicy:function(e,t){var s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L;h=[],f={},v=r.instance().region(),g=i(n.RESTYPE.SP,v),l=i(n.RESTYPE.CW,v),N=e.get("policies"),L=[];for(b=0,S=N.length;b<S;b++){m=N[b],d=(C=g.get(m.get("appId")))!=null?C.toJSON():void 0;if(!d)continue;p={adjusttype:d.AdjustmentType,adjustment:d.ScalingAdjustment,step:d.MinAdjustmentStep,cooldown:d.Cooldown,name:d.PolicyName,arn:m.get("appId")},a=(k=l.get(m.get("alarmData").appId))!=null?k.toJSON():void 0;if(a){u=[a.InsufficientDataActions,a.OKActions,a.AlarmActions],y=["INSUFFICIANT_DATA","OK","ALARM"];for(c=w=0,x=u.length;w<x;c=++w){o=u[c];if(!o)continue;for(E=0,T=o.length;E<T;E++){s=o[E];if(s!==p.arn)continue;p.arn="",p.evaluation=m.get("alarmData").comparisonOperator,p.metric=a.MetricName,p.notify=o.length===2,p.periods=a.EvaluationPeriods,p.minute=Math.round(a.Period/60),p.statistics=a.Statistic,p.threshold=a.Threshold,p.trigger=y[c]}}}else void 0;h.push(p),L.push(this.set("policies",_.sortBy(h,"name")))}return L},setHealthCheckType:function(e){return r.instance().component(this.get("uid")).set("healthCheckType",e)},setASGMin:function(e){var t;return t=this.get("uid"),r.instance().component(t).set("minSize",e),null},setASGMax:function(e){var t;return t=this.get("uid"),r.instance().component(t).set("maxSize",e),null},setASGDesireCapacity:function(e){var t;return t=this.get("uid"),r.instance().component(t).set("capacity",e),null},setASGCoolDown:function(e){return r.instance().component(this.get("uid")).set("cooldown",e)},setHealthCheckGrace:function(e){return r.instance().component(this.get("uid")).set("healthCheckGracePeriod",e)},setNotification:function(e){var t;return t=r.instance().component(this.get("uid")).setNotification(e),this.notiObject=t,null},removeTopic:function(){var e;return e=r.instance().component(this.get("uid")).setNotification(notification),e!=null?e.removeTopic():void 0},getNotificationTopicName:function(){return r.instance().component(this.get("uid")).getNotificationTopicName()},setNotificationTopic:function(e,t){return r.instance().component(this.get("uid")).setNotificationTopic(e,t)},setTerminatePolicy:function(e){return r.instance().component(this.get("uid")).set("terminationPolicies",e),this.set("terminationPolicies",e),null},delPolicy:function(e){return r.instance().component(e).remove(),null},isDupPolicyName:function(e,t){return _.some(r.instance().component(this.get("uid")).get("policies"),function(n){if(n.id!==e&&n.get("name")===t)return!0})},defaultScalingPolicyName:function(){var t,n,i,s,o;t=r.instance().component(this.get("uid")),t.type==="ExpandedAsg"&&(t=t.get("originalAsg")),o=t.get("policies"),n=o.length,s=""+this.attributes.name+"-policy-"+n,i=_.map(o,function(e){return e.get("name")});while(e.call(i,s)>=0)s=""+this.attributes.name+"-policy-"+ ++n;return s},getPolicy:function(e){var t;return t=$.extend(!0,{},r.instance().component(e).attributes),t.alarmData.period=Math.round(t.alarmData.period/60),t},setPolicy:function(e){var t,i,s,o;return s=r.instance().component(this.get("uid")),s.type==="ExpandedAsg"&&(s=s.get("originalAsg")),e.sendNotification&&r.modelClassForType(n.RESTYPE.TOPIC).ensureExistence(),e.uid?(o=r.instance().component(e.uid),i=e.alarmData,o.setAlarm(i),delete e.alarmData,o.set(e),e.alarmData=i):(t=r.modelClassForType(n.RESTYPE.SP),o=new t(e),s.addScalingPolicy(o),e.uid=o.id,this.get("policies").push(o!=null?o.toJSON():void 0)),e.sendNotification&&e.topic&&o.setTopic(e.topic.appId,e.topic.name),null}}),new s})}.call(this),define("workspaces/editor/property/asg/template/app",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var r="",i;r+='\n  <div class="option-group-head expand">'+u(n.i18n.call(e,"PROP_ASG_SUMMARY",{hash:{},data:t}))+'</div>\n  <div class="option-group">\n    <dl class="dl-vertical">\n      <dt>'+u(n.i18n.call(e,"PROP_ASG_NAME",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.awsResName,typeof i===a?i.apply(e):i))+'</dd>\n      <dt>Auto Scaling Group ARN</dt>\n      <dd class="click-select tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_ASG_TIP_CLICK_TO_SELECT",{hash:{},data:t}))+'">'+u((i=e&&e.arn,typeof i===a?i.apply(e):i))+"</dd>\n      <dt>"+u(n.i18n.call(e,"PROP_ASG_CREATE_TIME",{hash:{},data:t}))+"</dt>\n      <dd>"+u(n.timeStr.call(e,e&&e.createTime,{hash:{},data:t}))+"</dd>\n\n    ",i=n["if"].call(e,e&&e.isEditable,{hash:{},inverse:f.program(4,h,t),fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;return r+="\n  </div>\n  ",r}function c(e,t){return"\n    </dl>\n    "}function h(e,t){var r="",i;return r+="\n      <dt>"+u(n.i18n.call(e,"PROP_LC_TITLE",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.lcName,typeof i===a?i.apply(e):i))+'</dd>\n    </dl>\n    <dl class="dl-vertical">\n      <dt>'+u(n.i18n.call(e,"PROP_ASG_MIN_SIZE",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.minSize,typeof i===a?i.apply(e):i))+"</dd>\n      <dt>"+u(n.i18n.call(e,"PROP_ASG_MAX_SIZE",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.maxSize,typeof i===a?i.apply(e):i))+"</dd>\n      <dt>"+u(n.i18n.call(e,"PROP_ASG_DESIRE_CAPACITY",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.capacity,typeof i===a?i.apply(e):i))+"</dd>\n      <dt>"+u(n.i18n.call(e,"PROP_ASG_COOL_DOWN",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.cooldown,typeof i===a?i.apply(e):i))+'</dd>\n    </dl>\n    <dl class="dl-vertical">\n      <dt>'+u(n.i18n.call(e,"PROP_ASG_HEALTH_CHECK_TYPE",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.healCheckType,typeof i===a?i.apply(e):i))+"</dd>\n      <dt>"+u(n.i18n.call(e,"PROP_ASG_HEALTH_CHECK_CRACE_PERIOD",{hash:{},data:t}))+"</dt>\n      <dd>"+u((i=e&&e.healthCheckGracePeriod,typeof i===a?i.apply(e):i))+"</dd>\n    </dl>\n    ",r}function p(e,t){var n="",r;return n+='\n  <div class="property-control-group">\n    <p class="property-info tac">Auto Scaling Group '+u((r=e&&e.name,typeof r===a?r.apply(e):r))+" is deleted in stopped app.</p>\n  </div>\n  ",n}function d(e,t){var r="",i;r+='\n  <div class="option-group-head expand">'+u(n.i18n.call(e,"PROP_ASG_DETAILS",{hash:{},data:t}))+'</div>\n  <div class="option-group" data-bind="true">\n    <section class="property-control-group clearfix">\n      <div class="left property-asg-size">\n        <label class="left" for="property-asg-min">'+u(n.i18n.call(e,"PROP_ASG_MIN_SIZE",{hash:{},data:t}))+'</label>\n        <input class="input" type="text" id="property-asg-min" value="'+u((i=e&&e.minSize,typeof i===a?i.apply(e):i))+'" maxlength="255" data-type="digits" data-ignore="true" data-required-rollback="true">\n      </div>\n      <div class="right property-asg-size">\n        <label class="left" for="property-asg-max">'+u(n.i18n.call(e,"PROP_ASG_MAX_SIZE",{hash:{},data:t}))+'</label>\n        <input class="input" type="text" id="property-asg-max" value="'+u((i=e&&e.maxSize,typeof i===a?i.apply(e):i))+'" maxlength="255" data-type="digits" data-ignore="true" data-required-rollback="true">\n      </div>\n    </section>\n\n    <section class="property-control-group property-asg-size">\n      <label class="left" for="property-asg-capacity">'+u(n.i18n.call(e,"PROP_ASG_DESIRE_CAPACITY",{hash:{},data:t}))+'</label>\n      <input class="input" type="text" id="property-asg-capacity" value="'+u((i=e&&e.capacity,typeof i===a?i.apply(e):i))+'" maxlength="255" data-type="digits" data-ignore="true">\n    </section>\n\n    <section class="property-control-group">\n      <label class="left" for="property-asg-cooldown">'+u(n.i18n.call(e,"PROP_ASG_COOL_DOWN",{hash:{},data:t}))+'</label>\n      <input class="input input-short" type="text" id="property-asg-cooldown" value="'+u((i=e&&e.cooldown,typeof i===a?i.apply(e):i))+'" data-type="digits" max="86400">\n      <span>'+u(n.i18n.call(e,"PROP_ASG_UNIT_SECONDS",{hash:{},data:t}))+'</span>\n    </section>\n\n    <section class="property-control-group clearfix">\n      <label clas="left">'+u(n.i18n.call(e,"PROP_ASG_HEALTH_CHECK_TYPE",{hash:{},data:t}))+'</label>\n      <div class="asg-radio-group">\n        <div class="radio">\n          <input id="property-asg-ec2" type="radio" value="ec2" ',i=n["if"].call(e,e&&e.isEC2HealthCheck,{hash:{},inverse:f.noop,fn:f.program(9,v,t),data:t});if(i||i===0)r+=i;r+=' name="property-asg-hc-option" />\n          <label for="property-asg-ec2"></label>\n        </div>\n        <label for="property-asg-ec2">EC2</label>\n      </div>\n      <div ',i=n.unless.call(e,e&&e.has_elb,{hash:{},inverse:f.program(13,g,t),fn:f.program(11,m,t),data:t});if(i||i===0)r+=i;r+='>\n        <div class="radio">\n          <input id="property-asg-elb" type="radio" ',i=n.unless.call(e,e&&e.has_elb,{hash:{},inverse:f.noop,fn:f.program(15,y,t),data:t});if(i||i===0)r+=i;r+=' value="elb" ',i=n.unless.call(e,e&&e.isEC2HealthCheck,{hash:{},inverse:f.noop,fn:f.program(9,v,t),data:t});if(i||i===0)r+=i;r+=' name="property-asg-hc-option" />\n          <label for="property-asg-elb"></label>\n        </div>\n        <label for="property-asg-elb">ELB</label>\n        <p id="property-asg-elb-warn" class="hide property-info" ',i=n.unless.call(e,e&&e.isEC2HealthCheck,{hash:{},inverse:f.noop,fn:f.program(17,b,t),data:t});if(i||i===0)r+=i;return r+=">"+u(n.i18n.call(e,"PROPERTY_ASG_ELB_WARN",{hash:{},data:t}))+'</p>\n      </div>\n    </section>\n\n    <section class="property-control-group">\n      <label class="left" for="property-asg-healthcheck">'+u(n.i18n.call(e,"PROP_ASG_HEALTH_CHECK_CRACE_PERIOD",{hash:{},data:t}))+'</label>\n      <input class="input input-short" type="text" id="property-asg-healthcheck" value="'+u((i=e&&e.healthCheckGracePeriod,typeof i===a?i.apply(e):i))+'" maxlength="255" data-type="digits" data-ignore="true">\n      <span>'+u(n.i18n.call(e,"PROP_ASG_UNIT_SECONDS",{hash:{},data:t}))+"</span>\n    </section>\n\n  </div>\n  ",r}function v(e,t){return'checked="true"'}function m(e,t){var r="";return r+='data-tooltip="'+u(n.i18n.call(e,"PROP_ASG_HAS_ELB_WARN",{hash:{},data:t}))+'" class="asg-radio-group tooltip"',r}function g(e,t){return'class="asg-radio-group"'}function y(e,t){return'disabled="disabled"'}function b(e,t){return' style="display: block"'}function w(e,t){var r="",i;r+='\n    <div class="option-group-head">'+u(n.i18n.call(e,"PROP_ASG_INSTANCE",{hash:{},data:t}))+' <span class="property-head-num-wrap">('+u((i=e&&e.instance_count,typeof i===a?i.apply(e):i))+')</span></div>\n    <div class="option-group">\n      ',i=n.each.call(e,e&&e.instance_groups,{hash:{},inverse:f.noop,fn:f.program(20,E,t),data:t});if(i||i===0)r+=i;return r+="\n    </div>\n  ",r}function E(e,t){var r="",i;r+='\n      <div class="property-group-head">'+u((i=e&&e.name,typeof i===a?i.apply(e):i))+'</div>\n      <ul class="property-list">\n        ',i=n.each.call(e,e&&e.instances,{hash:{},inverse:f.noop,fn:f.program(21,S,t),data:t});if(i||i===0)r+=i;return r+="\n      </ul>\n      ",r}function S(e,t){var n="",r;return n+='\n          <li><i class="status status-'+u((r=e&&e.status,typeof r===a?r.apply(e):r))+' icon-label tooltip" data-tooltip="'+u((r=e&&e.healthy,typeof r===a?r.apply(e):r))+'" ></i>'+u((r=e&&e.name,typeof r===a?r.apply(e):r))+"</li>\n        ",n}function x(e,t){var r="",i;r+='\n      <section class="property-control-group pos-r">\n        <h5>'+u(n.i18n.call(e,"PROP_ASG_TERMINATION_POLICY",{hash:{},data:t}))+'</h5>\n        <p class="termination-policy-brief">'+u(n.emptyStr.call(e,e&&e.term_policy_brief,{hash:{},data:t}))+'</p>\n      </section>\n      <ul id="property-asg-policies" class="property-list">\n        ',i=n.each.call(e,e&&e.policies,{hash:{},inverse:f.noop,fn:f.program(24,T,t),data:t});if(i||i===0)r+=i;return r+="\n      </ul>\n    ",r}function T(e,t){var r="",i;r+='\n          <li class="pos-r" data-uid="'+u((i=e&&e.uid,typeof i===a?i.apply(e):i))+'">\n            <div class="property-asg-policy-name" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_NAME",{hash:{},data:t}))+'">'+u((i=e&&e.name,typeof i===a?i.apply(e):i))+"</div>\n            ",i=n["if"].call(e,e&&e.arn,{hash:{},inverse:f.program(27,C,t),fn:f.program(25,N,t),data:t});if(i||i===0)r+=i;return r+="\n\n          </li>\n\n        ",r}function N(e,t){var r="",i;return r+='\n            <div class="click-select tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_ASG_TIP_CLICK_TO_SELECT",{hash:{},data:t}))+'">'+u((i=e&&e.arn,typeof i===a?i.apply(e):i))+"</div>\n            ",r}function C(e,t){var r="",i;return r+='\n            <span class="asg-p-metric asg-p-tag" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_ALARM_METRIC",{hash:{},data:t}))+'">'+u((i=e&&e.metric,typeof i===a?i.apply(e):i))+'</span>\n            <span class="asg-p-eval asg-p-tag" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_THRESHOLD",{hash:{},data:t}))+'">'+u((i=e&&e.evaluation,typeof i===a?i.apply(e):i))+" "+u((i=e&&e.threshold,typeof i===a?i.apply(e):i))+u((i=e&&e.unit,typeof i===a?i.apply(e):i))+'</span>\n            <span class="asg-p-periods asg-p-tag" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_PERIOD",{hash:{},data:t}))+'">'+u((i=e&&e.periods,typeof i===a?i.apply(e):i))+"x"+u((i=e&&e.minute,typeof i===a?i.apply(e):i))+'m</span>\n            <span class="asg-p-trigger asg-p-tag asg-p-trigger-'+u((i=e&&e.trigger,typeof i===a?i.apply(e):i))+'" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_ACTION",{hash:{},data:t}))+'">'+u((i=e&&e.trigger,typeof i===a?i.apply(e):i))+'</span>\n            <span class="asg-p-adjust asg-p-tag" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_ADJUSTMENT",{hash:{},data:t}))+'">'+u((i=e&&e.adjustment,typeof i===a?i.apply(e):i))+" "+u((i=e&&e.adjusttype,typeof i===a?i.apply(e):i))+"</span>\n            ",r}function k(e,t){var r="",i;r+='\n      <section class="property-control-group pos-r property-term-p">\n        <h5>'+u(n.i18n.call(e,"PROP_ASG_TERMINATION_POLICY",{hash:{},data:t}))+'</h5>\n        <div class="termination-policy-brief">'+u((i=e&&e.term_policy_brief,typeof i===a?i.apply(e):i))+'</div>\n        <div class="asg-p-action"><i class="icon-edit tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_ASG_TERMINATION_EDIT",{hash:{},data:t}))+'" id="property-asg-term-edit"></i></div>\n      </section>\n      <ul id="property-asg-policies" class="property-list">\n        <li class="pos-r hide">\n          <h5 class="property-asg-policy-name name"></h5>\n          <span class="asg-p-metric asg-p-tag" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_ALARM_METRIC",{hash:{},data:t}))+'"></span>\n          <span class="asg-p-eval asg-p-tag" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_THRESHOLD",{hash:{},data:t}))+'"></span>\n          <span class="asg-p-periods asg-p-tag" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_PERIOD",{hash:{},data:t}))+'"></span>\n          <span class="asg-p-trigger asg-p-tag" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_ACTION",{hash:{},data:t}))+'"></span>\n          <span class="asg-p-adjust asg-p-tag" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_ADJUSTMENT",{hash:{},data:t}))+'"></span>\n          <div class="asg-p-action">\n            <i class="icon-edit tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_EDIT",{hash:{},data:t}))+'"></i>\n            <i class="icon-remove icon-del tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_REMOVE",{hash:{},data:t}))+'"></i>\n          </div>\n        </li>\n        ',i=n.each.call(e,e&&e.policies,{hash:{},inverse:f.noop,fn:f.program(30,L,t),data:t});if(i||i===0)r+=i;r+='\n\n      </ul>\n      <div class="property-control-group tac">\n        <button class="btn btn-blue ',i=n.unless.call(e,e&&e.can_add_policy,{hash:{},inverse:f.noop,fn:f.program(32,A,t),data:t});if(i||i===0)r+=i;return r+='" id="property-asg-policy-add" data-tooltip="'+u(n.i18n.call(e,"PROP_ASG_TIP_YOU_CAN_ONLY_ADD_25_SCALING_POLICIES",{hash:{},data:t}))+'">'+u(n.i18n.call(e,"PROP_ASG_BTN_ADD_SCALING_POLICY",{hash:{},data:t}))+"</button>\n      </div>\n    ",r}function L(e,t){var r="",i;return r+='\n        <li class="pos-r" data-uid="'+u((i=e&&e.id,typeof i===a?i.apply(e):i))+'" data-old="true">\n          <h5 class="property-asg-policy-name name" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_NAME",{hash:{},data:t}))+'">'+u((i=e&&e.name,typeof i===a?i.apply(e):i))+'</h5>\n          <span class="asg-p-metric asg-p-tag" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_ALARM_METRIC",{hash:{},data:t}))+'">'+u((i=(i=e&&e.alarmData,i==null||i===!1?i:i.metricName),typeof i===a?i.apply(e):i))+'</span>\n          <span class="asg-p-eval asg-p-tag" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_THRESHOLD",{hash:{},data:t}))+'">'+u((i=(i=e&&e.alarmData,i==null||i===!1?i:i.comparisonOperator),typeof i===a?i.apply(e):i))+" "+u((i=(i=e&&e.alarmData,i==null||i===!1?i:i.threshold),typeof i===a?i.apply(e):i))+u((i=e&&e.unit,typeof i===a?i.apply(e):i))+'</span>\n          <span class="asg-p-periods asg-p-tag" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_PERIOD",{hash:{},data:t}))+'">'+u((i=(i=e&&e.alarmData,i==null||i===!1?i:i.evaluationPeriods),typeof i===a?i.apply(e):i))+"x"+u((i=(i=e&&e.alarmData,i==null||i===!1?i:i.period),typeof i===a?i.apply(e):i))+'m</span>\n          <span class="asg-p-trigger asg-p-tag asg-p-trigger-'+u((i=e&&e.state,typeof i===a?i.apply(e):i))+'" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_ACTION",{hash:{},data:t}))+'">'+u((i=e&&e.state,typeof i===a?i.apply(e):i))+'</span>\n          <span class="asg-p-adjust asg-p-tag" title="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_ADJUSTMENT",{hash:{},data:t}))+'">'+u((i=e&&e.adjustment,typeof i===a?i.apply(e):i))+" "+u((i=e&&e.adjustmentType,typeof i===a?i.apply(e):i))+'</span>\n          <div class="asg-p-action">\n            <i class="icon-edit tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_EDIT",{hash:{},data:t}))+'"></i>\n            <i class="icon-remove icon-del tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP_ASG_POLICY_TLT_REMOVE",{hash:{},data:t}))+'"></i>\n          </div>\n        </li>\n        ',r}function A(e,t){return"disabled tooltip"}function O(e,t){var r="",i;r+='\n      <div class="property-asg-notification-wrap property-control-group">\n        ',i=n["if"].call(e,e&&e.sendNotify,{hash:{},inverse:f.program(46,j,t),fn:f.program(35,M,t),data:t});if(i||i===0)r+=i;return r+="\n      </div>\n\n    ",r}function M(e,t){var r="",i;r+="\n        <label>"+u(n.i18n.call(e,"PROP_ASG_LBL_SEND_NOTIFICATION",{hash:{},data:t}))+"</label>\n        <section>\n          ",i=n["if"].call(e,(i=e&&e.notifies,i==null||i===!1?i:i[0]),{hash:{},inverse:f.noop,fn:f.program(36,_,t),data:t});if(i||i===0)r+=i;r+="\n          ",i=n["if"].call(e,(i=e&&e.notifies,i==null||i===!1?i:i[1]),{hash:{},inverse:f.noop,fn:f.program(38,D,t),data:t});if(i||i===0)r+=i;r+="\n          ",i=n["if"].call(e,(i=e&&e.notifies,i==null||i===!1?i:i[2]),{hash:{},inverse:f.noop,fn:f.program(40,P,t),data:t});if(i||i===0)r+=i;r+="\n          ",i=n["if"].call(e,(i=e&&e.notifies,i==null||i===!1?i:i[3]),{hash:{},inverse:f.noop,fn:f.program(42,H,t),data:t});if(i||i===0)r+=i;r+="\n          ",i=n["if"].call(e,(i=e&&e.notifies,i==null||i===!1?i:i[4]),{hash:{},inverse:f.noop,fn:f.program(44,B,t),data:t});if(i||i===0)r+=i;return r+="\n        </section>\n        ",r}function _(e,t){var r="";return r+="<p>"+u(n.i18n.call(e,"PROP_ASG_LBL_SUCCESS_INSTANCES_LAUNCH",{hash:{},data:t}))+"</p>",r}function D(e,t){var r="";return r+="<p>"+u(n.i18n.call(e,"PROP_ASG_LBL_FAILED_INSTANCES_LAUNCH",{hash:{},data:t}))+"</p>",r}function P(e,t){var r="";return r+="<p>"+u(n.i18n.call(e,"PROP_ASG_LBL_SUCCESS_INSTANCES_TERMINATE",{hash:{},data:t}))+"</p>",r}function H(e,t){var r="";return r+="<p>"+u(n.i18n.call(e,"PROP_ASG_LBL_FAILED_INSTANCES_TERMINATE",{hash:{},data:t}))+"</p>",r}function B(e,t){var r="";return r+="<p>"+u(n.i18n.call(e,"PROP_ASG_LBL_VALIDATE_SNS",{hash:{},data:t}))+"</p>",r}function j(e,t){var r="";return r+='\n        <p class="property-info tac">'+u(n.i18n.call(e,"PROP_ASG_MSG_NO_NOTIFICATION_WARN",{hash:{},data:t}))+"</p>\n        ",r}function F(e,t){var r="",i;r+='\n      <div class="property-control-group property-asg-notification-wrap">\n        <p>'+u(n.i18n.call(e,"PROP_ASG_LBL_SEND_NOTIFICATION",{hash:{},data:t}))+'</p>\n        <div><div class="checkbox">\n          <input id="property-asg-sns1" type="checkbox" data-key="instanceLaunch" ',i=n["if"].call(e,(i=e&&e.notification,i==null||i===!1?i:i.instanceLaunch),{hash:{},inverse:f.noop,fn:f.program(49,I,t),data:t});if(i||i===0)r+=i;r+='/>\n          <label for="property-asg-sns1"></label>\n        </div>\n        <label for="property-asg-sns1">'+u(n.i18n.call(e,"PROP_ASG_LBL_SUCCESS_INSTANCES_LAUNCH",{hash:{},data:t}))+'</label></div>\n\n        <div><div class="checkbox">\n          <input id="property-asg-sns2" type="checkbox" data-key="instanceLaunchError" ',i=n["if"].call(e,(i=e&&e.notification,i==null||i===!1?i:i.instanceLaunchError),{hash:{},inverse:f.noop,fn:f.program(49,I,t),data:t});if(i||i===0)r+=i;r+='/>\n          <label for="property-asg-sns2"></label>\n        </div>\n        <label for="property-asg-sns2">'+u(n.i18n.call(e,"PROP_ASG_LBL_FAILED_INSTANCES_LAUNCH",{hash:{},data:t}))+'</label></div>\n\n        <div><div class="checkbox">\n          <input id="property-asg-sns3" type="checkbox" data-key="instanceTerminate" ',i=n["if"].call(e,(i=e&&e.notification,i==null||i===!1?i:i.instanceTerminate),{hash:{},inverse:f.noop,fn:f.program(49,I,t),data:t});if(i||i===0)r+=i;r+='/>\n          <label for="property-asg-sns3"></label>\n        </div>\n        <label for="property-asg-sns3">'+u(n.i18n.call(e,"PROP_ASG_LBL_SUCCESS_INSTANCES_TERMINATE",{hash:{},data:t}))+'</label></div>\n\n        <div><div class="checkbox">\n          <input id="property-asg-sns4" type="checkbox" data-key="instanceTerminateError" ',i=n["if"].call(e,(i=e&&e.notification,i==null||i===!1?i:i.instanceTerminateError),{hash:{},inverse:f.noop,fn:f.program(49,I,t),data:t});if(i||i===0)r+=i;r+='/>\n          <label for="property-asg-sns4"></label>\n        </div>\n        <label for="property-asg-sns4">'+u(n.i18n.call(e,"PROP_ASG_LBL_FAILED_INSTANCES_TERMINATE",{hash:{},data:t}))+'</label></div>\n\n        <div><div class="checkbox">\n          <input id="property-asg-sns5" type="checkbox" data-key="test" ',i=n["if"].call(e,(i=e&&e.notification,i==null||i===!1?i:i.test),{hash:{},inverse:f.noop,fn:f.program(49,I,t),data:t});if(i||i===0)r+=i;return r+='/>\n          <label for="property-asg-sns5"></label>\n        </div>\n        <label for="property-asg-sns5">'+u(n.i18n.call(e,"PROP_ASG_LBL_VALIDATE_SNS",{hash:{},data:t}))+'</label></div>\n\n      </div>\n      <div class="property-control-group sns-group" style="display:none;">\n        <label for="sns-placeholder">Select SNS Topic</label>\n        <div id="sns-placeholder"></div>\n      </div>\n    ',r}function I(e,t){return'checked="checked"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+='<article class="property-app">\n  ',o=n["if"].call(t,t&&t.hasData,{hash:{},inverse:f.program(6,p,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+="\n\n  ",o=n["if"].call(t,t&&t.isEditable,{hash:{},inverse:f.noop,fn:f.program(8,d,i),data:i});if(o||o===0)s+=o;s+="\n\n  ",o=n["if"].call(t,t&&t.hasData,{hash:{},inverse:f.noop,fn:f.program(19,w,i),data:i});if(o||o===0)s+=o;s+='\n\n  <div class="option-group-head">'+u(n.i18n.call(t,"PROP_ASG_POLICY",{hash:{},data:i}))+'</div>\n  <div class="option-group">\n\n    ',o=n.unless.call(t,t&&t.isEditable,{hash:{},inverse:f.program(29,k,i),fn:f.program(23,x,i),data:i});if(o||o===0)s+=o;s+='\n\n\n  </div>\n\n  <div class="option-group-head">'+u(n.i18n.call(t,"PROP_ASG_LBL_NOTIFICATION",{hash:{},data:i}))+'</div>\n  <div class="option-group" id="property-asg-sns">\n\n    ',o=n.unless.call(t,t&&t.isEditable,{hash:{},inverse:f.program(48,F,i),fn:f.program(34,O,i),data:i});if(o||o===0)s+=o;return s+="\n\n  </div>\n\n</article>",s};return e.template(t)}),function(){define("workspaces/editor/property/asg/app_view",["../base/view","./template/app","./template/policy","./template/term","i18n!/nls/lang.js","sns_dropdown","UI.modalplus"],function(e,t,n,r,i,s,o){var u,a,f,l,c,h;return c={CPUUtilization:"CPU Utilization",DiskReadBytes:"Disk Reads",DiskReadOps:"Disk Read Operations",DiskWriteBytes:"Disk Writes",DiskWriteOps:"Disk Write Operations",NetworkIn:"Network In",NetworkOut:"Network Out",StatusCheckFailed:"Status Check Failed (Any)",StatusCheckFailed_Instance:"Status Check Failed (Instance)",StatusCheckFailed_System:"Status Check Failed (System)"},a={ChangeInCapacity:"Change in Capacity",ExactCapacity:"Exact Capacity",PercentChangeInCapacity:"Percent Change in Capacity"},l={ChangeInCapacity:"eg. -1",ExactCapacity:"eg. 5",PercentChangeInCapacity:"eg. -30"},f={ChangeInCapacity:"Increase or decrease existing capacity by integer you input here. A positive value adds to the current capacity and a negative value removes from the current capacity.",ExactCapacity:"Change the current capacity of your Auto Scaling group to the exact value specified.",PercentChangeInCapacity:"Increase or decrease the desired capacity by a percentage of the desired capacity. A positive value adds to the current capacity and a negative value removes from the current capacity"},h={CPUUtilization:"%",DiskReadBytes:"B",DiskWriteBytes:"B",NetworkIn:"B",NetworkOut:"B"},u=e.extend({events:{"change #property-asg-min":"setSizeGroup","change #property-asg-max":"setSizeGroup","change #property-asg-capacity":"setSizeGroup","click #property-asg-term-edit":"showTermPolicy","click #property-asg-sns input[type=checkbox]":"setNotification","change #property-asg-elb":"setHealthyCheckELBType","change #property-asg-ec2":"setHealthyCheckEC2Type","change #property-asg-cooldown":"setASGCoolDown","change #property-asg-healthcheck":"setHealthCheckGrace","click #property-asg-policy-add":"addScalingPolicy","click #property-asg-policies .icon-edit":"editScalingPolicy","click #property-asg-policies .icon-del":"delScalingPolicy"},setASGCoolDown:function(e){var t;t=$(e.target),t.parsley("custom",function(e){return _.isNumber(+e)&&+e>86400?i.ide.PARSLEY_MAX_VALUE_86400:null});if(t.parsley("validate"))return this.model.setASGCoolDown(t.val())},setHealthCheckGrace:function(e){return this.model.setHealthCheckGrace(e.target.value)},showTermPolicy:function(){var e,t,n,s,o,u,a,f,l,c,h;t=[],e={},c=this.model.get("terminationPolicies");for(u=0,f=c.length;u<f;u++)s=c[u],s==="Default"?t.useDefault=!0:(t.push({name:s,checked:!0}),e[s]=!0);h=[i.ide.PROP_ASG_TERMINATION_POLICY_OLDEST,i.ide.PROP_ASG_TERMINATION_POLICY_NEWEST,i.ide.PROP_ASG_TERMINATION_POLICY_OLDEST_LAUNCH,i.ide.PROP_ASG_TERMINATION_POLICY_CLOSEST];for(a=0,l=h.length;a<l;a++)n=h[a],e[n]||t.push({name:n,checked:!1});return modal(r(t),!0),o=this,$("#property-asg-term").on("click","input",function(){var t,n;return t=$("#property-asg-term").find("input:checked"),t.length===0?!1:(n=$(this),e=n.is(":checked"),n.closest("li").toggleClass("enabled",e))}),$("#property-asg-term-done").on("click",function(){return o.onEditTermPolicy(),modal.close()}),$("#property-asg-term").on("mousedown",".drag-handle",function(){return $(this).trigger("mouseleave")}),$("#property-term-list").sortable({handle:".drag-handle"})},onEditTermPolicy:function(){var e;return e=[],$("#property-term-list .list-name").each(function(){var t;return t=$(this),t.closest("li").hasClass("enabled")&&e.push(t.text()),null}),$("#property-asg-term-def").is(":checked")&&e.push("Default"),$(".termination-policy-brief").text(e.join(" > ")),this.model.setTerminatePolicy(e)},delScalingPolicy:function(e){var t,n;return t=$(e.currentTarget).closest("li"),n=t.data("uid"),t.remove(),$("#property-asg-policy-add").removeClass("tooltip disabled"),this.model.delPolicy(n)},updateScalingPolicy:function(e){var t,n,r,i,s;i=c[e.alarmData.metricName],r=a[e.adjustmentType],s=h[e.alarmData.metricName]||"";if(!e.uid){void 0;return}return n=$("#property-asg-policies"),t=n.children("[data-uid='"+e.uid+"']"),t.length===0&&(t=n.children(".hide").clone().attr("data-uid",e.uid).removeClass("hide").appendTo(n),$("#property-asg-policy-add").toggleClass("tooltip disabled",$("#property-asg-policies").children().length>=26)),t.find(".name").html(e.name),t.find(".asg-p-metric").html(i),t.find(".asg-p-eval").html(e.alarmData.comparisonOperator+" "+e.alarmData.threshold+s),t.find(".asg-p-periods").html(e.alarmData.evaluationPeriods+"x"+Math.round(e.alarmData.period/60)+"m"),t.find(".asg-p-trigger").html(e.state).attr("class","asg-p-trigger asg-p-tag asg-p-trigger-"+e.state),t.find(".asg-p-adjust").html(e.adjustment+" "+e.adjustmentType)},editScalingPolicy:function(e){var t,n,r,s,o,u,a,f,l,c,h,p,d,v;n=$(e.currentTarget).closest("li"),c=n.data("uid"),u=n.data("old"),o=this.model.getPolicy(c),o.uid=c,o.title=i.ide.PROP_ASG_ADD_POLICY_TITLE_EDIT,o.isOld=u,this.showScalingPolicy(o),l={metric:o.alarmData.metricName,eval:o.alarmData.comparisonOperator,trigger:o.state,"adjust-type":o.adjustmentType,statistics:o.alarmData.statistic};for(f in l){h=l[f],r=$("#asg-policy-"+f),s=null,v=r.find(".item");for(p=0,d=v.length;p<d;p++){a=v[p],t=$(a);if(t.data("id")===h){s=t;break}}s&&(r.find(".selected").removeClass("selected"),r.find(".selection").html(s.addClass("selected").html()))}return $(".pecentcapcity").toggle($("#asg-policy-adjust-type").find(".selected").data("id")==="PercentChangeInCapacity")},addScalingPolicy:function(e){return $(e.currentTarget).hasClass("disabled")?!1:(this.showScalingPolicy(),!1)},openPolicyModal:function(e){var t,r,s;return r={template:n(e),title:i.ide.PROP_ASG_ADD_POLICY_TITLE_ADD,width:"480px",compact:!0,confirm:{text:"Done"}},t=new o(r),s=this,t.on("confirm",function(){var e;return e=$("#asg-termination-policy").parsley("validate"),e===!1?!1:(s.onPolicyDone(),t.close())},this)},showScalingPolicy:function(e){var t,n,r,o;return e||(e={title:i.ide.PROP_ASG_ADD_POLICY_TITLE_ADD,name:this.model.defaultScalingPolicyName(),minAdjustStep:1,alarmData:{evaluationPeriods:2,period:5}}),e.uid&&(t=Design.instance().component(e.uid)),e.alarmData&&e.alarmData.metricName?e.unit=h[e.alarmData.metricName]:e.unit="%",e.detail_monitor=this.model.attributes.detail_monitor,this.openPolicyModal(e),r=this,$("#asg-policy-name").parsley("custom",function(e){var t;t=$("#property-asg-policy").data("uid");if(r.model.isDupPolicyName(t,e))return i.ide.PARSLEY_DUPLICATED_POLICY_NAME}),$("#asg-policy-periods").on("change",function(){var e;e=parseInt($(this).val(),10),(!e||e<1)&&$(this).val("1");if(e>86400)return $(this).val(86400)}),$("#asg-policy-second").on("change",function(){var e;e=parseInt($(this).val(),10),(!e||e<1)&&$(this).val("1");if(e>1440)return $(this).val(1440)}),$("#asg-policy-adjust-type").on("OPTION_CHANGE",function(){var e;return e=$(this).find(".selected").data("id"),e==="PercentChangeInCapacity"?($(".pecentcapcity").toggle(!0),$("#asg-policy-step").val()===""&&$("#asg-policy-step").val(1)):$(".pecentcapcity").toggle(!1),$("#asg-policy-adjust").attr("placeholder",l[e]).data("tooltip",f[e]).trigger("change")}),$("#asg-policy-adjust").on("change",function(){var e,t;return e=$("#asg-policy-adjust-type").find(".selected").data("id"),t=parseInt($(this).val(),10),e==="ExactCapacity"?(!t||t<1)&&$(this).val("1"):e==="PercentChangeInCapacity"&&(t?t<-100&&$(this).val("-100"):$(this).val("0")),t<-65534?$(this).val(-65534):t>65534&&$(this).val(65534),$("#").data("tooltip",f[e]).trigger("change")}),$("#asg-policy-cooldown").on("change",function(){var e,t;e=$("#asg-policy-cooldown"),t=parseInt(e.val(),10);if(isNaN(t))return;return t<0?t=0:t>86400&&(t=86400),e.val(t)}),$("#asg-policy-step").on("change",function(){var e,t;e=$("#asg-policy-step"),t=parseInt(e.val(),10);if(isNaN(t))return;return t<0?t=0:t>65534&&(t=65534),e.val(t)}),$("#asg-policy-threshold").on("change",function(){var e,t;e=$("#asg-policy-metric .selected").data("id"),t=parseInt($(this).val(),10);if(e==="CPUUtilization"){if(isNaN(t)||t<1)return $(this).val("1");if(t>100)return $(this).val("100")}}),n=t?t.getTopicName():null,o=new s({selection:n}),this.processPolicyTopic($("#asg-policy-notify").prop("checked"),o,!1),$("#asg-policy-notify").off("click").on("click",function(e){return e.stopPropagation(),r.processPolicyTopic(e.target.checked,o,!0),null}),$("#asg-policy-metric").on("OPTION_CHANGE",function(){return $("#asg-policy-unit").html(h[$(this).find(".selected").data("id")]||""),$("#asg-policy-threshold").val("")}),null},onPolicyDone:function(){var e,t;return e={uid:$("#property-asg-policy").data("uid"),name:$("#asg-policy-name").val(),cooldown:$("#asg-policy-cooldown").val(),minAdjustStep:"",adjustment:$("#asg-policy-adjust").val(),adjustmentType:$("#asg-policy-adjust-type .selected").data("id"),state:$("#asg-policy-trigger .selected").data("id"),sendNotification:$("#asg-policy-notify").is(":checked"),alarmData:{metricName:$("#asg-policy-metric .selected").data("id"),comparisonOperator:$("#asg-policy-eval .selected").data("id"),period:$("#asg-policy-second").val()*60,evaluationPeriods:$("#asg-policy-periods").val(),statistic:$("#asg-policy-statistics .selected").data("id"),threshold:$("#asg-policy-threshold").val()}},e.adjustmentType==="PercentChangeInCapacity"&&(e.minAdjustStep=$("#asg-policy-step").val()),e.sendNotification&&(t=$(".policy-sns-placeholder .selected").data(),t&&t.id&&t.name&&(e.topic={appId:t.id,name:t.name})),this.model.setPolicy(e),this.updateScalingPolicy(e),null},setNotification:function(){var e,t,n;return e={},t=!1,$("#property-asg-sns input[type = checkbox]").each(function(){var n;return n=$(this).is(":checked"),e[$(this).attr("data-key")]=n,n&&(t=!0),null}),t?$("#property-asg-sns-info").show():$("#property-asg-sns-info").hide(),n=this.wheatherHasNoti(),this.model.setNotification(e),this.processNotiTopic(n)},setHealthyCheckELBType:function(e){return this.model.setHealthCheckType("ELB"),$("#property-asg-elb-warn").toggle($("#property-asg-elb").is(":checked"))},setHealthyCheckEC2Type:function(e){return this.model.setHealthCheckType("EC2"),$("#property-asg-elb-warn").toggle($("#property-asg-elb").is(":checked"))},render:function(){var e,n,r,i,o,u;r=this.model.getNotificationTopicName(),this.snsNotiDropdown=new s({selection:r}),this.snsNotiDropdown.on("change",this.model.setNotificationTopic,this.model),e=this.model.toJSON();if(e.isEditable){u=e.policies;for(i=0,o=u.length;i<o;i++)n=u[i],n.alarmData.metricName=c[n.alarmData.metricName],n.unit=h[n.alarmData.metricName],n.adjustmentType=a[n.adjustmentType],n.isNew=!n.appId;e.term_policy_brief=e.terminationPolicies.join(" > "),e.can_add_policy=e.policies.length<25}return void 0,this.$el.html(t(e)),this.processNotiTopic(null,!0),e.name},wheatherHasNoti:function(){var e,t;return e=(t=this.model.notiObject)!=null?t.toJSON():void 0,e&&(e.instanceLaunch||e.instanceLaunchError||e.instanceTerminate||e.instanceTerminateError||e.test)},processNotiTopic:function(e,t){var n;n=this.wheatherHasNoti();if(t&&n)return this.$("#sns-placeholder").html(this.snsNotiDropdown.render().el),this.$(".sns-group").show();if(!e&&n)return this.$("#sns-placeholder").html(this.snsNotiDropdown.render(!0).el),this.$(".sns-group").show();if(e&&!n)return this.model.removeTopic(),this.$(".sns-group").hide()},processPolicyTopic:function(e,t,n){return e?($(".policy-sns-placeholder").html(t.render(n).el),$(".sns-policy-field").show()):$(".sns-policy-field").hide()},setSizeGroup:function(e){var t,n,r;r=this.$el.find("#property-asg-min"),n=this.$el.find("#property-asg-max"),t=this.$el.find("#property-asg-capacity"),r.parsley("custom",function(e){if(+e<1)return i.ide.PARSLEY_ASG_SIZE_MUST_BE_EQUAL_OR_GREATER_THAN_1;if(+e>+n.val())return i.ide.PARSLEY_MINIMUM_SIZE_MUST_BE_LESSTHAN_MAXIMUM_SIZE}),n.parsley("custom",function(e){if(+e<1)return i.ide.PARSLEY_ASG_SIZE_MUST_BE_EQUAL_OR_GREATER_THAN_1;if(+e<+r.val())return i.ide.PARSLEY_MINIMUM_SIZE_MUST_BE_LESSTHAN_MAXIMUM_SIZE}),t.parsley("custom",function(e){if(+e<1)return i.ide.PARSLEY_DESIRED_CAPACITY_EQUAL_OR_GREATER_1;if(+e<+r.val()||+e>+n.val())return i.ide.PARSLEY_DESIRED_CAPACITY_IN_ALLOW_SCOPE});if($(e.currentTarget).parsley("validateForm"))return this.model.setASGMin(r.val()),this.model.setASGMax(n.val()),this.model.setASGDesireCapacity(t.val())}}),new u})}.call(this),function(){define("workspaces/editor/property/asg/main",["../base/main","./model","./view","constant","./app_model","./app_view"],function(e,t,n,r,i,s){var o;return o=e.extend({handleTypes:[r.RESTYPE.ASG,"ExpandedAsg"],initStack:function(){return this.model=t,this.view=n,null},initApp:function(){return this.model=i,this.model.isAppEdit=!1,this.view=s,null},initAppEdit:function(){return this.model=i,this.model.isAppEdit=!0,this.view=s,null}}),null})}.call(this),function(){define("workspaces/editor/property/dbinstance/model",["../base/model","constant","event","i18n!/nls/lang.js"],function(e,t,n,r){var i;return i=e.extend({init:function(e){var t,n;return n=Design.instance().component(e),t=n!=null?n.toJSON():void 0,t.uid=e,this.set(t),null}}),new i})}.call(this),define("workspaces/editor/property/dbinstance/template/stack_instance",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var r="",i;r+="\n    ",i=n["if"].call(e,e&&e.isCanPromote,{hash:{},inverse:u.noop,fn:u.program(2,c,t),data:t});if(i||i===0)r+=i;r+="\n    ",i=n["if"].call(e,e&&e.isPromoted,{hash:{},inverse:u.program(6,p,t),fn:u.program(4,h,t),data:t});if(i||i===0)r+=i;return r+="\n    ",r}function c(e,t){return'\n    <section class="property-control-group property-dbinstance-promote-replica hide">\n        <button class="btn btn-primary" id="property-dbinstance-promote-replica" style="width: 200px;">Promote Read Replica</button>\n    </section>\n    '}function h(e,t){return'\n    <section class="property-control-group property-dbinstance-promote-replica hide">\n        <button class="btn" id="property-dbinstance-promote-replica" style="width: 200px;">Cancel Promote</button>\n    </section>\n    '}function p(e,t){var r="",i;r+='\n    <section class="property-control-group apply-immediately-section ',i=n.unless.call(e,e&&e.isChanged,{hash:{},inverse:u.noop,fn:u.program(7,d,t),data:t});if(i||i===0)r+=i;r+='">\n        <div class="checkbox">\n            <input id="property-dbinstance-apply-immediately" type="checkbox" ',i=n["if"].call(e,e&&e.applyImmediately,{hash:{},inverse:u.noop,fn:u.program(9,v,t),data:t});if(i||i===0)r+=i;return r+=' value="None" name="property-dbinstance-apply-immediately">\n            <label for="property-dbinstance-apply-immediately"></label>\n        </div>\n        <label for="property-dbinstance-apply-immediately">Apply Immediately</label>\n        <a class="tooltip icon-info" href="http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Overview.DBInstance.html#Overview.DBInstance.Modifying" data-tooltip="Click to read AWS documentation on modifying DB instance using Apply Immediately." target="_blank"></a>\n    </section>\n    ',r}function d(e,t){return"hide"}function v(e,t){return'checked="true"'}function m(e,t){var r="",i;r+='\n    <div class="option-group-head expand">DB Instance Details</div>\n    <div class="option-group">\n\n        ',i=n["if"].call(e,e&&e.snapshotId,{hash:{},inverse:u.noop,fn:u.program(12,g,t),data:t});if(i||i===0)r+=i;r+="\n\n        ",i=n["if"].call(e,e&&e.isAppEdit,{hash:{},inverse:u.program(17,w,t),fn:u.program(14,y,t),data:t});if(i||i===0)r+=i;r+='\n\n        <div id ="lvia-container"></div>\n\n        <section class="property-control-group">\n            <div class="checkbox">\n                <input id="property-dbinstance-version-update" type="checkbox" ',i=n["if"].call(e,e&&e.autoMinorVersionUpgrade,{hash:{},inverse:u.noop,fn:u.program(9,v,t),data:t});if(i||i===0)r+=i;r+=' value="None" name="property-dbinstance-version-update">\n                <label for="property-dbinstance-version-update"></label>\n            </div>\n            <label for="property-dbinstance-version-update">Auto Minor Version Update</label>\n        </section>\n\n        <section class="property-control-group">\n            <label>Allocated Storage</label>\n            <span class="required-input right">'+f(n.i18n.call(e,"PROP_INSTANCE_REQUIRE",{hash:{},data:t}))+'</span>\n            <div class="ranged-number-input">\n                <label for="property-dbinstance-storage"></label>\n                <input id="property-dbinstance-storage" type="text" class="input parsley-validated property-input-left tooltip" value="'+f((i=e&&e.allocatedStorage,typeof i===a?i.apply(e):i))+'" name="property-dbinstance-storage" data-ignore="true" maxlength="4" data-required="true" data-type="number" ',i=n["if"].call(e,e&&e.isAppEdit,{hash:{},inverse:u.noop,fn:u.program(19,E,t),data:t});if(i||i===0)r+=i;r+='>\n                <label for="property-dbinstance-storage" class="property-label-right">GB</label>\n            </div>\n            ',i=n["if"].call(e,e&&e.isAppEdit,{hash:{},inverse:u.noop,fn:u.program(22,x,t),data:t});if(i||i===0)r+=i;r+='\n        </section>\n\n        <section class="property-control-group">\n            <div class="checkbox">\n                <input id="property-dbinstance-iops-check" class="tooltip" ',i=n["if"].call(e,e&&e.isAppEdit,{hash:{},inverse:u.noop,fn:u.program(25,N,t),data:t});if(i||i===0)r+=i;r+=' type="checkbox" ',i=n["if"].call(e,e&&e.iops,{hash:{},inverse:u.noop,fn:u.program(9,v,t),data:t});if(i||i===0)r+=i;r+=' value="None" name="property-dbinstance-iops-check">\n                <label for="property-dbinstance-iops-check"></label>\n            </div>\n            <label for="property-dbinstance-iops-check" class="property-dbinstance-iops-check-tooltip tooltip" data-tooltip="dsaasd">Use Provisioned IOPS</label>\n        </section>\n\n        <section class="property-control-group property-dbinstance-iops-value-section ',i=n.unless.call(e,e&&e.iops,{hash:{},inverse:u.noop,fn:u.program(7,d,t),data:t});if(i||i===0)r+=i;r+='">\n            <label class="left">Provisioned IOPS</label>\n            <div class="ranged-number-input">\n                <input class="input" id="property-dbinstance-iops-value" ',i=n["if"].call(e,e&&e.isAppEdit,{hash:{},inverse:u.noop,fn:u.program(28,k,t),data:t});if(i||i===0)r+=i;r+=' type="text" value="'+f((i=e&&e.iops,typeof i===a?i.apply(e):i))+'" name="iops-ranged" data-ignore="true" data-required="true" data-type="number">\n                <label for="property-dbinstance-iops-value"></label>\n            </div>\n            <label class="property-dbinstance-iops-info">'+f((i=e&&e.iopsInfo,typeof i===a?i.apply(e):i))+"</label>\n        </section>\n\n        ",i=n["if"].call(e,e&&e.isAppEdit,{hash:{},inverse:u.noop,fn:u.program(31,A,t),data:t});if(i||i===0)r+=i;r+="\n\n        ",i=n["if"].call(e,e&&e.isAppEdit,{hash:{},inverse:u.program(35,M,t),fn:u.program(33,O,t),data:t});if(i||i===0)r+=i;r+='\n\n        <section class="property-control-group" >\n            <label class="left" for="property-dbinstance-master-password" >Master Password</label>\n            <span class="required-input right">'+f(n.i18n.call(e,"PROP_INSTANCE_REQUIRE",{hash:{},data:t}))+'</span>\n            <input class="input tooltip" data-tooltip="',i=n.ifCond.call(e,e&&e.password,"****",{hash:{},inverse:u.program(39,D,t),fn:u.program(37,_,t),data:t});if(i||i===0)r+=i;r+='" type="password" placeholder="****" id="property-dbinstance-master-password" value="',i=n.ifCond.call(e,e&&e.password,"****",{hash:{},inverse:u.program(42,H,t),fn:u.program(37,_,t),data:t});if(i||i===0)r+=i;r+='" data-type="ascii" data-ignore="true" data-required="true"/>\n        </section>\n\n    </div>\n\n    <div class="option-group-head expand">Database Config</div>\n    <div class="option-group">\n\n        ',i=n["if"].call(e,e&&e.isAppEdit,{hash:{},inverse:u.program(51,q,t),fn:u.program(44,B,t),data:t});if(i||i===0)r+=i;r+='\n\n        <div class="property-control-group clearfix property-dbinstance-optiongroup"></div>\n\n        ',i=n.unless.call(e,e&&e.snapshotId,{hash:{},inverse:u.noop,fn:u.program(57,W,t),data:t});if(i||i===0)r+=i;r+="\n\n        ",i=n["if"].call(e,e&&e.isOracle,{hash:{},inverse:u.noop,fn:u.program(59,X,t),data:t});if(i||i===0)r+=i;r+="\n\n    </div>\n\n    ",i=n.unless.call(e,e&&e.hideAZConfig,{hash:{},inverse:u.noop,fn:u.program(63,J,t),data:t});if(i||i===0)r+=i;return r+="\n\n    ",r}function g(e,t){var n="",r;return n+='\n        <section class="property-control-group clearfix">\n            <label>DB Snapshot ID</label>\n            <div>'+f((r=e&&e.snapshotId,typeof r===a?r.apply(e):r))+'</div>\n        </section>\n        <section class="property-control-group clearfix">\n            <label>DB Snapshot Size</label>\n            <div>'+f((r=e&&e.snapshotSize,typeof r===a?r.apply(e):r))+"GiB</div>\n        </section>\n        ",n}function y(e,t){var r="",i;r+='\n        <section class="property-control-group clearfix">\n            <label>'+f(n.i18n.call(e,"PROP_DBINSTANCE_APP_DBINSTANCE_ID",{hash:{},data:t}))+"</label>\n            <div>"+f((i=e&&e.DBInstanceIdentifier,typeof i===a?i.apply(e):i)),i=n["if"].call(e,(i=e&&e.PendingModifiedValues,i==null||i===!1?i:i.DbinstanceIdentifier),{hash:{},inverse:u.noop,fn:u.program(15,b,t),data:t});if(i||i===0)r+=i;return r+="</div>\n        </section>\n        ",r}function b(e,t){return"(Pending Apply)"}function w(e,t){var r="",i;return r+='\n        <section class="property-control-group" >\n            <label class="left" for="property-dbinstance-name" >DB Instance Name</label>\n            <span class="required-input right">'+f(n.i18n.call(e,"PROP_INSTANCE_REQUIRE",{hash:{},data:t}))+'</span>\n            <input class="input" type="text" value="'+f((i=e&&e.name,typeof i===a?i.apply(e):i))+'" id="property-dbinstance-name" data-ignore="true" data-required-rollback="true"/>\n        </section>\n        ',r}function E(e,t){var r;return r=n["if"].call(e,e&&e.isSqlserver,{hash:{},inverse:u.noop,fn:u.program(20,S,t),data:t}),r||r===0?r:""}function S(e,t){return'disabled data-tooltip="Scalling storage after launch a DB Instance is currently not supported for SQL Server."'}function x(e,t){var r="",i;r+="\n                ",i=n["if"].call(e,e&&e.originAllocatedStorage,{hash:{},inverse:u.noop,fn:u.program(23,T,t),data:t});if(i||i===0)r+=i;return r+="\n            ",r}function T(e,t){var n="",r;return n+="\n                <label>Current Allocated Storage: "+f((r=e&&e.originAllocatedStorage,typeof r===a?r.apply(e):r))+" GB</label>\n                ",n}function N(e,t){var r;return r=n["if"].call(e,e&&e.isSqlserver,{hash:{},inverse:u.noop,fn:u.program(26,C,t),data:t}),r||r===0?r:""}function C(e,t){return'disabled="disabled"'}function k(e,t){var r;return r=n["if"].call(e,e&&e.isSqlserver,{hash:{},inverse:u.noop,fn:u.program(29,L,t),data:t}),r||r===0?r:""}function L(e,t){return"disabled"}function A(e,t){var r="",i;r+='\n        <div class="property-info property-info-iops-adjust-tip ',i=n.ifCond.call(e,e&&e.originIOPS,e&&e.iops,{hash:{},inverse:u.noop,fn:u.program(7,d,t),data:t});if(i||i===0)r+=i;r+=" ",i=n.unless.call(e,e&&e.originIOPS,{hash:{},inverse:u.noop,fn:u.program(7,d,t),data:t});if(i||i===0)r+=i;return r+='">When you initiate a storage type conversion between IOPS and standard storage, your DB Instance will have an availability impact for a few minutes.</div>\n        ',r}function O(e,t){var r="",i;return r+='\n        <section class="property-control-group clearfix">\n            <label>'+f(n.i18n.call(e,"PROP_DBINSTANCE_USERNAME",{hash:{},data:t}))+"</label>\n            <div>"+f((i=e&&e.MasterUsername,typeof i===a?i.apply(e):i))+"</div>\n        </section>\n        ",r}function M(e,t){var r="",i;return r+='\n        <section class="property-control-group" >\n            <label class="left" for="property-dbinstance-master-username" >Master Username</label>\n            <span class="required-input right">'+f(n.i18n.call(e,"PROP_INSTANCE_REQUIRE",{hash:{},data:t}))+'</span>\n            <input class="input"  type="text" id="property-dbinstance-master-username" value="'+f((i=e&&e.username,typeof i===a?i.apply(e):i))+'" data-ignore-regexp="^[a-zA-Z]+[0-9a-zA-Z_]*$" data-required-rollback="true"/>\n        </section>\n        ',r}function _(e,t){var n="";return n}function D(e,t){var r;return r=n["if"].call(e,e&&e.password,{hash:{},inverse:u.noop,fn:u.program(40,P,t),data:t}),r||r===0?r:""}function P(e,t){return"Default Password: 12345678"}function H(e,t){var n;return f((n=e&&e.password,typeof n===a?n.apply(e):n))}function B(e,t){var r="",i;r+='\n        <section class="property-control-group clearfix">\n            ',i=n["if"].call(e,e&&e.dbName,{hash:{},inverse:u.noop,fn:u.program(45,j,t),data:t});if(i||i===0)r+=i;r+="\n            <label>"+f(n.i18n.call(e,"PROP_DBINSTANCE_PORT",{hash:{},data:t}))+"</label>\n            <div>",i=n["if"].call(e,e&&e.Endpoint,{hash:{},inverse:u.program(49,I,t),fn:u.program(47,F,t),data:t});if(i||i===0)r+=i;return r+="</div>\n        </section>\n        ",r}function j(e,t){var r="",i;return r+="<label>"+f(n.i18n.call(e,"PROP_DBINSTANCE_NAME",{hash:{},data:t}))+"</label>\n            <div>"+f((i=e&&e.dbName,typeof i===a?i.apply(e):i))+"</div>",r}function F(e,t){var n;return f((n=(n=e&&e.Endpoint,n==null||n===!1?n:n.Port),typeof n===a?n.apply(e):n))}function I(e,t){return"Not Ready"}function q(e,t){var r="",i;r+="\n        ",i=n.unless.call(e,e&&e.isSqlserver,{hash:{},inverse:u.noop,fn:u.program(52,R,t),data:t});if(i||i===0)r+=i;return r+='\n        <section class="property-control-group" >\n            <label class="left" for="property-dbinstance-database-port" >Database Port</label>\n            <input class="input"  type="text" id="property-dbinstance-database-port" value="'+f((i=e&&e.port,typeof i===a?i.apply(e):i))+'" data-ignore="true" data-type="number" data-required="true" data-min="1150" data-max="65535"/>\n        </section>\n        ',r}function R(e,t){var r="",i;r+="\n        ",i=n.unless.call(e,e&&e.snapshotId,{hash:{},inverse:u.program(55,z,t),fn:u.program(53,U,t),data:t});if(i||i===0)r+=i;return r+="\n        ",r}function U(e,t){var n="",r;return n+='\n        <section class="property-control-group" >\n            <label class="left" for="property-dbinstance-database-name" >Database Name</label>\n            <input class="input"  type="text" id="property-dbinstance-database-name" value="'+f((r=e&&e.dbName,typeof r===a?r.apply(e):r))+'" data-ignore="true" data-required="true" data-ignore-regexp="^[a-zA-Z]+[0-9a-zA-Z_]*$"/>\n        </section>\n        ',n}function z(e,t){var r="",i;r+="\n        ",i=n.unless.call(e,e&&e.isMysql,{hash:{},inverse:u.noop,fn:u.program(53,U,t),data:t});if(i||i===0)r+=i;return r+="\n        ",r}function W(e,t){return'\n        <section class="property-control-group">\n            <label class="left">Parameter Group</label>\n            <div id="property-dbinstance-parameter-group-select">\n            </div>\n        </section>\n        '}function X(e,t){var r="",i;r+='\n        <section class="property-control-group">\n            <label class="left">Character Set Name</label>\n            <div class="selectbox combo-dd" id="property-dbinstance-charset-select">\n                <div class="selection"></div>\n                <div class="dropdown">\n                    <div class="scroll-wrap scrollbar-auto-hide clearfix">\n                        <div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n                        <div class="scroll-content">\n                            <ul>\n                                ',i=n.each.call(e,e&&e.oracleCharset,{hash:{},inverse:u.noop,fn:u.program(60,V,t),data:t});if(i||i===0)r+=i;return r+="\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </section>\n        ",r}function V(e,t){var r="",i;r+='\n                                <li class="item ',i=n["if"].call(e,e&&e.selected,{hash:{},inverse:u.noop,fn:u.program(61,$,t),data:t});if(i||i===0)r+=i;return r+='" data-id="'+f((i=e&&e.charset,typeof i===a?i.apply(e):i))+'">'+f((i=e&&e.charset,typeof i===a?i.apply(e):i))+"</li>\n                                ",r}function $(e,t){return"selected"}function J(e,t){var r="",i;r+='\n\n    <div class="option-group-head expand">Network & AZ Deployment</div>\n    <div class="option-group">\n        ',i=n.unless.call(e,e&&e.isAppEdit,{hash:{},inverse:u.noop,fn:u.program(64,K,t),data:t});if(i||i===0)r+=i;return r+='\n\n        <div id="property-dbinstance-mutil-az"></div>\n\n    </div>\n\n    ',r}function K(e,t){var r="",i;r+='\n        <section class="property-control-group">\n            <div class="checkbox">\n                <input id="property-dbinstance-public-access-check" type="checkbox" ',i=n["if"].call(e,e&&e.accessible,{hash:{},inverse:u.noop,fn:u.program(9,v,t),data:t});if(i||i===0)r+=i;return r+=' value="None" name="property-dbinstance-public-access-check">\n                <label for="property-dbinstance-public-access-check"></label>\n            </div>\n            <label for="property-dbinstance-public-access-check">Publicly Accessible</label>\n        </section>\n        ',r}function Q(e,t){return"expand"}function G(e,t){return'data-tooltip="DB instance serving as replication source must enable automatic backups"'}function Y(e,t){return"disabled checked"}function Z(e,t){return'checked="checked"'}function et(e,t){var r="",i;r+='\n                            <li class="item ',i=n["if"].call(e,e&&e.selected,{hash:{},inverse:u.noop,fn:u.program(61,$,t),data:t});if(i||i===0)r+=i;return r+='" data-id="'+f((i=e&&e.value,typeof i===a?i.apply(e):i))+'">'+f((i=e&&e.value,typeof i===a?i.apply(e):i))+"</li>\n                            ",r}function tt(e,t){var n="",r;return n+='\n            <section class="property-control-group">\n                <label>Current Backup Window: '+f((r=e&&e.originBackupWindow,typeof r===a?r.apply(e):r))+"</label>\n            </section>\n            ",n}function nt(e,t){var r="",i;r+='\n    <div class="option-group-head">Maintenance Options</div>\n    <div class="option-group">\n\n        <section id="property-dbinstance-maintenance-window-select" class="property-control-group">\n            <label>Maintenance Window</label>\n            <div class="property-dbinstance-radio-group">\n                <div class="radio">\n                    <input id="property-dbinstance-maintenance-radio-no" name="property-dbinstance-maintenance-radio" type="radio" ',i=n.unless.call(e,e&&e.maintenanceWindow,{hash:{},inverse:u.noop,fn:u.program(72,Z,t),data:t});if(i||i===0)r+=i;r+=' value="no">\n                    <label for="property-dbinstance-maintenance-radio-no"></label>\n                </div>\n                <label for="property-dbinstance-maintenance-radio-no">No Preference</label>\n            </div>\n            <div class="property-dbinstance-radio-group">\n                <div class="radio">\n                    <input id="property-dbinstance-maintenance-radio-window" name="property-dbinstance-maintenance-radio" type="radio" ',i=n["if"].call(e,e&&e.maintenanceWindow,{hash:{},inverse:u.noop,fn:u.program(72,Z,t),data:t});if(i||i===0)r+=i;r+=' value="window">\n                    <label for="property-dbinstance-maintenance-radio-window"></label>\n                </div>\n                <label for="property-dbinstance-maintenance-radio-window">Select Window</label>\n            </div>\n        </section>\n\n        <section id="property-dbinstance-maintenance-window-group" class="property-control-group ',i=n.unless.call(e,e&&e.maintenanceWindow,{hash:{},inverse:u.noop,fn:u.program(7,d,t),data:t});if(i||i===0)r+=i;r+='">\n            <section class="property-control-group" >\n                <label class="left">Start Day</label>\n                <div class="selectbox shorter-dropdown" id="property-dbinstance-maintenance-window-start-day-select">\n                    <div class="selection">Monday</div>\n                    <ul class="dropdown" tabindex="-1">\n                        <li class="item" data-id="mon">Monday</li>\n                        <li class="item" data-id="tue">Tuesday</li>\n                        <li class="item" data-id="wed">Wednesday</li>\n                        <li class="item" data-id="thu">Thursday</li>\n                        <li class="item" data-id="fri">Friday</li>\n                        <li class="item" data-id="sat">Saturday</li>\n                        <li class="item" data-id="sun">Sunday</li>\n                    </ul>\n                </div>\n            </section>\n            <section class="property-control-group" >\n                <label>Start Time:</label>\n                <input class="input shorter-input" type="text" id="property-dbinstance-maintenance-window-start-time" value="'+f((i=(i=e&&e.maintenance,i==null||i===!1?i:i.startTime),typeof i===a?i.apply(e):i))+'" data-required-rollback="true" data-ignore="true" data-ignore-regexp="^[0-9:]*$"/>\n                <label>UTC</label>\n            </section>\n            <section class="property-control-group" >\n                <label>Duration:</label>\n                <div class="selectbox shorter-dropdown" id="property-dbinstance-maintenance-window-duration">\n                    <div class="selection"></div>\n                    <ul class="dropdown" tabindex="-1">\n                        ',i=n.each.call(e,e&&e.maintenanceDurations,{hash:{},inverse:u.noop,fn:u.program(79,rt,t),data:t});if(i||i===0)r+=i;r+='\n                    </ul>\n                </div>\n                <label for="property-dbinstance-maintenance-window-duration">hour(s)</label>\n            </section>\n\n        </section>\n\n        ',i=n["if"].call(e,e&&e.originMaintenanceWindow,{hash:{},inverse:u.noop,fn:u.program(81,it,t),data:t});if(i||i===0)r+=i;r+="\n\n    </div>\n\n    \n    ",i=n["if"].call(e,e&&e.snapshotId,{hash:{},inverse:u.program(84,ot,t),fn:u.program(83,st,t),data:t});if(i||i===0)r+=i;return r+="\n    \n\n    ",r}function rt(e,t){var r="",i;r+='\n                        <li class="item ',i=n["if"].call(e,e&&e.selected,{hash:{},inverse:u.noop,fn:u.program(61,$,t),data:t});if(i||i===0)r+=i;return r+='" data-id="'+f((i=e&&e.value,typeof i===a?i.apply(e):i))+'">'+f((i=e&&e.value,typeof i===a?i.apply(e):i))+"</li>\n                        ",r}function it(e,t){var n="",r;return n+='\n        <section class="property-control-group">\n            <label>Current Maintenance Window: <br/>'+f((r=e&&e.originMaintenanceWindow,typeof r===a?r.apply(e):r))+"</label>\n        </section>\n        ",n}function st(e,t){var r="",i;r+="\n\n    ",i=n["if"].call(e,e&&e.isAppEdit,{hash:{},inverse:u.program(86,ut,t),fn:u.program(84,ot,t),data:t});if(i||i===0)r+=i;return r+="\n    \n    ",r}function ot(e,t){var r="";return r+='\n    <div class="option-group-head" id="sg-head">'+f(n.i18n.call(e,"PROP_INSTANCE_SG_DETAIL",{hash:{},data:t}))+'<span class="property-head-num-wrap">(<span id="property-head-sg-num"></span>)</span></div>\n    <div class="option-group sg-group"></div>\n    ',r}function ut(e,t){return"\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this,a="function",f=this.escapeExpression;s+='<article class="property-dbinstance" data-bind="true">\n\n    <div class="property-dbinstance-not-available-info hide">\n        This DB instance is not in availabe status. To apply modification made for this instance, wait for its status to be available.\n    </div>\n\n    ',o=n["if"].call(t,t&&t.isAppEdit,{hash:{},inverse:u.noop,fn:u.program(1,l,i),data:i});if(o||o===0)s+=o;s+="\n\n    ",o=n.unless.call(t,t&&t.isPromoted,{hash:{},inverse:u.noop,fn:u.program(11,m,i),data:i});if(o||o===0)s+=o;s+='\n\n    <div class="option-group-head ',o=n["if"].call(t,t&&t.isPromoted,{hash:{},inverse:u.noop,fn:u.program(66,Q,i),data:i});if(o||o===0)s+=o;s+='">Backup Options</div>\n    <div class="option-group">\n\n        <section class="property-control-group tooltip" ',o=n["if"].call(t,t&&t.hasSlave,{hash:{},inverse:u.noop,fn:u.program(68,G,i),data:i});if(o||o===0)s+=o;s+='>\n            <div class="checkbox">\n                <input id="property-dbinstance-auto-backup-check" type="checkbox" ',o=n["if"].call(t,t&&t.backupRetentionPeriod,{hash:{},inverse:u.noop,fn:u.program(9,v,i),data:i});if(o||o===0)s+=o;s+=' value="None" name="property-dbinstance-auto-backup-check" ',o=n["if"].call(t,t&&t.hasSlave,{hash:{},inverse:u.noop,fn:u.program(70,Y,i),data:i});if(o||o===0)s+=o;s+='>\n                <label for="property-dbinstance-auto-backup-check"></label>\n            </div>\n            <label for="property-dbinstance-auto-backup-check">Enable Automatic Backups</label>\n        </section>\n\n        <div id="property-dbinstance-auto-backup-group" class="',o=n.unless.call(t,t&&t.backupRetentionPeriod,{hash:{},inverse:u.noop,fn:u.program(7,d,i),data:i});if(o||o===0)s+=o;s+='">\n\n            <section id="group-dbinstance-backup-period" class="property-control-group ',o=n.unless.call(t,t&&t.backupRetentionPeriod,{hash:{},inverse:u.noop,fn:u.program(7,d,i),data:i});if(o||o===0)s+=o;s+='" >\n                <label>Backup Retention Period</label>\n                <input class="input shorter-input" title="hours" value="'+f((o=t&&t.backupRetentionPeriod,typeof o===a?o.apply(t):o))+'" id="property-dbinstance-backup-period" type="text" data-type="digits" data-min="1" data-max="35" data-ignore="true">\n                <label class="property-label-right" for="property-dbinstance-backup-period">day(s)</label>\n            </section>\n\n            <section id="property-dbinstance-backup-window-select" class="property-control-group">\n                <label>Backup Window</label>\n                <div class="property-dbinstance-radio-group">\n                    <div class="radio">\n                        <input id="property-dbinstance-backup-radio-no" name="property-dbinstance-backup-radio" type="radio" ',o=n.unless.call(t,t&&t.backupWindow,{hash:{},inverse:u.noop,fn:u.program(72,Z,i),data:i});if(o||o===0)s+=o;s+=' value="no">\n                        <label for="property-dbinstance-backup-radio-no"></label>\n                    </div>\n                    <label for="property-dbinstance-backup-radio-no">No Preference</label>\n                </div>\n                <div class="property-dbinstance-radio-group">\n                    <div class="radio">\n                        <input id="property-dbinstance-backup-radio-window" name="property-dbinstance-backup-radio" type="radio" ',o=n["if"].call(t,t&&t.backupWindow,{hash:{},inverse:u.noop,fn:u.program(72,Z,i),data:i});if(o||o===0)s+=o;s+=' value="window">\n                        <label for="property-dbinstance-backup-radio-window"></label>\n                    </div>\n                    <label for="property-dbinstance-backup-radio-window">Select Window</label>\n                </div>\n            </section>\n\n            <section id="property-dbinstance-backup-window-group" class="',o=n.unless.call(t,t&&t.backupWindow,{hash:{},inverse:u.noop,fn:u.program(7,d,i),data:i});if(o||o===0)s+=o;s+=' property-control-group">\n                <section class="property-control-group">\n                    <label>Start Time:</label>\n                    <input class="input shorter-input" type="text" id="property-dbinstance-backup-window-start-time" value="'+f((o=(o=t&&t.backup,o==null||o===!1?o:o.startTime),typeof o===a?o.apply(t):o))+'" data-ignore="true" data-ignore-regexp="^[0-9:]*$"/>\n                    <label>UTC</label>\n                </section>\n                <section class="property-control-group">\n                    <label>Duration:</label>\n                    <div class="selectbox shorter-dropdown" id="property-dbinstance-backup-window-duration">\n                        <div class="selection"></div>\n                        <ul class="dropdown">\n                            ',o=n.each.call(t,t&&t.backupDurations,{hash:{},inverse:u.noop,fn:u.program(74,et,i),data:i});if(o||o===0)s+=o;s+='\n                        </ul>\n                    </div>\n                    <label for="property-dbinstance-maintenance-window-duration">hour(s)</label>\n                </section>\n            </section>\n\n            ',o=n["if"].call(t,t&&t.originBackupWindow,{hash:{},inverse:u.noop,fn:u.program(76,tt,i),data:i});if(o||o===0)s+=o;s+="\n\n\n\n        </div>\n    </div>\n\n    ",o=n.unless.call(t,t&&t.isPromoted,{hash:{},inverse:u.noop,fn:u.program(78,nt,i),data:i});if(o||o===0)s+=o;return s+="\n\n</article>",s};return e.template(t)}),define("workspaces/editor/property/dbinstance/template/stack_replica",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){var n="",r;return n+='\n        <dl class="dl-vertical">\n            <dt>Master DB Instance</dt>\n            <dd>'+a((r=e&&e.sourceDbName,typeof r===u?r.apply(e):r))+"</dd>\n        </dl>\n        ",n}function c(e,t){var r="",i;r+='\n                    <li class="',i=n["if"].call(e,e&&e.selected,{hash:{},inverse:f.noop,fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;return r+='tooltip item" data-id="'+a((i=e&&e.instanceClass,typeof i===u?i.apply(e):i))+'">\n                        <div class="main truncate">'+a((i=e&&e.instanceClass,typeof i===u?i.apply(e):i))+'</div>\n                        <div class="sub"><span>'+a((i=e&&e.ecu,typeof i===u?i.apply(e):i))+"</span> <span>"+a((i=e&&e.cpu,typeof i===u?i.apply(e):i))+"</span> <span>"+a((i=e&&e.memory,typeof i===u?i.apply(e):i))+"</span></div>\n                    </li>\n                    ",r}function h(e,t){return"selected "}function p(e,t){return'checked="true"'}function d(e,t){var r="",i;r+='\n        <section class="property-control-group">\n            <div class="checkbox">\n                <input id="property-dbinstance-iops-check" type="checkbox" ',i=n["if"].call(e,e&&e.iops,{hash:{},inverse:f.noop,fn:f.program(6,p,t),data:t});if(i||i===0)r+=i;return r+=' value="None" name="property-dbinstance-iops-check">\n                <label for="property-dbinstance-iops-check"></label>\n            </div>\n            <label for="property-dbinstance-iops-check">Use Provisioned IOPS</label>\n        </section>\n        ',r}function v(e,t){var r="",i;r+='\n\n        <div class="property-control-group clearfix">\n            ',i=n.unless.call(e,e&&e.multiAz,{hash:{},inverse:f.program(14,y,t),fn:f.program(11,m,t),data:t});if(i||i===0)r+=i;return r+="\n        </div>\n\n    ",r}function m(e,t){var r="",i;r+="\n                ",i=n["if"].call(e,e&&e.AvailabilityZone,{hash:{},inverse:f.noop,fn:f.program(12,g,t),data:t});if(i||i===0)r+=i;return r+="\n            ",r}function g(e,t){var r="",i;return r+="\n                    <label>"+a(n.i18n.call(e,"PROP_DBINSTANCE_PREFERRED_ZONE",{hash:{},data:t}))+"</label>\n                    <div>"+a((i=e&&e.AvailabilityZone,typeof i===u?i.apply(e):i))+"</div>\n                ",r}function y(e,t){var r="",i;r+="\n                ",i=n["if"].call(e,e&&e.SecondaryAvailabilityZone,{hash:{},inverse:f.noop,fn:f.program(15,b,t),data:t});if(i||i===0)r+=i;return r+="\n            ",r}function b(e,t){var r="",i;return r+="\n                <label>"+a(n.i18n.call(e,"PROP_DBINSTANCE_SECONDARY_ZONE",{hash:{},data:t}))+"</label>\n                <div>"+a((i=e&&e.SecondaryAvailabilityZone,typeof i===u?i.apply(e):i))+"</div>\n                ",r}function w(e,t){var r="",i;r+="\n\n        ",i=n["if"].call(e,e&&e.azNotEnough,{hash:{},inverse:f.program(20,S,t),fn:f.program(18,E,t),data:t});if(i||i===0)r+=i;return r+="\n\n    ",r}function E(e,t){var n="",r;return n+='\n        <section class="property-control-group">\n            <div class="property-info">Subnet Group '+a((r=e&&e.subnetGroupName,typeof r===u?r.apply(e):r))+" is not correctly set up yet. Assign "+a((r=e&&e.subnetGroupName,typeof r===u?r.apply(e):r))+" to at lease 2 availability zones.</div>\n        </section>\n        ",n}function S(e,t){var r="",i;r+='\n        <section class="property-control-group property-dbinstance-preferred-az ',i=n["if"].call(e,e&&e.multiAz,{hash:{},inverse:f.noop,fn:f.program(21,x,t),data:t});if(i||i===0)r+=i;return r+='">\n            <label class="left">Preferred Availability Zone</label>\n            <div class="selectbox" id="property-dbinstance-preferred-az"></div>\n        </section>\n        ',r}function x(e,t){return"hide"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<article class="property-dbinstance">\n    <div class="option-group-head expand">DB Instance Details</div>\n    <div class="option-group">\n\n        ',o=n["if"].call(t,t&&t.sourceDbName,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+='\n\n        <section class="property-control-group" data-bind="true">\n            <label class="left" for="property-dbinstance-name" >DB Instance Name</label>\n            <span class="required-input right">'+a(n.i18n.call(t,"PROP_INSTANCE_REQUIRE",{hash:{},data:i}))+'</span>\n            <input class="input"  type="text" value="'+a((o=t&&t.name,typeof o===u?o.apply(t):o))+'" id="property-dbinstance-name" data-ignore="true" data-required-rollback="true"/>\n        </section>\n\n        <section class="property-control-group">\n            <label class="left">DB Instance Class</label>\n            <div class="selectbox selectbox-mega" id="property-dbinstance-class-select">\n                <div class="selection"></div>\n                <ul class="dropdown">\n                    ',o=n.each.call(t,t&&t.classes,{hash:{},inverse:f.noop,fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;s+='\n                </ul>\n            </div>\n        </section>\n\n        <section class="property-control-group">\n            <div class="checkbox">\n                <input id="property-dbinstance-version-update" type="checkbox" ',o=n["if"].call(t,t&&t.autoMinorVersionUpgrade,{hash:{},inverse:f.noop,fn:f.program(6,p,i),data:i});if(o||o===0)s+=o;s+=' value="None" name="property-dbinstance-version-update">\n                <label for="property-dbinstance-version-update"></label>\n            </div>\n            <label for="property-dbinstance-version-update">Auto Minor Version Update</label>\n        </section>\n\n        ',o=n["if"].call(t,t&&t.masterIops,{hash:{},inverse:f.noop,fn:f.program(8,d,i),data:i});if(o||o===0)s+=o;s+='\n\n        <section class="property-control-group" data-bind="true">\n            <label class="left" for="property-dbinstance-database-port" >Database Port</label>\n            <input class="input"  type="text" id="property-dbinstance-database-port" value="'+a((o=t&&t.port,typeof o===u?o.apply(t):o))+'" data-ignore="true" data-type="number" data-required="true"/>\n        </section>\n\n        <section class="property-control-group">\n            <div class="checkbox">\n                <input id="property-dbinstance-public-access-check" type="checkbox" ',o=n["if"].call(t,t&&t.accessible,{hash:{},inverse:f.noop,fn:f.program(6,p,i),data:i});if(o||o===0)s+=o;s+=' value="None" name="property-dbinstance-public-access-check">\n                <label for="property-dbinstance-public-access-check"></label>\n            </div>\n            <label for="property-dbinstance-public-access-check">Publicly Accessible</label>\n        </section>\n\n    ',o=n["if"].call(t,t&&t.isAppEdit,{hash:{},inverse:f.program(17,w,i),fn:f.program(10,v,i),data:i});if(o||o===0)s+=o;return s+="\n\n    </div>\n\n</article>",s};return e.template(t)}),define("workspaces/editor/property/dbinstance/template/stack_component",["handlebars"],function(e){var t,n={};return t=function(e,t,n,r,i){function l(e,t){return"\n\n"}function c(e,t){var r="",i;r+='\n<section class="property-control-group">\n    <label class="left">License Model</label>\n    <div class="selectbox" id="property-dbinstance-license-select">\n        <div class="selection">'+f((i=e&&e.license,typeof i===a?i.apply(e):i))+'</div>\n        <ul class="dropdown" tabindex="-1">\n            ',i=n.each.call(e,e&&e.licenses,{hash:{},inverse:u.noop,fn:u.program(4,h,t),data:t});if(i||i===0)r+=i;return r+="\n        </ul>\n    </div>\n</section>\n",r}function h(e,t){var r="",i;r+='\n            <li class="item ',i=n["if"].call(e,e&&e.selected,{hash:{},inverse:u.noop,fn:u.program(5,p,t),data:t});if(i||i===0)r+=i;return r+='" data-id="'+f((i=e&&e.license,typeof i===a?i.apply(e):i))+'">'+f((i=e&&e.license,typeof i===a?i.apply(e):i))+"</li>\n            ",r}function p(e,t){return"selected"}function d(e,t){var r="",i;r+="\n    ",i=n.unless.call(e,e&&e.snapshotId,{hash:{},inverse:u.noop,fn:u.program(8,v,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function v(e,t){var r="",i;r+='\n    <section class="property-control-group">\n        <label class="left">DB Engine Version</label>\n        <div class="selectbox combo-dd" id="property-dbinstance-engine-version-select">\n            <div class="property-engine-label left" >'+f((i=e&&e.engine,typeof i===a?i.apply(e):i))+'</div>\n            <div class="property-engineversion-label selection">'+f((i=e&&e.engineVersion,typeof i===a?i.apply(e):i))+'</div>\n            <div class="property-engineversion-dropdown dropdown">\n                <div class="scroll-wrap scrollbar-auto-hide clearfix">\n                    <div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n                    <div class="scroll-content">\n                        <ul>\n                            ',i=n.each.call(e,e&&e.versions,{hash:{},inverse:u.noop,fn:u.program(9,m,t),data:t});if(i||i===0)r+=i;return r+="\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    </section>\n    ",r}function m(e,t){var r="",i;r+='\n                            <li class="item ',i=n["if"].call(e,e&&e.selected,{hash:{},inverse:u.noop,fn:u.program(5,p,t),data:t});if(i||i===0)r+=i;return r+='" data-id="'+f((i=e&&e.version,typeof i===a?i.apply(e):i))+'">'+f((i=e&&e.version,typeof i===a?i.apply(e):i))+"</li>\n                            ",r}function g(e,t){var n="",r;return n+='\n    <section class="property-control-group clearfix">\n        <label>DB Engine Version</label>\n        <div>'+f((r=e&&e.engine,typeof r===a?r.apply(e):r))+"("+f((r=e&&e.engineVersion,typeof r===a?r.apply(e):r))+")</div>\n    </section>\n",n}function y(e,t){var r="",i;r+='\n                        <li class="',i=n["if"].call(e,e&&e.selected,{hash:{},inverse:u.noop,fn:u.program(14,b,t),data:t});if(i||i===0)r+=i;return r+='tooltip item" data-id="'+f((i=e&&e.instanceClass,typeof i===a?i.apply(e):i))+'">\n                            <div class="main truncate">'+f((i=e&&e.instanceClass,typeof i===a?i.apply(e):i))+'</div>\n                            <div class="sub"><span>'+f((i=e&&e.ecu,typeof i===a?i.apply(e):i))+" ECU</span> <span>"+f((i=e&&e.cpu,typeof i===a?i.apply(e):i))+"</span> <span>"+f((i=e&&e.memory,typeof i===a?i.apply(e):i))+"</span></div>\n                        </li>\n                        ",r}function b(e,t){return"selected "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this,a="function",f=this.escapeExpression;o=n["if"].call(t,t&&t.isAppEdit,{hash:{},inverse:u.program(3,c,i),fn:u.program(1,l,i),data:i});if(o||o===0)s+=o;s+="\n\n",o=n.unless.call(t,t&&t.isAppEdit,{hash:{},inverse:u.program(11,g,i),fn:u.program(7,d,i),data:i});if(o||o===0)s+=o;s+='\n\n<section class="property-control-group">\n    <label class="left">DB Instance Class</label>\n    <div class="selectbox selectbox-mega combo-dd" id="property-dbinstance-class-select">\n        <div class="selection">\n            <div class="main truncate">'+f((o=(o=t&&t.classInfo,o==null||o===!1?o:o.instanceClass),typeof o===a?o.apply(t):o))+'</div>\n            <div class="sub"><span>'+f((o=(o=t&&t.classInfo,o==null||o===!1?o:o.ecu),typeof o===a?o.apply(t):o))+" ECU</span> <span>"+f((o=(o=t&&t.classInfo,o==null||o===!1?o:o.cpu),typeof o===a?o.apply(t):o))+"</span> <span>"+f((o=(o=t&&t.classInfo,o==null||o===!1?o:o.memory),typeof o===a?o.apply(t):o))+'</span></div>\n        </div>\n        <div class="dropdown">\n            <div class="scroll-wrap scrollbar-auto-hide clearfix">\n                <div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n                <div class="scroll-content">\n                    <ul>\n                        ',o=n.each.call(t,t&&t.classes,{hash:{},inverse:u.noop,fn:u.program(13,y,i),data:i});if(o||o===0)s+=o;return s+="\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n</section>",s},n.lvi=e.template(t),t=function(e,t,n,r,i){function l(e,t){var n="",r;return n+='\n    <li class="item" data-id="'+a((r=e&&e.name,typeof r===u?r.apply(e):r))+'">'+a((r=e&&e.name,typeof r===u?r.apply(e):r))+"</li>\n    ",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div class="selection">Select Window</div>\n<ul class="dropdown" tabindex="-1">\n    <li class="item" data-id="no">No Preference</li>\n    ',o=n.each.call(t,t,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n</ul>",s},n.preferred_az=e.template(t),t=function(e,t,n,r,i){function l(e,t){var n="",r;return n+='\n            <button class="icon-new-stack btn btn-blue t-m-btn" data-btn="create">'+a((r=e&&e.btnValueCreate,typeof r===u?r.apply(e):r))+"</button>\n            ",n}function c(e,t){var r="",i;r+='\n                <button class="icon-'+a((i=e&&e.icon,typeof i===u?i.apply(e):i))+' t-m-btn" data-btn="'+a((i=e&&e.type,typeof i===u?i.apply(e):i))+'" ',i=n["if"].call(e,e&&e.disabled,{hash:{},inverse:f.noop,fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;return r+=">"+a((i=e&&e.name,typeof i===u?i.apply(e):i))+"</button>\n                ",r}function h(e,t){return"disabled"}function p(e,t){var r="",i;r+='\n                            <th class="',i=n["if"].call(e,e&&e.sortable,{hash:{},inverse:f.noop,fn:f.program(7,d,t),data:t});if(i||i===0)r+=i;r+='" data-row-type="',i=n["if"].call(e,e&&e.rowType,{hash:{},inverse:f.program(11,m,t),fn:f.program(9,v,t),data:t});if(i||i===0)r+=i;r+='" style="',i=n["if"].call(e,e&&e.width,{hash:{},inverse:f.noop,fn:f.program(13,g,t),data:t});if(i||i===0)r+=i;return r+='">'+a((i=e&&e.name,typeof i===u?i.apply(e):i))+"</th>\n                            ",r}function d(e,t){return"sortable"}function v(e,t){var n;return a((n=e&&e.rowType,typeof n===u?n.apply(e):n))}function m(e,t){return"string"}function g(e,t){var n="",r;return n+="width:"+a((r=e&&e.width,typeof r===u?r.apply(e):r))+";",n}function y(e,t){var r="",i;r+='\n                                    <th style="',i=n["if"].call(e,e&&e.width,{hash:{},inverse:f.noop,fn:f.program(13,g,t),data:t});if(i||i===0)r+=i;return r+='"><div class="th-inner"></div></th>\n                                    ',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div class="modal-toolbar '+a((o=t&&t.classList,typeof o===u?o.apply(t):o))+'">\n    <div class="content-wrap">\n        <div class="toolbar">\n            ',o=n["if"].call(t,t&&t.btnValueCreate,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+='\n            <div class="btn-group">\n                ',o=n.each.call(t,t&&t.buttons,{hash:{},inverse:f.noop,fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;s+='\n            </div>\n        </div>\n        <div class="list">\n            <div class="slidebox" style="'+a((o=t&&t.slideStyle,typeof o===u?o.apply(t):o))+'">\n                <div class="content clearfix">\n                </div>\n                <div class="error">\n                    something wrong\n                </div>\n            </div>\n            <div class="table-head-fix">\n                <table class="table-head">\n                    <thead>\n                        <tr>\n                            <th>\n                                <div class="checkbox">\n                                    <input id="t-m-select-all" type="checkbox" value="None">\n                                    <label for="t-m-select-all"></label>\n                                </div>\n                            </th>\n                            ',o=n.each.call(t,t&&t.columns,{hash:{},inverse:f.noop,fn:f.program(6,p,i),data:i});if(o||o===0)s+=o;s+='\n                        </tr>\n                    </thead>\n                </table>\n                <div class="scroll-wrap">\n                    <div class="scrollbar-veritical-wrap" style="display: block;"><div class="scrollbar-veritical-thumb"></div></div>\n                    <div class="scroll-content" style="display:block;">\n                        <table class="table">\n                            <thead>\n                                <tr>\n                                    <th><div class="th-inner"></div></th>\n                                    ',o=n.each.call(t,t&&t.columns,{hash:{},inverse:f.noop,fn:f.program(15,y,i),data:i});if(o||o===0)s+=o;return s+="\n                                </tr>\n                            </thead>\n                            <tbody class='t-m-content'>\n\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>",s},n.optionGroupModal=e.template(t),t=function(e,t,n,r,i){function f(e,t){return'\n<label for="property-dbinstance-optiongroup-placeholder">Option Group</label>\n<div class="property-dbinstance-optiongroup-placeholder"></div>\n'}function l(e,t){var n="",r;return n+="\n<label>Option Group</label>\n<div>"+u((r=e&&e.ogName,typeof r===o?r.apply(e):r))+"</div>\n",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o="function",u=this.escapeExpression,a=this;return s=n["if"].call(t,t&&t.canCustomOG,{hash:{},inverse:a.program(3,l,i),fn:a.program(1,f,i),data:i}),s||s===0?s:""},n.optionGroupDropDown=e.template(t),t=function(e,t,n,r,i){function l(e,t){return'disabled="disabled"'}function c(e,t){return'checked="true"'}function h(e,t){return'data-tooltip="SQL Server Mirroring(Multi-AZ) is controlled by Option Group. To make sure this DB instance has mirroring, please edit its Option Group."'}function p(e,t){var r="",i;r+='\n\n    <div class="property-control-group clearfix">\n        ',i=n.unless.call(e,e&&e.multiAz,{hash:{},inverse:f.program(11,m,t),fn:f.program(8,d,t),data:t});if(i||i===0)r+=i;return r+="\n    </div>\n\n",r}function d(e,t){var r="",i;r+="\n            ",i=n["if"].call(e,e&&e.AvailabilityZone,{hash:{},inverse:f.noop,fn:f.program(9,v,t),data:t});if(i||i===0)r+=i;return r+="\n        ",r}function v(e,t){var r="",i;return r+="\n                <label>"+u(n.i18n.call(e,"PROP_DBINSTANCE_PREFERRED_ZONE",{hash:{},data:t}))+"</label>\n                <div>"+u((i=e&&e.AvailabilityZone,typeof i===a?i.apply(e):i))+"</div>\n            ",r}function m(e,t){var r="",i;r+="\n            ",i=n["if"].call(e,e&&e.SecondaryAvailabilityZone,{hash:{},inverse:f.noop,fn:f.program(12,g,t),data:t});if(i||i===0)r+=i;return r+="\n        ",r}function g(e,t){var r="",i;return r+="\n            <label>"+u(n.i18n.call(e,"PROP_DBINSTANCE_SECONDARY_ZONE",{hash:{},data:t}))+"</label>\n            <div>"+u((i=e&&e.SecondaryAvailabilityZone,typeof i===a?i.apply(e):i))+"</div>\n            ",r}function y(e,t){var r="",i;r+="\n\n    ",i=n["if"].call(e,e&&e.azNotEnough,{hash:{},inverse:f.program(17,w,t),fn:f.program(15,b,t),data:t});if(i||i===0)r+=i;return r+="\n\n",r}function b(e,t){var n="",r;return n+='\n    <section class="property-control-group">\n        <div class="property-info">Subnet Group '+u((r=e&&e.subnetGroupName,typeof r===a?r.apply(e):r))+" is not correctly set up yet. Assign "+u((r=e&&e.subnetGroupName,typeof r===a?r.apply(e):r))+" to at lease 2 availability zones.</div>\n    </section>\n    ",n}function w(e,t){var r="",i;r+='\n    <section class="property-control-group property-dbinstance-preferred-az ',i=n["if"].call(e,e&&e.multiAz,{hash:{},inverse:f.noop,fn:f.program(18,E,t),data:t});if(i||i===0)r+=i;return r+='">\n        <label class="left">Preferred Availability Zone</label>\n        <div class="selectbox" id="property-dbinstance-preferred-az"></div>\n    </section>\n    ',r}function E(e,t){return"hide"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+='<section class="property-control-group">\n    <div class="checkbox">\n        <input id="property-dbinstance-mutil-az-check" ',o=n["if"].call(t,t&&t.disableMutilAZForMirror,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+=' type="checkbox" ',o=n["if"].call(t,t&&t.multiAz,{hash:{},inverse:f.noop,fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;s+=' name="property-dbinstance-mutil-az-check">\n        <label for="property-dbinstance-mutil-az-check"></label>\n    </div>\n    <label for="property-dbinstance-mutil-az-check" class="tooltip" ',o=n["if"].call(t,t&&t.disableMutilAZForMirror,{hash:{},inverse:f.noop,fn:f.program(5,h,i),data:i});if(o||o===0)s+=o;s+=">Multi-AZ Deployment</label>\n</section>\n\n",o=n["if"].call(t,t&&t.isAppEdit,{hash:{},inverse:f.program(14,y,i),fn:f.program(7,p,i),data:i});if(o||o===0)s+=o;return s},n.propertyDbinstanceMutilAZ=e.template(t),t=function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<section class="modal-db-replica-promote-confirm">\n    <h5 class="modal-text-major">The following steps show the general process for promoting a read replica to a Single-AZ DB instance.</h5>\n    <ul>\n        <li>Stop any transactions from being written to the read replica source DB instance, and then wait for all updates to be made to the read replica.</p>\n        <li>To be able to make changes to the read replica, you must the set the read_only parameter to 0 in the DB parameter group for the read replica.</p>\n        <li>Perform all needed DDL operations, such as creating indexes, on the read replica.</p>\n        <li>Promote the read replica.</p>\n    </ul>\n    <h5 class="modal-text-major">Note</h5>\n    <p>The promotion process takes a few minutes to complete. When you promote a read replica, replication is stopped and the read replica is rebooted. When the reboot is complete, the read replica is available as a Single-AZ DB instance.</p>\n    <a href="http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_ReadRepl.html" target="_blank">Read AWS Document</a>\n</section>'},n.modalPromoteConfirm=e.template(t),n}),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};define("workspaces/editor/property/dbinstance/view",["ApiRequest","ResDiff","../base/view","og_dropdown","./template/stack_instance","./template/stack_replica","./template/stack_component","i18n!/nls/lang.js","constant","CloudResources","rds_pg","UI.modalplus","jqtimepicker"],function(t,n,r,i,s,o,u,a,f,l,c,h){var p,d;return d=function(){return null},p=r.extend({events:{"change #property-dbinstance-name":"changeInstanceName","change #property-dbinstance-mutil-az-check":"changeMutilAZ","change #property-dbinstance-storage":"changeAllocatedStorage","keyup #property-dbinstance-storage":"inputAllocatedStorage","change #property-dbinstance-iops-check":"changeProvisionedIOPSCheck","change #property-dbinstance-iops-value":"changeProvisionedIOPS","change #property-dbinstance-master-username":"changeUserName","change #property-dbinstance-master-password":"changePassWord","change #property-dbinstance-database-name":"changeDatabaseName","change #property-dbinstance-database-port":"changeDatabasePort","change #property-dbinstance-public-access-check":"changePublicAccessCheck","change #property-dbinstance-version-update":"changeVersionUpdate","change #property-dbinstance-auto-backup-check":"changeAutoBackupCheck","change #property-dbinstance-backup-period":"changeBackupPeriod","click #property-dbinstance-backup-window-select input":"changeBackupOption","change #property-dbinstance-backup-window-start-time":"changeBackupTime","OPTION_CHANGE #property-dbinstance-backup-window-duration":"changeBackupTime","click #property-dbinstance-maintenance-window-select input":"changeMaintenanceOption","OPTION_CHANGE #property-dbinstance-maintenance-window-start-day-select":"changeMaintenanceTime","OPTION_CHANGE #property-dbinstance-maintenance-window-duration":"changeMaintenanceTime","change #property-dbinstance-maintenance-window-start-time":"changeMaintenanceTime","OPTION_CHANGE #property-dbinstance-license-select":"changeLicense","OPTION_CHANGE #property-dbinstance-engine-version-select":"changeVersion","OPTION_CHANGE #property-dbinstance-class-select":"changeClass","OPTION_CHANGE #property-dbinstance-preferred-az":"changeAZ","OPTION_CHANGE #property-dbinstance-charset-select":"changeCharset",OPTION_CHANGE:"checkChange","change *":"checkChange","click #property-dbinstance-promote-replica":"promoteReplica"},promoteReplica:function(){var e,t;return t=this,this.isPromoted()?(this.unsetPromote(),App.workspaces.getAwakeSpace().view.propertyPanel.refresh()):e=new h({title:"Confirm to promote Read Replica",template:u.modalPromoteConfirm({}),confirm:{text:"Confirm"},disableClose:!0,onConfirm:function(){return t.setPromote(),App.workspaces.getAwakeSpace().view.propertyPanel.refresh(),e.close()}})},checkChange:function(e){var t,r;if(!this.resModel.get("appId"))return;return r=this,t=function(e,t){var i,s;return i=r.resModel.serialize(),s=new n({old:{component:r.originComp},"new":i}),s.getChangeInfo().hasResChange},e?_.defer(function(){return t()?($(".apply-immediately-section").show(),$(".property-panel-wrapper").addClass("immediately")):($(".apply-immediately-section").hide(),$(".property-panel-wrapper").removeClass("immediately"))}):t()},durationOpertions:[.5,1,2,2.5,3],genDuration:function(e){return _.map(this.durationOpertions,function(t){return{value:t,selected:t===e}})},changeCharset:function(e,t,n){return this.resModel.set("characterSetName",t)},changeApplyImmediately:function(e){var t;return t=e.target.checked,this.resModel.set("applyImmediately",t)},changeLicense:function(e,t,n){return this.resModel.set("license",t),this.renderLVIA()},changeVersion:function(e,t,n){var r;return r=this.resModel.get("engineVersion"),this.resModel.set("engineVersion",t),this.resModel.setDefaultParameterGroup(r),this.resModel.setDefaultOptionGroup(r),this.renderOptionGroup(),this.renderParameterGroup(),this.renderLVIA()},changeClass:function(e,t,n){return this.resModel.set("instanceClass",t),this.setDefaultAllocatedStorage(),!0},setDefaultAllocatedStorage:function(){var e,t,n;n=this.resModel.getAllocatedRange(),e=this.resModel.get("allocatedStorage");if(n.min>e||n.max<e)return t=this.resModel.getDefaultAllocatedStorage(),this.resModel.set("allocatedStorage",t),$("#property-dbinstance-storage").val(t),this.updateIOPSCheckStatus()},_getTimeData:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b;t={startHour:"00",startMin:"00",startTime:"00:00",duration:.5,startWeek:"Mondey"};if(!e)return t;try{return b=function(e){return e.length===1?"0"+e:e},y=e.split("-"),m=y[0],u=y[1],v=m.split(":"),o=u.split(":"),v.length===3&&(g=v[0],a=o[0],v=v.slice(1),o=o.slice(1)),c=Number(v[0]),p=Number(v[1]),i=Number(o[0]),s=Number(o[1]),l=new Date,r=new Date(l),l.setHours(c),l.setMinutes(p),r.setHours(i),r.setMinutes(s),n=(r-l)/1e3/60/60,n<0&&(n=24+n),h=b(String(c)),d=b(String(p)),{startHour:h,startMin:d,startTime:""+h+":"+d,duration:n,startWeek:g}}catch(w){return f=w,t}},_getTimeStr:function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d,v,m;r=function(e){var t;return t=String(e),t.length===1&&(t="0"+t),t};try{return d=e.split(":"),h=Number(d[0]),p=Number(d[1]),c=new Date,c.setHours(h),c.setMinutes(p),i=new Date(c.getTime()+36e5*t),s=i.getHours(),o=i.getMinutes(),h=r(h),p=r(p),s=r(s),o=r(o),e=""+h+":"+p,u=""+s+":"+o,n&&(a=n,m=["mon","tue","wed","thu","fri","sat","sun"],c.getDay()!==i.getDay()&&(v=m.indexOf(n)+1,f=(v+1)%7,a=m[f-1]),e=""+n+":"+e,u=""+a+":"+u),""+e+"-"+u}catch(g){return l=g,""}},_setBackupTime:function(){var e,t,n;return t=$("#property-dbinstance-backup-window-start-time").val(),e=Number($("#property-dbinstance-backup-window-duration .selection").text()),n=this._getTimeStr(t,e),this.resModel.set("backupWindow",n)},_setMaintenanceTime:function(){var e,t,n,r;return t=$("#property-dbinstance-maintenance-window-start-time").val(),e=Number($("#property-dbinstance-maintenance-window-duration .selection").text()),r=$("#property-dbinstance-maintenance-window-start-day-select").find(".item.selected").data("id"),n=this._getTimeStr(t,e,r),this.resModel.set("maintenanceWindow",n)},getModelJSON:function(){var e;return e=this.resModel.toJSON(),this.isAppEdit&&(e.isAppEdit=this.isAppEdit,this.appModel&&_.extend(e,this.appModel.toJSON()),_.extend(e,this.getOriginAttr())),e.snapshotId=e.instanceId?"":e.snapshotId,e.isCanPromote=this.isCanPromote(),e.isPromoted=this.isPromoted(),e.isPromote=this.isCanPromote()||this.isPromoted(),e},isPromoted:function(){var e,t;return e=l(f.RESTYPE.DBINSTANCE,Design.instance().region()).get(this.resModel.get("appId")),e?(t=e.get("ReadReplicaSourceDBInstanceIdentifier"),this.isAppEdit&&t&&!this.resModel.master()):!1},isCanPromote:function(){var e,t;return e=l(f.RESTYPE.DBINSTANCE,Design.instance().region()).get(this.resModel.get("appId")),e?(t=e.get("ReadReplicaSourceDBInstanceIdentifier"),this.isAppEdit&&t&&this.resModel.master()):!1},setPromote:function(){return this.resModel.unsetMaster(),this.resModel.autobackup(1)},unsetPromote:function(){var e,t,n;e=(n=l(f.RESTYPE.DBINSTANCE,Design.instance().region()).get(this.resModel.get("appId")))!=null?n.get("ReadReplicaSourceDBInstanceIdentifier"):void 0;if(e){t=Design.modelClassForType(f.RESTYPE.DBINSTANCE).findWhere({appId:e});if(t)return this.resModel.setMaster(t)}},getOriginAttr:function(){var e,t;return this.originComp&&this.appModel?(e=this.originComp.resource.AllocatedStorage,t=this.originComp.resource.Iops,{originAllocatedStorage:e,originIOPS:t,originBackupWindow:this.appModel.get("PreferredBackupWindow"),originMaintenanceWindow:this.appModel.get("PreferredMaintenanceWindow")}):null},render:function(){var e,t,n,r,i,u,a,l,h,p,d,v,m;return n=this.getModelJSON(),r=this._getTimeData(n.backupWindow),l=this._getTimeData(n.maintenanceWindow),n.backup=r,n.maintenance=l,n.backupDurations=this.genDuration(r.duration),n.maintenanceDurations=this.genDuration(l.duration),n.hasSlave=!!this.resModel.slaves().length,n.engineType=this.resModel.engineType(),n.isChanged=this.checkChange(),_.extend(n,{isOracle:this.resModel.isOracle(),isSqlserver:this.resModel.isSqlserver(),isPostgresql:this.resModel.isPostgresql(),isMysql:this.resModel.isMysql()}),this.resModel.master()&&(n.sourceDbName=this.resModel.master().get("name")),p=this.resModel.getSpecifications(),a=this.resModel.getLVIA(p),n.licenses=a[0],n.versions=a[1],n.classes=a[2],d=s,this.isAppEdit&&(m=this.resModel.get("engine"))!=="sqlserver-ee"&&m!=="sqlserver-se"&&(n.hideAZConfig=!0),this.resModel.master()?(this.isAppEdit?n.hideAZConfig=!0:d=o,n.masterIops=this.resModel.master().get("iops")):n.snapshotId&&(d=s,h=this.resModel.getSnapshotModel(),n.snapshotSize=Number((h!=null?h.get("AllocatedStorage"):void 0)||this.resModel.get("allocatedStorage"))),this.resModel.isOracle()&&(n.isOracle=!0,n.oracleCharset=_.map(Design.modelClassForType(f.RESTYPE.DBINSTANCE).oracleCharset,function(e){return{charset:e,selected:e===n.characterSetName}})),this.resModel.isSqlserver()?n.iopsInfo="Requires a fixed ratio of 10 IOPS / GB storage":n.iopsInfo="Supports IOPS / GB ratios between 3 and 10",this.$el.html(d(n)),u=this.checkChange.bind(this),i=this.changeApplyImmediately.bind(this),this.$el.find(".apply-immediately-section").insertAfter("header.property-sidebar-title").click(i),$(".property-panel-wrapper").toggleClass("immediately",u()),this.setTitle(n.name),this.renderLVIA(),this.renderOptionGroup(),v=l!=null?l.startWeek:void 0,v&&(t=$("#property-dbinstance-maintenance-window-start-day-select"),e=t.find(".item[data-id='"+v+"']").addClass("selected"),t.find(".selection").text(e.text())),this.updateIOPSCheckStatus(),this.pgDropdown=(new c(this.resModel)).renderDropdown(),$("#property-dbinstance-parameter-group-select").html(this.pgDropdown.el),this.bindParsley(),$("#property-dbinstance-maintenance-window-start-time, #property-dbinstance-backup-window-start-time").timepicker({timeFormat:"H:i",step:1}),this.isAppEdit&&this.getInstanceStatus(),this.resModel.on("change:iops",function(e){var t,n;if(this.isAppEdit)return n=that.getOriginAttr(),t=this.$el.find(".property-info-iops-adjust-tip"),n===e?t.removeClass("hide"):t.addClass("hide")}),n.name},bindParsley:function(){var e,t,n;return t=this,e=this.resModel,n=function(e){if(!/^(([0-1]?[0-9])|(2?[0-3])):[0-5]?[0-9]$/.test(e))return"Provide a valid time value from 00:00 to 23:59."},this.$("#property-dbinstance-backup-window-start-time").parsley("custom",n),this.$("#property-dbinstance-maintenance-window-start-time").parsley("custom",n),this.$("#property-dbinstance-database-name").parsley("custom",function(t){switch(e.engineType()){case"mysql":if(t.length>64)return"Max length is 64.";break;case"postgresql":if(t.length>63)return"Max length is 63.";if(!/[a-z_]/.test(t[0]))return"Must begin with a letter or an underscore";break;case"oracle":if(t.length>8)return"Max length is 8."}return null}),this.$("#property-dbinstance-storage").parsley("custom",function(e){var n,r,i,s,o,u,a,f;f=Number(e),u=t.getOriginAttr(),n=t.resModel.getAllocatedRange(),s=n.min,i=n.max;if(t.isAppEdit){if(u&&f<u.originAllocatedStorage)return"Allocated storage cannot be reduced.";r=f-u.originAllocatedStorage;if(r>0){o=Math.ceil(u.originAllocatedStorage*.1);if(r<o)return"Allocated storage must increase by at least 10%, for a new storage size of at least "+(u.originAllocatedStorage+o)+"."}}if(!(f>=s&&f<=i))return"Must be an integer from "+s+" to "+i;a=t.resModel.source();if(a&&f<+a.get("AllocatedStorage"))return"Snapshot storage need large than original value"}),this.$("#property-dbinstance-iops-value").parsley("custom",function(e){var n,r,i,s;return s=$("#property-dbinstance-storage").val(),i=t._getIOPSRange(s),n=t._getDefaultIOPS(s),r=Number(e),r<1e3?"Require at least 1000 IOPS":!t.resModel.isSqlserver()||r%1e3===0&&s*10===r?r>=i.minIOPS&&r<=i.maxIOPS?null:"Require IOPS / GB ratios between 3 and 10":"SQL Server IOPS requires a multiple of 1000 and a multiple of 10 for Allocated Storage"}),this.$("#property-dbinstance-master-password").parsley("custom",function(e){var n,r;return e.indexOf("/")!==-1||e.indexOf('"')!==-1||e.indexOf("@")!==-1?'Cannot contain character /,",@':(t.resModel.isMysql()&&(r=8,n=41),t.resModel.isOracle()&&(r=8,n=30),t.resModel.isSqlserver()&&(r=8,n=128),t.resModel.isPostgresql()&&(r=8,n=128),e.length>=r&&e.length<=n?null:"Must contain from "+r+" to "+n+" characters")}),this.$("#property-dbinstance-database-port").parsley("custom",function(t){return!e.isSqlserver()||+t!==1434&&+t!==3389&&+t!==47001&&+t!==49152&&+t!==49153&&+t!==49154&&+t!==49155&&+t!==49156?null:"This value can't be 1434, 3389, 47001, 49152-49156"})},renderOptionGroup:function(){var e,t,n,r,s,o,a,c;c=Design.instance().region(),t=this.getModelJSON(),t.canCustomOG=!1,t.ogName=this.resModel.getOptionGroupName(),r=l(f.RESTYPE.DBENGINE,c),s=r.getOptionGroupsByEngine(c,t.engine),s&&(a=s[this.resModel.getMajorVersion()]),n=r.getDefaultByNameVersion(c,t.engine,t.engineVersion),n&&n.canCustomOG?t.canCustomOG=n.canCustomOG:s&&a&&(t.canCustomOG=!0),this.$el.find(".property-dbinstance-optiongroup").html(u.optionGroupDropDown(t));if(t.canCustomOG)return e=this.$el.find(".property-dbinstance-optiongroup-placeholder"),o=new i({el:e,dbInstance:this.resModel}),e.html(o.render({engine:t.engine,engineVersion:t.engineVersion,majorVersion:this.resModel.getMajorVersion()}).el)},renderParameterGroup:function(){return this.pgDropdown.setSelection(this.resModel.get("pgName")),null},renderLVIA:function(){var e,t,n,r,i,s,o,a,l,c,h,p;c=this.resModel.getSpecifications(),o=this.resModel.getLVIA(c),r={licenses:o[0],versions:o[1],classes:o[2],azCapable:o[3]},e=this.getModelJSON(),e.classInfo=this.resModel.getInstanceClassDict(),_.extend(r,e),$("#lvia-container").html(u.lvi(r)),c=this.resModel.getSpecifications(),o=this.resModel.getLVIA(c),a=o[3],s=this.resModel.get("engine"),i=!1;if(s==="sqlserver-ee"||s==="sqlserver-se")i=!0;return a||this.resModel.set("multiAz",""),l={disableMutilAZForMirror:i,multiAZCapable:a},l=_.extend(l,e),h=this.resModel.parent(),l.subnetGroupName=h.get("name"),n=h.get("__connections"),t={},_.each(n,function(e){var n;return n=e.getTarget(f.RESTYPE.SUBNET).parent().get("name"),t[n]=!0,null}),p=_.size(t),p<2&&(l.azNotEnough=!0),a&&$("#property-dbinstance-mutil-az").html(u.propertyDbinstanceMutilAZ(l)),this.renderAZList(),this},renderAZList:function(){var t,n,r,i,s,o,a,l,c,h,p,d;return p=this.resModel.getSpecifications(),a=this.resModel.getLVIA(p),l=a[4],r=this.getModelJSON(),c=Design.instance().get("region"),o=Design.modelClassForType(f.RESTYPE.AZ).allObjects(),o=_.map(o,function(e){return e.get("name")}),i=[],_.each(l,function(e){return i.push(e),null}),i=_.intersection(i,o),s=_.map(i,function(e){return{name:e}}),$("#property-dbinstance-preferred-az").html(u.preferred_az(s)),r.az&&(d=r.az,e.call(i,d)>=0)?h=r.az:h="no",n=$("#property-dbinstance-preferred-az"),t=n.find(".item[data-id='"+h+"']").addClass("selected"),n.find(".selection").text(t.text())},changeInstanceName:function(e){var t,n,r;return n=this,t=$(e.currentTarget),MC.aws.aws.checkResName(this.resModel.get("id"),t,"DBInstance")&&(r=t.val().toLowerCase(),t.parsley("custom",function(e){var t,r,i;e=e.toLowerCase();if(e[e.length-1]==="-"||e.indexOf("--")!==-1)return t;n.resModel.isSqlserver()?(i=1,r=10):(i=1,r=58),t="Must contain from "+i+" to "+r+" alphanumeric characters or hyphens and first character must be a letter, cannot end with a hyphen or contain two consecutive hyphens";if(e.length<i||e.length>r)return t;if(!MC.validate("letters",e[0]))return t}),t.parsley("validate")&&(this.resModel.setName(r),this.setTitle(r))),null},changeMutilAZ:function(e){var t,n,r;return r=e.target.checked,n=$(".property-dbinstance-preferred-az"),r?(n.find(".item").remove("selected"),t=n.find(".item[data-id='no']").addClass("selected"),n.find(".selection").text(t.text()),n.hide(),this.resModel.set("az",""),this.renderAZList()):n.show(),this.resModel.set("multiAz",r)},changeAZ:function(e,t,n){return t==="no"?this.resModel.set("az",""):this.resModel.set("az",t)},updateIOPSCheckStatus:function(e){var t,n,r,i;i=this,e?r=e:r=i.resModel.get("allocatedStorage");if(!i.resModel.master()||!!i.isAppEdit)return t=i.resModel.get("iops"),n=this._getIOPSRange(r),n.minIOPS>=1e3||n.maxIOPS>=1e3?(this.resModel.isSqlserver()&&this.isAppEdit?i._disableIOPSCheck(!0):i._disableIOPSCheck(!1),$(".property-dbinstance-iops-check-tooltip").attr("data-tooltip","")):(n.minIOPS>=1e3||n.maxIOPS,i._disableIOPSCheck(!0),$(".property-dbinstance-iops-check-tooltip").attr("data-tooltip","Allocated Storage must be at least 100 GB to use Provisioned IOPS."))},_disableIOPSCheck:function(e){var t,n;n=$("#property-dbinstance-iops-check")[0];if(n)return e?($("#property-dbinstance-iops-check").attr("disabled","disabled"),$(".property-dbinstance-iops-value-section").hide(),$("#property-dbinstance-iops-value").val(""),this.resModel.setIops(0),n.checked=!1):($("#property-dbinstance-iops-check").removeAttr("disabled"),t=n.checked,t?($(".property-dbinstance-iops-value-section").show(),n.checked=!0):($(".property-dbinstance-iops-value-section").hide(),n.checked=!1))},_getIOPSRange:function(e){var t,n;return this.resModel.isSqlserver()?(n=e*10,t=e*10):(n=e*3,t=e*10),{minIOPS:n,maxIOPS:t}},_getDefaultIOPS:function(e){var t,n,r,i;t=1e3,n=0,r=this._getIOPSRange(e);while(++n){i=t*n;if(i>=r.minIOPS&&i<=r.maxIOPS)return i;if(i>r.maxIOPS)return null}},changeAllocatedStorage:function(e){var t,n,r;n=this,t=$(e.target),r=Number(t.val());if(t.parsley("validate")&&n.changeProvisionedIOPS())return n.resModel.set("allocatedStorage",r),n.updateIOPSCheckStatus()},inputAllocatedStorage:function(e){var t,n,r;return n=this,t=$(e.target),r=Number(t.val()),n.updateIOPSCheckStatus(r)},changeProvisionedIOPSCheck:function(e){var t,n,r,i,s;i=this,s=e.target.checked,r=Number($("#property-dbinstance-storage").val()),n=this._getIOPSRange(r);if(this.resModel.master()&&!this.isAppEdit)return s?this.resModel.setIops(this.resModel.master().get("iops")):this.resModel.setIops(0);if(!s)return $(".property-dbinstance-iops-value-section").hide(),$("#property-dbinstance-iops-value").val(""),this.resModel.setIops(0);$(".property-dbinstance-iops-value-section").show();if(n.minIOPS>=1e3||n.maxIOPS>=1e3){t=this._getDefaultIOPS(r);if(t)return $("#property-dbinstance-iops-value").val(t),i.changeProvisionedIOPS()}},changeProvisionedIOPS:function(e){var t,n,r,i,s,o;return s=this,$("#property-dbinstance-iops-check")[0].checked?(i=$("#property-dbinstance-iops-value"),o=i.val(),t=Number(o),r=Number($("#property-dbinstance-storage").val()),i.parsley("validate")?(n=s.getOriginAttr(),n&&n.originIOPS&&t!==n.originIOPS?$(".property-info-iops-adjust-tip").show():$(".property-info-iops-adjust-tip").hide(),s.resModel.setIops(Number(t)),s.resModel.set("allocatedStorage",r),!0):!1):!0},changeUserName:function(e){var t,n,r;n=this,t=$(e.target),r=t.val(),t.parsley("custom",function(e){var t,r;if(MC.validate("alphanum",e)&&MC.validate("letters",e[0])){n.resModel.isMysql()&&(r=1,t=16),n.resModel.isOracle()&&(r=1,t=30),n.resModel.isSqlserver()&&(r=1,t=128),n.resModel.isPostgresql()&&(r=2,t=16);if(e.length>=r&&e.length<=t)return null}return"Must be "+r+" to "+t+" alphanumeric characters and first character must be a letter"});if(t.parsley("validate"))return this.resModel.set("username",r)},changePassWord:function(e){var t,n,r;n=this,t=$(e.target),r=t.val();if(t.parsley("validate"))return this.resModel.set("password",r)},changeDatabaseName:function(e){var t;t=$(e.currentTarget);if(!t.parsley("validate"))return;return this.resModel.set("dbName",t.val())},changeDatabasePort:function(e){var t;t=$(e.currentTarget);if(!t.parsley("validate"))return;return this.resModel.set("port",t.val())},changePublicAccessCheck:function(e){var t;return t=e.target.checked,this.resModel.set("accessible",t)},changeVersionUpdate:function(e){var t;return t=e.target.checked,this.resModel.set("autoMinorVersionUpgrade",t)},changeAutoBackupCheck:function(e){var t;return t=e.target.checked?"1":"0",this.changeBackupPeriod(null,t)},changeBackupPeriod:function(e,t){var n;if(e){n=$(e.currentTarget);if(!n.parsley("validate"))return;t=n.val()}else{if(!t)return void 0,null;$("#property-dbinstance-backup-period").val(t).parsley("validate")}return t!=="0"?($("#group-dbinstance-backup-period").removeClass("hide"),$("#property-dbinstance-auto-backup-group").removeClass("hide")):($("#group-dbinstance-backup-period").addClass("hide"),$("#property-dbinstance-auto-backup-group").addClass("hide")),this.resModel.autobackup(Number(t))},changeBackupOption:function(e){var t,n;return t=$("#property-dbinstance-backup-window-group"),n=$(e.currentTarget).val(),n==="window"?(t.show(),this.changeBackupTime()):(t.hide(),this.resModel.set("backupWindow",""))},changeMaintenanceOption:function(e){var t,n;return t=$("#property-dbinstance-maintenance-window-group"),n=$(e.currentTarget).val(),n==="window"?(t.show(),this.changeMaintenanceTime()):(t.hide(),this.resModel.set("maintenanceWindow",""))},changeBackupTime:function(e){if($("#property-dbinstance-backup-window-start-time").parsley("validate"))return this._setBackupTime()},changeMaintenanceTime:function(e){if($("#property-dbinstance-maintenance-window-start-time").parsley("validate"))return this._setMaintenanceTime()},getInstanceStatus:function(){var e,n,r,i,s;i=this,s=function(e){var t;return $(".property-dbinstance-status-icon-warning").remove(),i.appModel&&i.setTitle(i.appModel.get("name")),e===!0?($(".db-status-loading").remove(),$(".property-dbinstance-not-available-info").show(),t='<i class="property-dbinstance-status-icon-warning icon-warning"></i>'):e===!1?($(".db-status-loading").remove(),t=""):t='<div class="db-status-loading loading-spinner loading-spinner-small"></div>',i.prependTitle(t)},s(),r=Design.instance().region(),n=i.resModel.get("appId"),e=l(f.RESTYPE.DBINSTANCE,r).get(n);if(e)return t("rds_ins_DescribeDBInstances",{region_name:r,id:n}).then(function(t){var n,r,o,u,a;t=((a=t.DescribeDBInstancesResponse.DescribeDBInstancesResult.DBInstances)!=null?a.DBInstance:void 0)||[],n=_.isArray(t)?t[0]:t;if(n){u=e.get("ReadReplicaSourceDBInstanceIdentifier"),o=n.ReadReplicaSourceDBInstanceIdentifier;if(u!==o)e.set("ReadReplicaSourceDBInstanceIdentifier",o),App.workspaces.getAwakeSpace().view.propertyPanel.refresh();else{r=n.DBInstanceStatus;if(r!=="available"){s(!0);return}i.$el.find(".property-dbinstance-promote-replica").show()}}return s(!1)},function(){return s(!1)})}}),new p})}.call(this),define("workspaces/editor/property/dbinstance/template/app",["handlebars"],function(e){var t,n={};return t=function(e,t,n,r,i){function l(e,t){var n="",r;return n+='<span class="highlight-status">(Pending)=>['+a((r=(r=e&&e.PendingModifiedValues,r==null||r===!1?r:r.DbinstanceIdentifier),typeof r===u?r.apply(e):r))+"]</span>",n}function c(e,t){var r="",i;i=n["if"].call(e,(i=e&&e.Endpoint,i==null||i===!1?i:i.Address),{hash:{},inverse:f.program(6,p,t),fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;r+=":",i=n["if"].call(e,e&&e.Endpoint,{hash:{},inverse:f.program(10,v,t),fn:f.program(8,d,t),data:t});if(i||i===0)r+=i;i=n["if"].call(e,(i=e&&e.PendingModifiedValues,i==null||i===!1?i:i.Port),{hash:{},inverse:f.noop,fn:f.program(12,m,t),data:t});if(i||i===0)r+=i;return r}function h(e,t){var n;return a((n=(n=e&&e.Endpoint,n==null||n===!1?n:n.Address),typeof n===u?n.apply(e):n))}function p(e,t){return"(Not Ready)"}function d(e,t){var n;return a((n=(n=e&&e.Endpoint,n==null||n===!1?n:n.Port),typeof n===u?n.apply(e):n))}function v(e,t){return"Not Ready"}function m(e,t){var n="",r;return n+='<span class="highlight-status">(Pending)=>['+a((r=(r=e&&e.PendingModifiedValues,r==null||r===!1?r:r.Port),typeof r===u?r.apply(e):r))+"]</span>",n}function g(e,t){return"green"}function y(e,t){return"yellow"}function b(e,t){var n;return a((n=e&&e.DBInstanceStatus,typeof n===u?n.apply(e):n))}function w(e,t){return"Unavailable"}function E(e,t){var n="",r;return n+='<span class="highlight-status">(Pending)=>['+a((r=(r=e&&e.PendingModifiedValues,r==null||r===!1?r:r.EngineVersion),typeof r===u?r.apply(e):r))+"]</span>",n}function S(e,t){return"Yes"}function x(e,t){return"No"}function T(e,t){var n="",r;return n+='<span class="highlight-status">(Pending)=>['+a((r=(r=e&&e.PendingModifiedValues,r==null||r===!1?r:r.DBInstanceClass),typeof r===u?r.apply(e):r))+"]</span>",n}function N(e,t){var n;return a((n=e&&e.Iops,typeof n===u?n.apply(e):n))}function C(e,t){return"Disabled"}function k(e,t){var n="",r;return n+='<span class="highlight-status">(Pending)=>['+a((r=(r=e&&e.PendingModifiedValues,r==null||r===!1?r:r.Iops),typeof r===u?r.apply(e):r))+"]</span>",n}function L(e,t){var n="",r;return n+='<span class="highlight-status">(Pending)=>['+a((r=(r=e&&e.PendingModifiedValues,r==null||r===!1?r:r.AllocatedStorage),typeof r===u?r.apply(e):r))+" GB]</span>",n}function A(e,t){var r="",i;r+="\n                ",i=n.each.call(e,e&&e.ReadReplicaDBInstanceIdentifiers,{hash:{},inverse:f.noop,fn:f.program(39,O,t),data:t});if(i||i===0)r+=i;return r+="\n            ",r}function O(e,t){var r="";return r+="\n                    <dt>"+a(n.i18n.call(e,"PROP_DBINSTANCE_READ_REPLICAS",{hash:{},data:t}))+"</dt>\n                    <dd>"+a(typeof e===u?e.apply(e):e)+"</dd>\n                ",r}function M(e,t){var r="",i;return r+="\n                <dt>"+a(n.i18n.call(e,"PROP_DBINSTANCE_REPLICAS_SOURCE",{hash:{},data:t}))+"</dt>\n                <dd>"+a((i=e&&e.ReadReplicaSourceDBInstanceIdentifier,typeof i===u?i.apply(e):i))+"</dd>\n            ",r}function _(e,t){var r="",i;return r+="<dt>"+a(n.i18n.call(e,"PROP_DBINSTANCE_NAME",{hash:{},data:t}))+"</dt>\n            <dd>"+a((i=e&&e.DBName,typeof i===u?i.apply(e):i))+"</dd>",r}function D(e,t){var r="",i;r+="\n                <dt>"+a(n.i18n.call(e,"PROP_DBINSTANCE_OG",{hash:{},data:t}))+"</dt>\n                <dd>",i=n.each.call(e,e&&e.optionGroups,{hash:{},inverse:f.noop,fn:f.program(46,P,t),data:t});if(i||i===0)r+=i;return r+="\n                </dd>\n            ",r}function P(e,t){var r="",i;r+="\n                    ",i=n["if"].call(e,e&&e.isDefault,{hash:{},inverse:f.program(49,B,t),fn:f.program(47,H,t),data:t});if(i||i===0)r+=i;return r+="\n                ",r}function H(e,t){var n="",r;return n+="\n                        "+a((r=e&&e.OptionGroupName,typeof r===u?r.apply(e):r))+'<span class="highlight-status '+a((r=e&&e.Status,typeof r===u?r.apply(e):r))+'">('+a((r=e&&e.Status,typeof r===u?r.apply(e):r))+")</span>\n                    ",n}function B(e,t){var n="",r;return n+='\n                        <a class="db-og-in-app">'+a((r=e&&e.OptionGroupName,typeof r===u?r.apply(e):r))+'</a><span class="highlight-status '+a((r=e&&e.Status,typeof r===u?r.apply(e):r))+'">('+a((r=e&&e.Status,typeof r===u?r.apply(e):r))+")</span>\n                    ",n}function j(e,t){var r="",i;r+="\n                <dt>"+a(n.i18n.call(e,"PROP_DBINSTANCE_PG",{hash:{},data:t}))+"</dt>\n                <dd>\n                    ",i=n.each.call(e,e&&e.DBParameterGroups,{hash:{},inverse:f.noop,fn:f.program(52,F,t),data:t});if(i||i===0)r+=i;return r+="\n                </dd>\n            ",r}function F(e,t){var n="",r;return n+="\n                        "+a((r=e&&e.DBParameterGroupName,typeof r===u?r.apply(e):r))+'<span class="highlight-status '+a((r=e&&e.ParameterApplyStatus,typeof r===u?r.apply(e):r))+'">('+a((r=e&&e.ParameterApplyStatus,typeof r===u?r.apply(e):r))+")</span>\n                    ",n}function I(e,t){var r="",i;r+="(",i=n.each.call(e,(i=e&&e.DBSubnetGroup,i==null||i===!1?i:i.Subnets),{hash:{},inverse:f.noop,fn:f.program(55,q,t),data:t});if(i||i===0)r+=i;return r+=")",r}function q(e,t){var n="",r;return n+=a((r=e&&e.SubnetIdentifier,typeof r===u?r.apply(e):r))+", ",n}function R(e,t){var r="",i;return r+="\n                <dt>"+a(n.i18n.call(e,"PROP_DBINSTANCE_PREFERRED_ZONE",{hash:{},data:t}))+"</dt>\n                <dd>"+a((i=e&&e.AvailabilityZone,typeof i===u?i.apply(e):i))+"</dd>\n            ",r}function U(e,t){var r="",i;return r+="\n                <dt>"+a(n.i18n.call(e,"PROP_DBINSTANCE_SECONDARY_ZONE",{hash:{},data:t}))+"</dt>\n                <dd>"+a((i=e&&e.SecondaryAvailabilityZone,typeof i===u?i.apply(e):i))+"</dd>\n            ",r}function z(e,t){return"true"}function W(e,t){return"false"}function X(e,t){var n="",r;return n+="Enabled ("+a((r=e&&e.BackupRetentionPeriod,typeof r===u?r.apply(e):r))+" day)",n}function V(e,t){var r="",i;return r+="\n                <dt>"+a(n.i18n.call(e,"PROP_DBINSTANCE_BACKUP_WINDOW",{hash:{},data:t}))+"</dt>\n                <dd>"+a((i=e&&e.PreferredBackupWindow,typeof i===u?i.apply(e):i))+"</dd>\n            ",r}function $(e,t){var r="",i;return r+="\n                <dt>"+a(n.i18n.call(e,"PROP_DBINSTANCE_MAINTENANCE_WINDOW",{hash:{},data:t}))+"</dt>\n                <dd>"+a((i=e&&e.PreferredMaintenanceWindow,typeof i===u?i.apply(e):i))+"</dd>\n            ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<article class="property-app app-dbinstance">\n    <div class="option-group-head expand">\n        '+a(n.i18n.call(t,"PROP_DBINSTANCE_TIT_DETAIL",{hash:{},data:i}))+'\n        <a href="#" class="icon-syslog tooltip property-btn-get-system-log action-link" data-tooltip="'+a(n.i18n.call(t,"PROP_DB_INSTANCE_TIP_GET_LOG",{hash:{},data:i}))+'" ></a>\n    </div>\n\n    <div class="option-group" style="display: block">\n        <dl class="dl-vertical">\n            <dt>'+a(n.i18n.call(t,"PROP_DBINSTANCE_APP_DBINSTANCE_ID",{hash:{},data:i}))+"</dt>\n            <dd>"+a((o=t&&t.DBInstanceIdentifier,typeof o===u?o.apply(t):o)),o=n["if"].call(t,(o=t&&t.PendingModifiedValues,o==null||o===!1?o:o.DbinstanceIdentifier),{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+="</dd>\n            <dt>"+a(n.i18n.call(t,"PROP_DBINSTANCE_ENDPOINT",{hash:{},data:i}))+"</dt>\n            <dd>",o=n["if"].call(t,t&&t.Endpoint,{hash:{},inverse:f.noop,fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;s+="</dd>\n            <dt>"+a(n.i18n.call(t,"PROP_DBINSTANCE_STATUS",{hash:{},data:i}))+'</dt>\n            <dd><i class="status status-',o=n.ifCond.call(t,t&&t.DBInstanceStatus,"available",{hash:{},inverse:f.program(16,y,i),fn:f.program(14,g,i),data:i});if(o||o===0)s+=o;s+='"></i>',o=n["if"].call(t,t&&t.DBInstanceStatus,{hash:{},inverse:f.program(20,w,i),fn:f.program(18,b,i),data:i});if(o||o===0)s+=o;s+="</dd>\n            <dt>"+a(n.i18n.call(t,"PROP_DBINSTANCE_ENGINE",{hash:{},data:i}))+"</dt>\n            <dd>"+a((o=t&&t.Engine,typeof o===u?o.apply(t):o))+"("+a((o=t&&t.EngineVersion,typeof o===u?o.apply(t):o))+")",o=n["if"].call(t,(o=t&&t.PendingModifiedValues,o==null||o===!1?o:o.EngineVersion),{hash:{},inverse:f.noop,fn:f.program(22,E,i),data:i});if(o||o===0)s+=o;s+="</dd>\n            <dt>"+a(n.i18n.call(t,"PROP_DBINSTANCE_AUTO_UPGRADE",{hash:{},data:i}))+"</dt>\n            <dd>",o=n["if"].call(t,t&&t.AutoMinorVersionUpgrade,{hash:{},inverse:f.program(26,x,i),fn:f.program(24,S,i),data:i});if(o||o===0)s+=o;s+="</dd>\n            <dt>"+a(n.i18n.call(t,"PROP_DBINSTANCE_CLASS",{hash:{},data:i}))+"</dt>\n            <dd>"+a((o=t&&t.DBInstanceClass,typeof o===u?o.apply(t):o)),o=n["if"].call(t,(o=t&&t.PendingModifiedValues,o==null||o===!1?o:o.DBInstanceClass),{hash:{},inverse:f.noop,fn:f.program(28,T,i),data:i});if(o||o===0)s+=o;s+="</dd>\n            <dt>"+a(n.i18n.call(t,"PROP_DBINSTANCE_IOPS",{hash:{},data:i}))+"</dt>\n            <dd>",o=n["if"].call(t,t&&t.Iops,{hash:{},inverse:f.program(32,C,i),fn:f.program(30,N,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,(o=t&&t.PendingModifiedValues,o==null||o===!1?o:o.Iops),{hash:{},inverse:f.noop,fn:f.program(34,k,i),data:i});if(o||o===0)s+=o;s+="</dd>\n            <dt>"+a(n.i18n.call(t,"PROP_DBINSTANCE_STORAGE",{hash:{},data:i}))+"</dt>\n            <dd>"+a((o=t&&t.AllocatedStorage,typeof o===u?o.apply(t):o))+" GB",o=n["if"].call(t,(o=t&&t.PendingModifiedValues,o==null||o===!1?o:o.AllocatedStorage),{hash:{},inverse:f.noop,fn:f.program(36,L,i),data:i});if(o||o===0)s+=o;s+="</dd>\n            <dt>"+a(n.i18n.call(t,"PROP_DBINSTANCE_USERNAME",{hash:{},data:i}))+"</dt>\n            <dd>"+a((o=t&&t.MasterUsername,typeof o===u?o.apply(t):o))+"</dd>\n            ",o=n["if"].call(t,(o=t&&t.ReadReplicaDBInstanceIdentifiers,o==null||o===!1?o:o.length),{hash:{},inverse:f.noop,fn:f.program(38,A,i),data:i});if(o||o===0)s+=o;s+="\n            ",o=n["if"].call(t,t&&t.ReadReplicaSourceDBInstanceIdentifier,{hash:{},inverse:f.noop,fn:f.program(41,M,i),data:i});if(o||o===0)s+=o;s+='\n        </dl>\n    </div>\n\n    <div class="option-group-head">'+a(n.i18n.call(t,"PROP_DBINSTANCE_DBCONFIG",{hash:{},data:i}))+'</div>\n    <div class="option-group">\n        <dl class="dl-vertical">\n            ',o=n["if"].call(t,t&&t.DBName,{hash:{},inverse:f.noop,fn:f.program(43,_,i),data:i});if(o||o===0)s+=o;s+="\n            <dt>"+a(n.i18n.call(t,"PROP_DBINSTANCE_PORT",{hash:{},data:i}))+"</dt>\n            <dd>",o=n["if"].call(t,t&&t.Endpoint,{hash:{},inverse:f.program(10,v,i),fn:f.program(8,d,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,(o=t&&t.PendingModifiedValues,o==null||o===!1?o:o.Port),{hash:{},inverse:f.noop,fn:f.program(12,m,i),data:i});if(o||o===0)s+=o;s+="</dd>\n            ",o=n["if"].call(t,(o=t&&t.optionGroups,o==null||o===!1?o:o.length),{hash:{},inverse:f.noop,fn:f.program(45,D,i),data:i});if(o||o===0)s+=o;s+="\n            ",o=n["if"].call(t,(o=t&&t.DBParameterGroups,o==null||o===!1?o:o.length),{hash:{},inverse:f.noop,fn:f.program(51,j,i),data:i});if(o||o===0)s+=o;s+='\n\n        </dl>\n    </div>\n    <div class="option-group-head">'+a(n.i18n.call(t,"PROP_DBINSTANCE_NETWORK_AVAILABILITY",{hash:{},data:i}))+'</div>\n    <div class="option-group">\n        <dl class="dl-vertical">\n            <dt>'+a(n.i18n.call(t,"PROP_DBINSTANCE_SUBNETGROUP",{hash:{},data:i}))+"</dt>\n            <dd>"+a((o=(o=t&&t.DBSubnetGroup,o==null||o===!1?o:o.DBSubnetGroupName),typeof o===u?o.apply(t):o))+"\n                ",o=n["if"].call(t,(o=(o=t&&t.DBSubnetGroup,o==null||o===!1?o:o.Subnets),o==null||o===!1?o:o.length),{hash:{},inverse:f.noop,fn:f.program(54,I,i),data:i});if(o||o===0)s+=o;s+="</dd>\n            ",o=n["if"].call(t,t&&t.AvailabilityZone,{hash:{},inverse:f.noop,fn:f.program(57,R,i),data:i});if(o||o===0)s+=o;s+="\n            ",o=n["if"].call(t,t&&t.SecondaryAvailabilityZone,{hash:{},inverse:f.noop,fn:f.program(59,U,i),data:i});if(o||o===0)s+=o;s+="\n            <dt>"+a(n.i18n.call(t,"PROP_DBINSTANCE_PUBLIC_ACCESS",{hash:{},data:i}))+"</dt>\n            <dd>",o=n["if"].call(t,t&&t.PubliclyAccessible,{hash:{},inverse:f.program(63,W,i),fn:f.program(61,z,i),data:i});if(o||o===0)s+=o;s+="</dd>\n            <dt>"+a(n.i18n.call(t,"PROP_DBINSTANCE_LICENSE_MODEL",{hash:{},data:i}))+"</dt>\n            <dd>"+a((o=t&&t.LicenseModel,typeof o===u?o.apply(t):o))+'</dd>\n        </dl>\n    </div>\n    <div class="option-group-head">'+a(n.i18n.call(t,"PROP_DBINSTANCE_BACKUP_MAINTENANCE",{hash:{},data:i}))+'</div>\n    <div class="option-group">\n        <dl class="dl-vertical">\n            <dt>'+a(n.i18n.call(t,"PROP_DBINSTANCE_AUTOBACKUP",{hash:{},data:i}))+"</dt>\n            <dd>",o=n["if"].call(t,t&&t.BackupRetentionPeriod,{hash:{},inverse:f.program(32,C,i),fn:f.program(65,X,i),data:i});if(o||o===0)s+=o;s+="</dd>\n            <dt>"+a(n.i18n.call(t,"PROP_DBINSTANCE_LAST_RESTORE",{hash:{},data:i}))+"</dt>\n            <dd>"+a(n.timeStr.call(t,t&&t.LatestRestorableTime,{hash:{},data:i}))+"</dd>\n            ",o=n["if"].call(t,t&&t.PreferredBackupWindow,{hash:{},inverse:f.noop,fn:f.program(67,V,i),data:i});if(o||o===0)s+=o;s+="\n            ",o=n["if"].call(t,t&&t.PreferredMaintenanceWindow,{hash:{},inverse:f.noop,fn:f.program(69,$,i),data:i});if(o||o===0)s+=o;return s+='\n        </dl>\n    </div>\n\n    <div class="option-group-head">'+a(n.i18n.call(t,"PROP_STACK_TIT_SG",{hash:{},data:i}))+'<span class="property-head-num-wrap">(<span id="property-head-sg-num"></span>)</span></div>\n    <div class="option-group sg-group"></div>\n</article>',s},n.appView=e.template(t),t=function(e,t,n,r,i){function f(e,t){var r="",i;r+='\n<tr class="item">\n    <td>'+u((i=e&&e.LogFileName,typeof i===o?i.apply(e):i))+"</td>\n    <td>"+u(n.timeStr.call(e,e&&e.LastWritten,{hash:{},data:t}))+"</td>\n    <td>"+u((i=e&&e.Size,typeof i===o?i.apply(e):i))+"</td>\n    <td>",i=n["if"].call(e,e&&e.LogFileName,{hash:{},inverse:a.noop,fn:a.program(2,l,t),data:t});if(i||i===0)r+=i;r+="</td>\n    ",i=n.unless.call(e,e&&e.isSafari,{hash:{},inverse:a.noop,fn:a.program(4,c,t),data:t});if(i||i===0)r+=i;return r+="\n</tr>\n",r}function l(e,t){var n="",r;return n+='<a class="view" data-file-name="'+u((r=e&&e.LogFileName,typeof r===o?r.apply(e):r))+'">View</a>',n}function c(e,t){var r="",i;r+="\n    <td>\n        ",i=n["if"].call(e,e&&e.LogFileName,{hash:{},inverse:a.noop,fn:a.program(5,h,t),data:t});if(i||i===0)r+=i;return r+="\n    </td>\n    ",r}function h(e,t){var n="",r;return n+='<a class="download" data-file-name="'+u((r=e&&e.LogFileName,typeof r===o?r.apply(e):r))+'">Download</a>',n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o="function",u=this.escapeExpression,a=this;return s=n.each.call(t,t,{hash:{},inverse:a.noop,fn:a.program(1,f,i),data:i}),s||s===0?s:""},n.log_list=e.template(t),t=function(e,t,n,r,i){function f(e,t){var n="",r;return n+='\n<tr class="item">\n    <td>'+u((r=e&&e.Date,typeof r===o?r.apply(e):r))+"</td>\n    <td>"+u((r=e&&e.SourceIdentifier,typeof r===o?r.apply(e):r))+"</td>\n    <td>"+u((r=e&&e.Message,typeof r===o?r.apply(e):r))+"</td>\n</tr>\n",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o="function",u=this.escapeExpression,a=this;return s=n.each.call(t,t,{hash:{},inverse:a.noop,fn:a.program(1,f,i),data:i}),s||s===0?s:""},n.event_list=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function";return s+='<section class="db-sys-log-content font-mono">\n    '+u(n.breaklines.call(t,t&&t.LogFileData,{hash:{},data:i}))+'\n    <br/>\n    ----------------------- END OF LOG ----------------------\n</section>\n<div class="action">\n    <button class="btn btn-blue refresh-log" data-file-name="'+u((o=t&&t.filename,typeof o===a?o.apply(t):o))+'">Refresh</button>\n    <button class="btn btn-silver close cancel">Close</button>\n</div>',s},n.log_content=e.template(t),t=function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="text-center no-data">No records found.</div>'},n.list_empty=e.template(t),n}),function(){define("workspaces/editor/property/dbinstance/app_view",["../base/view","./template/app","og_manage_app","constant","toolbar_modal","ApiRequest","JsonExporter"],function(e,t,n,r,i,s,o){var u;return u=e.extend({events:{"click .db-og-in-app":"openOgModal","click .property-btn-get-system-log":"openModal"},initialize:function(){return this.isSafari=$("body").hasClass("safari")},render:function(){var e;return e=this.model?this.model.toJSON():this.resModel.serialize().component.resource,e.Endpoint||(e=_.extend(this.resModel.serialize().component.resource,e),e.DBSubnetGroup.DBSubnetGroupName=this.resModel.parent().get("name")),e.optionGroups=_.map(e.OptionGroupMemberships,function(e){var t;return t=Design.modelClassForType(r.RESTYPE.DBOG).findWhere({appId:e.OptionGroupName}),_.extend({},e,{isDefault:!t,uid:(t!=null?t.id:void 0)||""})}),this.$el.html(t.appView(e)),this.resModel.get("name")},renderLogList:function(e){var n;return n=this,e?(e=_.map(e,function(e){return e.isSafari=n.isSafari,e}),this.modal.options.columns=this.getLogColumns(),this.modal.setContent(t.log_list(e))):this.modal.setContent(t.list_empty({}),!0),null},renderEventList:function(e){var n;return n=this,e?(this.modal.options.columns=this.getEventColumns(),this.modal.setContent(t.event_list(e))):this.modal.setContent(t.list_empty({}),!0),null},openOgModal:function(){var e;return e=this.resModel.connectionTargets("OgUsage")[0],new n({model:e})},openModal:function(){return new i(this.getModalOptions()),this.modal.on("slidedown",this.switchLogEvent,this),this.modal.delegate({"click a.view":"viewLog","click a.download":"downloadLog","click .refresh-log":"viewLog"},this),this.modal.render(),this.switchLog(),!1},switchLog:function(){return this.getLogList()},switchEvent:function(){return this.getEventList()},switchLogEvent:function(e){return this.modal.toggleSlide(!1).renderListLoading(),e==="event"?this.switchEvent():this.switchLog()},getEventList:function(){var e;return e=this,s("rds_DescribeEvents",{region_name:this.resModel.design().region(),source_id:this.resModel.get("appId"),source_type:"db-instance",event_categories:null,duration:20160}).then(function(t){var n,r,i,s;return n=(t!=null?(r=t.DescribeEventsResponse)!=null?(i=r.DescribeEventsResult)!=null?(s=i.Events)!=null?s.Event:void 0:void 0:void 0:void 0)||null,n&&!_.isArray(n)&&(n=[n]),e.renderEventList(n)},function(){}),null},getLogList:function(){var e;return e=this,s("rds_DescribeDBLogFiles",{db_identifier:this.resModel.get("appId"),region_name:this.resModel.design().region()}).then(function(t){var n,r,i,s;return n=(t!=null?(r=t.DescribeDBLogFilesResponse)!=null?(i=r.DescribeDBLogFilesResult)!=null?(s=i.DescribeDBLogFiles)!=null?s.DescribeDBLogFilesDetails:void 0:void 0:void 0:void 0)||null,n&&!_.isArray(n)&&(n=[n]),e.renderLogList(n)},function(){return e.renderLogList(null),null}),null},viewLog:function(e){var n,r;return r=this.modal,n=$(e.currentTarget).data("fileName"),r.toggleSlide(!0),this.getLogContent(n).then(function(e){return e.filename=n,r.setSlide(t.log_content(e))},function(){var e;return e={LogFileData:"",filename:n},r.setSlide(t.log_content(e))})},downloadLog:function(e){var t,n;return n=this.modal,t=$(e.currentTarget).data("fileName"),n.toggleSlide(!0),this.getLogContent(t).then(function(e){var r,i;return n.toggleSlide(!1),i=o.download,r=new Blob([e.LogFileData||""]),i(r,t)})},getLogContent:function(e){return s("rds_DownloadDBLogFilePortion",{db_identifier:this.resModel.get("appId"),log_filename:e}).then(function(e){var t;return(e!=null?(t=e.DownloadDBLogFilePortionResponse)!=null?t.DownloadDBLogFilePortionResult:void 0:void 0)||{}},function(){return{}})},getModalOptions:function(){var e,t,n;return n=this,e=this.resModel.get("appId"),t={title:"Log & Event: "+e,classList:"syslog-dbinstance",context:n,noCheckbox:!0,longtermActive:!0,disableScroll:!0,buttons:[{icon:"unknown",type:"log",name:"Log",active:!0},{icon:"unknown",type:"event",name:"Event"}]},t.columns=this.getLogColumns(),this.isSafari&&t.columns.pop(),t},getLogColumns:function(){return[{sortable:!0,name:"Name"},{sortable:!0,rowType:"datetime",name:"Last Written",width:"28%"},{sortable:!0,rowType:"number",width:"10%",name:"Size(B)"},{sortable:!1,width:"10%",name:"View"},{sortable:!1,width:"10%",name:"Download"}]},getEventColumns:function(){return[{sortable:!0,rowType:"datetime",name:"Time",width:"28%"},{sortable:!0,width:"20%",name:"Source"},{sortable:!1,name:"System Notes"}]}}),new u})}.call(this),function(){define("workspaces/editor/property/dbinstance/main",["Design","CloudResources","../base/main","./model","./view","./app_view","../sglist/main","constant","event"],function(e,t,n,r,i,s,o,u){var a;return a=n.extend({handleTypes:[u.RESTYPE.DBINSTANCE],onUnloadSubPanel:function(e){return o.onUnloadSubPanel(e),null},setupStack:function(){return null},initStack:function(t){return this.view=i,this.model=r,this.view.resModel=e.instance().component(t),this.view.isAppEdit=!1,null},afterLoadStack:function(){return o.loadModule(this.model),null},setupApp:function(){return null},initApp:function(n){var r;return r=e.instance().component(n),r.serialize().component.resource.ReadReplicaSourceDBInstanceIdentifier&&(n=r.serialize().component.resource.ReadReplicaSourceDBInstanceIdentifier.split(".")[0].split("{").pop()),this.model=t(u.RESTYPE.DBINSTANCE,e.instance().region()).get(r.get("appId"))||t(u.RESTYPE.DBSNAP,e.instance().region()).get(r.get("snapshotId"))||r,this.view=s,this.view.model=this.model,this.view.resModel=r,this.view.isAppEdit=!1,null},initAppEdit:function(n){var s,o;return o=e.instance().component(n),this.view=i,this.model=r,this.view.resModel=o,s=e.instance().__opsModel.getJsonData(),i.originComp=s.component[o.id],o.get("appId")?(this.view.isAppEdit=!0,this.view.appModel=t(u.RESTYPE.DBINSTANCE,e.instance().region()).get(o.get("appId"))):this.view.isAppEdit=!1,null},afterLoadAppEdit:function(){return o.loadModule(this.view.resModel),null},afterLoadApp:function(){return o.loadModule(this.view.resModel),null}}),null,a})}.call(this),define("workspaces/editor/property/subnetgroup/template/stack",["handlebars"],function(e){var t=function(e,t,n,r,i){function l(e,t){return"disabled"}function c(e,t){var r="",i;r+="\n<div class='option-group-category'>"+a((i=t==null||t===!1?t:t.key,typeof i===u?i.apply(e):i))+'</div>\n<dl class="dl-vertical sbg-list">\n',i=n.each.call(e,e,{hash:{},inverse:f.noop,fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;return r+="</dl> \n",r}function h(e,t){var n="",r;return n+="             \n    <dd>"+a((r=e&&e.name,typeof r===u?r.apply(e):r))+"</dd>\n    <dt>("+a((r=e&&e.cidr,typeof r===u?r.apply(e):r))+")</dt>\n",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<article class="property-subnet-group">\n  <div class="option-group-head expand">Subnet Groups Details</div>\n  <div class="option-group">\n\n   <section class="property-control-group" data-bind="true">\n    <label class="left" for="property-dbinstance-name" >Subnet Group Name</label>\n    <span class="required-input right">'+a(n.i18n.call(t,"PROP_INSTANCE_REQUIRE",{hash:{},data:i}))+'</span>\n    <input class="input"  type="text" value="'+a((o=t&&t.name,typeof o===u?o.apply(t):o))+'" id="property-subnet-name" data-ignore="true" data-required-rollback="true" ',o=n["if"].call(t,t&&t.isAppEdit,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+=' />\n  </section>\n\n\n  <section class="property-control-group" data-bind="true">\n    <label class="left" for="property-dbinstance-name" >Subnet Group Description</label>\n    <span class="required-input right">'+a(n.i18n.call(t,"PROP_INSTANCE_REQUIRE",{hash:{},data:i}))+'</span>\n    <input class="input"  type="text" value="'+a((o=t&&t.description,typeof o===u?o.apply(t):o))+'" id="property-subnet-desc" data-ignore="true" data-required-rollback="true"/>\n  </section>\n</div>\n\n<div class="option-group-head expand">Member<span class="property-head-num-wrap">('+a((o=t&&t.sbCount,typeof o===u?o.apply(t):o))+')</span>\n<button class="icon-edit tooltip add-rule" data-tooltip="Edit subnet group"></button></div>\n\n',o=n.each.call(t,t&&t.azSb,{hash:{},inverse:f.noop,fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;return s+="\n\n\n</article>",s};return e.template(t)}),function(){define("workspaces/editor/property/subnetgroup/view",["../base/view","./template/stack","i18n!/nls/lang.js","constant","Design","component/dbsbgroup/DbSubnetGPopup"],function(e,t,n,r,i,s){var o;return o=e.extend({events:{"change #property-subnet-name":"setName","change #property-subnet-desc":"setDesc","click .icon-edit":"editSgb"},setName:function(e){var t;t=$(e.currentTarget);if(t.parsley("validate"))return this.model.set("name",t.val())},setDesc:function(e){var t;t=$(e.currentTarget);if(t.parsley("validate"))return this.model.set("description",t.val())},editSgb:function(){var e,t;return t=this,e=new s({model:this.model}),this.listenTo(e,"update",function(){return t.render(),this.stopListening(e),e.remove()}),!1},render:function(){var e,n;return n=this.model.connectionTargets("SubnetgAsso").map(function(e){return{name:e.get("name"),cidr:e.get("cidr"),az:e.parent().get("name")}}),e=this.model.toJSON(),e.sbCount=n.length,e.azSb=_.groupBy(n,"az"),e.isAppEdit=this.isAppEdit,this.$el.html(t(e)),this.model.get("name")}}),new o})}.call(this),define("workspaces/editor/property/subnetgroup/template/app",["handlebars"],function(e){var t,n={};return t=function(e,t,n,r,i){function l(e,t){var r="",i;r+='\n        <div class="option-group-category">\n            '+a((i=e&&e.az,typeof i===u?i.apply(e):i))+"\n        </div>\n            ",i=n.each.call(e,e&&e.subnets,{hash:{},inverse:f.noop,fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;return r+="\n        ",r}function c(e,t){var n="",r;return n+='\n            <dl class="dl-vertical sbg-list">\n                <dd>'+a((r=e&&e.name,typeof r===u?r.apply(e):r))+"</dd>\n                <dt>("+a((r=e&&e.cidr,typeof r===u?r.apply(e):r))+")</dt>\n            </dl>\n            ",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<article class="property-app property-subnet-group">\n    <div class="option-group-head expand">'+a(n.i18n.call(t,"PROP_DBINSTANCE_TIT_DETAIL",{hash:{},data:i}))+'</div>\n    <div class="option-group">\n        <dl class="dl-vertical">\n            <dt>'+a(n.i18n.call(t,"PROP_DBINSTANCE_SUBNET_GROUP_NAME",{hash:{},data:i}))+"</dt>\n            <dd>"+a((o=t&&t.DBSubnetGroupName,typeof o===u?o.apply(t):o))+"</dd>\n            <dt>"+a(n.i18n.call(t,"PROP_DBINSTANCE_SUBNET_GROUP_DESC",{hash:{},data:i}))+"</dt>\n            <dd>"+a((o=t&&t.DBSubnetGroupDescription,typeof o===u?o.apply(t):o))+'</dd>\n        </dl>\n    </div>\n    <div class="option-group-head expand">'+a(n.i18n.call(t,"PROP_DBINSTANCE_SUBNET_GROUP_MEMBERS",{hash:{},data:i}))+'</div>\n    <div class="option-group">\n        ',o=n.each.call(t,t&&t.azSb,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n    </div>\n</article>",s},n.app=e.template(t),n}),function(){define("workspaces/editor/property/subnetgroup/app_view",["../base/view","./template/app","i18n!/nls/lang.js","constant","Design","CloudResources"],function(e,t,n,r,i,s){var o;return o=e.extend({render:function(){var e,n;if(!this.appModel)return;return e=this.appModel.toJSON(),e.azSb=this.getAzSb(),e.sbCount=((n=this.appModel.get("Subnets"))!=null?n.length:void 0)||0,this.$el.html(t.app(e)),this.model.get("name")},getAzSb:function(){var e,t;return e={},t=s(r.RESTYPE.SUBNET,i.instance().region()),_.each(this.appModel.get("Subnets"),function(n){var r,i;return r=n.SubnetAvailabilityZone.Name,i=t.get(n.SubnetIdentifier),e[r]||(e[r]=[]),e[r].push({name:i.get("subnetId"),cidr:i.get("cidrBlock")})}),e=_.map(e,function(e,t){return{az:t,subnets:e}}),e}}),new o})}.call(this),function(){define("workspaces/editor/property/subnetgroup/main",["Design","../base/main","./view","./app_view","CloudResources","constant"],function(e,t,n,r,i,s){var o;return o=t.extend({handleTypes:[s.RESTYPE.DBSBG],initStack:function(t){return this.model=e.instance().component(t),this.view=n,this.view.isAppEdit=!1,null},initApp:function(t){var n;return this.model=e.instance().component(t),this.view=r,this.view.appModel=(n=i(s.RESTYPE.DBSBG,e.instance().region()))!=null?n.get(this.model.get("appId")):void 0,this.view.isAppEdit=!1,null},initAppEdit:function(t){return this.model=e.instance().component(t),this.view=n,this.view.isAppEdit=!0,null}}),null})}.call(this),function(){define("workspaces/editor/subviews/PropertyPanel",["../template/TplRightPanel","../property/base/main","component/stateeditor/stateeditor","constant","Design","OpsModel","event","CloudResources","backbone","../property/stack/main","../property/instance/main","../property/servergroup/main","../property/connection/main","../property/staticsub/main","../property/missing/main","../property/sg/main","../property/sgrule/main","../property/volume/main","../property/elb/main","../property/az/main","../property/subnet/main","../property/vpc/main","../property/rtb/main","../property/static/main","../property/cgw/main","../property/vpn/main","../property/eni/main","../property/acl/main","../property/launchconfig/main","../property/asg/main","../property/dbinstance/main","../property/subnetgroup/main"],function(e,t,n,r,i,s,o,u){var a;return o.onLongListen(o.REFRESH_PROPERTY,function(){$("#OEPanelRight").trigger("REFRESH")}),o.onLongListen(o.FORCE_OPEN_PROPERTY,function(){$("#OEPanelRight").trigger("FORCE_SHOW"),$("#OEPanelRight").trigger("SHOW_PROPERTY")}),o.onLongListen(o.SHOW_STATE_EDITOR,function(e){$("#OEPanelRight").trigger("SHOW_STATEEDITOR",[e])}),o.onLongListen(o.OPEN_PROPERTY,function(e,t){$("#OEPanelRight").trigger("OPEN",[e,t])}),a=function(e){return function(){var t;return t=Array.prototype.slice.call(arguments,0),t.shift(),this[e].apply(this,t)}},Backbone.View.extend({events:{"click .HideSecondPanel":"hideSecondPanel","click .option-group-head":"updateRightPanelOption",OPEN_SUBPANEL:a("showSecondPanel"),HIDE_SUBPANEL:a("immHideSecondPanel"),OPEN_SUBPANEL_IMM:a("immShowSecondPanel"),OPEN:a("openPanel"),SHOW_STATEEDITOR:"showStateEditor",FORCE_SHOW:"forceShow",REFRESH:"refresh",SHOW_PROPERTY:"switchToProperty","click #btn-switch-property":"switchToProperty","click #btn-switch-state":"showStateEditor"},initialize:function(e){return _.extend(this,e),this.render()},render:function(){this.setElement(this.parent.$el.find(".OEPanelRight").html(e())),this.$el.toggleClass("hidden",this.__rightPanelHidden||!1),this.__backup?(t.restore(this.__backup),this.restoreAccordion(this.__backup.activeModuleType,this.__backup.activeModuleId)):this.openPanel(),this.__showingState&&this.showStateEditor()},backup:function(){this.$el.empty().attr("id",""),this.__backup=t.snapshot()},recover:function(){this.$el.attr("id","OEPanelRight"),this.render()},toggleRightPanel:function(){return this.__rightPanelHidden=this.$el.toggleClass("hidden").hasClass("hidden"),null},showSecondPanel:function(e,t){return this.$el.find(".HideSecondPanel").data("tooltip","Back to "+this.$el.find(".property-title").text()),this.$el.find(".property-second-panel").show().animate({left:"0%"},200),this.$el.find(".property-first-panel").animate({left:"-30%"},200,function(e){return function(){return e.$el.find(".property-first-panel").hide()}}(this))},immShowSecondPanel:function(e,t){return this.$el.find(".HideSecondPanel").data("tooltip","Back to "+this.$el.find(".property-title").text()),this.$el.find(".property-second-panel").show().css({left:"0%"}),this.$el.find(".property-first-panel").css({left:"-30%",display:"none"}),null},immHideSecondPanel:function(){return this.$el.find(".property-second-panel").css({display:"none",left:"100%"}).children(".scroll-wrap").children(".property-content").empty(),this.$el.find(".property-first-panel").css({display:"block",left:"0px"}),null},hideSecondPanel:function(){var e;return e=this.$el.find(".property-second-panel"),e.animate({left:"100%"},200,function(e){return function(){return e.$el.find(".property-second-panel").hide()}}(this)),this.$el.find(".property-first-panel").show().animate({left:"0%"},200),t.onUnloadSubPanel(),!1},updateRightPanelOption:function(e){var n,r,i,s,o;r=$(e.currentTarget);if(r.is("button")||r.is("a"))return;s=r.hasClass("expand"),n=r.next(),s?n.css("display","block").slideUp(200):n.slideDown(200),r.toggleClass("expand");if(!r.parents(".property-first-panel").length)return;return this.__optionStates=this.__optionStates||{},i=t.activeModule().uid||"Stack",o=_.map(this.$el.find(".property-first-panel").find(".option-group-head"),function(e){return $(e).hasClass("expand")}),this.__optionStates[i]=o,i=this.workspace.design.component(i),i&&(this.__optionStates[i.type]=o),!1},openPanel:function(e,n){var r,i,s,o;if(this.__lastOpenType===e&&this.__lastOpenId===n&&this.__showingState)return;this.__lastOpenType=e,this.__lastOpenId=n,$(document.activeElement).filter("input, textarea").blur(),this.immHideSecondPanel(),i=this.workspace.design;if(!i)return;n?(r=i.component(n),r&&r.type===e&&i.modeIsApp()&&r.get("appId")&&!r.hasAppResource()&&(e=r.type||"Missing_Resource")):e="Stack",i.modeIsApp()||i.modeIsAppView()?o=t.TYPE.App:i.modeIsStack()?o=t.TYPE.Stack:!r||r.get("appId")?o=t.TYPE.AppEdit:o=t.TYPE.Stack;try{t.load(e,n,o)}catch(u){s=u,void 0}this.restoreAccordion(e,n),this.updateStateSwitcher(e,n),this.$el.toggleClass("state",!1),this.__showingState=!1},restoreAccordion:function(e,t){var n,r,i,s,o,u,a;if(!this.__optionStates)return;i=this.__optionStates[t],i||(i=this.__optionStates[e]);if(i){u=this.$el.find(".property-first-panel").find(".option-group-head");for(r=s=0,o=u.length;s<o;r=++s)n=u[r],$(n).toggleClass("expand",i[r]);a=this.__optionStates;for(t in a){i=a[t];if(!t||this.workspace.design.component(t)||t.indexOf("i-")===0||t==="Stack")continue;delete this.__optionStates[t]}}},updateStateSwitcher:function(e,n){var o,u,a,f;a=!1,u=this.workspace.design;if(e==="component_server_group"||e===r.RESTYPE.LC||e===r.RESTYPE.INSTANCE)i.instance().attributes.agent.enabled?(a=!0,$("#state-editor-body").trigger("SAVE_STATE")):a=!1,u.modeIsApp()&&(e==="component_server_group"&&(a=!1),e===r.RESTYPE.LC&&(a=this.workspace.opsModel.testState(s.State.Stopped)));return this.$el.toggleClass("no-state",!a),a&&(o=u.component(n)||u.component(t.activeModule().model.attributes.uid),o=(o!=null?(f=o.get("state"))!=null?f.length:void 0:void 0)||0,$("#btn-switch-state").find("b").text("("+o+")")),a},forceShow:function(){var e;this.__rightPanelHidden&&(this.__rightPanelHidden=!1,this.$el.toggleClass("no-transition",!0).removeClass("hidden"),e=this,setTimeout(function(){return e.$el.removeClass("no-transition")},100))},refresh:function(){var e;e=t.activeModule()||{},this.openPanel(e.handle,e.uid)},switchToProperty:function(){this.__showingState=!1,this.$el.toggleClass("state",!1),this.refresh()},showStateEditor:function(e,s){var o,a,f,l,c;if((e!=null?e.type:void 0)==="SHOW_STATEEDITOR"&&this.__showingState)return!1;s||(s=t.activeModule().uid),l=this.workspace.design,a=l.component(s)||((c=u(r.RESTYPE.INSTANCE,i.instance().get("region")).findWhere({id:s}))!=null?c.toJSON():void 0);if(!a)return;a.type||(a.type=r.RESTYPE.INSTANCE);if(!this.updateStateSwitcher(a.type,s)){this.openPanel(a.type,s);return}this.__showingState=!0,this.$el.toggleClass("state",!0),l.modeIsApp()&&(s=i.modelClassForType(r.RESTYPE.INSTANCE).getEffectiveId(s).uid),o=l.serialize().component,f=o[s],n.loadModule(o,s),this.forceShow()}})})}.call(this),define("workspaces/editor/PropertyPanel",function(){});