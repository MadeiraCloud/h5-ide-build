(function(){define(["ApiRequest","ApiRequestDefs","UI.modalplus","vender/select2/select2","UI.modal"],function(e,t,n){var r,i,s,o,u,a,f,l,c;return c='<div id="DebugTool" class="debugToolBg"><ul>\n<li id="DtDiff" class="icon-toolbar-diff tooltip" data-tooltip="Json Diff"></li>\n<li id="DtView" class="icon-toolbar-cloudformation tooltip" data-tooltip="Json View"></li>\n<li id="DtApi" class="tooltip debugToolBg" data-tooltip="Debug Api"></li>\n<li id="DtSession" class="icon-user tooltip" data-tooltip="Share Session"></li>\n<li id="DtClearStack" class="icon-delete tooltip" data-tooltip="Clear Stacks"></li>\n<li id="DtClearApp" class="icon-terminate tooltip" data-tooltip="Terminate Apps"></li>\n</ul>\n<div id="DebugTooltip">console输入man查看快捷debug</div>\n</div>',r='<div class="modal-header"> <h3>Api Debugger</h3> <i class="modal-close">×</i> </div>\n<div id="diffWrap"><div id="ApiDebugger">\n<button class="btn btn-blue" id="ApiDebugSend">Send Request</button>\n<section><label>Api : </label><select id="ApiSelect" data-placeholder="Select an api"></select></section>\n<section><label>Parameters :</label><section id="ApiParamsWrap" class="clearfix"></section></section>\n<section><label>Result :</label><pre id="ApiResult"></pre></section>\n</div></div>',s='<div class="modal-header"> <h3>Share Session</h3> <i class="modal-close">×</i> </div>\n<div class="modal-body" style="width:500px">\n  <h5>Paste & run this code to share session.</h5>\n  <textarea id="DebugShareSession" spellcheck="false"></textarea>\n</div>',i=function(){return $("head").append('<link rel="stylesheet" href="/assets/css/debugger.css"></link>'),$(c).appendTo("body"),$("#DebugTool").on("click","li",l)},l=function(e){var t;t=e.currentTarget.id;switch(t){case"DtDiff":return dd.diff();case"DtView":return dd.view();case"DtApi":return a();case"DtSession":return f();case"DtClearApp":return o();case"DtClearStack":return u()}},u=function(){var e;return e=new n({title:"删除所有Stack",template:"你确定要删除所有的Stack吗？是所有哦！！！！！！",onConfirm:function(){return App.model.stackList().models.slice(0).forEach(function(e){return e.remove()}),e.close()}})},o=function(){var e;return e=new n({title:"一键删除所有App",template:"删除APP？删除APP？删除APP？删除APP？删除APP？删除APP？删除APP？删除APP？删除APP？删除APP？",onConfirm:function(){return App.model.appList().models.slice(0).forEach(function(e){return e.terminate()}),e.close()}})},a=function(){var n,i,s,o,u,a,f,l,c,h,p;modal(r),l="<option></option>",a={},p=t.Defs;for(s in p)i=p[s],n=s.split("_"),n.length===1?o="General":o=n[0].toUpperCase(),a[o]||(a[o]=[]),a[o].push(s);for(f in a){o=a[f],l+="<optgroup label='"+f+"'>";for(c=0,h=o.length;c<h;c++)u=o[c],l+="<option value='"+u+"'>"+u+"</option>";l+="</optgrouop>"}return $("#ApiSelect").html(l).select2({width:400}).on("change",function(){var e,n,r,i,s,o,u,a;s=$("#ApiSelect").select2("val"),e=t.Defs[s],$("#ApiResult").empty(),$("#ApiSelect").siblings("label").text("Api : '"+s+"'");if(!e)return $("#ApiParamsWrap").empty();r="",a=e.params;for(o=0,u=a.length;o<u;o++)n=a[o],i=t.AutoFill(n),i===null&&(i=""),r+="<input placeholder='"+n+"' class='diffInput tooltip' value='"+i+"' data-tooltip='"+n+"'/>";return $("#ApiParamsWrap").html(r)}),$("#ApiDebugSend").click(function(){var n,r,i,s,o,u,a,f,l,c;n=$("#ApiSelect").select2("val"),r=t.Defs[n];if(!r)return;u={},c=$("#ApiParamsWrap").children("input");for(f=0,l=c.length;f<l;f++){i=c[f],a=i.value;if(!a)continue;o=$(i).attr("placeholder");try{u[o]=JSON.parse(a)}catch(h){s=h,u[o]=a}}return $("#ApiDebugSend").attr("disabled","disabled"),$("#ApiResult").text("Loading..."),e(n,u).then(function(e){if(r.url.indexOf("/aws/")===0&&r.url.length>5&&typeof e[1]=="string")try{e[1]=$.xml2json($.parseXML(e[1]))}catch(t){}return $("#ApiResult").text(JSON.stringify(e,void 0,4)),$("#ApiDebugSend").removeAttr("disabled")},function(e){return $("#ApiResult").text(JSON.stringify(e,void 0,4)),$("#ApiDebugSend").removeAttr("disabled")}),null}),$("#modal-box").css({width:"98%",height:"98%",top:"1%",left:"1%"}),$("#ApiSelect").select2("open"),$("#s2id_autogen1_search").focus()},f=function(){var e;e="(function(){var o = {expires:30,path:'/'}, a = "+JSON.stringify($.cookie())+",k;for (k in a) { $.cookie(k,a[k],o); } window.location.href = window.location.protocol + '//' + window.location.host + '"+window.location.pathname+"'; })();",modal(s),$("#DebugShareSession").html(e).select()},i})}).call(this);