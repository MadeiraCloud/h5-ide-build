(function(){define(["ApiRequest","ApiRequestDefs","vender/select2/select2","UI.modal"],function(e,t){var n,r,i,s,o,u,a;return a='<div id="DebugTool" class="debugToolBg"><ul>\n<li id="DtDiff" class="icon-toolbar-diff tooltip" data-tooltip="Json Diff"></li>\n<li id="DtView" class="icon-toolbar-cloudformation tooltip" data-tooltip="Json View"></li>\n<li id="DtApi" class="tooltip debugToolBg" data-tooltip="Debug Api"></li>\n<li id="DtSession" class="icon-user tooltip" data-tooltip="Share Session"></li>\n</ul>\n<div id="DebugTooltip">console输入man查看快捷debug</div>\n</div>',n='<div class="modal-header"> <h3>Api Debugger</h3> <i class="modal-close">×</i> </div>\n<div id="diffWrap"><div id="ApiDebugger">\n<button class="btn btn-blue" id="ApiDebugSend">Send Request</button>\n<section><label>Api : </label><select id="ApiSelect" data-placeholder="Select an api"></select></section>\n<section><label>Parameters :</label><section id="ApiParamsWrap" class="clearfix"></section></section>\n<section><label>Result :</label><pre id="ApiResult"></pre></section>\n</div></div>',i='<div class="modal-header"> <h3>Share Session</h3> <i class="modal-close">×</i> </div>\n<div class="modal-body" style="width:500px">\n  <h5>Paste & run this code to share session.</h5>\n  <textarea id="DebugShareSession" spellcheck="false"></textarea>\n</div>',r=function(){return $("head").append('<link rel="stylesheet" href="./assets/css/debugger.css"></link>'),$(a).appendTo("body"),$("#DebugTool").on("click","li",u)},u=function(e){var t;t=e.currentTarget.id;switch(t){case"DtDiff":return dd.diff();case"DtView":return dd.view();case"DtApi":return s();case"DtSession":return o()}},s=function(){var r,i,s,o,u,a,f,l,c,h,p;modal(n),l="<option></option>",a={},p=t.Defs;for(s in p)i=p[s],r=s.split("_"),r.length===1?o="General":o=r[0].toUpperCase(),a[o]||(a[o]=[]),a[o].push(s);for(f in a){o=a[f],l+="<optgroup label='"+f+"'>";for(c=0,h=o.length;c<h;c++)u=o[c],l+="<option value='"+u+"'>"+u+"</option>";l+="</optgrouop>"}return $("#ApiSelect").html(l).select2({width:400}).on("change",function(){var e,n,r,i,s,o,u,a;s=$("#ApiSelect").select2("val"),e=t.Defs[s],$("#ApiResult").empty(),$("#ApiSelect").siblings("label").text("Api : '"+s+"'");if(!e)return $("#ApiParamsWrap").empty();r="",a=e.params;for(o=0,u=a.length;o<u;o++)n=a[o],i=t.AutoFill(n),i===null&&(i=""),r+="<input placeholder='"+n+"' class='diffInput tooltip' value='"+i+"' data-tooltip='"+n+"'/>";return $("#ApiParamsWrap").html(r)}),$("#ApiDebugSend").click(function(){var n,r,i,s,o,u,a,f,l,c;n=$("#ApiSelect").select2("val"),r=t.Defs[n];if(!r)return;u={},c=$("#ApiParamsWrap").children("input");for(f=0,l=c.length;f<l;f++){i=c[f],a=i.value;if(!a)continue;o=$(i).attr("placeholder");try{u[o]=JSON.parse(a)}catch(h){s=h,u[o]=a}}return $("#ApiDebugSend").attr("disabled","disabled"),$("#ApiResult").text("Loading..."),e(n,u).then(function(e){if(r.url.indexOf("/aws/")===0&&r.url.length>5&&typeof e[1]=="string")try{e[1]=$.xml2json($.parseXML(e[1]))}catch(t){}return $("#ApiResult").text(JSON.stringify(e,void 0,4)),$("#ApiDebugSend").removeAttr("disabled")},function(e){return $("#ApiResult").text(JSON.stringify(e,void 0,4)),$("#ApiDebugSend").removeAttr("disabled")}),null}),$("#modal-box").css({width:"98%",height:"98%",top:"1%",left:"1%"}),$("#ApiSelect").select2("open"),$("#s2id_autogen1_search").focus()},o=function(){var e;e="(function(){var o = {expires:30,path:'/'}, a = "+JSON.stringify($.cookie())+",k;for (k in a) { $.cookie(k,a[k],o); } window.location.reload(); })();",modal(i),$("#DebugShareSession").html(e).select()},r})}).call(this);