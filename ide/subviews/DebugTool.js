(function(){define(["ApiRequest","ApiRequestOs","ApiRequestDefs","UI.modalplus","vender/select2/select2","UI.modal"],function(e,t,n,r){var i,s,o,u,a,f,l,c,h;return h='<div id="DebugTool" class="debugToolBg"><ul>\n<li id="DtDiff" class="icon-toolbar-diff tooltip" data-tooltip="Json Diff"></li>\n<li id="DtView" class="icon-toolbar-cloudformation tooltip" data-tooltip="Json View"></li>\n<li id="DtApi" class="tooltip debugToolBg" data-tooltip="Debug Api"></li>\n<li id="DtSession" class="icon-user tooltip" data-tooltip="Share Session"></li>\n<li id="DtClearStack" class="icon-delete tooltip" data-tooltip="Clear Stacks"></li>\n<li id="DtClearApp" class="icon-terminate tooltip" data-tooltip="Terminate Apps"></li>\n</ul>\n<div id="DebugTooltip">console输入man查看快捷debug</div>\n</div>',i='<div class="modal-header"> <h3>Api Debugger</h3> <i class="modal-close">×</i> </div>\n<div id="diffWrap"><div id="ApiDebugger">\n<button class="btn btn-blue" id="ApiDebugSend">Send Request</button>\n<section><label>Api : </label><select id="ApiSelect" data-placeholder="Select an api"></select></section>\n<section><label>Parameters :</label><section id="ApiParamsWrap" class="clearfix"></section></section>\n<section><label>Result :</label><pre id="ApiResult"></pre></section>\n</div></div>',o='<div class="modal-header"> <h3>Share Session</h3> <i class="modal-close">×</i> </div>\n<div class="modal-body" style="width:500px">\n  <h5>Paste & run this code to share session.</h5>\n  <textarea id="DebugShareSession" spellcheck="false"></textarea>\n</div>',s=function(){return $("head").append('<link rel="stylesheet" href="/assets/css/debugger.css"></link>'),$(h).appendTo("body"),$("#DebugTool").on("click","li",c)},c=function(e){var t;t=e.currentTarget.id;switch(t){case"DtDiff":return dd.diff();case"DtView":return dd.view();case"DtApi":return f();case"DtSession":return l();case"DtClearApp":return u();case"DtClearStack":return a()}},a=function(){var e;return e=new r({title:"删除所有Stack",template:"你确定要删除所有的Stack吗？是所有哦！！！！！！",onConfirm:function(){return App.model.stackList().models.slice(0).forEach(function(e){return e.remove()}),e.close()}})},u=function(){var e;return e=new r({title:"一键删除所有App",template:"删除APP？删除APP？删除APP？删除APP？删除APP？删除APP？删除APP？删除APP？删除APP？删除APP？",onConfirm:function(){return App.model.appList().models.slice(0).forEach(function(e){return e.terminate()}),e.close()}})},f=function(){var r,s,o,u,a,f,l,c,h,p,d;modal(i),c="<option></option>",f={},d=n.Defs;for(o in d)s=d[o],r=o.split("_"),r.length===1?u="General":u=r[0].toUpperCase(),f[u]||(f[u]=[]),f[u].push(o);for(l in f){u=f[l],c+="<optgroup label='"+l+"'>";for(h=0,p=u.length;h<p;h++)a=u[h],c+="<option value='"+a+"'>"+a+"</option>";c+="</optgrouop>"}return $("#ApiSelect").html(c).select2({width:400}).on("change",function(){var e,t,r,i,s,o,u,a;s=$("#ApiSelect").select2("val"),e=n.Defs[s],$("#ApiResult").empty(),$("#ApiSelect").siblings("label").text("Api : '"+s+"'");if(!e)return $("#ApiParamsWrap").empty();r="",a=e.params;for(o=0,u=a.length;o<u;o++)t=a[o],i=n.AutoFill(t),i===null&&(i=""),r+="<input placeholder='"+t+"' class='diffInput tooltip' value='"+i+"' data-tooltip='"+t+"'/>";return $("#ApiParamsWrap").html(r)}),$("#ApiDebugSend").click(function(){var r,i,s,o,u,a,f,l,c,h;r=$("#ApiSelect").select2("val"),i=n.Defs[r];if(!i)return;a={},h=$("#ApiParamsWrap").children("input");for(l=0,c=h.length;l<c;l++){s=h[l],f=s.value;if(!f)continue;u=$(s).attr("placeholder");try{a[u]=JSON.parse(f)}catch(p){o=p,a[u]=f}}return $("#ApiDebugSend").attr("disabled","disabled"),$("#ApiResult").text("Loading...").attr("finish","false"),(i.type==="openstack"?t:e)(r,a).then(function(e){var t,n,r,s,o,u,a,f;if(i.url.indexOf("/aws/")===0&&i.url.length>5&&typeof e[1]=="string")try{e[1]=$.xml2json($.parseXML(e[1]))}catch(l){}else if(i.url.indexOf("/os/")===0)if(i.method==="Info")for(r=o=0,a=e.length;o<a;r=++o){s=e[r];try{if($.type(e)==="array")for(n=u=0,f=s.length;u<f;n=++u)t=s[n],e[r][n]=JSON.parse(t);else e[r]=JSON.parse(s)}catch(l){}}else try{e[1]=JSON.parse(e[1])}catch(l){}return $("#ApiResult").text(JSON.stringify(e,void 0,4)),$("#ApiDebugSend").removeAttr("disabled"),$("#ApiResult").attr("finish","true")},function(e){return $("#ApiResult").text(JSON.stringify(e,void 0,4)),$("#ApiDebugSend").removeAttr("disabled"),$("#ApiResult").attr("finish","true")}),null}),$("#modal-box").css({width:"98%",height:"98%",top:"1%",left:"1%"}),$("#ApiSelect").select2("open"),$("#s2id_autogen1_search").focus()},l=function(){var e;e="(function(){var o = {expires:30,path:'/'}, a = "+JSON.stringify($.cookie())+",k;for (k in a) { $.cookie(k,a[k],o); } window.location.href = window.location.protocol + '//' + window.location.host + '"+window.location.pathname+"'; })();",modal(o),$("#DebugShareSession").html(e).select()},s})}).call(this);