(function(){define(["jquery","MC","constant"],function(e,t,n){var r,i,s,o,u;return i=function(e){var r,i,s,o,u,a;i=t.canvas_data.component,s=t.canvas_data.layout,u=n.AWS_RESOURCE_TYPE,a="",o=s.component.group[e].groupUId,r=s.component.group[o];if(r)switch(r.type){case u.AWS_EC2_AvailabilityZone:a=r.name;break;case u.AWS_VPC_Subnet:a=i[o].resource.AvailabilityZone}return a},o=function(e){var r,i,s,o,u,a,f;if(t.canvas.getState()==="stack")return null;r=t.data.resource_list[t.canvas_data.region],u=t.canvas_data.component,a=t.canvas_data.layout;for(f in u)o=u[f],o.type===n.AWS_RESOURCE_TYPE.AWS_AutoScaling_LaunchConfiguration&&(i=u[a.component.node[f].groupUId],s=r[i.resource.AutoScalingGroupARN],s?t.canvas.update(f,"text","instance-number",s.Instances.member.length):t.canvas.update(f,"text","instance-number",0));return null},r=function(e,r){var s,o,u,a,f,l,c,h,p,d,v,m;h="",u=t.canvas_data.component,f=t.canvas_data.layout,c=n.AWS_RESOURCE_TYPE,p="",s=f.component.group[e];if(s){s.originalId&&(e=s.originalId,s=f.component.group[e]),l=s.groupUId,o=f.component.group[l],m=f.component.group;for(v in m){a=m[v];if(a.type===c.AWS_AutoScaling_Group){d=f.component.group[a.groupUId];if(d){switch(d.type){case c.AWS_EC2_AvailabilityZone:p=d.name;break;case c.AWS_VPC_Subnet:p=u[a.groupUId].resource.AvailabilityZone}(a.originalId===e||v===e)&&r===i(v)&&(h=v)}}}}return h},s=function(e){return t.canvas_data.component[e].resource.LoadBalancerNames.length>0},u=function(e,n){var r,i;return r=t.canvas_data.component[e],i=r.resource.LoadBalancerNames,_.each(i,function(e){var r,i,s,o;return o=t.extractID(e),s=t.canvas_data.component[o],r=s.resource.AvailabilityZones,i=r.length,t.canvas_data.component[o].resource.AvailabilityZones=_.union(r,n),null})},{getAZofASGNode:i,getASGInAZ:r,updateASGCount:o,updateAttachedELBAZ:u,isConnectELB:s}})}).call(this);