/*
#**********************************************************
#* Filename: MC.core.js
#* Creator: Angel
#* Description: The core of the whole system
#* Date: 20131115
# **********************************************************
# (c) Copyright 2013 Madeiracloud  All Rights Reserved
# **********************************************************
*/

/*!
	 * jQuery Cookie Plugin v1.3.1
	 * https://github.com/carhartl/jquery-cookie
	 *
	 * Copyright 2013 Klaus Hartl
	 * Released under the MIT license
	 */

/*
#**********************************************************
#* MC.canvas
#* Description: Canvas logic core
# **********************************************************
# (c) Copyright 2014 Madeiracloud  All Rights Reserved
# **********************************************************
*/

/*
#**********************************************************
#* Filename: MC.validate.js
#* Creator: Tim
#* Description: Validate helper of logic
#* Date: 20130813
# **********************************************************
# (c) Copyright 2013 Madeiracloud  All Rights Reserved
# **********************************************************
*/

define("ui/MC.template",["handlebars"],function(e){var t,n={notification:{}};return t=function(e,t,n,r,i){function l(e,t){return'<i class="notification_close">&times;</i>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div class="notification_item '+a((o=t&&t.type,typeof o===u?o.apply(t):o))+'_item">\n	<span>'+a((o=t&&t.template,typeof o===u?o.apply(t):o))+"</span>\n	",o=n["if"].call(t,t&&t.should_stay,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n</div>",s},n.notification.item=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div style="width: 520px">\n    <div class="modal-header">\n        <h3>'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+'</h3>\n        <i class="modal-close">&times;</i>\n    </div>\n    <div class="modal-body">\n        <p class="modal-text-minor">'+a((o=t&&t["intro-1"],typeof o===u?o.apply(t):o))+'</p>\n        <p class="modal-text-minor">'+a((o=t&&t["intro-2"],typeof o===u?o.apply(t):o))+'</p>\n        <div class="modal-center-align-helper">\n            <div class="modal-control-group">\n                <div id="replace_stack" style="padding: 10px 0">\n                    <div class="radio">\n                        <input id="radio-replace-stack" type="radio" name="save-stack-type" checked>\n                        <label for="radio-replace-stack"></label>\n                    </div>\n                    <label class="modal-text-minor" for="radio-replace-stack">'+a((o=t&&t.replace,typeof o===u?o.apply(t):o))+'</label>\n                    <div style="padding: 10px 22px" class="radio-instruction">\n                        '+a((o=t&&t["replace-info"],typeof o===u?o.apply(t):o))+' "'+a((o=t&&t.input,typeof o===u?o.apply(t):o))+'" '+a((o=t&&t["replace-info-end"],typeof o===u?o.apply(t):o))+'\n                    </div>\n                </div>\n                <div id="save_new_stack">\n                   <div class="radio">\n                       <input id="radio-new-stack" type="radio" name="save-stack-type">\n                       <label for="radio-new-stack"></label>\n                   </div>\n                   <label class="modal-text-minor" for="radio-new-stack">'+a((o=t&&t["save-new"],typeof o===u?o.apply(t):o))+'</label>\n                   <div style="padding: 10px 22px" class="radio-instruction hide">\n                       <p>'+a((o=t&&t.instruction,typeof o===u?o.apply(t):o))+'</p>\n                       <input class="input" id="modal-input-value" value="'+a((o=t&&t.input,typeof o===u?o.apply(t):o))+'" type="text" style="width: 400px"/>\n                       <div id="stack-name-exist" class="hide" style="color: #ec3c38">'+a((o=t&&t["error-message"],typeof o===u?o.apply(t):o))+'</div>\n                   </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button id="btn-confirm" class="btn btn-'+a((o=t&&t.color,typeof o===u?o.apply(t):o))+'">'+a((o=t&&t.confirm,typeof o===u?o.apply(t):o))+'</button>\n        <button class="btn modal-close btn-silver">'+a(n.i18n.call(t,"PROP.LBL_CANCEL",{hash:{},data:i}))+"</button>\n    </div>\n</div>",s},n.modalAppToStack=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="",i;r+='\n			<div class="modal-text-wraper">\n				<div class="modal-center-align-helper">\n					',i=n["if"].call(e,e&&e.input,{hash:{},inverse:f.program(4,h,t),fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;return r+="\n				</div>\n			</div>\n		",r}function c(e,t){var n="",r;return n+='\n						<div class="modal-control-group">\n							<label class="modal-text-major">'+a((r=e&&e.body,typeof r===u?r.apply(e):r))+'</label>\n							<input id="modal-input-value" class="input" type="text" value="'+a((r=e&&e.input,typeof r===u?r.apply(e):r))+'" />\n						</div>\n					',n}function h(e,t){var r="",i;r+='\n						<div class="modal-text-major">\n							',i=(i=e&&e.body,typeof i===u?i.apply(e):i);if(i||i===0)r+=i;r+="\n						</div>\n						",i=n["if"].call(e,e&&e.is_asg,{hash:{},inverse:f.noop,fn:f.program(5,p,t),data:t});if(i||i===0)r+=i;return r+="\n					",r}function p(e,t){var r="";return r+='\n							<div class="modal-text-minor">'+a(n.i18n.call(e,"POP_CONFIRM_STOP_ASG",{hash:{},data:t}))+"</div>\n						",r}function d(e,t){var r="",i;r+='\n			<div class="terminate-pro-app-confirm">\n				',i=n["if"].call(e,e&&e.is_stop,{hash:{},inverse:f.program(11,g,t),fn:f.program(8,v,t),data:t});if(i||i===0)r+=i;return r+='\n				<p class="confirm-area"><input class="input" id="confirm-app-name" data-confirm="'+a((i=e&&e.app_name,typeof i===u?i.apply(e):i))+'"/></p>\n			</div>\n		',r}function v(e,t){var r="",i;r+="\n					<p><b>"+a((i=e&&e.app_name,typeof i===u?i.apply(e):i))+a(n.i18n.call(e,"POP_CONFIRM_PROD_APP_WARNING_MSG",{hash:{},data:t}))+"</b>"+a(n.i18n.call(e,"POP_CONFIRM_STOP_PROD_APP_MSG",{hash:{},data:t}))+"\n						",i=n["if"].call(e,e&&e.is_asg,{hash:{},inverse:f.noop,fn:f.program(9,m,t),data:t});if(i||i===0)r+=i;return r+="\n					</p>\n					<p>"+a(n.i18n.call(e,"POP_CONFIRM_STOP_PROD_APP_INPUT_LBL",{hash:{},data:t}))+"</p>\n				",r}function m(e,t){var r="";return r+="\n							"+a(n.i18n.call(e,"POP_CONFIRM_STOP_ASG",{hash:{},data:t}))+"\n						",r}function g(e,t){var r="",i;return r+="\n					<p><b>"+a((i=e&&e.app_name,typeof i===u?i.apply(e):i))+" "+a(n.i18n.call(e,"POP_CONFIRM_PROD_APP_WARNING_MSG",{hash:{},data:t}))+"</b>"+a(n.i18n.call(e,"POP_CONFIRM_TERMINATE_PROD_APP_MSG",{hash:{},data:t}))+"</p>\n					<p>"+a(n.i18n.call(e,"POP_CONFIRM_TERMINATE_PROD_APP_INPUT_LBL",{hash:{},data:t}))+"</p>\n				",r}function y(e,t){return"disabled"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div style="width:420px">\n	<div class="modal-header">\n		<h3>'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+'</h3>\n		<i class="modal-close">&times;</i>\n	</div>\n	<div class="modal-body">\n		',o=n.unless.call(t,t&&t.is_production,{hash:{},inverse:f.program(7,d,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+='\n	</div>\n	<div class="modal-footer">\n		<button id="btn-confirm" class="btn btn-'+a((o=t&&t.color,typeof o===u?o.apply(t):o))+'" ',o=n["if"].call(t,t&&t.is_production,{hash:{},inverse:f.noop,fn:f.program(13,y,i),data:i});if(o||o===0)s+=o;return s+=">"+a((o=t&&t.confirm,typeof o===u?o.apply(t):o))+'</button>\n		<button class="btn modal-close btn-silver">'+a(n.i18n.call(t,"TOOLBAR.POP_BTN_CANCEL",{hash:{},data:i}))+"</button>\n	</div>\n</div>",s},n.modalApp=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;s+='<div style="width:700px">\n	<div class="modal-header">\n		<h3>'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+'</h3>\n		<i class="modal-close">&times;</i>\n	</div>\n	<div class="modal-body">\n		<textarea id="json-content"></textarea>\n	</div>\n	<div class="modal-footer">\n		<a id="btn-confirm" class="btn btn-'+a((o=t&&t.color,typeof o===u?o.apply(t):o))+'" href="data://text/plain;, ',o=(o=t&&t.filecontent,typeof o===u?o.apply(t):o);if(o||o===0)s+=o;return s+='" download="'+a((o=t&&t.download,typeof o===u?o.apply(t):o))+'">'+a((o=t&&t.confirm,typeof o===u?o.apply(t):o))+'</a>\n		<button class="btn modal-close btn-silver">'+a(n.i18n.call(t,"TOOLBAR.POP_BTN_CANCEL",{hash:{},data:i}))+"</button>\n	</div>\n</div>",s},n.modalToolbar=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div class="modal-resource-instance-detail" style="width:420px">\n	<div class="modal-header">\n		<h3>'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+'</h3>\n		<i class="modal-close">&times;</i>\n	</div>\n\n	<div class="modal-body">\n		<dl class="dl-horizontal">\n			<dt>DnsName</dt>\n			<dd>'+a((o=t&&t.dnsName,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>Architecture</dt>\n			<dd>"+a((o=t&&t.architecture,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>EbsOptimized</dt>\n			<dd>"+a((o=t&&t.ebsOptimized,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>GroupSet</dt>\n			<dd>"+a((o=t&&t.groupSet,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>Hypervisor</dt>\n			<dd>"+a((o=t&&t.hypervisor,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>ImageId</dt>\n			<dd>"+a((o=t&&t.imageId,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>InstanceState</dt>\n			<dd>"+a((o=t&&t.instanceState,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>InstanceType</dt>\n			<dd>"+a((o=t&&t.instanceType,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>IpAddress</dt>\n			<dd>"+a((o=t&&t.ipAddress,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>KernelId</dt>\n			<dd>"+a((o=t&&t.kernelId,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>KeyName</dt>\n			<dd>"+a((o=t&&t.keyName,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>LaunchTime</dt>\n			<dd>"+a((o=t&&t.launchTime,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>Monitoring</dt>\n			<dd>"+a((o=t&&t.monitoring,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>NetworkInterfaceSet</dt>\n			<dd>"+a((o=t&&t.networkInterfaceSet,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>AvailabilityZone</dt>\n			<dd>"+a((o=t&&t.availabilityZone,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>PrivateDnsName</dt>\n			<dd>"+a((o=t&&t.privateDnsName,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>RootDeviceName</dt>\n			<dd>"+a((o=t&&t.rootDeviceName,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>RootDeviceType</dt>\n			<dd>"+a((o=t&&t.rootDeviceType,typeof o===u?o.apply(t):o))+'</dd>\n		</dl>\n	</div>\n\n	<div class="modal-footer">\n		<button class="btn modal-close btn-silver">'+a(n.i18n.call(t,"POP_BTN_CLOSE",{hash:{},data:i}))+"</button>\n	</div>\n</div>",s},n.modalResourceInstanceDetail=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div class="bubble-head">'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+'</div>\n<div class="bubble-content">\n	<dl class="dl-horizontal">\n		<dt>Start Time:</dt>\n		<dd>'+a((o=t&&t["start-time"],typeof o===u?o.apply(t):o))+"</dd>\n		<dt>Stop Time:</dt>\n		<dd>"+a((o=t&&t["end-time"],typeof o===u?o.apply(t):o))+"</dd>\n		<dt>Estimated Cost:</dt>\n		<dd>"+a((o=t&&t.cost,typeof o===u?o.apply(t):o))+"</dd>\n	</dl>\n</div>",s},n.bubbleTest=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div class="bubble-head alert">'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+'</div>\n<div class="bubble-content">\n	'+a((o=t&&t.description,typeof o===u?o.apply(t):o))+"\n</div>",s},n.bubbleAlert=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div class="bubble-head suggest">'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+'</div>\n<div class="bubble-content">\n	'+a((o=t&&t.description,typeof o===u?o.apply(t):o))+"\n</div>",s},n.bubbleSuggest=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div class="bubble-head"><i class="status-'+a((o=t&&t.status,typeof o===u?o.apply(t):o))+' icon-label"></i>'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+"-("+a((o=t&&t.id,typeof o===u?o.apply(t):o))+')</div>\n<div class="bubble-content">\n	<dl class="dl-horizontal">\n		<dt>Launch Time:</dt>\n		<dd>'+a((o=t&&t["launch-time"],typeof o===u?o.apply(t):o))+"</dd>\n		<dt>Availability Zone:</dt>\n		<dd>"+a((o=t&&t.az,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>Instance Type:</dt>\n		<dd>"+a((o=t&&t["instance-type"],typeof o===u?o.apply(t):o))+"</dd>\n	</dl>\n</div>",s},n.bubbleInstanceInfo=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div class="bubble-head"></i>'+a((o=t&&t.snapshotId,typeof o===u?o.apply(t):o))+'</div>\n<div class="bubble-content">\n	<dl class="dl-horizontal">\n		<dt>SnapshotId</dt>\n		<dd>'+a((o=t&&t.snapshotId,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>StartTime</dt>\n		<dd>"+a((o=t&&t.startTime,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>Status</dt>\n		<dd>"+a((o=t&&t.status,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>Size</dt>\n		<dd>"+a((o=t&&t.size,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>Encrypted</dt>\n		<dd>"+a((o=t&&t.encrypted,typeof o===u?o.apply(t):o))+"</dd>\n	</dl>\n</div>",s},n.bubbleSnapshotInfo=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="",i;return r+="\n    <dt>"+u(n.i18n.call(e,"DASH_BUB_IMAGEOWNERALIAS",{hash:{},data:t}))+"</dt> <dd>"+u((i=e&&e.imageOwnerAlias,typeof i===a?i.apply(e):i))+"</dd>\n    ",r}function c(e,t){var r="",i;return r+="\n    <dt>"+u(n.i18n.call(e,"DASH_BUB_IMAGEOWNERID",{hash:{},data:t}))+"</dt> <dd>"+u((i=e&&e.imageOwnerId,typeof i===a?i.apply(e):i))+"</dd>\n    ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+='<div class="bubble-head">'+u((o=t&&t.id,typeof o===a?o.apply(t):o))+'</div>\n<div class="bubble-content">\n	<dl class="dl-horizontal">\n		<dt>'+u(n.i18n.call(t,"DASH_BUB_NAME",{hash:{},data:i}))+"</dt>            <dd>"+u((o=t&&t.name,typeof o===a?o.apply(t):o))+"</dd>\n		<dt>"+u(n.i18n.call(t,"DASH_BUB_DESCRIPTION",{hash:{},data:i}))+"</dt>     <dd>"+u((o=t&&t.description,typeof o===a?o.apply(t):o))+"</dd>\n		<dt>"+u(n.i18n.call(t,"DASH_BUB_ARCHITECTURE",{hash:{},data:i}))+"</dt>    <dd>"+u((o=t&&t.architecture,typeof o===a?o.apply(t):o))+"</dd>\n		<dt>"+u(n.i18n.call(t,"DASH_BUB_IMAGELOCATION",{hash:{},data:i}))+"</dt>   <dd>"+u((o=t&&t.imageLocation,typeof o===a?o.apply(t):o))+"</dd>\n\n    ",o=n["if"].call(t,t&&t.imageOwnerAlias,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n\n    <dt>"+u(n.i18n.call(t,"DASH_BUB_ISPUBLIC",{hash:{},data:i}))+"</dt>       <dd>"+u((o=t&&t.isPublic,typeof o===a?o.apply(t):o))+"</dd>\n		<dt>"+u(n.i18n.call(t,"DASH_BUB_KERNELID",{hash:{},data:i}))+"</dt>       <dd>"+u((o=t&&t.kernelId,typeof o===a?o.apply(t):o))+"</dd>\n		<dt>"+u(n.i18n.call(t,"DASH_BUB_ROOTDEVICENAME",{hash:{},data:i}))+"</dt> <dd>"+u((o=t&&t.rootDeviceName,typeof o===a?o.apply(t):o))+"</dd>\n		<dt>"+u(n.i18n.call(t,"DASH_BUB_ROOTDEVICETYPE",{hash:{},data:i}))+"</dt> <dd>"+u((o=t&&t.rootDeviceType,typeof o===a?o.apply(t):o))+"</dd>\n    <dt>Image Size</dt>    <dd>"+u((o=t&&t.imageSize,typeof o===a?o.apply(t):o))+"</dd>\n    <dt>Instance Type</dt> <dd>"+u((o=t&&t.instanceType,typeof o===a?o.apply(t):o))+"</dd>\n	</dl>\n</div>",s},n.bubbleAMIInfo=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o=this.escapeExpression;return s+='<div style="width:660px">\n	<div class="modal-header">\n		<h3>'+o(n.i18n.call(t,"DASH_POP_CREATE_STACK_CREATE_THIS_STACK_IN",{hash:{},data:i}))+':</h3>\n		<i class="modal-close">×</i>\n	</div>\n	<div class="modal-body">\n		<div id="createNewStack_wrap">\n			<ul class="clearfix">\n				<li>\n					<a class="new-stack-dialog" href="javascript:void(0)" data-supported-platform="ec2-classic">\n						<h4>'+o(n.i18n.call(t,"DASH_POP_CREATE_STACK_CLASSIC",{hash:{},data:i}))+"</h4>\n						<p>"+o(n.i18n.call(t,"DASH_POP_CREATE_STACK_CLASSIC_INTRO",{hash:{},data:i}))+'.</p>\n					</a>\n				</li>\n				<li>\n					<a class="new-stack-dialog" href="javascript:void(0)" data-supported-platform="ec2-vpc">\n						<h4>'+o(n.i18n.call(t,"DASH_POP_CREATE_STACK_VPC",{hash:{},data:i}))+"</h4>\n						<p>"+o(n.i18n.call(t,"DASH_POP_CREATE_STACK_VPC_INTRO",{hash:{},data:i}))+".</p>\n					</a>\n				</li>\n			</ul>\n		</div>\n	</div>\n</div>",s},n.createNewStackClassic=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o=this.escapeExpression;return s+='<div style="width:400px">\n	<div class="modal-header">\n		<h3>'+o(n.i18n.call(t,"DASH_POP_CREATE_STACK_CREATE_STACK_ERROR",{hash:{},data:i}))+'</h3>\n		<i class="modal-close">×</i>\n	</div>\n	<div class="modal-body">\n		<div id="createNewStack_wrap" class="load-account-attr-error">\n			<p>'+o(n.i18n.call(t,"DASH_POP_FALE_LOAD_RESOURCE_PLEASE_RETRY",{hash:{},data:i}))+'</p>\n			<button class="btn btn-blue" id="reload-account-attributes">'+o(n.i18n.call(t,"DASH_POP_BTN_RETRY",{hash:{},data:i}))+"</button>\n		</div>\n	</div>\n</div>",s},n.createNewStackErrorAndReload=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o=this.escapeExpression;return s+='<div style="width:660px">\n	<div class="modal-header">\n		<h3>'+o(n.i18n.call(t,"DASH_POP_CREATE_STACK_CREATE_THIS_STACK_IN",{hash:{},data:i}))+':</h3>\n		<i class="modal-close">×</i>\n	</div>\n	<div class="modal-body">\n		<div id="createNewStack_wrap">\n			<ul class="clearfix">\n				<li>\n					<a class="new-stack-dialog" href="javascript:void(0)" data-supported-platform="default-vpc">\n						<h4>'+o(n.i18n.call(t,"DASH_POP_CREATE_STACK_DEFAULT_VPC",{hash:{},data:i}))+"</h4>\n						<p>"+o(n.i18n.call(t,"DASH_POP_CREATE_STACK_DEFAULT_VPC_INTRO",{hash:{},data:i}))+'.</p>\n					</a>\n				</li>\n				<li>\n					<a class="new-stack-dialog" href="javascript:void(0)" data-supported-platform="custom-vpc">\n						<h4>'+o(n.i18n.call(t,"DASH_POP_CREATE_STACK_CUSTOM_VPC",{hash:{},data:i}))+"</h4>\n						<p>"+o(n.i18n.call(t,"DASH_POP_CREATE_STACK_VPC_INTRO",{hash:{},data:i}))+".</p>\n					</a>\n				</li>\n			</ul>\n		</div>\n	</div>\n</div>",s},n.createNewStackVPC=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="",i;r+="\n\nIPSec Tunnel #"+a((i=e&&e.number,typeof i===u?i.apply(e):i))+"\n================================================================================\n#1: Internet Key Exchange Configuration\n\nConfigure the IKE SA as follows\n  - Authentication Method    : "+a((i=e&&e.ike_protocol_method,typeof i===u?i.apply(e):i))+"\n  - Pre-Shared Key           : "+a((i=e&&e.ike_pre_shared_key,typeof i===u?i.apply(e):i))+"\n  - Authentication Algorithm : "+a((i=e&&e.ike_authentication_protocol_algorithm,typeof i===u?i.apply(e):i))+"\n  - Encryption Algorithm     : "+a((i=e&&e.ike_encryption_protocol,typeof i===u?i.apply(e):i))+"\n  - Lifetime                 : "+a((i=e&&e.ike_lifetime,typeof i===u?i.apply(e):i))+" seconds\n  - Phase 1 Negotiation Mode : "+a((i=e&&e.ike_mode,typeof i===u?i.apply(e):i))+"\n  - Perfect Forward Secrecy  : "+a((i=e&&e.ike_perfect_forward_secrecy,typeof i===u?i.apply(e):i))+"\n\n#2: IPSec Configuration\n\nConfigure the IPSec SA as follows:\n  - Protocol                 : "+a((i=e&&e.ipsec_protocol,typeof i===u?i.apply(e):i))+"\n  - Authentication Algorithm : "+a((i=e&&e.ipsec_authentication_protocol,typeof i===u?i.apply(e):i))+"\n  - Encryption Algorithm     : "+a((i=e&&e.ipsec_encryption_protocol,typeof i===u?i.apply(e):i))+"\n  - Lifetime                 : "+a((i=e&&e.ipsec_lifetime,typeof i===u?i.apply(e):i))+" seconds\n  - Mode                     : "+a((i=e&&e.ipsec_mode,typeof i===u?i.apply(e):i))+"\n  - Perfect Forward Secrecy  : "+a((i=e&&e.ipsec_perfect_forward_secrecy,typeof i===u?i.apply(e):i))+"\n\nIPSec Dead Peer Detection (DPD) will be enabled on the AWS Endpoint. We\nrecommend configuring DPD on your endpoint as follows:\n  - DPD Interval             : "+a((i=e&&e.ipsec_interval,typeof i===u?i.apply(e):i))+"\n  - DPD Retries              : "+a((i=e&&e.ipsec_retries,typeof i===u?i.apply(e):i))+"\n\nIPSec ESP (Encapsulating Security Payload) inserts additional\nheaders to transmit packets. These headers require additional space,\nwhich reduces the amount of space available to transmit application data.\nTo limit the impact of this behavior, we recommend the following\nconfiguration on your Customer Gateway:\n  - TCP MSS Adjustment       : "+a((i=e&&e.tcp_mss_adjustment,typeof i===u?i.apply(e):i))+" bytes\n  - Clear Don't Fragment Bit : "+a((i=e&&e.clear_df_bit,typeof i===u?i.apply(e):i))+"\n  - Fragmentation            : "+a((i=e&&e.fragmentation_before_encryption,typeof i===u?i.apply(e):i))+"\n\n#3: Tunnel Interface Configuration\n\nYour Customer Gateway must be configured with a tunnel interface that is\nassociated with the IPSec tunnel. All traffic transmitted to the tunnel\ninterface is encrypted and transmitted to the Virtual Private Gateway.\n\nThe Customer Gateway and Virtual Private Gateway each have two addresses that relate\nto this IPSec tunnel. Each contains an outside address, upon which encrypted\ntraffic is exchanged. Each also contain an inside address associated with\nthe tunnel interface.\n\nThe Customer Gateway outside IP address was provided when the Customer Gateway\nwas created. Changing the IP address requires the creation of a new\nCustomer Gateway.\n\nThe Customer Gateway inside IP address should be configured on your tunnel\ninterface.\n\nOutside IP Addresses:\n  - Customer Gateway 		        : "+a((i=e&&e.customer_gateway_outside_address,typeof i===u?i.apply(e):i))+"\n  - Virtual Private Gateway	        : "+a((i=e&&e.vpn_gateway_outside_address,typeof i===u?i.apply(e):i))+"\n\nInside IP Addresses\n  - Customer Gateway         		: "+a((i=e&&e.customer_gateway_inside_address,typeof i===u?i.apply(e):i))+"\n  - Virtual Private Gateway             : "+a((i=e&&e.vpn_gateway_inside_address,typeof i===u?i.apply(e):i))+"\n\nConfigure your tunnel to fragment at the optimal size:\n  - Tunnel interface MTU     : 1436 bytes\n\n",i=n["if"].call(e,e&&e.isStaticRouting,{hash:{},inverse:f.program(4,h,t),fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function c(e,t){var n="",r;return n+="\n#4: Static Routing Configuration:\n\nTo route traffic between your internal network and your VPC,\nyou will need a static route added to your router.\n\nStatic Route Configuration Options:\n\n  - Next hop                      : "+a((r=e&&e.next_hop,typeof r===u?r.apply(e):r))+"\n\nYou should add static routes towards your internal network on the VGW.\nThe VGW will then send traffic towards your internal network over\nhe tunnels.\n",n}function h(e,t){var n="",r;return n+="\n#4: Border Gateway Protocol (BGP) Configuration:\n\nThe Border Gateway Protocol (BGPv4) is used within the tunnel, between the inside\nIP addresses, to exchange routes from the VPC to your home network. Each\nBGP router has an Autonomous System Number (ASN). Your ASN was provided\nto AWS when the Customer Gateway was created.\n\nBGP Configuration Options:\n  - Customer Gateway ASN	          : "+a((r=e&&e.customer_gateway_bgp_asn,typeof r===u?r.apply(e):r))+"\n  - Virtual Private  Gateway ASN          : "+a((r=e&&e.vpn_gateway_bgp_asn,typeof r===u?r.apply(e):r))+"\n  - Neighbor IP Address     		  : "+a((r=e&&e.neighbor_ip_address,typeof r===u?r.apply(e):r))+"\n  - Neighbor Hold Time       : "+a((r=e&&e.customer_gateway_bgp_hold_time,typeof r===u?r.apply(e):r))+"\n\nConfigure BGP to announce routes to the Virtual Private Gateway. The gateway\nwill announce prefixes to your customer gateway based upon the prefix you\nassigned to the VPC at creation time.\n",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+="Amazon Web Services\nVirtual Private Cloud\n\nVPN Connection Configuration\n================================================================================\nAWS utilizes unique identifiers to manipulate the configuration of\na VPN Connection. Each VPN Connection is assigned a VPN Connection Identifier\nand is associated with two other identifiers, namely the\nCustomer Gateway Identifier and the Virtual Private Gateway Identifier.\n\nYour VPN Connection ID		         : "+a((o=t&&t.vpnConnectionId,typeof o===u?o.apply(t):o))+"\nYour Virtual Private Gateway ID          : "+a((o=t&&t.vpnGatewayId,typeof o===u?o.apply(t):o))+"\nYour Customer Gateway ID    		 : "+a((o=t&&t.customerGatewayId,typeof o===u?o.apply(t):o))+"\n\nA VPN Connection consists of a pair of IPSec tunnel security associations (SAs).\nIt is important that both tunnel security associations be configured.\n\n",o=n.each.call(t,t&&t.tunnel,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n\n\n\nAdditional Notes and Questions\n================================================================================\n\n  - Amazon Virtual Private Cloud Getting Started Guide:\n      http://docs.amazonwebservices.com/AmazonVPC/latest/GettingStartedGuide\n  - Amazon Virtual Private Cloud Network Administrator Guide:\n      http://docs.amazonwebservices.com/AmazonVPC/latest/NetworkAdminGuide\n  - XSL Version: 2009-07-15-1119716",s},n.configurationDownload=e.template(t),t=function(e,t,n,r,i){function l(e,t){var n="",r;return n+='\n            <div class="payment-warning">\n                There was an issue to process payment in your account. Please update your <a target="_blank" href="'+a((r=(r=e&&e.paymentUpdate,r==null||r===!1?r:r.url),typeof r===u?r.apply(e):r))+'">payment information</a>.\n            </div>\n        ',n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<section id="modal-run-stack" class="clearfix">\n    <div class="payment-wrapper">\n        <div class="scroll-wrap">\n            <div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n            <div class="scroll-content" style="max-height: 450px">\n                <div class="modal-control-group clearfix" data-bind="true">\n                    <label class="label" for="app-name">'+a(n.i18n.call(t,"TOOLBAR.APP_NAME",{hash:{},data:i}))+'</label>\n                    <input id="app-name" class="input modal-input-value" type="text" value="'+a((o=t&&t.name,typeof o===u?o.apply(t):o))+'" data-ignore="true">\n                    <div class="runtime-error" id="runtime-error-appname"></div>\n                </div>\n                <div class="modal-control-group default-kp-group clearfix" style="display:none;">\n                    <label for="">$DefaultKeyPair</label>\n                    <div id="kp-runtime-placeholder"></div>\n                    <div class="runtime-error" id="runtime-error-kp"></div>\n                </div>\n                <div class="modal-control-group app-usage-group clearfix">\n                    <label for="">'+a(n.i18n.call(t,"TOOLBAR.APP_USAGE",{hash:{},data:i}))+'</label>\n                    <div id="app-usage-selectbox" class="selectbox">\n                        <div class="selection"><i class="icon-app-type-testing"></i>Testing</div>\n                        <ul class="dropdown" tabindex="-1">\n                            <li class="selected item" data-value="testing"><i class="icon-app-type-testing"></i>Testing</li>\n                            <li class="item" data-value="development"><i class="icon-app-type-development"></i>Development</li>\n                            <li class="item" data-value="production"><i class="icon-app-type-production"></i>Production</li>\n                            <li class="item" data-value="others"><i class="icon-app-type-others" data-value="testing"></i>Others</li>\n                        </ul>\n                    </div>\n                </div>\n                <div class="stack-validation">\n                    <details open style="display:none;">\n                        <summary>'+a(n.i18n.call(t,"TOOLBAR.STACK_VALIDATION",{hash:{},data:i}))+'</summary>\n                        <div id="stack-run-validation-container"></div>\n                    </details>\n                    <div class="nutshell" style="display: none;">:<label></label></div>\n                    <div class="validating">\n                        <div class="loading-spinner loading-spinner-small"></div>\n                        <p>'+a(n.i18n.call(t,"TOOLBAR.VALIDATING_STACK",{hash:{},data:i}))+'</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="payment-wrapper-right">\n        <div class="estimate clearfix">\n            <div class="title">Estimated AWS Cost</div>\n            <div class="price" id="label-total-fee"><b>$'+a((o=t&&t.total_fee,typeof o===u?o.apply(t):o))+'</b> / month</div>\n        </div>\n        <div class="estimate-visualops clearfix hide">\n            <div class="title">Estimated VisualOps Cost</div>\n            <div class="price" id="label-visualops-fee"><b>$'+a((o=t&&t.visualops_fee,typeof o===u?o.apply(t):o))+"</b> / month</div>\n        </div>\n        ",o=n.ifCond.call(t,t&&t.paymentState,"pastdue",{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n    </div>\n</section>",s},n.modalRunStack=e.template(t),t=function(e,t,n,r,i){function f(e,t,r){var i="",s;i+="\n",s=n["if"].call(e,r&&r.deletable,{hash:{},inverse:a.program(4,c,t),fn:a.program(2,l,t),data:t});if(s||s===0)i+=s;i+='\n<div class="rule-list-row">\n	<div class=\'rule-direction-icon tooltip icon-'+u((s=e&&e.direction,typeof s===o?s.apply(e):s))+"' data-tooltip='",s=n.ifCond.call(e,e&&e.direction,"inbound",{hash:{},inverse:a.program(8,p,t),fn:a.program(6,h,t),data:t});if(s||s===0)i+=s;i+="'></div>\n	<div class='rule-reference tooltip truncate' data-tooltip='",s=n.ifCond.call(e,e&&e.direction,"inbound",{hash:{},inverse:a.program(12,v,t),fn:a.program(10,d,t),data:t});if(s||s===0)i+=s;i+="'>",s=n["if"].call(e,e&&e.color,{hash:{},inverse:a.noop,fn:a.program(14,m,t),data:t});if(s||s===0)i+=s;i+=u((s=e&&e.relation,typeof s===o?s.apply(e):s))+'</div>\n</div>\n<div class="rule-list-row">\n	<div><span class="rule-protocol tooltip" data-tooltip=\''+u(n.i18n.call(e,"PROP.SG_TIP_PROTOCOL",{hash:{},data:t}))+"' >"+u((s=e&&e.protocol,typeof s===o?s.apply(e):s))+"</span></div>\n	<div class='rule-port tooltip' data-tooltip='"+u(n.i18n.call(e,"PROP.SG_TIP_PORT_CODE",{hash:{},data:t}))+"'>"+u((s=e&&e.port,typeof s===o?s.apply(e):s))+"</div>\n</div>\n",s=n["if"].call(e,r&&r.deletable,{hash:{},inverse:a.noop,fn:a.program(16,g,t),data:t});if(s||s===0)i+=s;return i+="\n</li>",i}function l(e,t){var n="",r;return n+='\n<li data-uid="'+u((r=e&&e.ruleSetId,typeof r===o?r.apply(e):r))+'" data-protocol="'+u((r=e&&e.protocol,typeof r===o?r.apply(e):r))+'" data-port="'+u((r=e&&e.port,typeof r===o?r.apply(e):r))+'" data-relation="'+u((r=e&&e.relation,typeof r===o?r.apply(e):r))+'" data-relationid="'+u((r=e&&e.relationId,typeof r===o?r.apply(e):r))+'" data-direction="'+u((r=e&&e.direction,typeof r===o?r.apply(e):r))+'" class="pos-r sg-create-rule-item">\n',n}function c(e,t){return'\n<li class="sg-create-rule-item modal-list-body">\n'}function h(e,t){return u(n.i18n.call(e,"PROP.SG_TIP_INBOUND",{hash:{},data:t}))}function p(e,t){return u(n.i18n.call(e,"PROP.SG_TIP_OUTBOUND",{hash:{},data:t}))}function d(e,t){return"Source"}function v(e,t){return"Destination"}function m(e,t){var n="",r;return n+='<span class="sg-color" style="background-color:'+u((r=e&&e.color,typeof r===o?r.apply(e):r))+'"></span>',n}function g(e,t){var r="";return r+='<a href="#" class="sg-rule-delete icon-remove tooltip" data-tooltip=\''+u(n.i18n.call(e,"PROP.SG_TIP_REMOVE_RULE",{hash:{},data:t}))+"'></a>",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o="function",u=this.escapeExpression,a=this;return s=n.each.call(t,t,{hash:{},inverse:a.noop,fn:a.programWithDepth(1,f,i,t),data:i}),s||s===0?s:""},n.sgRuleList=e.template(t),t=function(e,t,n,r,i){function f(e,t){var n="",r;n+='\n<h3 class="truncate sg-create-group"><span class="sg-color sg-color-rule-header" style="background-color:'+u((r=e&&e.ownerColor,typeof r===o?r.apply(e):r))+'"></span>'+u((r=e&&e.ownerName,typeof r===o?r.apply(e):r))+'</h3>\n<ul class="sg-rule-list">',r=(r=e&&e.content,typeof r===o?r.apply(e):r);if(r||r===0)n+=r;return n+="</ul>\n",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o="function",u=this.escapeExpression,a=this;return s=n.each.call(t,t&&t.groups,{hash:{},inverse:a.noop,fn:a.program(1,f,i),data:i}),s||s===0?s:""},n.groupedSgRuleList=e.template(t),t=function(e,t,n,r,i){function l(e,t){var n="",r;n+='<ul>\n<header class="modal-list-header"><span class="sg-color sg-color-rule-header" style="background-color:'+a((r=e&&e.ownerColor,typeof r===u?r.apply(e):r))+'"></span>'+a((r=e&&e.ownerName,typeof r===u?r.apply(e):r))+"</header>\n",r=(r=e&&e.content,typeof r===u?r.apply(e):r);if(r||r===0)n+=r;return n+="\n</ul>",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<p>Following rule(s) will be deleted from its(their) security group:</p>\n<article class="scroll-wrap delete-sgrule-dialog">\n<div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n<div class="scroll-content">\n',o=n.each.call(t,t,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n</div>\n</article>",s},n.groupedSgRuleListDelConfirm=e.template(t),t=function(e,t,n,r,i){function f(e,t){var r="",i;r+='\n<li class="input-ip-item">\n  <div class="name tooltip" data-tooltip="',i=n["if"].call(e,e&&e.autoAssign,{hash:{},inverse:u.program(4,c,t),fn:u.program(2,l,t),data:t});if(i||i===0)r+=i;r+='">\n    <label class="input-ip-wrap" for="propertyIpListItem-'+o((i=t==null||t===!1?t:t.index,typeof i===a?i.apply(e):i))+'"><span class="input-ip-prefix">'+o((i=e&&e.prefix,typeof i===a?i.apply(e):i))+'</span>\n    <input type="text" class="input input-ip"  id="propertyIpListItem-'+o((i=t==null||t===!1?t:t.index,typeof i===a?i.apply(e):i))+'" value="'+o((i=e&&e.suffix,typeof i===a?i.apply(e):i))+'" ',i=n.unless.call(e,e&&e.editable,{hash:{},inverse:u.noop,fn:u.program(6,h,t),data:t});if(i||i===0)r+=i;r+=' data-ignore="true" data-ignore-regexp="^[0-9.x]*$" data-required="true">\n    </label>\n  </div>\n  <div class="input-ip-eip-btn tooltip toggle-eip',i=n["if"].call(e,e&&e.hasEip,{hash:{},inverse:u.noop,fn:u.program(8,p,t),data:t});if(i||i===0)r+=i;r+='" data-tooltip="',i=n["if"].call(e,e&&e.hasEip,{hash:{},inverse:u.program(12,v,t),fn:u.program(10,d,t),data:t});if(i||i===0)r+=i;r+='"></div>\n  ',i=n.unless.call(e,e&&e.unDeletable,{hash:{},inverse:u.noop,fn:u.program(14,m,t),data:t});if(i||i===0)r+=i;return r+="\n</li>\n",r}function l(e,t){return o(n.i18n.call(e,"PROP.INSTANCE_IP_MSG_2",{hash:{},data:t}))}function c(e,t){return o(n.i18n.call(e,"PROP.INSTANCE_IP_MSG_1",{hash:{},data:t}))}function h(e,t){return'disabled="disabled"'}function p(e,t){return" associated"}function d(e,t){return o(n.i18n.call(e,"PROP.INSTANCE_IP_MSG_4",{hash:{},data:t}))}function v(e,t){return o(n.i18n.call(e,"PROP.INSTANCE_IP_MSG_3",{hash:{},data:t}))}function m(e,t){return'<div class="icon-remove"></div>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o=this.escapeExpression,u=this,a="function";return s=n.each.call(t,t,{hash:{},inverse:u.noop,fn:u.program(1,f,i),data:i}),s||s===0?s:""},n.propertyIpList=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="";return r+='\n				<div class="modal-text-minor" style="margin-top:10px;"><i class="icon-inbound"></i>'+u(n.i18n.call(e,"POP_SGRULE_LBL_INBOUND",{hash:{},data:t}))+"</div>\n			",r}function c(e,t){var r="";return r+='\n			<div class="radio-group-horizontal">\n				<div class="radio">\n					<input id="radio_inbound" type="radio" name="sg-direction" checked="checked" value="inbound" />\n					<label for="radio_inbound"></label>\n				</div>\n				<label for="radio_inbound" ><i class="icon-inbound icon-label"></i>'+u(n.i18n.call(e,"POP_SGRULE_LBL_INBOUND",{hash:{},data:t}))+'</label>\n			</div>\n\n			<div class="radio-group-horizontal">\n				<div class="radio">\n					<input id="radio_outbound" type="radio" name="sg-direction" value="outbound"/>\n					<label for="radio_outbound"></label>\n				</div>\n				<label for="radio_outbound"><i class="icon-outbound icon-label"></i>'+u(n.i18n.call(e,"POP_SGRULE_LBL_OUTBOUND",{hash:{},data:t}))+"</label>\n			</div>\n			",r}function h(e,t){var n="",r;return n+='\n					<li class="item truncate" data-id="sg" data-uid="'+u((r=e&&e.id,typeof r===a?r.apply(e):r))+'"><span class="sg-color" style="background-color:'+u((r=e&&e.color,typeof r===a?r.apply(e):r))+'"></span>'+u((r=e&&e.name,typeof r===a?r.apply(e):r))+"</li>\n					",n}function p(e,t){return"\n							"}function d(e,t){var r="";return r+='\n							<li class="item" data-id="custom">'+u(n.i18n.call(e,"POP_SGRULE_PROTOCOL_CUSTOM",{hash:{},data:t}))+'</li>\n							<li class="item" data-id="all">'+u(n.i18n.call(e,"POP_SGRULE_PROTOCOL_ALL",{hash:{},data:t}))+"</li>\n							",r}function v(e,t){return'\n					<div class="sg-protocol-option-input" id="sg-protocol-custom">\n						<input class="input" name="protocol-custom-ranged" placeholder="0-255" data-ignore="true" data-ignore-regexp="^[0-9]*$" data-required="true">\n					</div>\n					<div class="sg-protocol-option-input" id="sg-protocol-all">\n						Port Range:<span>0-65535</span>\n					</div>\n				'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+='<div id="modal-sg-rule" data-bind="true">\n	<div class="modal-header">\n		<h3>'+u(n.i18n.call(t,"POP_SGRULE_TITLE_ADD",{hash:{},data:i}))+'</h3><i class="modal-close">&times;</i>\n	</div>\n\n	<div class="modal-body">\n		<div class="modal-control-group clearfix">\n			<label class="label-short">'+u(n.i18n.call(t,"POP_SGRULE_LBL_DIRECTION",{hash:{},data:i}))+'</label>\n\n			<div id="sg-modal-direction">\n			',o=n["if"].call(t,t&&t.isClassic,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+='\n			</div>\n		</div>\n\n		<div class="modal-control-group clearfix">\n			<label class="label-short" for="securitygroup-modal-description" id="rule-modal-ip-range">'+u(n.i18n.call(t,"POP_SGRULE_LBL_SOURCE",{hash:{},data:i}))+'</label>\n			<div class="selectbox" id="sg-add-model-source-select">\n				<div class="selection">IP...</div>\n				<ul class="dropdown">\n					<li class="item selected" data-id="custom">IP...</li>\n					',o=n.each.call(t,t&&t.sgList,{hash:{},inverse:f.noop,fn:f.program(5,h,i),data:i});if(o||o===0)s+=o;s+='\n				</ul>\n			</div>\n			<input class="input" type="text" id="securitygroup-modal-description" data-ignore="true" data-ignore-regexp="^[0-9./]*$" data-required="true" placeholder=\''+u(n.i18n.call(t,"POP_SGRULE_PLACEHOLD_SOURCE",{hash:{},data:i}))+'\'>\n		</div>\n\n		<div class="modal-control-group clearfix">\n			<label class="label-short" >'+u(n.i18n.call(t,"POP_SGRULE_LBL_PROTOCOL",{hash:{},data:i}))+'</label>\n				<div class="modal-protocol-select">\n					<div class="selectbox" id="modal-protocol-select"  data-protocal-type="tcp">\n						<div class="selection">'+u(n.i18n.call(t,"POP_SGRULE_PROTOCOL_TCP",{hash:{},data:i}))+'</div>\n						<ul class="dropdown" tabindex="-1">\n							<li class="selected item" data-id="tcp">'+u(n.i18n.call(t,"POP_SGRULE_PROTOCOL_TCP",{hash:{},data:i}))+'</li>\n							<li class="item" data-id="udp">'+u(n.i18n.call(t,"POP_SGRULE_PROTOCOL_UDP",{hash:{},data:i}))+'</li>\n							<li class="item" data-id="icmp">'+u(n.i18n.call(t,"POP_SGRULE_PROTOCOL_ICMP",{hash:{},data:i}))+"</li>\n							",o=n["if"].call(t,t&&t.isClassic,{hash:{},inverse:f.program(9,d,i),fn:f.program(7,p,i),data:i});if(o||o===0)s+=o;s+='\n						</ul>\n					</div>\n				</div>\n			<div id="sg-protocol-select-result">\n				<div class="sg-protocol-option-input show" id="sg-protocol-tcp">\n					<input class="input" type="text" placeholder=\''+u(n.i18n.call(t,"POP_SGRULE_PLACEHOLD_PORT_RANGE",{hash:{},data:i}))+'\' data-ignore="true" data-ignore-regexp="^[0-9-]*$"  data-required="true"/>\n				</div>\n				<div class="sg-protocol-option-input" id="sg-protocol-udp">\n					<input class="input" type="text" placeholder=\''+u(n.i18n.call(t,"POP_SGRULE_PLACEHOLD_PORT_RANGE",{hash:{},data:i}))+'\' data-ignore="true" data-ignore-regexp="^[0-9-]*$" data-required="true"/>\n				</div>\n\n				<div class="sg-protocol-option-input" id="sg-protocol-icmp">\n					<div class="selectbox" id="protocol-icmp-main-select" data-protocal-main="0"  data-protocal-sub="-1">\n					<div class="selection">Echo Reply(0)</div>\n					<div class="dropdown scroll-wrap scrollbar-auto-hide context-wrap" style="height:300px;">\n						<div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n						<ul tabindex="-1" class="scroll-content">\n							<li class="item selected" data-id="0">Echo Reply(0)</li>\n							<li class="item" data-id="3">Destination Unreachable(3) ...</li>\n							<li class="item" data-id="4">Source Quench(4)</li>\n							<li class="item" data-id="5">Redirect Message(5) ...</li>\n							<li class="item" data-id="6">Alternate Host Address(6)</li>\n							<li class="item" data-id="8">Echo Request(8)</li>\n							<li class="item" data-id="9">Router Advertisement(9)</li>\n							<li class="item" data-id="10">Router Solicitation(10)</li>\n							<li class="item" data-id="11">Time Exceeded(11) ...</li>\n							<li class="item" data-id="12">Parameter Problem: Bad IP header(12) ...</li>\n							<li class="item" data-id="13">Timestamp(13)</li>\n							<li class="item" data-id="14">Timestamp Reply(14)</li>\n							<li class="item" data-id="15">Information Request(15)</li>\n							<li class="item" data-id="16">Information Reply(16)</li>\n							<li class="item" data-id="17">Address Mask Request(17)</li>\n							<li class="item" data-id="18">Address Mask Reply(18)</li>\n							<li class="item" data-id="30">Traceroute(30)</li>\n							<li class="item" data-id="31">Datagram Conversion Error(31)</li>\n							<li class="item" data-id="32">Mobile Host Redirect(32)</li>\n							<li class="item" data-id="33">Where Are You(33)</li>\n							<li class="item" data-id="34">Here I Am(34)</li>\n							<li class="item" data-id="35">Mobile Registration Request(35)</li>\n							<li class="item" data-id="36">Mobile Registration Reply(36)</li>\n							<li class="item" data-id="37">Domain Name Request(37)</li>\n							<li class="item" data-id="38">Domain Name Reply(38)</li>\n							<li class="item" data-id="39">SKIP Algorithm Discovery Protocol(39)</li>\n							<li class="item" data-id="40">Photuris Security Failures(40)</li>\n							<li class="item" data-id="-1">All(-1)</li>\n						</ul>\n					</div>\n					</div>\n				</div>\n\n				<div class="selectbox protocol-icmp-sub-select" id="protocol-icmp-sub-select-3">\n					<div class="selection">All(-1)</div>\n					<div class="dropdown scroll-wrap scrollbar-auto-hide context-wrap" style="height:300px;">\n						<div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n						<ul class="scroll-content" tabindex="-1">\n							<li class="item selected" data-id="-1">All(-1)</li>\n							<li class="item" data-id="0">destination network unreachable(0)</li>\n							<li class="item" data-id="1">destination host unreachable(1)</li>\n							<li class="item" data-id="2">destination protocol unreachable(2)</li>\n							<li class="item" data-id="3">destination port unreachable(3)</li>\n							<li class="item" data-id="4">fragmentation required and DF flag set(4)</li>\n							<li class="item" data-id="5">source route failed(5)</li>\n							<li class="item" data-id="6">destination network unknown(6)</li>\n							<li class="item" data-id="7">destination host unknown(7)</li>\n							<li class="item" data-id="8">source host isolated(8)</li>\n							<li class="item" data-id="9">network administratively prohibited(9)</li>\n							<li class="item" data-id="10">host administratively prohibited(10)</li>\n							<li class="item" data-id="11">network unreachable for TOS(11)</li>\n							<li class="item" data-id="12">host unreachable for TOS(12)</li>\n							<li class="item" data-id="13">communication administratively prohibited(13)</li>\n						</ul>\n					</div>\n				</div>\n\n				<div class="selectbox protocol-icmp-sub-select" id="protocol-icmp-sub-select-5">\n					<div class="selection">All(-1)</div>\n					<ul class="dropdown" tabindex="-1">\n						<li class="selected item" data-id="-1">All(-1)</li>\n						<li class="item" data-id="0">redirect datagram for the network(0)</li>\n						<li class="item" data-id="1">redirect datagram for the host(1)</li>\n						<li class="item" data-id="2">redirect datagram for the TOS & network(2)</li>\n						<li class="item" data-id="3">redirect datagram for the TOS & host(3)</li>\n					</ul>\n				</div>\n\n				<div class="selectbox protocol-icmp-sub-select" id="protocol-icmp-sub-select-11">\n					<div class="selection">All(-1)</div>\n					<ul class="dropdown" tabindex="-1">\n						<li class="item selected" data-id="-1">All(-1)</li>\n						<li class="item" data-id="0">TTL expired transit(0)</li>\n						<li class="item" data-id="1">fragmentation reasembly time exceeded(1)</li>\n					</ul>\n				</div>\n\n				<div class="selectbox protocol-icmp-sub-select" id="protocol-icmp-sub-select-12">\n					<div class="selection">All(-1)</div>\n					<ul class="dropdown" role="menu">\n						<li class="item selected" data-id="-1">All(-1)</li>\n						<li class="item" data-id="0">pointer indicates the error(0)</li>\n						<li class="item" data-id="1">missing a required option(1)</li>\n						<li class="item" data-id="2">bad length(2)</li>\n					</ul>\n				</div>\n\n				',o=n.unless.call(t,t&&t.isClassic,{hash:{},inverse:f.noop,fn:f.program(11,v,i),data:i});if(o||o===0)s+=o;return s+='\n			</div>\n		</div>\n	</div>\n	<div class="modal-footer">\n		<button class="btn btn-blue" id=\'sg-modal-save\'>'+u(n.i18n.call(t,"POP_SGRULE_BTN_SAVE",{hash:{},data:i}))+'</button>\n		<button class="btn btn-silver modal-close">'+u(n.i18n.call(t,"POP_SGRULE_BTN_CANCEL",{hash:{},data:i}))+"</button>\n	</div>\n</div>",s},n.modalSGRule=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div style="width:500px">\n	<div class="modal-header">\n		<h3>Get Windows Password</h3>\n		<i class="modal-close">&times;</i>\n	</div>\n	<div class="modal-body">\n		<section class="password-hint">\n			<p class="modal-text-major">This instance was associated with key pair: <span>'+a((o=t&&t.name,typeof o===u?o.apply(t):o))+'</span></p>\n			<p>To access this instance remotely (e.g. Remote Desktop Connection), you will need your Windows Administrator password. A default password was created when the instance was launched and is available encrypted in the system log.</p>\n		</section>\n		<section class="import-zone">\n			<div id=\'keypair-loading\' class="loading-spinner"></div>\n		</section>\n		<section class="decrypt-action" style="display: none;">\n			<button class="btn btn-blue" id="do-kp-decrypt" disabled>Decrypt Password</button>\n			<input readonly class="input" type="text" id="keypair-pwd" placeholder="Decripted password will appear here">\n			<div class="change-pw-recommend icon-info tooltip" data-tooltip="We recommend that you change your password to one that you will remember and know privately. Please note that passwords can persist through bundling phases and will not be retrievable through this tool. It is therefore important that you change your password to one that you will remember if you intend to bundle a new AMI from this instance." style="display: none;">Change Password Recommendation from AWS</div>\n		</section>\n		<section class="no-password" style="display: none;">\n			<p>\n				Your password is not ready. Password generation can sometimes take more than 30 minutes. Please wait at least 15 minutes after launching an instance before trying to retrieve the generated password.\n			</p>\n\n			<p>\n				If you launched this instance from your own AMI, the password is the same as for the instance from which you created the AMI, unless this setting was modified in the EC2Config service settings.\n			</p>\n		</section>\n	</div>\n</div>',s},n.modalDecryptPassword=e.template(t),t=function(e,t,n,r,i){function l(e,t){return"\n			<div id='keypair-loading' class=\"loading-spinner\"></div>\n		"}function c(e,t){return'class="hide"'}function h(e,t){return'\n			<div class="keypair-download clearfix modal-control-group">\n				<p class="modal-text-major left">Key Pair data is ready</p>\n				<a href="#" class="btn btn-blue right" id="keypair-kp-download">Download</a>\n			</div>\n			'}function p(e,t){var n="",r;return n+='\n			<div class="keypair-download clearfix modal-control-group">\n				<p class="modal-text-major">This instance was associated with key pair: '+a((r=e&&e.name,typeof r===u?r.apply(e):r))+"</p>\n			</div>\n			",n}function d(e,t){var n="",r;return n+='\n			<div id="keypair-remote" class="modal-control-group clearfix">\n				<label for="keypair-cmd">Remote Access</label>\n				<input class="input" id="keypair-cmd" type="text" readonly="readonly" value="'+a((r=e&&e.loginCmd,typeof r===u?r.apply(e):r))+'">\n			</div>\n			',n}function v(e,t){return'\n			<div class="modal-control-group clearfix">\n				<label style="width:100%;">Windows Login Password</label>\n				<div id="keypair-login">\n					<input type="password" readonly="readonly" id="keypair-pwd-old" class="input">\n					<a href="#" class="btn btn-silver kp-copy-btn" id="keypair-show">Show password</a>\n				</div>\n				<div id="keypair-no-pwd"></div>\n			</div>\n			'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div style="width:420px">\n	<div class="modal-header">\n		<h3 id=\'keypair-name\'>'+a((o=t&&t.name,typeof o===u?o.apply(t):o))+'</h3>\n		<i class="modal-close">&times;</i>\n	</div>\n	<div class="modal-body">\n		',o=n["if"].call(t,t&&t.isOldKp,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+='\n		<section id="keypair-body" ',o=n["if"].call(t,t&&t.isOldKp,{hash:{},inverse:f.noop,fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;s+=">\n			",o=n["if"].call(t,t&&t.isOldKp,{hash:{},inverse:f.program(7,p,i),fn:f.program(5,h,i),data:i});if(o||o===0)s+=o;s+="\n			",o=n.unless.call(t,t&&t.windows,{hash:{},inverse:f.program(11,v,i),fn:f.program(9,d,i),data:i});if(o||o===0)s+=o;return s+='\n\n		</section>\n	</div>\n\n	<div class="modal-footer">\n		<button class="btn modal-close btn-silver">Close</button>\n	</div>\n</div>',s},n.modalDownloadKP=e.template(t),t=function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<article>\n	<div class="property-control-group">This resource is not available. It may have been deleted from other source or terminated in previous app editing.</div>\n</article>'},n.missingPropertyPanel=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<article>\n	<div class="property-control-group">'+a((o=t&&t.asgName,typeof o===u?o.apply(t):o))+" is deleted in stopped app. The auto scaling group will be created when the app is started.</div>\n</article>",s},n.missingAsgWhenStop=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div style="width:420px">\n	<div class="modal-header"> <h3>Set up CIDR Block</h3><i class="modal-close">&times;</i> </div>\n	<div class="modal-body">\n		<div class="modal-text-wraper"> <div class="modal-center-align-helper">\n			<div class="modal-text-major">'+a((o=t&&t.main_content,typeof o===u?o.apply(t):o))+'</div>\n			<div class="modal-text-minor">'+a((o=t&&t.desc_content,typeof o===u?o.apply(t):o))+'</div>\n		</div> </div>\n	</div>\n	<div class="modal-footer">\n		<a id="cidr-remove" class="link-red left link-modal-danger">'+a((o=t&&t.remove_content,typeof o===u?o.apply(t):o))+'</a>\n		<button id="cidr-return" class="btn modal-close btn-blue">OK</button>\n	</div>\n</div>',s},n.setupCIDRConfirm=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div class="modal-body">\n	<div class="modal-center-align-helper">\n		<p>'+a((o=t&&t.host,typeof o===u?o.apply(t):o))+" has been automatically assigned Public IP.</p>\n		<p>If you want to attach the external network interface to "+a((o=t&&t.host,typeof o===u?o.apply(t):o))+", the Public IP must be removed.</p>\n		<p>Do you still want to attach "+a((o=t&&t.eni,typeof o===u?o.apply(t):o))+" to "+a((o=t&&t.host,typeof o===u?o.apply(t):o))+" and remove the Public IP?</p>\n	</div>\n</div>",s},n.modalAttachingEni=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div style="width:420px">\n	<div class="modal-header"> <h3>Stack Name Already in Use</h3><i class="modal-close">&times;</i> </div>\n	<div class="modal-body" style="min-height:120px;">\n		<div class="modal-text-wraper">\n			<div class="modal-center-align-helper">\n				<div class="modal-text-major">Stack name <span class="resource-name-label">'+a((o=t&&t.stack_name,typeof o===u?o.apply(t):o))+'</span> is already used by another stack. Please use a different name.</div>\n				<div class="modal-control-group" data-bind="true">\n					<label for="new-stack-name">Stack Name</label>\n					<input id="new-stack-name" class="input modal-input-value" type="text" value="'+a((o=t&&t.stack_name,typeof o===u?o.apply(t):o))+'" data-ignore="true">\n				</div>\n			</div>\n		</div>\n	</div>\n	<div class="modal-footer">\n		<button id="rename-confirm" class="btn btn-blue">Save</button>\n	</div>\n</div>',s},n.modalReinputStackName=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div style="width:420px">\n	<div class="modal-header"> <h3>'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+'</h3><i class="modal-close">&times;</i> </div>\n	<div class="modal-body">\n		<div class="modal-text-wraper">\n			 <div class="modal-center-align-helper">\n				<div class="modal-text-major">'+a((o=t&&t.main_content,typeof o===u?o.apply(t):o))+'</div>\n				<div class="modal-text-minor">'+a((o=t&&t.desc_content,typeof o===u?o.apply(t):o))+'</div>\n			</div>\n		 </div>\n	</div>\n	<div class="modal-footer">\n		<button id="modal-confirm-delete" class="btn btn-red">Delete</button>\n		<button id="modal-cancel" class="btn modal-close btn-silver">Cancel</button>\n	</div>\n</div>',s},n.modalDeleteSGOrACL=e.template(t),t=function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div id="loading-modal-wrap">\n	<div class="loading-modal" id="modal-box">\n		<div class="loading-spinner loading-spinner-mid"></div>\n		<div>Refreshing resources...</div>\n	</div>\n</div>'},n.loadingTransparent=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div style="width:420px">\n	<div class="modal-header"> <h3>'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+'</h3><i class="modal-close">&times;</i> </div>\n	<div class="modal-body">\n		<div class="modal-text-wraper">\n			 <div class="modal-center-align-helper">\n				<div class="modal-text-major">'+a((o=t&&t.main_content,typeof o===u?o.apply(t):o))+'</div>\n				<div class="modal-text-minor">'+a((o=t&&t.desc_content,typeof o===u?o.apply(t):o))+'</div>\n			</div>\n		 </div>\n	</div>\n	<div class="modal-footer">\n		<button id="modal-confirm-delete" class="btn btn-red">Delete</button>\n		<button id="modal-cancel" class="btn modal-close btn-silver">Cancel</button>\n	</div>\n</div>',s},n.modalForceDeleteApp=e.template(t),t=function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div>\n	<div class="info">Last saved: <span class="stack-save-time">-<span></div>\n	<ul class="statusbar-btn-list">\n		<li class="statusbar-btn btn-state">\n			<span class="state-success"><i class="status status-green icon-label"></i><b>0</b></span>\n			<span class="state-failed"><i class="status status-red icon-label"></i><b>0</b></span>\n		</li>\n		<li class="statusbar-btn btn-ta-valid">Validate</li>\n	</ul>\n</div>'},n.statusbar=e.template(t),t=function(e,t,n,r,i){function l(e,t){var n="",r;return n+="\n				<li>"+a((r=e&&e.name,typeof r===u?r.apply(e):r))+"( "+a((r=e&&e.instance_id,typeof r===u?r.apply(e):r))+" )</li>\n				",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div style="width:420px">\n	<div class="modal-header"><h3 class="truncate" style="width: 380px;">Need to Restart Instance</h3><i class="modal-close">&times;</i> </div>\n	<div class="modal-body" style="height:150px;">\n		<div class="modal-text-wraper">\n			<div class="modal-text-major">To update the properties you have changed, following instances need to restart:</div>\n			<ul class="clearfix">\n				',o=n.each.call(t,t&&t.instance_list,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+='\n			</ul>\n			<div id="instance-type" class="modal-text-major"></div>\n		</div>\n	</div>\n	<div class="modal-footer">\n		<button id="confirm-update-app" class="btn btn-blue" style="width:160px;">Continue to Update</button>\n		<button class="btn modal-close btn-silver">Cancel</button>\n	</div>\n</div>',s},n.restartInstance=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="";return r+='\n                    <h3 class="modal-text-major">'+u(n.i18n.call(e,"POP_CONFIRM_UPDATE_MAJOR_TEXT_RUNNING",{hash:{},data:t}))+"</h3>\n                ",r}function c(e,t){var r="";return r+='\n                    <h3 class="modal-text-major">'+u(n.i18n.call(e,"POP_CONFIRM_UPDATE_MAJOR_TEXT_STOPPED",{hash:{},data:t}))+'</h3>\n\n                    <p class="modal-text-minor"\n                       style="margin-top:10px;">'+u(n.i18n.call(e,"POP_CONFIRM_UPDATE_MINOR_TEXT_STOPPED",{hash:{},data:t}))+"</p>\n                ",r}function h(e,t){var r="",i;r+='\n                    <section class="check-final-snapshot checkbox-wrap">\n                        <div class="checkbox">\n                            <input id="take-rds-snapshot" type="checkbox" checked="checked" name="dns-resolution">\n                            <label for="take-rds-snapshot"></label>\n                        </div>\n                        <label for="take-rds-snapshot">Take final snapshot for DB instances.</label>\n                    </section>\n                    ',i=n["if"].call(e,(i=e&&e.notReadyDB,i==null||i===!1?i:i.length),{hash:{},inverse:a.noop,fn:a.program(6,p,t),data:t});if(i||i===0)r+=i;return r+="\n                ",r}function p(e,t){var r="",i;r+='\n                        <p class="cant-snapshot">DB Instance\n                            ',i=n.each.call(e,e&&e.notReadyDB,{hash:{},inverse:a.noop,fn:a.program(7,d,t),data:t});if(i||i===0)r+=i;return r+="\n                            cannot take final snapshot.</p>\n                    ",r}function d(e,t){var r="",i;i=n["if"].call(e,t==null||t===!1?t:t.index,{hash:{},inverse:a.noop,fn:a.program(8,v,t),data:t});if(i||i===0)r+=i;return r+=u((i=(i=e&&e.attributes,i==null||i===!1?i:i.DBInstanceIdentifier),typeof i===f?i.apply(e):i))+'(<span\n                                    class="db-stop-status">'+u((i=(i=e&&e.attributes,i==null||i===!1?i:i.DBInstanceStatus),typeof i===f?i.apply(e):i))+"</span>)",r}function v(e,t){return", "}function m(e,t){var n="",r;return n+='\n            <div class="payment-warning">\n                There was an issue to process payment in your account. Please update your <a href="'+u((r=e&&e["payment-link"],typeof r===f?r.apply(e):r))+'">payment\n                information</a>.\n            </div>\n        ',n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a=this,f="function";s+='<div id="app-apply-update" class="clearfix">\n    <div class="payment-wrapper">\n        <div class="scroll-wrap">\n            <div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n            <div class="scroll-content" style="height: 400px">\n                <div class="default-kp-group clearfix" style="display: none;">\n                    <label for="kp-runtime-placeholder">$DefaultKeyPair</label>\n                    <div id="kp-runtime-placeholder"></div>\n                    <div class="runtime-error" id="runtime-error-kp"></div>\n                </div>\n                ',o=n["if"].call(t,t&&t.isRunning,{hash:{},inverse:a.program(3,c,i),fn:a.program(1,l,i),data:i});if(o||o===0)s+=o;s+='\n                <div class="scroll-wrap" style="max-height:256px;">\n                    <div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n                    <div class="scroll-content res_diff_tree" id="app-update-summary-table">\n                    </div>\n                </div>\n                ',o=n["if"].call(t,(o=t&&t.removeList,o==null||o===!1?o:o.length),{hash:{},inverse:a.noop,fn:a.program(5,h,i),data:i});if(o||o===0)s+=o;s+='\n                <div class="stack-validation">\n                    <details open style="display:none;">\n                        <summary>'+u(n.i18n.call(t,"POP_CONFIRM_UPDATE_VALIDATION",{hash:{},data:i}))+'</summary>\n                        <div id="stack-run-validation-container"></div>\n                    </details>\n                    <div class="nutshell" style="display: none;">:<label></label></div>\n                    <div class="validating">\n                        <div class="loading-spinner loading-spinner-small"></div>\n                        <p>'+u(n.i18n.call(t,"POP_CONFIRM_UPDATE_VALIDATING",{hash:{},data:i}))+'</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="payment-wrapper-right">\n        <div class="estimate clearfix">\n            <div class="title">Estimated AWS Cost</div>\n            <div class="price" id="label-total-fee"><b>$'+u((o=t&&t.total_fee,typeof o===f?o.apply(t):o))+'</b> / month</div>\n        </div>\n        <div class="estimate-visualops clearfix hide">\n            <div class="title">Estimated VisualOps Cost</div>\n            <div class="price" id="label-visualops-fee"><b>$'+u((o=t&&t.visualops_fee,typeof o===f?o.apply(t):o))+"</b> / month</div>\n        </div>\n        ",o=n.ifCond.call(t,t&&t.paymentState,"past_due",{hash:{},inverse:a.noop,fn:a.program(10,m,i),data:i});if(o||o===0)s+=o;return s+="\n    </div>\n\n</div>",s},n.updateApp=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="",i;i=n["if"].call(e,t==null||t===!1?t:t.index,{hash:{},inverse:u.noop,fn:u.program(2,c,t),data:t});if(i||i===0)r+=i;return r+='<span class="resource-tag">'+f((i=(i=e&&e.attributes,i==null||i===!1?i:i.DBInstanceIdentifier),typeof i===a?i.apply(e):i))+'</span>(<span class="db-stop-status">'+f((i=(i=e&&e.attributes,i==null||i===!1?i:i.DBInstanceStatus),typeof i===a?i.apply(e):i))+"</span>) ",r}function c(e,t){return", "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this,a="function",f=this.escapeExpression;s+='<p class="modal-text-major">DB Instance\n    ',o=n.each.call(t,t&&t.data,{hash:{},inverse:u.noop,fn:u.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n    cannot be modified now.</p>\n<p>Wait for the DB instance(s) to be available. Then try to apply updates\n    again.</p>",s},n.cantUpdateApp=e.template(t),t=function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="loading-spinner"></div>'},n.loadingSpiner=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div id="node-action-wrap">\n	<div id="node-action-state">\n		<div id="node-action-state-btn">\n			<i id="node-state-icon"></i>\n			<span id="node-state-number">'+a((o=t&&t.state_num,typeof o===u?o.apply(t):o))+'</span>\n		</div>\n		<div class="node-action-tooltip">Edit State</div>\n	</div>\n</div>',s},n.nodeAction=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div id="modal-instance-sys-log" style="width: 900px;">\n	<div class="modal-header"><h3>System Log: '+a((o=t&&t.instance_id,typeof o===u?o.apply(t):o))+'</h3><i class="modal-close">&times;</i> </div>\n	<div class="modal-body">\n		<section class="instance-sys-log-loading loading-spinner"></section>\n		<div class="instance-sys-log-content font-mono">'+a((o=t&&t.log_content,typeof o===u?o.apply(t):o))+'</div>\n		<div class="instance-sys-log-info modal-text-minor">System log is not ready yet. Please try in a short while.</div>\n	</div>\n	<div class="modal-footer">\n		<button id="modal-instance-sys-log-cancel" class="btn modal-close btn-silver">Close</button>\n	</div>\n</div>',s},n.modalInstanceSysLog=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div class="modal-text-major">Are you sure you want to delete '+a((o=t&&t.name,typeof o===u?o.apply(t):o))+'?</div>\n<div class="modal-text-minor">Once deleted, the states of '+a((o=t&&t.name,typeof o===u?o.apply(t):o))+"'s configuration will be lost.</div>",s},n.NodeStateRemoveConfirmation=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div class="modal-text-major">Are you sure you want to delete '+a((o=t&&t.name,typeof o===u?o.apply(t):o))+'?</div>\n<div class="modal-text-minor">The security group '+a((o=t&&t.sg,typeof o===u?o.apply(t):o))+" will also be deleted. Other load balancer using this security group will be affected.</div>",s},n.ElbRemoveConfirmation=e.template(t),t=function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div style="width:420px">\n	<div class="modal-header"><h3>Confirm to Enable VisualOps</h3><i class="modal-close">&times;</i></div>\n	<div class="modal-body">\n		<div class="modal-text-wraper">\n			<div class="modal-center-align-helper">\n				<div class="modal-text-major">Enable VisualOps will override your custom User Data. Are you sure to continue?</div>\n			</div>\n		</div>\n	</div>\n	<div class="modal-footer">\n		<button id="modal-stack-agent-enable-confirm" style="width:145px;" class="btn modal-confirm btn-blue">Enable VisualOps</button>\n		<button id="modal-stack-agent-enable-cancel" class="btn modal-close btn-silver">Cancel</button>\n	</div>\n</div>'},n.modalStackAgentEnable=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o=this.escapeExpression;return s+='<div style="width:640px" id="modal-key-short">\n	<div class="modal-header"><h3>'+o(n.i18n.call(t,"KEY_MOD_TIT",{hash:{},data:i}))+'</h3><i class="modal-close">&times;</i></div>\n	<div class="modal-body scroll-wrap">\n		<div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n		<div class="scroll-content" style="height: 560px">\n			<section class="key-stack-app">\n				<h3 class="title">'+o(n.i18n.call(t,"KEY_TIT_STACK_APP_OP",{hash:{},data:i}))+'</h3>\n				<ul class="keys">\n					<li class="key-item">\n						<div class="key font-mono">'+o(n.i18n.call(t,"KEY_PROP_KEY",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_PROP_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key font-mono">'+o(n.i18n.call(t,"KEY_STAT_KEY",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_STAT_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_DUPL_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_DUPL_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_DUPL_ACTION",{hash:{},data:i}))+'\n						</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_DEL_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_DEL_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_DEL_ACTION",{hash:{},data:i}))+'\n						</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_SAVE_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_SAVE_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_SAVE_ACTION",{hash:{},data:i}))+'\n						</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_SCRL_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_SCRL_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_SCRL_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n          <li class="key-item">\n            <div class="key">← ↑ → ↓</div>\n            <div class="action">'+o(n.i18n.call(t,"KEY_NUDGE_ITEM_ACTION",{hash:{},data:i}))+'</div>\n          </li>\n				</ul>\n			</section>\n			<section class="key-state">\n				<h3 class="title">'+o(n.i18n.call(t,"KEY_TIT_STATE_GEN",{hash:{},data:i}))+'</h3>\n				<ul class="keys">\n					<li class="key-item">\n						<div class="key font-mono">'+o(n.i18n.call(t,"KEY_FOCUS_KEY",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_FOCUS_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key font-mono">'+o(n.i18n.call(t,"KEY_SELECT_KEY",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_SELECT_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key font-mono">'+o(n.i18n.call(t,"KEY_EXPAND_KEY",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_EXPAND_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key font-mono">'+o(n.i18n.call(t,"KEY_COLLAPSE_KEY",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_COLLAPSE_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key font-mono">'+o(n.i18n.call(t,"KEY_NEXT_KEY",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_NEXT_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key font-mono">'+o(n.i18n.call(t,"KEY_PREV_KEY",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_PREV_ACTION",{hash:{},data:i}))+'\n						</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_CONTENT_EDITOR_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_CONTENT_EDITOR_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_CONTENT_EDITOR_ACTION",{hash:{},data:i}))+'\n						</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_INFO_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_INFO_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_INFO_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_LOG_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_LOG_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_LOG_ACTION",{hash:{},data:i}))+'\n						</div>\n					</li>\n				</ul>\n			</section>\n			<section class="key-state-edit">\n				<h3 class="title">'+o(n.i18n.call(t,"KEY_TIT_STATE_EDIT",{hash:{},data:i}))+'</h3>\n				<ul class="keys">\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_SELECT_ALL_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_SELECT_ALL_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_SELECT_ALL_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_DESELECT_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_DESELECT_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_DESELECT_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_CREATE_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_CREATE_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_CREATE_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_DEL_STATE_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_DEL_STATE_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_DEL_STATE_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_MOVE_FOCUS_STATE_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_MOVE_FOCUS_STATE_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_MOVE_FOCUS_STATE_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_COPY_STATE_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_COPY_STATE_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_COPY_STATE_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_PASTE_STATE_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_PASTE_STATE_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_PASTE_STATE_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_UNDO_STATE_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_UNDO_STATE_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_UNDO_STATE_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_REDO_STATE_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_REDO_STATE_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_REDO_STATE_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n				</ul>\n			</section>\n		</div>\n	</div>\n	<div class="modal-footer">\n		<button class="btn modal-close btn-silver">'+o(n.i18n.call(t,"KEY_MODAL_BTN_CLOSE",{hash:{},data:i}))+"</button>\n	</div>\n</div>",s},n.shortkey=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function";return s+='<div style="width:343px" id="modal-ssl-cert-setting">\n	<div class="modal-header"><h3>Server Certificate</h3><i class="modal-close">&times;</i> </div>\n	<div class="modal-body" style="min-height:120px;">\n		<div class="modal-ssl-cert-item clearfix">\n			<label class="left">'+u(n.i18n.call(t,"PROP.ELB_LBL_LISTENER_NAME",{hash:{},data:i}))+'</label>\n			<input class="input" value="'+u((o=(o=t&&t.sslCert,o==null||o===!1?o:o.name),typeof o===a?o.apply(t):o))+'" type="text" data-required="true" data-ignore="true" id="elb-ssl-cert-name-input"/>\n		</div>\n		<div class="modal-ssl-cert-item clearfix">\n			<label class="left">'+u(n.i18n.call(t,"PROP.ELB_LBL_LISTENER_PRIVATE_KEY",{hash:{},data:i}))+'</label>\n			<textarea class="input elb-ssl-cert-input tooltip" data-tooltip="'+u(n.i18n.call(t,"POP_TIP_PEM_ENCODED",{hash:{},data:i}))+'" data-required="true" data-ignore="true" id="elb-ssl-cert-privatekey-input">'+u((o=(o=t&&t.sslCert,o==null||o===!1?o:o.key),typeof o===a?o.apply(t):o))+'</textarea>\n		</div>\n		<div class="modal-ssl-cert-item clearfix">\n			<label class="left"  >'+u(n.i18n.call(t,"PROP.ELB_LBL_LISTENER_PUBLIC_KEY",{hash:{},data:i}))+'</label>\n			<textarea class="input elb-ssl-cert-input tooltip" data-tooltip="'+u(n.i18n.call(t,"POP_TIP_PEM_ENCODED",{hash:{},data:i}))+'" data-required="true" data-ignore="true" id="elb-ssl-cert-publickey-input">'+u((o=(o=t&&t.sslCert,o==null||o===!1?o:o.body),typeof o===a?o.apply(t):o))+'</textarea>\n		</div>\n		<div class="modal-ssl-cert-item clearfix">\n			<label class="left"  >'+u(n.i18n.call(t,"PROP.ELB_LBL_LISTENER_CERTIFICATE_CHAIN",{hash:{},data:i}))+'</label>\n			<textarea class="input elb-ssl-cert-input tooltip" data-tooltip="'+u(n.i18n.call(t,"POP_TIP_PEM_ENCODED",{hash:{},data:i}))+'" id="elb-ssl-cert-chain-input">'+u((o=(o=t&&t.sslCert,o==null||o===!1?o:o.chain),typeof o===a?o.apply(t):o))+'</textarea>\n		</div>\n	</div>\n	<div class="modal-footer">\n		<button id="elb-ssl-cert-confirm" class="btn btn-blue">Save</button>\n		<button id="elb-ssl-cert-cancel" class="btn modal-close btn-silver">Cancel</button>\n	</div>\n</div>',s},n.modalSSLCertSetting=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o=this.escapeExpression;return s+='<div style="width:623px" id="experimental-modal">\n	<div class="modal-header">\n		<h3>'+o(n.i18n.call(t,"INVITE_MOD_TIT",{hash:{},data:i}))+'</h3>\n		<i class="modal-close">×</i>\n	</div>\n	<div class="modal-body">\n		<h3 class="modal-body-header">'+o(n.i18n.call(t,"INVITE_MOD_INTRO",{hash:{},data:i}))+'</h3>\n		<div class="modal-body-content">\n			<div class="modal-text-minor">'+o(n.i18n.call(t,"INVITE_MOD_INTRO_MORE",{hash:{},data:i}))+'</div>\n			<h4 class="request-invite-header">'+o(n.i18n.call(t,"INVITE_MOD_REQUEST_TIT",{hash:{},data:i}))+'</h4>\n			<div class="request-invite-content">'+o(n.i18n.call(t,"INVITE_MOD_REQUEST_CONTENT",{hash:{},data:i}))+'</div>\n			<textarea id="experimental-message" class="input" style="width:95%;height:120px;" placeholder=\''+o(n.i18n.call(t,"INVITE_MOD_REQUEST_PLACEHOLDER",{hash:{},data:i}))+'\' data-required="true"></textarea>\n		</div>\n	</div>\n	<div class="modal-footer">\n		<button id="experimental-visops-confirm" class="btn btn-blue">'+o(n.i18n.call(t,"INVITE_MOD_BTN_REQUEST",{hash:{},data:i}))+'</button>\n		<button id="experimental-visops-cancel" class="btn modal-close btn-silver">'+o(n.i18n.call(t,"INVITE_MOD_BTN_CANCEL",{hash:{},data:i}))+"</button>\n	</div>\n</div>",s},n.experimentalVisops=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o=this.escapeExpression;return s+='<h3 class="modal-body-header">'+o(n.i18n.call(t,"INVITE_MOD_THANK_LBL",{hash:{},data:i}))+'</h3>\n<div class="modal-text-major tac">'+o(n.i18n.call(t,"INVITE_MOD_THANK_MORE",{hash:{},data:i}))+"</div>",s},n.experimentalVisopsTrail=e.template(t),t=function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="bubble-head">A NAT instance must meet following requirements:</div>\n<div class="bubble-content">\n	<ul class="bubble-NAT-req-list">\n		<li>Should have a route targeting the instance itself with destination to 0.0.0.0/0.</li>\n		<li>Should belong to a subnet which routes traffic with destination 0.0.0.0/0 to Internet Gateway.</li>\n		<li>Should disable Source/Destination Checking in "Network Interface Details".</li>\n		<li>Should have public IP or Elastic IP.</li>\n		<li>Should have outbound rule to the outside.</li>\n		<li>Should have inbound rule from within the VPC.</li>\n	</ul>\n</div>'},n.bubbleNATreq=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s=this.escapeExpression;return s(n.nl2br.call(t,t&&t.content,{hash:{},data:i}))},n.covertNl2br=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s=this.escapeExpression;return s(n.breaklines.call(t,t&&t.content,{hash:{},data:i}))},n.convertBreaklines=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function";return s+='<div style="width:420px">\n	<div class="modal-header"> <h3>'+u(n.i18n.call(t,"PROP.ELB_CERT_REMOVE_CONFIRM_TITLE",{hash:{},data:i}))+'</h3><i class="modal-close">&times;</i> </div>\n	<div class="modal-body">\n		<div class="modal-text-wraper">\n			 <div class="modal-center-align-helper">\n				<div class="modal-text-major">'+u(n.i18n.call(t,"PROP.ELB_CERT_REMOVE_CONFIRM_MAIN",{hash:{},data:i}))+u((o=t&&t.cert_name,typeof o===a?o.apply(t):o))+'?</div>\n				<div class="modal-text-minor">'+u(n.i18n.call(t,"PROP.ELB_CERT_REMOVE_CONFIRM_SUB",{hash:{},data:i}))+'</div>\n			</div>\n		 </div>\n	</div>\n	<div class="modal-footer">\n		<button id="modal-confirm-elb-cert-delete" class="btn btn-red">Delete</button>\n		<button id="modal-cancel" class="btn modal-close btn-silver">Cancel</button>\n	</div>\n</div>',s},n.modalDeleteELBCert=e.template(t),t=function(e,t,n,r,i){function l(e,t){return" unread"}function c(e,t){var n="",r;return n+='\n      <i class="icon-error"></i>\n      <div class="content"><span class="resource-name-label">'+a((r=e&&e.targetName,typeof r===u?r.apply(e):r))+"</span> failed to "+a((r=e&&e.operation,typeof r===u?r.apply(e):r))+" in "+a((r=e&&e.region,typeof r===u?r.apply(e):r))+".</div>\n    ",n}function h(e,t){var n="",r;return n+='\n      <i class="icon-pending"></i>\n      <div class="content">Sending request to '+a((r=e&&e.operation,typeof r===u?r.apply(e):r))+' <span class="resource-name-label">'+a((r=e&&e.targetName,typeof r===u?r.apply(e):r))+"</span> in "+a((r=e&&e.region,typeof r===u?r.apply(e):r))+".</div>\n    ",n}function p(e,t){var n="",r;return n+='\n      <i class="icon-pending"></i>\n      <div class="content">Processing request to '+a((r=e&&e.operation,typeof r===u?r.apply(e):r))+' <span class="resource-name-label">'+a((r=e&&e.targetName,typeof r===u?r.apply(e):r))+"</span> in "+a((r=e&&e.region,typeof r===u?r.apply(e):r))+".</div>\n    ",n}function d(e,t){var n="",r;return n+='\n      <i class="icon-success"></i>\n      <div class="content"><span class="resource-name-label">'+a((r=e&&e.targetName,typeof r===u?r.apply(e):r))+" </span>"+a((r=e&&e.operation,typeof r===u?r.apply(e):r))+" successfully in "+a((r=e&&e.region,typeof r===u?r.apply(e):r))+".</div>\n    ",n}function v(e,t){var n="",r;return n+='<div class="notification-details">'+a((r=e&&e.error,typeof r===u?r.apply(e):r))+"</div>",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<li class="notification-item',o=n.unless.call(t,t&&t.readed,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+='">\n  <div class="notification-message">\n    ',o=n["if"].call(t,(o=t&&t.state,o==null||o===!1?o:o.failed),{hash:{},inverse:f.noop,fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;s+="\n    ",o=n["if"].call(t,(o=t&&t.state,o==null||o===!1?o:o.pending),{hash:{},inverse:f.noop,fn:f.program(5,h,i),data:i});if(o||o===0)s+=o;s+="\n    ",o=n["if"].call(t,(o=t&&t.state,o==null||o===!1?o:o.processing),{hash:{},inverse:f.noop,fn:f.program(7,p,i),data:i});if(o||o===0)s+=o;s+="\n    ",o=n["if"].call(t,(o=t&&t.state,o==null||o===!1?o:o.completed),{hash:{},inverse:f.noop,fn:f.program(9,d,i),data:i});if(o||o===0)s+=o;s+="\n  </div>\n\n  ",o=n["if"].call(t,t&&t.error,{hash:{},inverse:f.noop,fn:f.program(11,v,i),data:i});if(o||o===0)s+=o;return s+='\n\n  <div class="notification-duration left">'+a((o=t&&t.duration,typeof o===u?o.apply(t):o))+'</div>\n  <div class="timestamp">'+a((o=t&&t.time,typeof o===u?o.apply(t):o))+"</div>\n</li>",s},n.headerNotifyItem=e.template(t),t=function(e,t,n,r,i){function f(e,t){var r="",i;return r+='\n<li>\n	<input class="tokenName input" value="'+u((i=e&&e.name,typeof i===o?i.apply(e):i))+'" readonly/>\n	<span class="tokenToken click-select truncate tooltip" data-tooltip="'+u(n.i18n.call(e,"PROP.ELB_TIP_CLICK_TO_SELECT_ALL",{hash:{},data:t}))+'">'+u((i=e&&e.token,typeof i===o?i.apply(e):i))+'</span>\n	<span class="tokenControl">\n		<button class="tooltip icon-edit" data-tooltip=""></button>\n		<button class="tooltip icon-delete" data-tooltip=""></button>\n		<button class="btn btn-blue tokenDone">'+u(n.i18n.call(e,"HEAD_BTN_DONE",{hash:{},data:t}))+"</button>\n	</span>\n</li>\n",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o="function",u=this.escapeExpression,a=this;return s=n.each.call(t,t,{hash:{},inverse:a.noop,fn:a.program(1,f,i),data:i}),s||s===0?s:""},n.accessTokenTable=e.template(t),t=function(e,t,n,r,i){function l(e,t){return" panel"}function c(e,t){var n="";return n}function h(e,t){return' class="modal-wrapper-fix"'}function p(e,t){return'<i class="modal-close">×</i>'}function d(e,t){return" scroll-wrap scrollbar-auto-hide"}function v(e,t){return' style="padding: 0;"'}function m(e,t){var r="",i;r+='\n            <div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n                <div class="scroll-content" ',i=n["if"].call(e,e&&e.compact,{hash:{},inverse:u.noop,fn:u.program(11,v,t),data:t});if(i||i===0)r+=i;r+=">\n                    ",i=(i=e&&e.template,typeof i===a?i.apply(e):i);if(i||i===0)r+=i;return r+="\n                </div>\n            ",r}function g(e,t){var n="",r;n+="\n            ",r=(r=e&&e.template,typeof r===a?r.apply(e):r);if(r||r===0)n+=r;return n+="\n            ",n}function y(e,t){var r="",i;r+='\n        <div class="modal-footer">\n            ',i=n.unless.call(e,(i=e&&e.confirm,i==null||i===!1?i:i.hide),{hash:{},inverse:u.noop,fn:u.program(18,b,t),data:t});if(i||i===0)r+=i;r+="\n            ",i=n.unless.call(e,(i=e&&e.cancel,i==null||i===!1?i:i.hide),{hash:{},inverse:u.noop,fn:u.program(21,E,t),data:t});if(i||i===0)r+=i;return r+="\n        </div>\n        ",r}function b(e,t){var r="",i;r+='<button class="btn modal-confirm btn-'+f((i=(i=e&&e.confirm,i==null||i===!1?i:i.color),typeof i===a?i.apply(e):i))+'" ',i=n["if"].call(e,(i=e&&e.confirm,i==null||i===!1?i:i.disabled),{hash:{},inverse:u.noop,fn:u.program(19,w,t),data:t});if(i||i===0)r+=i;return r+=">"+f((i=(i=e&&e.confirm,i==null||i===!1?i:i.text),typeof i===a?i.apply(e):i))+"</button>",r}function w(e,t){return" disabled "}function E(e,t){var n="",r;return n+='<button class="btn modal-close btn-silver">'+f((r=(r=e&&e.cancel,r==null||r===!1?r:r.text),typeof r===a?r.apply(e):r))+"</button>",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this,a="function",f=this.escapeExpression;s+='<div class="modal-box',o=n.ifCond.call(t,t&&t.mode,"panel",{hash:{},inverse:u.noop,fn:u.program(1,l,i),data:i});if(o||o===0)s+=o;s+='">\n    <div',o=n.ifCond.call(t,t&&t.mode,"panel",{hash:{},inverse:u.program(5,h,i),fn:u.program(3,c,i),data:i});if(o||o===0)s+=o;s+='>\n        <div class="modal-header">\n            <h3>'+f((o=t&&t.title,typeof o===a?o.apply(t):o))+"</h3>\n            ",o=n.unless.call(t,t&&t.hideClose,{hash:{},inverse:u.noop,fn:u.program(7,p,i),data:i});if(o||o===0)s+=o;s+='\n        </div>\n        <div class="modal-body context-wrap',o=n["if"].call(t,t&&t.hasScroll,{hash:{},inverse:u.noop,fn:u.program(9,d,i),data:i});if(o||o===0)s+=o;s+='"',o=n["if"].call(t,t&&t.compact,{hash:{},inverse:u.noop,fn:u.program(11,v,i),data:i});if(o||o===0)s+=o;s+=" >\n            ",o=n["if"].call(t,t&&t.hasScroll,{hash:{},inverse:u.program(15,g,i),fn:u.program(13,m,i),data:i});if(o||o===0)s+=o;s+="\n            </div>\n        ",o=n["if"].call(t,t&&t.hasFooter,{hash:{},inverse:u.noop,fn:u.program(17,y,i),data:i});if(o||o===0)s+=o;return s+="\n    </div>\n</div>",s},n.modalTemplate=e.template(t),t=function(e,t,n,r,i){function l(e,t){return'<div class="warning-red no-change">Your account is in limited status now. Import VPC, app operation, monitoring and state ensuring are disabled.</div>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this,a="function",f=this.escapeExpression;o=n["if"].call(t,t&&t.shouldPay,{hash:{},inverse:u.noop,fn:u.program(1,l,i),data:i});if(o||o===0)s+=o;return s+='\n<div class="payment-no-card-wrapper">\n    <div class="payment-credit-card">\n    </div>\n    <p class="modal-text-minor payment-text">While enjoying your free '+f((o=t&&t.freePointsPerMonth,typeof o===a?o.apply(t):o))+' instance hours each month, provide billing information in case of running out of quota.</p>\n    <table class="table payment-table">\n        <tbody>\n        <tr>\n            <td>'+f((o=t&&t.freePointsPerMonth,typeof o===a?o.apply(t):o))+' instance hours per month</td>\n            <td class="align-right">Free</td>\n        </tr>\n        <tr>\n            <td>Instance hours consumed over '+f((o=t&&t.freePointsPerMonth,typeof o===a?o.apply(t):o))+'</td>\n            <td class="align-right"><strong>$0.01</strong>/instance hour</td>\n        </tr>\n        </tbody>\n    </table>\n    <a href="https://www.visualops.io/pricing" class="link-blue" target="_blank">Pricing in detail</a>\n    <div class="payment-modal-wrap">\n        <div class="payment-modal-btn-wraper"><a target="_blank" href="'+f((o=t&&t.url,typeof o===a?o.apply(t):o))+'" class="btn btn-blue btn-xlarge">Provide Billing Information <i class="icon-caret-right"></i></a></div>\n        <p>\n            This will open a new window with Chargify.<br>\n            Meanwhile please keep this page open.\n        </p>\n    </div>\n</div>',s},n.paymentSubscribe=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div class="payment-credit-card payment-failed">\n</div>\n<p class="modal-text-minor payment-text">We have failed to charge your credit card. App operation and VPC import are disabled for you now. Please update  your payment information to continue managing apps with VisualOps.</p>\n\n<div class="payment-modal-wrap">\n    <div class="payment-modal-btn-wraper"><a target="_blank" href="'+a((o=t&&t.url,typeof o===u?o.apply(t):o))+'" class="btn btn-blue btn-xlarge">Update Billing Information <i class="icon-caret-right"></i></a></div>\n    <p>\n        This will open a new window with Chargify.<br/>\nMeanwhile please keep this page open.\n    </p>\n</div>',s},n.paymentUpdate=e.template(t),n}),function(){define("lib/IntercomAnalytics",["jquery"],function(){var e,t;return t={import_json:!0,export_json:!0,visualize_vpc:!0,sg_line_style:!0,export_png:!0,export_vis_png:!0,cloudformation:!0,use_visualops:!0,app_to_stack:!0,version:!0,timezone:!0,lastlogin:!0},e={increase:function(e){var n;if(!t[e]){void 0;return}return n={},n[e]=1,window.Intercom&&window.Intercom("update",{increments:n})},update:function(e,n){var r,i,s;i={};if(e&&n){if(!t[e]){void 0;return}i[e]=n}else if(e)for(r in e)s=e[r],t[r]?i[r]=s:void 0;return window.Intercom&&window.Intercom("update",i)}},$(document.body).on("click","[data-analytics-plus]",function(){var t;t=$(this).attr("data-analytics-plus"),t&&e.increase(t)}),e})}.call(this),function(){define("lib/handlebarhelpers",["i18n!/nls/lang.js","handlebars"],function(e){return Handlebars.registerHelper("i18n",function(t){var n,r,i;return r=t.split("."),r.length===1&&r.unshift("IDE"),i=e[r[0]][r[1]]||e.PROP[r[1]],i=i||"undefined",arguments.length>2&&(n=[].slice.call(arguments,1,-1),n.unshift(i),i=sprintf.apply(null,n)),new Handlebars.SafeString(i)}),Handlebars.registerHelper("tolower",function(e){return new Handlebars.SafeString(e.toLowerCase())}),Handlebars.registerHelper("emptyStr",function(e){return e===""||e===void 0||e===null?"-":new Handlebars.SafeString(e)}),Handlebars.registerHelper("readableVt",function(t){return t===""||t===void 0||t===null?"-":e.IDE["PROP.VOLUME_TYPE_"+t.toUpperCase()]}),Handlebars.registerHelper("UTC",function(e){return new Handlebars.SafeString((new Date(+e)).toUTCString())}),Handlebars.registerHelper("breaklines",function(e){return e=Handlebars.Utils.escapeExpression(e),e=e.replace(/(\r\n|\n|\r)/gm,"<br>"),new Handlebars.SafeString(e)}),Handlebars.registerHelper("nl2br",function(e){var t;return t=(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2"),new Handlebars.SafeString(t)}),Handlebars.registerHelper("ifCond",function(e,t,n){return e===t?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("timeStr",function(e){var t;return t=new Date(+e),!isNaN(parseFloat(e))&&isFinite(e)&&e>0?t.toLocaleDateString()+" "+t.toTimeString():isNaN(Date.parse(e))||!t.toLocaleDateString||!t.toTimeString?e?new Handlebars.SafeString(e):"-":(t=new Date(e),t.toLocaleDateString()+" "+t.toTimeString())}),Handlebars.registerHelper("plusone",function(e){return e=parseInt(e,10),isNaN(e)?e:""+(e+1)}),Handlebars.registerHelper("getInvalidKey",function(e,t){return e[t]}),Handlebars.registerHelper("doubleIf",function(e,t,n){return e&&t?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("or",function(e,t){return e||t}),Handlebars.registerHelper("simpleTime",function(e){return MC.dateFormat(new Date(e),"yyyy-MM-dd hh:mm:ss")}),Handlebars.registerHelper("firstOfSplit",function(e,t){return e.split("-")[0]}),Handlebars.registerHelper("formatTime",function(e,t){function n(e,t,n){function a(e,t){var n=e+"";t=t||2;while(n.length<t)n="0"+n;return n}var r=new Date(e),i=["\0","January","February","March","April","May","June","July","August","September","October","November","December"],s=["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=["","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],u=["","Sun","Mon","Tue","Wed","Thu","Fri","Sat"],f=n?r.getUTCFullYear():r.getFullYear();t=t.replace(/(^|[^\\])yyyy+/g,"$1"+f),t=t.replace(/(^|[^\\])yy/g,"$1"+f.toString().substr(2,2)),t=t.replace(/(^|[^\\])y/g,"$1"+f);var l=(n?r.getUTCMonth():r.getMonth())+1;t=t.replace(/(^|[^\\])MMMM+/g,"$1"+i[0]),t=t.replace(/(^|[^\\])MMM/g,"$1"+s[0]),t=t.replace(/(^|[^\\])MM/g,"$1"+a(l)),t=t.replace(/(^|[^\\])M/g,"$1"+l);var c=n?r.getUTCDate():r.getDate();t=t.replace(/(^|[^\\])dddd+/g,"$1"+o[0]),t=t.replace(/(^|[^\\])ddd/g,"$1"+u[0]),t=t.replace(/(^|[^\\])dd/g,"$1"+a(c)),t=t.replace(/(^|[^\\])d/g,"$1"+c);var h=n?r.getUTCHours():r.getHours();t=t.replace(/(^|[^\\])HH+/g,"$1"+a(h)),t=t.replace(/(^|[^\\])H/g,"$1"+h);var p=h>12?h-12:h==0?12:h;t=t.replace(/(^|[^\\])hh+/g,"$1"+a(p)),t=t.replace(/(^|[^\\])h/g,"$1"+p);var d=n?r.getUTCMinutes():r.getMinutes();t=t.replace(/(^|[^\\])mm+/g,"$1"+a(d)),t=t.replace(/(^|[^\\])m/g,"$1"+d);var v=n?r.getUTCSeconds():r.getSeconds();t=t.replace(/(^|[^\\])ss+/g,"$1"+a(v)),t=t.replace(/(^|[^\\])s/g,"$1"+v);var m=n?r.getUTCMilliseconds():r.getMilliseconds();t=t.replace(/(^|[^\\])fff+/g,"$1"+a(m,3)),m=Math.round(m/10),t=t.replace(/(^|[^\\])ff/g,"$1"+a(m)),m=Math.round(m/10),t=t.replace(/(^|[^\\])f/g,"$1"+m);var g=h<12?"AM":"PM";t=t.replace(/(^|[^\\])TT+/g,"$1"+g),t=t.replace(/(^|[^\\])T/g,"$1"+g.charAt(0));var y=g.toLowerCase();t=t.replace(/(^|[^\\])tt+/g,"$1"+y),t=t.replace(/(^|[^\\])t/g,"$1"+y.charAt(0));var b=-r.getTimezoneOffset(),w=n||!b?"Z":b>0?"+":"-";if(!n){b=Math.abs(b);var E=Math.floor(b/60),S=b%60;w+=a(E)+":"+a(S)}t=t.replace(/(^|[^\\])K/g,"$1"+w);var x=(n?r.getUTCDay():r.getDay())+1;return t=t.replace(new RegExp(o[0],"g"),o[x]),t=t.replace(new RegExp(u[0],"g"),u[x]),t=t.replace(new RegExp(i[0],"g"),i[l]),t=t.replace(new RegExp(s[0],"g"),s[l]),t=t.replace(/\\(.)/g,"$1"),t}return n(e,t)}),Handlebars.registerHelper("lastChar",function(e){var t;return t=e.charAt(e.length-1),t>="A"&&t<="Z"||t>="a"&&t<="z"?t:""}),Handlebars.registerHelper("awsAmiIcon",function(e,t){}),Handlebars.registerHelper("awsIsEip",function(e,t){}),Handlebars.registerHelper("ifLogic",function(e,t,n,r){switch(t){case"is":return e===n?r.fn(this):r.inverse(this);case"<":return e<n?r.fn(this):r.inverse(this);case"<=":return e<=n?r.fn(this):r.inverse(this);case">":return e>n?r.fn(this):r.inverse(this);case">=":return e>=n?r.fn(this):r.inverse(this);case"and":return e&&n?r.fn(this):r.inverse(this);case"or":return e||n?r.fn(this):r.inverse(this);default:return r.inverse(this)}})})}.call(this),define("MC",["ui/MC.template","q","lib/IntercomAnalytics","lib/handlebarhelpers","jquery","sprintf"],function(e,t,n){var r=(new Date).getTimezoneOffset()/-60;r>=0&&(r="+"+r),n.update({version:window.version,lastlogin:(new Date).toString(),timezone:"UTC"+r}),window.Q=t;var i=function(e){var t={set:function(t,n){e[t]=typeof n=="object"?JSON.stringify(n):n},get:function(t){var n=e[t];try{n=JSON.parse(n)}catch(r){}return n||""},remove:function(t){return e.removeItem(t),!0},clear:function(){e.clear()}};return t},s=/^\s*?@?{?([-A-Z0-9a-z]+)}?/,o={DOMAIN:window.MC_DOMAIN,API_HOST:window.MC_API_HOST,IMG_URL:"/assets/images/",data:{},Analytics:n,getCidrBinStr:function(e){var t,n,r,i,s,u;return t=e.split("/"),n=t[0],u=Number(t[1]),s=32-u,r=n.split("."),i=r.map(function(e){return o.leftPadString(parseInt(e).toString(2),8,"0")}),i.join("")},getValidCIDR:function(e){var t,n,r,i,s,u,a,f,l;return u=o.getCidrBinStr(e),a=Number(e.split("/")[1]),f=u.slice(a),l=parseInt(f),l===0||f===""?e:(s=u.slice(0,a),r=s+o.rightPadString("",f.length,"0"),n=_.map([0,8,16,24],function(e){return parseInt(r.slice(e,e+8),2)}),i=n.join("."),t=i+"/"+a,t)},prettyStackTrace:function(e){function t(){}var n=((new Error).stack||"").split("\n");e=(e||0)+2;var r=new t;for(var i=0;i<n.length-e;++i)r["@"+i]=n[i+e].replace(/^\s+at\s+/,"");return r},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)}).toUpperCase()},genResRef:function(e,t){return"@{"+e+"."+t+"}"},isJSON:function(e){var t=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,r=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,i=/(?:^|:|,)(?:\s*\[)+/g;return typeof e=="string"&&e.trim()!==""?t.test(e.replace(n,"@").replace(r,"]").replace(i,"")):!1},api:function(e){return t($.ajax({url:o.API_HOST+e.url,dataType:"json",type:"POST",jsonp:!1,data:JSON.stringify({jsonrpc:"2.0",id:o.guid(),method:e.method||"",params:e.data||{}}),success:function(t){e.success&&e.success(t.result[1],t.result[0])},error:function(t,n,r){e.error&&e.error(n,-1)}}))},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},truncate:function(e,t){return e.length>t?e.substring(0,t-3)+"...":e},leftPadString:function(e,t,n){return e.length>=t?e:(new Array(t-e.length+1)).join(n)+e},rightPadString:function(e,t,n){return e.length>=t?e:e+(new Array(t-e.length+1)).join(n)},extractID:function(e){if(!e)return"";if(e.indexOf("@{")!=0)return e;var t=s.exec(e);return t?t[1]:e},titleNotification:function(e){var t=/\([0-9]*\)/ig;return e>0?document.title=document.title.match(t)?document.title.replace(t,"("+e+")"):"("+e+") "+document.title:document.title=document.title.replace(t,""),!0},numberFormat:function(e){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var t=isFinite(+e)?+e:0,n=0,r=",",i=".",s="",o=function(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n};return s=(n?o(t,n):""+Math.round(t)).split("."),s[0].length>3&&(s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,r)),(s[1]||"").length<n&&(s[1]=s[1]||"",s[1]+=[n-s[1].length+1].join("0")),s.join(i)},dateFormat:function(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()},r;/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(r in n)(new RegExp("("+r+")")).test(t)&&(t=t.replace(RegExp.$1,RegExp.$1.length===1?n[r]:("00"+n[r]).substr((""+n[r]).length)));return t},intervalDate:function(e){var t=new Date,e=e*1e3,n=(t.getTime()-e)/1e3,r=Math.floor(n/86400),i=Math.floor(n/3600),s=Math.floor(n/60);return r>30?o.dateFormat(new Date(e),"dd/MM yyyy"):r>0?r+" days ago":i>0?i+" hours ago":s>0?s+" minutes ago":"just now"},timestamp:function(e,t,n){if($.type(e)==="date"&&$.type(t)==="date"){var r=1;switch(n){case"s":r=1e3;break;case"m":r=6e4;break;case"h":r=36e5;break;case"d":r=864e5;break;default:r=1e3}return parseInt((t.getTime()-e.getTime())/parseInt(r))}console.error("variable is type date",e,t,n)},rand:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},base64Encode:function(e){return window.btoa(unescape(encodeURIComponent(e)))},base64Decode:function(e){return decodeURIComponent(escape(window.atob(e)))},camelCase:function(e){return e.replace(/-([a-z])/ig,function(e,t){return(t+"").toUpperCase()})},storage:i(localStorage),session:i(sessionStorage),versionCompare:function(e,t){var n,r,i,s;if(typeof e+typeof t!="stringstring")return!1;n=e.replace(/[a-zA-Z]/g,"").split("."),r=t.replace(/[a-zA-Z]/g,"").split("."),i=0,s=Math.max(n.length,r.length);while(i<s){if(n[i]&&!r[i]&&parseInt(n[i])>0||parseInt(n[i])>parseInt(r[i]))return 1;if(r[i]&&!n[i]&&parseInt(r[i])>0||parseInt(n[i])<parseInt(r[i]))return-1;i++}return 0},cacheForDev:function(e,t,n){return!1},createCompareFn:function(e){return function(t,n){var r=t[e],i=n[e];return r<i?-1:r>i?1:0}}};return window.MC=o,jQuery.extend({xml2json:function u(e){var t={},n,r,i,s,o,a;for(o in e.childNodes){i=e.childNodes[o];if(i.nodeType===1){s=i.hasChildNodes()?u(i):i.nodevalue,s=s==null?null:s,i.nodeName!=="item"&&i.nodeName!=="member"||!s.value?i.nextElementSibling&&i.nextElementSibling.nodeName===i.nodeName||i.nodeName==="item"||i.nodeName==="member"?($.type(t[i.nodeName])==="undefined"&&(t[i.nodeName]=[]),$.isEmptyObject(s)||t[i.nodeName].push(s)):i.previousElementSibling&&i.previousElementSibling.nodeName===i.nodeName?$.isEmptyObject(s)||t[i.nodeName].push(s):t[i.nodeName]=s:s.key?($.type(t)!=="object"&&(t={}),$.isEmptyObject(s)||(t[s.key]=s.value)):($.type(t)!=="array"&&(t=[]),$.isEmptyObject(s)||t.push(s.value));if(i.attributes.length>0){t[i.nodeName]["@attributes"]={};for(a in i.attributes)n=i.attributes.item(a),t[i.nodeName]["@attributes"][n.nodeName]=n.nodeValue}if(i.childElementCount===0&&i.textContent!=null&&i.textContent!==""){r=i.textContent.trim();switch(r.toLowerCase()){case"true":r=!0;break;case"false":r=!1}t[i.nodeName]instanceof Array?t[i.nodeName].push(r):t[i.nodeName]=r}}}return t}}),function(e){function t(e){return e}function n(e){return decodeURIComponent(e.replace(i," "))}function r(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return s.json?JSON.parse(e):e}catch(t){}}var i=/\+/g,s=e.cookie=function(i,o,u){if(void 0!==o){u=e.extend({},s.defaults,u);if("number"==typeof u.expires){var a=u.expires,f=u.expires=new Date;f.setDate(f.getDate()+a)}return o=s.json?JSON.stringify(o):String(o),document.cookie=[s.raw?i:encodeURIComponent(i),"=",s.raw?o:encodeURIComponent(o),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join("")}o=s.raw?t:n,u=document.cookie.split("; ");for(var a=i?void 0:{},f=0,l=u.length;f<l;f++){var c=u[f].split("="),h=o(c.shift()),c=o(c.join("="));if(i&&i===h){a=r(c);break}i||(a[h]=r(c))}return a};s.defaults={},e.removeCookie=function(t,n){return void 0!==e.cookie(t)?(e.cookie(t,"",e.extend({},n,{expires:-1})),!0):!1}}(jQuery),function(){var e=navigator.userAgent.toLowerCase(),e=navigator.userAgent.toLowerCase(),t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],n=t[1]||"";if(t[1]=="webkit"){var r=/version\/([\d\.]+).*safari/.exec(e);r&&(n+=" safari",t[2]=r[1])}else t[1]=="chrome"&&(n+=" webkit");navigator.platform.toLowerCase().indexOf("mac")>=0&&(n+=" mac"),o.browser=t[1],o.browserVersion=parseInt(t[2],10),$(document.body).addClass(n)}(),window.CustomEvent&&document.dispatchEvent(new CustomEvent("DOMContentLoaded")),o.template=e,o}),function(){define("constant",["MC","i18n!/nls/lang.js"],function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C;return C=function(e){var t;return t={},_.each(e,function(e,n){return t[E[n]]=e,null}),t},n={"AWS.EC2.AvailabilityZone":"ZoneName","AWS.EC2.Instance":"InstanceId","AWS.EC2.KeyPair":"KeyName","AWS.EC2.SecurityGroup":"GroupId","AWS.EC2.EIP":"PublicIp","AWS.EC2.AMI":"ImageId","AWS.EC2.EBS.Volume":"VolumeId","AWS.ELB":"LoadBalancerName","AWS.VPC.VPC":"VpcId","AWS.VPC.Subnet":"SubnetId","AWS.VPC.InternetGateway":"InternetGatewayId","AWS.VPC.RouteTable":"RouteTableId","AWS.VPC.VPNGateway":"VpnGatewayId","AWS.VPC.CustomerGateway":"CustomerGatewayId","AWS.VPC.NetworkInterface":"NetworkInterfaceId","AWS.VPC.DhcpOptions":"DhcpOptionsId","AWS.VPC.VPNConnection":"VpnConnectionId","AWS.VPC.NetworkAcl":"NetworkAclId","AWS.IAM.ServerCertificate":"","AWS.AutoScaling.Group":"AutoScalingGroupARN","AWS.AutoScaling.LaunchConfiguration":"LaunchConfigurationARN","AWS.AutoScaling.NotificationConfiguration":"","AWS.AutoScaling.ScalingPolicy":"PolicyARN","AWS.AutoScaling.ScheduledActions":"ScheduledActionARN","AWS.CloudWatch.CloudWatch":"AlarmArn","AWS.SNS.Subscription":"","AWS.SNS.Topic":"TopicArn","AWS.RDS.DBSubnetGroup":"DBSubnetGroupName","AWS.RDS.DBInstance":"DBInstanceIdentifier","AWS.RDS.OptionGroup":"OptionGroupName"},E={AZ:"AWS.EC2.AvailabilityZone",INSTANCE:"AWS.EC2.Instance",KP:"AWS.EC2.KeyPair",SG:"AWS.EC2.SecurityGroup",EIP:"AWS.EC2.EIP",AMI:"AWS.EC2.AMI",VOL:"AWS.EC2.EBS.Volume",SNAP:"AWS.EC2.EBS.Snapshot",ELB:"AWS.ELB",VPC:"AWS.VPC.VPC",SUBNET:"AWS.VPC.Subnet",IGW:"AWS.VPC.InternetGateway",RT:"AWS.VPC.RouteTable",VGW:"AWS.VPC.VPNGateway",CGW:"AWS.VPC.CustomerGateway",ENI:"AWS.VPC.NetworkInterface",DHCP:"AWS.VPC.DhcpOptions",VPN:"AWS.VPC.VPNConnection",ACL:"AWS.VPC.NetworkAcl",IAM:"AWS.IAM.ServerCertificate",ASG:"AWS.AutoScaling.Group",LC:"AWS.AutoScaling.LaunchConfiguration",NC:"AWS.AutoScaling.NotificationConfiguration",SP:"AWS.AutoScaling.ScalingPolicy",SA:"AWS.AutoScaling.ScheduledActions",CW:"AWS.CloudWatch.CloudWatch",SUBSCRIPTION:"AWS.SNS.Subscription",TOPIC:"AWS.SNS.Topic",TAG:"AWS.EC2.Tag",ASGTAG:"AWS.AutoScaling.Tag",DBSBG:"AWS.RDS.DBSubnetGroup",DBINSTANCE:"AWS.RDS.DBInstance",DBPARAM:"AWS.RDS.Parameter",DBPG:"AWS.RDS.ParameterGroup",DBSNAP:"AWS.RDS.Snapshot",DBES:"AWS.RDS.EventSubscription",DBOG:"AWS.RDS.OptionGroup",DBENGINE:"AWS.RDS.DBEngineVersion"},w={AZ:"Availability Zone",INSTANCE:"Instance",KP:"Key Pair",SG:"Security Group",EIP:"Elastic IP",AMI:"AMI",VOL:"Volume",SNAP:"Snapshot",ELB:"Load Balancer",VPC:"VPC",SUBNET:"Subnet",IGW:"Internet Gateway",RT:"Route Table",VGW:"VPN Gateway",CGW:"Customer Gateway",ENI:"Network Interface",DHCP:"Dhcp Options",VPN:"VPN Connection",ACL:"Network Acl",IAM:"Server Certificate",ASG:"AutoScaling Group",LC:"Launch Configuration",NC:"Notification Configuration",SP:"Scaling Policy",SA:"Scheduled Actions",CW:"Cloud Watch",SUBSCRIPTION:"Subscription",TOPIC:"Topic"},r={AWS_EC2_AvailabilityZone:"az",AWS_EC2_Instance:"instance",AWS_EC2_KeyPair:"kp",AWS_EC2_SecurityGroup:"sg",AWS_EC2_EIP:"eip",AWS_EC2_AMI:"ami",AWS_EBS_Volume:"vol",AWS_EBS_Snapshot:"snap",AWS_ELB:"elb",AWS_VPC_VPC:"vpc",AWS_VPC_Subnet:"subnet",AWS_VPC_InternetGateway:"igw",AWS_VPC_RouteTable:"rtb",AWS_VPC_VPNGateway:"vgw",AWS_VPC_CustomerGateway:"cgw",AWS_VPC_NetworkInterface:"eni",AWS_VPC_DhcpOptions:"dhcp",AWS_VPC_VPNConnection:"vpn",AWS_VPC_NetworkAcl:"acl",AWS_IAM_ServerCertificate:"iam",AWS_AutoScaling_Group:"asg",AWS_AutoScaling_LaunchConfiguration:"asl_lc",AWS_AutoScaling_NotificationConfiguration:"asl_nc",AWS_AutoScaling_ScalingPolicy:"asl_sp",AWS_AutoScaling_ScheduledActions:"asl_sa",AWS_CloudWatch_CloudWatch:"clw",AWS_SNS_Subscription:"sns_sub",AWS_SNS_Topic:"sns_top"},a=[{instanceClass:"db.t1.micro",cpu:"1 vCPU",memory:"0.613 GB",ebs:!1,ecu:1},{instanceClass:"db.t2.micro",cpu:"1 vCPU",memory:"1 GB",ebs:!1,ecu:1},{instanceClass:"db.t2.small",cpu:"1 vCPU",memory:"2 GB",ebs:!1,ecu:1},{instanceClass:"db.t2.medium",cpu:"2 vCPU",memory:"4 GB",ebs:!1,ecu:2},{instanceClass:"db.m1.small",cpu:"1 vCPU",memory:"1.7 GB",ebs:!1,ecu:1},{instanceClass:"db.m1.medium",cpu:"1 vCPU",memory:"3.75 GB",ebs:!1,ecu:2},{instanceClass:"db.m1.large",cpu:"2 vCPU",memory:"7.5 GB",ebs:!0,ecu:4},{instanceClass:"db.m1.xlarge",cpu:"4 vCPU",memory:"15 GB",ebs:!0,ecu:8},{instanceClass:"db.m2.xlarge",cpu:"2 vCPU",memory:"17.1 GB",ebs:!1,ecu:6.5},{instanceClass:"db.m2.2xlarge",cpu:"4 vCPU",memory:"34 GB",ebs:!0,ecu:13},{instanceClass:"db.m2.4xlarge",cpu:"8 vCPU",memory:"68 GB",ebs:!0,ecu:26},{instanceClass:"db.cr1.8xlarge",cpu:"32 vCPU",memory:"244 GB",ebs:!1,ecu:88},{instanceClass:"db.m3.medium",cpu:"1 vCPU",memory:"3.75 GB",ebs:!1,ecu:3},{instanceClass:"db.m3.large",cpu:"2 vCPU",memory:"7.5 GB",ebs:!1,ecu:6.5},{instanceClass:"db.m3.xlarge",cpu:"4 vCPU",memory:"15 GB",ebs:!0,ecu:13},{instanceClass:"db.m3.2xlarge",cpu:"8 vCPU",memory:"30 GB",ebs:!0,ecu:26},{instanceClass:"db.r3.large",cpu:"2 vCPU",memory:"15 GB",ebs:!1,ecu:6.5},{instanceClass:"db.r3.xlarge",cpu:"4 vCPU",memory:"30.5 GB",ebs:!0,ecu:13},{instanceClass:"db.r3.2xlarge",cpu:"8 vCPU",memory:"61 GB",ebs:!0,ecu:26},{instanceClass:"db.r3.4xlarge",cpu:"16 vCPU",memory:"122 GB",ebs:!0,ecu:52},{instanceClass:"db.r3.8xlarge",cpu:"32 vCPU",memory:"244GB",ebs:!1,ecu:104}],s={MYSQL:"mysql",ORA_SE1:"oracle-se1",ORA_SE:"oracle-se",ORA_EE:"oracle-ee",SQLSRV_EE:"sqlserver-ee",SQLSRV_SE:"sqlserver-se",SQLSRV_EX:"sqlserver-ex",SQLSRV_WEB:"sqlserver-web",POSTGRES:"postgres"},u={mysql:"mysql","oracle-ee":"oracle","oracle-se":"oracle","oracle-se1":"oracle","sqlserver-ee":"sqlserver","sqlserver-ex":"sqlserver","sqlserver-se":"sqlserver","sqlserver-web":"sqlserver",postgres:"postgresql"},o={mysql:["mysql"],oracle:["oracle-ee","oracle-se","oracle-se1"],sqlserver:["sqlserver-ee","sqlserver-ex","sqlserver-se","sqlserver-web"],postgres:["postgres"]},i={mysql:{port:3306,dbname:"",charset:"",allocatedStorage:5},postgres:{port:5432,dbname:"",charset:"",allocatedStorage:5},"oracle-ee":{port:1521,dbname:"ORCL",charset:"AL32UTF8",allocatedStorage:10},"oracle-se":{port:1521,dbname:"ORCL",charset:"AL32UTF8",allocatedStorage:10},"oracle-se1":{port:1521,dbname:"ORCL",charset:"AL32UTF8",allocatedStorage:10},"sqlserver-ee":{port:1433,dbname:"",charset:"",allocatedStorage:200},"sqlserver-ex":{port:1433,dbname:"",charset:"",allocatedStorage:30},"sqlserver-se":{port:1433,dbname:"",charset:"",allocatedStorage:200},"sqlserver-web":{port:1433,dbname:"",charset:"",allocatedStorage:30}},l={pending:0,running:16,shuttingdown:32,terminated:48,stopping:64,stopped:80},h={MESSAGE_E_SESSION:t.SERVICE.CONSTANT_MSG_E_SESSION,MESSAGE_E_EXTERNAL:t.SERVICE.CONSTANT_MSG_E_EXTERNAL,MESSAGE_E_ERROR:t.SERVICE.CONSTANT_MSG_E_ERROR,MESSAGE_E_UNKNOWN:t.SERVICE.CONSTANT_MSG_E_UNKNOW,MESSAGE_E_PARAM:t.SERVICE.CONSTANT_MSG_E_PARAM},g=["us-east-1","us-west-1","us-west-2","eu-west-1","ap-southeast-1","ap-southeast-2","ap-northeast-1","sa-east-1"],y={"us-east-1":t.IDE["IDE_LBL_REGION_NAME_us-east-1"],"us-west-1":t.IDE["IDE_LBL_REGION_NAME_us-west-1"],"us-west-2":t.IDE["IDE_LBL_REGION_NAME_us-west-2"],"eu-west-1":t.IDE["IDE_LBL_REGION_NAME_eu-west-1"],"ap-southeast-2":t.IDE["IDE_LBL_REGION_NAME_ap-southeast-2"],"ap-northeast-1":t.IDE["IDE_LBL_REGION_NAME_ap-northeast-1"],"ap-southeast-1":t.IDE["IDE_LBL_REGION_NAME_ap-southeast-1"],"sa-east-1":t.IDE["IDE_LBL_REGION_NAME_sa-east-1"]},b={"us-east-1":t.IDE["IDE_LBL_REGION_NAME_SHORT_us-east-1"],"us-west-1":t.IDE["IDE_LBL_REGION_NAME_SHORT_us-west-1"],"us-west-2":t.IDE["IDE_LBL_REGION_NAME_SHORT_us-west-2"],"eu-west-1":t.IDE["IDE_LBL_REGION_NAME_SHORT_eu-west-1"],"ap-southeast-1":t.IDE["IDE_LBL_REGION_NAME_SHORT_ap-southeast-1"],"ap-southeast-2":t.IDE["IDE_LBL_REGION_NAME_SHORT_ap-southeast-2"],"ap-northeast-1":t.IDE["IDE_LBL_REGION_NAME_SHORT_ap-northeast-1"],"sa-east-1":t.IDE["IDE_LBL_REGION_NAME_SHORT_sa-east-1"]},S={E_OK:0,E_NONE:1,E_INVALID:2,E_FULL:3,E_EXIST:4,E_EXTERNAL:5,E_FAILED:6,E_BUSY:7,E_NORSC:8,E_NOPERM:9,E_NOSTOP:10,E_NOSTART:11,E_ERROR:12,E_LEFTOVER:13,E_TIMEOUT:14,E_UNKNOWN:15,E_CONN:16,E_EXPIRED:17,E_PARAM:18,E_SESSION:19,E_END:20,E_BLOCKED_USER:21},d={OPS_STATE_PENDING:"Pending",OPS_STATE_INPROCESS:"InProcess",OPS_STATE_DONE:"Done",OPS_STATE_ROLLBACK:"Rollback",OPS_STATE_FAILED:"Failed"},p={"Forge.Stack.Run":"launch","Forge.App.Stop":"stop","Forge.App.Start":"start","Forge.App.Update":"update","Forge.App.State.Update":"update","Forge.App.Terminate":"terminate","Forge.App.Save":"save"},f=["vpc-with-private-subnet-and-vpn","vpc-with-public-and-private-subnets-and-vpn","vpc-with-public-subnet-only","vpc-with-public-and-private-subnets"],T={ERROR:"ERROR",WARNING:"WARNING",NOTICE:"NOTICE"},c=["centos","redhat","rhel","ubuntu","debian","fedora","gentoo","opensuse","suse","sles","amazon","amaz","linux-other"],N=["windows","win"],v={"linux-other":"linux",redhat:"rhel",suse:"sles",windows:"mswin"},m={stateEditorReference:/@\{([A-Z0-9]{8}-([A-Z0-9]{4}-){3}[A-Z0-9]{12})\.\w+\}/g,stateEditorOriginReference:/@\{(([\w-]+)\.(([\w-]+(\[\d+\])?)|state.[\w-]+))\}/g,stateEditorRefOnly:/^@\{(([\w-]+)\.(([\w-]+(\[\d+\])?)|state.[\w-]+))\}$/,uid:/[A-Z0-9]{8}-([A-Z0-9]{4}-){3}[A-Z0-9]{12}/g},x={_id:"property",AWS_VPC_CustomerGateway:{__array:!1,IpAddress:!1,Type:!1,BgpAsn:!1},AWS_EC2_Instance:{__array:!1,PublicIp:!0,MacAddress:!0,PrivateIpAddress:!0},AWS_AutoScaling_Group:{__array:!0,PublicIp:!0,MacAddress:!0,AvailabilityZones:!0,PrivateIpAddress:!0},AWS_VPC_Subnet:{__array:!1,AvailableIpAddressCount:!1,AvailabilityZone:!1,CidrBlock:!1},AWS_VPC_NetworkInterface:{__array:!0,PublicIp:!0,MacAddress:!0,PrivateIpAddress:!0},AWS_ELB:{__array:!1,DNSName:!1,CanonicalHostedZoneName:!1,CanonicalHostedZoneNameID:!1,AvailabilityZones:!0},AWS_VPC_VPC:{__array:!1,CidrBlock:!1},AWS_EC2_InstanceGroup:{__array:!1,PublicIp:!0,MacAddress:!0,PrivateIpAddress:!0},AWS_RDS_DBInstance:{Address:!0,Port:!0}},{AWS_RESOURCE_KEY:n,INSTANCE_STATES:l,AWS_RESOURCE_SHORT_TYPE:r,REGION_KEYS:g,REGION_SHORT_LABEL:b,REGION_LABEL:y,RETURN_CODE:S,LINUX:c,WINDOWS:N,MESSAGE_E:h,OPS_STATE:d,OPS_CODE_NAME:p,DEMO_STACK_NAME_LIST:f,TA:T,OS_TYPE_MAPPING:v,REGEXP:m,RESTYPE:E,STATE_REF_DICT:x,RESNAME:C(w),WRAP:C,DB_INSTANCECLASS:a,DB_ENGINE:s,DB_ENGINTYPE:u,DB_ENGINE_ARY:o,DB_DEFAULTSETTING:i}})}.call(this),define("MC.canvas",["MC"],function(e){e.canvas={GRID_WIDTH:10,GRID_HEIGHT:10,GROUP_MIN_PADDING:120,PORT_PADDING:4,CORNER_RADIUS:8,getState:function(){return Design.instance()?Design.instance().mode():"dashboard"},display:function(e,t,n){var r=$("#"+e+"_"+t);if(n===null||n===undefined){switch(r.attr("display")){case"none":n=!1;break;default:n=!0}return n}n===!0?(r.attr("display","inline"),r.attr("style",""),Canvon(r).addClass("tooltip")):(r.attr("display","none"),r.attr("style","opacity:0"),Canvon(r).removeClass("tooltip"))},canvasName:function(e){return e.length>17?e.substring(0,14)+"...":e},update:function(t,n,r,i){var s=$("#"+t+"_"+r),i;switch(n){case"text":r.indexOf("name")!==-1&&(i=e.canvas.canvasName(i)),s.length===0&&(s=$("#"+t).find("."+r)),s.text(i);break;case"image":s[0].setAttributeNS("http://www.w3.org/1999/xlink","href",i);break;case"eip":s.attr("data-eip-state",i);break;case"id":s.attr("id",i);break;case"color":s.attr("style","fill:"+i);break;case"tooltip":Canvon("#"+t+"_"+r).addClass("tooltip").data("tooltip",i).attr("data-tooltip",i)}return!0},resize:function(t,n){var r=$canvas.size(),i=$canvas.scale(),s=t==="width"?0:1,o=[],u=[],a=[],f=[],l,c,h,p,d,v;return n==="expand"&&(r[s]+=60,$("#canvas_body").children(".svg_resizer.icon-resize-"+(s?"up":"left")).show()),n==="shrink"&&($.each($canvas.node(),function(e,t){l=t.position(),c=t.size(),a.push(l[0]+c[0]),f.push(l[1]+c[1])}),$.each($canvas.group(),function(e,t){l=t.position(),c=t.size(),a.push(l[0]+c[0]),f.push(l[1]+c[1])}),d=Math.max.apply(Math,a),v=Math.max.apply(Math,f),p=t==="width"?d:v,r[s]-60<=p?(r[s]=20+p,$("#canvas_body").children(".svg_resizer.icon-resize-"+(s?"up":"left")).hide()):(r[s]-=60,r[s]===20+p&&$("#canvas_body").children(".svg_resizer.icon-resize-"+(s?"up":"left")).hide())),$("#svg_canvas")[0].setAttribute("viewBox","0 0 "+e.canvas.GRID_WIDTH*r[0]+" "+e.canvas.GRID_HEIGHT*r[1]),$("#svg_canvas").attr({width:r[0]*e.canvas.GRID_WIDTH/i,height:r[1]*e.canvas.GRID_HEIGHT/i}),$("#canvas_body").css({width:r[0]*e.canvas.GRID_WIDTH/i,height:r[1]*e.canvas.GRID_HEIGHT/i}),$canvas.size(r[0],r[1]),!0},zoomIn:function(){var t=$canvas.size(),n=$("#canvas_body"),r="",i=$canvas.scale();return i>1&&($canvas.scale((i*10-2)/10),i=$canvas.scale(),$("#svg_canvas")[0].setAttribute("viewBox","0 0 "+e.canvas.GRID_WIDTH*t[0]+" "+e.canvas.GRID_HEIGHT*t[1]),r=n.attr("class").replace(/zoomlevel_[^\s]+\s?/g,"")+"zoomlevel_"+(""+i).replace(".","_"),n.attr("class",r),$("#canvas_body").css({width:t[0]*e.canvas.GRID_WIDTH/i,height:t[1]*e.canvas.GRID_HEIGHT/i}),$("#svg_canvas").attr({width:t[0]*e.canvas.GRID_WIDTH/i,height:t[1]*e.canvas.GRID_HEIGHT/i})),i===1&&$("#canvas_body").hasClass("canvas_zoomed")&&$("#canvas_body").removeClass("canvas_zoomed"),e.canvas.event.clearSelected(),!0},zoomOut:function(){var t=$canvas.size(),n=$("#canvas_body"),r="",i=$canvas.scale();return i<1.6&&($canvas.scale((i*10+2)/10),i=$canvas.scale(),$("#svg_canvas")[0].setAttribute("viewBox","0 0 "+e.canvas.GRID_WIDTH*t[0]+" "+e.canvas.GRID_HEIGHT*t[1]),r=$.trim(n.attr("class").replace(/zoomlevel_[^\s]+\s?/g,""))+" zoomlevel_"+(""+i).replace(".","_"),n.attr("class",r),$("#canvas_body").css({width:t[0]*e.canvas.GRID_WIDTH/i,height:t[1]*e.canvas.GRID_HEIGHT/i}),$("#svg_canvas").attr({width:t[0]*e.canvas.GRID_WIDTH/i,height:t[1]*e.canvas.GRID_HEIGHT/i})),$("#canvas_body").addClass("canvas_zoomed"),e.canvas.event.clearSelected(),!0},_addPad:function(t,n){switch(t.angle){case 0:t.x+=e.canvas.PORT_PADDING,t.y-=n;break;case 90:t.x-=n,t.y-=e.canvas.PORT_PADDING;break;case 180:t.x-=e.canvas.PORT_PADDING,t.y-=n;break;case 270:t.x-=n,t.y+=e.canvas.PORT_PADDING}},_getPath:function(t,n,r){var i=0,s=0,o=e.canvas.CORNER_RADIUS,u=2*e.canvas.CORNER_RADIUS,a,f;return t.x===n.x?(s=n.y-t.y,Math.abs(s)<=u?a={x:n.x,y:(t.y+n.y)/2}:(i=s?s<0?-1:1:0,a={x:n.x,y:n.y-o*i}),s=n.x-r.x,Math.abs(s)<=u?f={x:(n.x+r.x)/2,y:n.y}:(i=s?s<0?-1:1:0,f={x:n.x-o*i,y:n.y})):(s=n.x-t.x,Math.abs(s)<=u?a={x:(t.x+n.x)/2,y:n.y}:(i=s?s<0?-1:1:0,a={x:n.x-o*i,y:n.y}),s=n.y-r.y,Math.abs(s)<=u?f={x:n.x,y:(n.y+r.y)/2}:(i=s?s<0?-1:1:0,f={x:n.x,y:n.y-o*i}))," L "+a.x+" "+a.y+" Q "+n.x+" "+n.y+" "+f.x+" "+f.y},_bezier_q_corner:function(e){var t="";if(e.length>=6){var n=e[0],r=e[1],i=e[e.length-2],s=e[e.length-1],o,u,a;o={x:(r.x+i.x)/2,y:(r.y+i.y)/2},u=e[2],a=e[e.length-3],t="M "+n.x+" "+n.y+" Q "+a.x+" "+a.y+" "+i.x+" "+i.y+" L "+s.x+" "+s.y}else $.each(e,function(n,r){if(n===0)t="M "+r.x+" "+r.y;else if(n===e.length-1)t+=" "+r.x+" "+r.y;else{prev_p=e[n-1],next_p=e[n+1];if(!(prev_p.x===r.x&&next_p.x===r.x||prev_p.y===r.y&&next_p.y===r.y)){var i=e[e.length-3],s=e[e.length-2],o=e[e.length-1];return t+=" Q "+i.x+" "+i.y+" "+s.x+" "+s.y+" L "+o.x+" "+o.y,!1}t+=" L "+r.x+" "+r.y}last_p=r});return t},_bezier_qt_corner:function(t){var n="";if(t.length>=4){var r=t[0],i=t[1],s=t[t.length-2],o=t[t.length-1],u,a,f;u={x:(i.x+s.x)/2,y:(i.y+s.y)/2},a=t[2],f=t[t.length-3],n="M "+r.x+" "+r.y+" L "+i.x+" "+i.y+" C "+a.x+" "+a.y+" "+f.x+" "+f.y+" "+s.x+" "+s.y+" L "+o.x+" "+o.y}else $.each(t,function(r,i){r===0?n="M "+i.x+" "+i.y:r===t.length-1?n+=" L "+i.x+" "+i.y:(prev_p=t[r-1],next_p=t[r+1],prev_p.x===i.x&&next_p.x===i.x||prev_p.y===i.y&&next_p.y===i.y?n+=" L "+i.x+" "+i.y:n+=e.canvas._getPath(prev_p,i,next_p)),last_p=i});return n},_round_corner:function(t){var n="",r={},i={},s={};return $.each(t,function(o,u){o===0?n="M "+u.x+" "+u.y:o===t.length-1?n+=" L "+u.x+" "+u.y:(i=t[o-1],s=t[o+1],i.x===u.x&&s.x===u.x||i.y===u.y&&s.y===u.y?n+=" L "+u.x+" "+u.y:n+=e.canvas._getPath(i,u,s)),r=u}),n},_adjustMidY:function(e,t,n,r){switch(e){case"rtb-src-top":case"rtb-src-bottom":t=n.y;break;case"rtb-tgt":case"elb-assoc":case"elb-sg-in":case"elb-sg-out":t=n.y+40*r}return t},_adjustMidX:function(e,t,n,r){switch(e){case"rtb-tgt-left":case"rtb-tgt-right":case"elb-assoc":case"elb-sg-in":case"elb-sg-out":n.angle===0?t=n.x+4:n.angle===180&&(t=n.x-4);break;case"rtb-src":t=n.x+40*r}return t},updateResizer:function(t,n,r){var i=10,s=0;n*=e.canvas.GRID_WIDTH,r*=e.canvas.GRID_HEIGHT,$(t).find(".resizer-wrap").empty().append(Canvon.rectangle(0,s,i,i).attr({"class":"group-resizer resizer-topleft","data-direction":"topleft"}),Canvon.rectangle(i,s,n-2*i,i).attr({"class":"group-resizer resizer-top","data-direction":"top"}),Canvon.rectangle(n-i,s,i,i).attr({"class":"group-resizer resizer-topright","data-direction":"topright"}),Canvon.rectangle(0,s+i,i,r-2*i).attr({"class":"group-resizer resizer-left","data-direction":"left"}),Canvon.rectangle(n-i,s+i,i,r-2*i).attr({"class":"group-resizer resizer-right","data-direction":"right"}),Canvon.rectangle(0,r+s-i,i,i).attr({"class":"group-resizer resizer-bottomleft","data-direction":"bottomleft"}),Canvon.rectangle(i,r+s-i,n-2*i,i).attr({"class":"group-resizer resizer-bottom","data-direction":"bottom"}),Canvon.rectangle(n-i,r+s-i,i,i).attr({"class":"group-resizer resizer-bottomright","data-direction":"bottomright"}))},route2:function(t,n,r){var i=[],s={},o={},u=!1,a=!1,f=!1,l=!1,c=!1,h=!1,p=!1,d=!1;$.extend(!0,s,t),$.extend(!0,o,n),Math.sqrt(Math.pow(o.y-s.y,2)+Math.pow(o.x-s.x,2))>e.canvas.PORT_PADDING*2&&(e.canvas._addPad(t,0),e.canvas._addPad(n,0)),e.canvas._addPad(t,0),e.canvas._addPad(n,0);if(t.y<n.y){var v=t;t=n,n=v;var m=s;s=o,o=m}t.x>=n.x?(u=t.angle===0||t.angle===90,a=n.angle===0||n.angle===90,f=t.angle===180||t.angle===270,l=n.angle===180||n.angle===270):(c=t.angle===0||t.angle===270,h=n.angle===0||n.angle===270,p=t.angle===90||t.angle===180,d=n.angle===90||n.angle===180),i.push(s),i.push(t);if(u&&a||p&&d)i.push({x:t.x,y:n.y});else if(f&&l||c&&h)i.push({x:n.x,y:t.y});else if(u&&l||p&&h)mid_y=Math.round((t.y+n.y)/2),n.type!=="AWS.VPC.RouteTable"&&n.type!=="AWS.ELB"||n.type===t.type?(t.type==="AWS.VPC.RouteTable"||n.type==="AWS.ELB")&&n.type!==t.type&&Math.abs(t.y-mid_y)>5&&(mid_y=e.canvas._adjustMidY(t.name,mid_y,t,-1)):Math.abs(mid_y-n.y)>5&&(mid_y=e.canvas._adjustMidY(n.name,mid_y,n,1)),i.push({x:t.x,y:mid_y}),i.push({x:n.x,y:mid_y});else if(f&&a||c&&d)mid_x=Math.round((t.x+n.x)/2),n.type!=="AWS.VPC.RouteTable"&&n.type!=="AWS.ELB"||n.type===t.type?t.type==="AWS.VPC.RouteTable"&&n.type!==t.type?Math.abs(mid_x-n.x)>5&&(n.type==="AWS.VPC.InternetGateway"||n.type==="AWS.VPC.VPNGateway"?mid_x=e.canvas._adjustMidX(t.name,mid_x,n,-1):mid_x=e.canvas._adjustMidX(t.name,mid_x,t,-1)):t.type==="AWS.ELB"&&r===1&&n.type!==t.type&&Math.abs(mid_x-n.x)>5&&(n.type==="AWS.EC2.Instance"||n.type==="AWS.VPC.Subnet"||n.type==="AWS.AutoScaling.Group"||n.type==="AWS.AutoScaling.LaunchConfiguration"?mid_x=e.canvas._adjustMidX(t.name,mid_x,n,-1):mid_x=e.canvas._adjustMidX(t.name,mid_x,t,-1)):Math.abs(t.x-mid_x)>5&&(mid_x=e.canvas._adjustMidX(n.name,mid_x,t,1)),i.push({x:mid_x,y:t.y}),i.push({x:mid_x,y:n.y});return i.push(n),i.push(o),i},select:function(e){var t=$canvas(e),n=t.$element(),r=t.nodeType,i;return Canvon(n).addClass("selected"),r==="line"&&(clone=n.clone(),n.remove(),$("#line_layer").append(clone)),r==="node"&&(clone=n.clone(),n.remove(),$("#node_layer").append(clone),$.each(t.connection(),function(t,n){Canvon("#"+n.line+", #"+e+"_port-"+n.port).addClass("view-show")}),Canvon(clone.find(".port")).addClass("view-show")),$canvas.selected_node().length=0,$canvas.selected_node().push(e),!0},move:function(t,n,r){var i=$canvas(t.id),s=i.type,o=i.nodeType,u=[],a,f,l,c,h,p,d;o==="node"&&(i.position(n,r),i.reConnect());if(o==="group"){a=e.canvas.groupChild(t),f=i.position(),h=i.size(),l=n-f[0],c=r-f[1],i.position(n,r),i.reConnect(),$.each(a,function(e,t){p=$canvas(t.id),d=p.position(),p.position(d[0]+l,d[1]+c),(p.type==="AWS.VPC.Subnet"||p.type==="AWS.AutoScaling.Group"||p.nodeType==="node")&&$.each(p.connection(),function(e,t){u.push(t.line)})}),$.each(u,function(e,t){$canvas(t).reConnect()}),(s==="AWS.VPC.Subnet"||s==="AWS.AutoScaling.Group")&&i.reConnect();if(s==="AWS.VPC.VPC"){var v=n,m=r,g=h[0],y=h[1],b,w,E,S;b=$(".AWS-VPC-InternetGateway"),E=$(".AWS-VPC-VPNGateway"),b[0]&&(w=$canvas(b.attr("id")),w.position(v-4,w.position()[1]+c),w.reConnect()),E[0]&&(S=$canvas(E.attr("id")),S.position(v+g-4,S.position()[1]+c),S.reConnect())}}},position:function(e,t,n){t=t>0?t:0,n=n>0?n:0;var r=e.transform.baseVal,i;return r.numberOfItems===1?r.getItem(0).setTranslate(t*10,n*10):(i=e.ownerSVGElement.createSVGTransform(),i.setTranslate(t*10,n*10),r.appendItem(i)),!0},groupSize:function(e,t,n){var r=e.getElementsByClassName("group")[0];return r.width.baseVal.value=t*10,r.height.baseVal.value=n*10,r.x.baseVal.value=0,r.y.baseVal.value=0,!0},remove:function(e){return $(e).remove(),!0},pixelToGrid:function(t,n){var r=$canvas.scale();return{x:Math.ceil(t*r/e.canvas.GRID_WIDTH),y:Math.ceil(n*r/e.canvas.GRID_HEIGHT)}},matchPoint:function(t,n){var r=e.canvas.pixelToGrid(t,n),i,s,o;return $.each($canvas.node(),function(e,t){i=t.position(),o=t.size();if(i&&i[0]<=r.x&&i[0]+o[0]>=r.x&&i[1]<=r.y&&i[1]+o[1]>=r.y)return s=document.getElementById(t.id),!1}),s},isMatchPlace:function(t,n,r,i,s,o,u){var a=[document.getElementById("asg_layer").childNodes,document.getElementById("subnet_layer").childNodes,document.getElementById("az_layer").childNodes,document.getElementById("vpc_layer").childNodes],f=[{x:i,y:s},{x:i+o,y:s},{x:i,y:s+u},{x:i+o,y:s+u}],l=$canvas.size(),c=e.canvas.MATCH_PLACEMENT[n],h=[],p=[],d={},v=!1,m,g,y,b,w,E,S=f.length,x,T;t!==null&&(h.push(t),r==="group"&&(b=e.canvas.groupChild(document.getElementById(t)),$.each(b,function(e,t){$canvas(t.id).nodeType==="group"&&h.push(t.id)})));while(S--){x=a.length;while(x--)if(a[x]){m={},T=a[x].length;while(T--)id=a[x][T].id,group_item=$canvas(id),w=group_item.position(),E=group_item.size(),$.inArray(id,h)===-1&&f[S].x>w[0]&&f[S].x<w[0]+E[0]&&f[S].y>w[1]&&f[S].y<w[1]+E[1]&&(m.is_matched=$.inArray(group_item.type,c)>-1,m.target=id,g=id);$.isEmptyObject(m)||(p[S]=m)}}return v=p[0]&&p[1]&&p[2]&&p[3]&&p[0].is_matched&&p[1].is_matched&&p[2].is_matched&&p[3].is_matched&&p[0].target===p[1].target&&p[0].target===p[2].target&&p[0].target===p[3].target&&i+o<l[0]-3&&s+u<l[1]-3,!v&&$.inArray("Canvas",c)>-1&&!p[0]&&!p[1]&&!p[2]&&!p[3]&&i+o<l[0]-3&&s+u<l[1]-3&&(v=!0,g="Canvas"),{is_matched:v,target:v?g:null}},isBlank:function(e,t,n,r,i,s,o){var u=!0,a,f,l,c;return n==="group"&&(a=r+s,f=i+o,$.each($canvas.group(),function(n,s){l=s.position(),c=s.size(),s.id!==e&&s.type===t&&l[0]<a&&l[0]+c[0]>r&&l[1]<f&&l[1]+c[1]>i&&(u=!1)})),u},parentGroup:function(t,n,r,i,s,o){var u=e.canvas.MATCH_PLACEMENT[n],a=null,f,l,c,h=null;return $.each($canvas.group(),function(e,n){f=$canvas(n.id),l=f.position(),c=f.size();if(t!==n.id&&$.inArray(f.type,u)>-1&&l[0]<=r&&l[0]+c[0]>=r&&l[1]<=i&&l[1]+c[1]>=i){var s=document.getElementById(n.id);if(!a)a=s;else if(c[0]<h[0]||c[1]<h[1])a=s;h=c}}),a},areaChild:function(t,n,r,i,s,o){var u=e.canvas.GROUP_WEIGHT[n],a=[],f,l;return $.each($canvas.node(),function(e,n){f=n.position(),l=n.size(),t!==n.id&&n.type!=="AWS.VPC.InternetGateway"&&n.type!=="AWS.VPC.VPNGateway"&&(f[0]>r&&f[0]<s||f[0]+l[0]>r&&f[0]+l[0]<s)&&(f[1]>i&&f[1]<o||f[1]+l[1]>i&&f[1]+l[1]<o)&&a.push(document.getElementById(n.id))}),$.each($canvas.group(),function(e,c){f=c.position(),l=c.size(),t!==c.id&&($.inArray(c.type,u)>-1||c.type===n)&&r<=f[0]+l[0]&&s>=f[0]&&i<=f[1]+l[1]&&o>=f[1]&&a.push(document.getElementById(c.id))}),a},groupChild:function(t){var n=$canvas(t.id),r=n.position(),i=n.size();return e.canvas.areaChild(n.id,n.type,r[0],r[1],r[0]+i[0],r[1]+i[1])}},e.canvas.volume={bubble:function(t,n,r){if(!$("#volume-bubble-box")[0]){var i=$("#"+t),s=$("#canvas_body"),o=$canvas.offset(),u=t.replace(/_[0-9]*$/ig,""),a,f,l,c,h,p;s.append('<div id="volume-bubble-box"><div class="arrow"></div><div id="volume-bubble-content"></div></div>'),p=$("#volume-bubble-box"),volume_list=r?$canvas($("#"+r+"-wrap").data("target-id")).listVolume(n):$canvas(t).volume(),$.each(volume_list,function(e,n){n.instance_id=t}),$("#volume-bubble-content").html(e.template.instanceVolume(volume_list)),r?(l=i.offset(),c=i.width(),h=i.height()):(l=i[0].getBoundingClientRect(),c=l.width,h=l.height),a=p.width(),f=p.height(),p.addClass("bubble-left").data("target-id",t).css({left:l.left+c+15-o.left,top:l.top-o.top-(f-h)/2}).show(),i.prop("namespaceURI")==="http://www.w3.org/2000/svg"&&e.canvas.update(t,"image","volume_status",e.canvas.IMAGE.INSTANCE_VOLUME_ATTACHED_ACTIVE)}},show:function(){var t=$(this),n=$("#volume-bubble-box"),r=t.data("target-id"),i=r.replace(/_[0-9]*$/ig,""),s=t.hasClass("instanceList-item-volume")?"instanceList":t.hasClass("asgList-item-volume")?"asgList":null,o=s?$canvas($("#"+s+"-wrap").data("target-id")).listVolume(t.parent().data("id")):$canvas(r).volume(),u=o.length,a;if(!n[0]){if(e.canvas.getState()==="app"||e.canvas.getState()==="appview")return s?(e.canvas.volume.bubble(r,t.parent().data("id"),s),!1):$canvas(r).list().length===0?(e.canvas.volume.bubble(r),!1):($canvas(i).select(),!1);u>0?e.canvas.volume.bubble(r):$("#"+r).prop("namespaceURI")==="http://www.w3.org/2000/svg"&&e.canvas.update(r,"image","volume_status",e.canvas.IMAGE.INSTANCE_VOLUME_NOT_ATTACHED)}else{a=n.data("target-id"),e.canvas.volume.close();if(i.split("_")[0]!==a.split("_")[0]){if(e.canvas.getState()==="app"&&s)e.canvas.volume.bubble(r,t.parent().data("id"),s);else{if(e.canvas.getState()==="app"&&$canvas(r).type==="AWS.AutoScaling.LaunchConfiguration")return!1;e.canvas.volume.bubble(r)}if(e.canvas.getState()==="app")return s?(e.canvas.volume.bubble(r,t.parent().data("id"),s),!1):$canvas(r).list().length===0?(e.canvas.volume.bubble(r),!1):($canvas(i).select(),!1)}}return!1},select:function(t){return e.canvas.event.clearSelected(),$("#instance_volume_list").find(".selected").removeClass("selected"),$("#"+t).addClass("selected"),$(document).on("keyup",e.canvas.volume.remove),!1},close:function(t){var n=$("#volume-bubble-box"),r;if(t){r=$(t.target);if(r.attr("class")==="instance-volume"||r.is(".snapshot_item")||r.parent().is(".snapshot_item")||r.is(".volume_item")||r.parent().is(".volume_item"))return!1}n[0]&&(target_id=n.data("target-id"),n.remove(),$("#"+target_id).prop("namespaceURI")==="http://www.w3.org/2000/svg"&&e.canvas.update(target_id,"image","volume_status",e.canvas.IMAGE.INSTANCE_VOLUME_NOT_ATTACHED),$(document).off("keyup",e.canvas.volume.remove).off("click",":not(.instance-volume, #volume-bubble-box)",e.canvas.volume.close))},remove:function(t){if((t.which===46||t.which===8)&&t.ctrlKey===!1&&t.metaKey===!1&&t.target.tagName.toLowerCase()!=="input"&&e.canvas.getState()!=="app"){var n=$("#volume-bubble-box"),r=n.data("target-id"),i=$("#"+r),s=i[0].getBoundingClientRect(),o=$("#instance_volume_list").find(".selected").attr("id");return o&&$canvas(o).remove()&&($("#"+o).parent().remove(),n.css("top",s.top-$("#canvas_body").offset().top-(n.height()-s.height)/2),$("#instance_volume_number").text($canvas(r).volume().length),$canvas.trigger("CANVAS_NODE_SELECTED","")),$(document).off("keyup",e.canvas.volume.remove),!1}},mousedown:function(t){if(t.which===1){var n=$(this),r=n.offset(),i=$canvas.offset(),s=n.data("type"),o=e.canvas.getState(),u,a;return o==="app"||o==="appview"?($canvas(this.id,"AWS.EC2.EBS.Volume").select(),!1):($(document.body).append('<div id="drag_shadow"><div class="resource-icon resource-icon-volume"></div></div>').append('<div id="overlayer"></div>'),u=$("#drag_shadow"),u.addClass("AWS-EC2-EBS-Volume").css({top:t.pageY-50,left:t.pageX-50}),Canvon(".AWS-EC2-Instance, .AWS-AutoScaling-LaunchConfiguration").addClass("attachable"),$(document).on({mousemove:e.canvas.volume.mousemove,mouseup:e.canvas.volume.mouseup},{target:n,instance_id:n.data("instance"),canvas_offset:$canvas.offset(),canvas_body:$("#canvas_body"),shadow:u,originalPageX:t.pageX,originalPageY:t.pageY,action:"move"}),$canvas(this.id,"AWS.EC2.EBS.Volume").select(),!1)}},mousemove:function(t){var n=e.canvas.matchPoint(t.pageX-t.data.canvas_offset.left,t.pageY-t.data.canvas_offset.top),r=n?n.getAttribute("data-class"):null,i=t.data,s=["AWS.EC2.Instance","AWS.AutoScaling.LaunchConfiguration"];if(i.action==="add"||(t.pageX>i.originalPageX+2||t.pageX<i.originalPageX-2)&&(t.pageY>i.originalPageY+2||t.pageY<i.originalPageY-2))i.shadow.css({top:t.pageY-50,left:t.pageX-50}).show(),i.canvas_body.addClass("node-dragging"),n&&$.inArray(r,s)>-1?e.canvas.volume.bubble(n.id):e.canvas.volume.close();return!1},mouseup:function(t){var n=$(t.data.target),r=n.data("option")||{},i=$("#volume-bubble-box"),s,o,u,a,f,l,c,h,p;return Canvon(".AWS-EC2-Instance, .AWS-AutoScaling-LaunchConfiguration").removeClass("attachable"),i[0]?(h=i.data("target-id"),target_node=$("#"+h),target_offset=target_node[0].getBoundingClientRect(),t.data.action==="move"?(c=n.attr("id"),t.data.instance_id!==h&&(volume_item=$canvas(h).moveVolume(c),volume_item&&(f=volume_item.snapshotId?"snapshot_item":"volume_item",$("#instance_volume_list").append('<li><a href="javascript:void(0)" id="'+c+'" class="'+f+'"><span class="volume_name">'+volume_item.name+'</span><span class="volume_size">'+volume_item.size+"GB</span></a></li>"),$("#instance_volume_number").text($canvas(h).volume().length),$canvas(volume_item.id,"AWS.EC2.EBS.Volume").select()))):(volume_item=$canvas(h).addVolume(n.data("option")),volume_item&&(f=volume_item.snapshotId?"snapshot_item":"volume_item",$("#instance_volume_list").append('<li><a href="javascript:void(0)" id="'+volume_item.id+'" data-instance="'+h+'" class="'+f+'"><span class="volume_name">'+volume_item.name+'</span><span class="volume_size">'+volume_item.size+"GB</span></a></li>"),$("#instance_volume_number").text($canvas(h).volume().length),$canvas(volume_item.id,"AWS.EC2.EBS.Volume").select())),i.css("top",target_offset.top-$("#canvas_body").offset().top-(i.height()-target_offset.height)/2)):$canvas.trigger("CANVAS_PLACE_NOT_MATCH",{type:"AWS.EC2.EBS.Volume"}),t.data.shadow.remove(),t.data.canvas_body.removeClass("node-dragging"),$("#overlayer").remove(),$(document).off({mousemove:e.canvas.volume.mousemove,mouseup:e.canvas.volume.mouseup}),!1}},e.canvas.asgList={show:function(t){t.stopImmediatePropagation();if(t.which===1){e.canvas.event.clearList();var n=this.parentNode,r=n.id,i=Canvon(n).offset(),s=$canvas.offset();return $("#canvas_body").append(e.template.asgList($canvas(r).list())),$("#asgList-wrap").data("target-id",n.id).on("click",".asgList-item",e.canvas.asgList.select).css({top:i.top-s.top-30,left:i.left-s.left-20}),e.canvas.asgList.select.call($("#asgList-wrap .asgList-item").first()),!0}},close:function(){return $("#asgList-wrap").remove(),e.canvas.volume.close(),!1},select:function(e){var t=$(this);return $("#asgList-wrap .selected").removeClass("selected"),t.addClass("selected"),$canvas($("#asgList-wrap").data("target-id")).select(t.data("id")),!1},selectById:function(t,n){e.canvas.event.clearList();var r=Canvon("#"+t).offset(),i=$canvas.offset();$("#canvas_body").append(e.template.asgList($canvas(t).list())),$("#asgList-wrap").data("target-id",t).on("click",".asgList-item",e.canvas.asgList.select).css({top:r.top-i.top-30,left:r.left-i.left-20}),e.canvas.asgList.select.call($("#"+n))}},e.canvas.instanceList={show:function(t){t.stopImmediatePropagation();if(t.which===1){e.canvas.event.clearList();var n=this.parentNode,r=n.id,i=Canvon("#"+r).offset(),s=$canvas.offset(),o=$canvas(r).list();if(o.length===0)return $canvas(r).select(),!1;$("#canvas_body").append(e.template.instanceList(o)),$("#instanceList-wrap").data("target-id",n.id).on("click",".instanceList-item",e.canvas.instanceList.select).css({top:i.top-s.top-30,left:i.left-s.left-20}),e.canvas.instanceList.select.call($("#instanceList-wrap .instanceList-item").first())}return!1},close:function(){return $("#instanceList-wrap").remove(),e.canvas.volume.close(),!1},select:function(t){var n=$(this),r=$("#volume-bubble-box");return r[0]&&r.data("target-id")!==this.id&&e.canvas.volume.close(),$("#instanceList-wrap .selected").removeClass("selected"),n.addClass("selected"),$canvas($("#instanceList-wrap").data("target-id")).select(n.data("id")),!1},selectById:function(t,n){e.canvas.event.clearList();var r=Canvon("#"+t).offset(),i=$canvas.offset(),s=$canvas(t).list();$("#canvas_body").append(e.template.instanceList(s)),$("#instanceList-wrap").data("target-id",t).on("click",".instanceList-item",e.canvas.instanceList.select).css({top:r.top-i.top-30,left:r.left-i.left-20}),e.canvas.instanceList.select.call($("#"+n))}},e.canvas.eniList={show:function(t){t.stopImmediatePropagation();if(t.which===1){e.canvas.event.clearList();var n=this.parentNode,r=n.id,i=Canvon("#"+r).offset(),s=$canvas.offset(),o=$canvas(r).list();return o.length===0?($canvas(r).select(),!1):($("#canvas_body").append(e.template.eniList(o)),$("#eniList-wrap").data("target-id",n.id).on("click",".eniList-item",e.canvas.eniList.select).css({top:i.top-s.top-30,left:i.left-s.left-20}),e.canvas.eniList.select.call($("#eniList-wrap .eniList-item").first()),!1)}},close:function(){return $("#eniList-wrap").remove(),!1},select:function(e){var t=$(this);return $("#eniList-wrap .selected").removeClass("selected"),t.addClass("selected"),$canvas($("#eniList-wrap").data("target-id")).select(t.data("id")),!1},selectById:function(t,n){e.canvas.event.clearList();var r=Canvon("#"+t).offset(),i=$canvas.offset(),s=$canvas(t).list();return $("#canvas_body").append(e.template.eniList(s)),$("#eniList-wrap").data("target-id",t).on("click",".eniList-item",e.canvas.eniList.select).css({top:r.top-i.top-30,left:r.left-i.left-20}),e.canvas.eniList.select.call($("#"+n)),!1}},e.canvas.nodeAction={show:function(t){var n=e.canvas.getState(),r=$canvas(t).type;if((n==="stack"||n==="app"||n==="appedit")&&(r==="AWS.EC2.Instance"||r==="AWS.AutoScaling.LaunchConfiguration")){var i=Design.instance().component(t),s=i.getStateData(),o=0;s&&_.isArray(s)&&(o=s.length);if(n==="app"&&!o)return;$("#canvas_body").append(e.template.nodeAction({state_num:o})),e.canvas.nodeAction.updateNumber(o),e.canvas.nodeAction.position(t)}},updateNumber:function(e){return $("#node-state-number").text(e),!1},position:function(e){var t=$("#"+e),n=t[0].getBoundingClientRect(),r=$("#svg_canvas").offset();return $("#node-action-wrap").css({left:n.left-r.left+n.width+5,top:n.top-r.top}).attr("data-id",e),!0},popup:function(e){return e.stopImmediatePropagation(),e.which===1&&$canvas.trigger("STATE_ICON_CLICKED",$(this).data("id")),!1},remove:function(e){var t=$("#node-action-wrap");return t.data("id")===e&&t.remove(),!0}},e.canvas.event={},e.canvas.event.dblclick=function(t){return e.canvas.event.dblclick.timer?(t.call(this),!0):(e.canvas.event.dblclick.timer=setTimeout(function(){e.canvas.event.dblclick.timer=null},500),!1)},e.canvas.event.dblclick.timer=null,e.canvas.event.dragable={mousedown:function(t){if(t.which===1&&(t.ctrlKey||t.metaKey))return t.stopImmediatePropagation(),e.canvas.event.ctrlMove.mousedown.call(this,t),!1;if(t.which===1){if(e.canvas.event.dblclick(function(){$canvas.trigger("SHOW_PROPERTY_PANEL")}))return!1;var n=$(this),r=$canvas(this.id),i=r.offset(),s=r.type,o=r.nodeType,u=$("#svg_canvas"),a=$canvas.offset(),f=$("#canvas_body"),l=$(t.target),c,h,p;s==="AWS.AutoScaling.LaunchConfiguration"&&e.canvas.getState()==="app"&&(l.is(".instance-volume")?e.canvas.volume.show.call(t.target):(e.canvas.event.clearSelected(),$canvas(this.id).select()));if(l.is(".instance-volume"))return e.canvas.volume.show.call(t.target),!1;if(l.is(".eip-status")&&e.canvas.getState()!=="appview")return $canvas(this.id).toggleEip(),!1;s==="AWS.VPC.Subnet"&&n.find(".port").hide(),c=n.clone(),s==="AWS.EC2.Instance"&&c.append([Canvon.rectangle(75,75,25,25).attr({"class":"clone-icon",rx:2,ry:2}),Canvon.image(e.IMG_URL+"ide/icon-drag-to-copy.png",82,82,12,12).attr("class","clone-icon")]),u.append(c),h=e.canvas.MATCH_PLACEMENT[s],h&&$.each(h,function(e,t){t!=="AWS.AutoScaling.Group"&&t!=="Canvas"&&Canvon("."+t.replace(/\./ig,"-")).addClass("dropable-group")}),$(document.body).append('<div id="overlayer" class="grabbing"></div>'),c[0].transform.numberOfItems===0?p=c[0].transform.baseVal.appendItem(c[0].ownerSVGElement.createSVGTransform()):p=c[0].transform.baseVal.getItem(0),s==="AWS.VPC.InternetGateway"||s==="AWS.VPC.VPNGateway"?(Canvon(c).addClass("shadow"),$(document).on({mousemove:e.canvas.event.dragable.gatewaymove,mouseup:e.canvas.event.dragable.gatewayup},{target:n,canvas_body:f,target_type:s,node_type:o,vpc_data:$canvas($(".AWS-VPC-VPC").attr("id")),shadow:c,offsetX:t.pageX-i.left+a.left,offsetY:t.pageY-i.top+a.top,originalPageX:t.pageX,originalPageY:t.pageY,scale_ratio:$canvas.scale(),SVGtranslate:p})):$(document).on({"keydown.DRAGABLE_EVENT":s==="AWS.EC2.Instance"?e.canvas.event.dragable.keyClone:!1,"mousemove.DRAGABLE_EVENT":e.canvas.event.dragable.mousemove,"mouseup.DRAGABLE_EVENT":Canvon(t.target).hasClass("asg-resource-dragger")?e.canvas.event.dragable.asgExpandup:Canvon(t.target).hasClass("dbinstance-resource-dragger")?e.canvas.event.dragable.rdsCreateReadReplicaup:e.canvas.event.dragable.mouseup},{target:n,canvas_body:f,target_type:s,node_type:o,shadow:c,offsetX:t.pageX-i.left+a.left,offsetY:t.pageY-i.top+a.top,groupChild:o==="group"?e.canvas.groupChild(this):null,originalPageX:t.pageX,originalPageY:t.pageY,originalTarget:t.target,size:r.size(),grid_width:e.canvas.GRID_WIDTH,grid_height:e.canvas.GRID_HEIGHT,scale_ratio:$canvas.scale(),SVGtranslate:p}),e.canvas.volume.close(),e.canvas.event.clearSelected()}},keyClone:function(e){if(!e.altKey)return e.data.canvas_body.removeClass("cloning"),!1;if(!e.data.canvas_body.hasClass("cloning"))return e.data.canvas_body.addClass("cloning"),!1},mousemove:function(t){var n=t.data,r=n.target[0].id,i=n.target_type,s=n.node_type,o=n.size,u=n.grid_width,a=n.grid_height,f=n.scale_ratio,l={x:Math.round((t.pageX-n.offsetX)/(u/f)),y:Math.round((t.pageY-n.offsetY)/(a/f))},c=e.canvas.isMatchPlace(r,i,s,l.x,l.y,o[0],o[1]);return t.pageX!==n.originalPageX&&t.pageY!==n.originalPageY&&!Canvon(n.shadow).hasClass("shadow")&&(Canvon(n.shadow).addClass("shadow"),n.canvas_body.addClass("node-dragging")),t.altKey?n.canvas_body.addClass("cloning"):n.canvas_body.removeClass("cloning"),Canvon(".match-dropable-group").removeClass("match-dropable-group"),c.is_matched&&Canvon("#"+c.target).addClass("match-dropable-group"),n.SVGtranslate.setTranslate(l.x*u,l.y*a),!1},mouseup:function(t){var n=t.data,r=n.target,i=r.attr("id"),s=$canvas(i),o=n.target_type,u=n.node_type;o==="AWS.VPC.Subnet"&&n.target.find(".port").show();if(t.pageX===n.originalPageX&&t.pageY===n.originalPageY)e.canvas.getState()==="app"?e.canvas.instanceList.show.call(r[0],t):($canvas(i).select(),e.canvas.volume.close());else{var a=$("#svg_canvas"),f=$canvas.offset(),l=Canvon(n.shadow).offset(),c=$canvas.node(),h=$canvas.scale(),p,d,v,m,g;u==="node"&&(p=n.size,v=e.canvas.pixelToGrid(l.left-f.left,l.top-f.top),d=e.canvas.isMatchPlace(i,o,u,v.x,v.y,p[0],p[1]),g=e.canvas.parentGroup(i,o,v.x,v.y,v.x+p[0],v.y+p[1]),v.x>0&&v.y>0&&d.is_matched&&(n.canvas_body.hasClass("cloning")?s.clone(g?g.id:"canvas",v.x,v.y):s.changeParent(g?g.id:"canvas",function(){this.move(v.x,v.y),this.reConnect(),$canvas(i).select()})));if(u==="group"){var v=e.canvas.pixelToGrid(l.left-f.left,l.top-f.top),y=$canvas.group(),b=y[i],w=s.position(),E=s.size(),S=s.type,x=e.canvas.GROUP_PADDING,T=[],N=[],C={},k=!1,d,L,g,A,O,M,_,D,P,H,B,j,F,I;S==="AWS.VPC.VPC"?(v.y<=3&&(v.y=3),v.x<=5&&(v.x=5)):(v.y<=2&&(v.y=2),v.x<=2&&(v.x=2)),d=e.canvas.isMatchPlace(i,o,u,v.x-1,v.y-1,E[0]+2,E[1]+2),L=e.canvas.areaChild(i,o,v.x,v.y,v.x+E[0],v.y+E[1]),g=e.canvas.parentGroup(i,S,v.x,v.y,v.x+E[0],v.y+E[1]),$.each(L,function(e,t){T.push(t.id)}),$.each(n.groupChild,function(e,t){T.push(t.id)}),$.each(T,function(e,t){$.inArray(t,N)===-1&&N.push(t)}),g&&(parent_item=$canvas(g.id),A=y[g.id],O=parent_item.position(),M=parent_item.size(),O[0]+x>v.x&&(v.x=O[0]+x,k=!0),O[0]+M[0]-x<v.x+E[0]&&(v.x=O[0]+M[0]-x-E[0],k=!0),O[1]+x>v.y&&(v.y=O[1]+x,k=!0),O[1]+M[1]-x<v.y+E[1]&&(v.y=O[1]+M[1]-x-E[1],k=!0),k&&(P=e.canvas.areaChild(i,o,v.x,v.y,v.x+E[0],v.y+E[1]))),H=v.x-w[0],B=v.y-w[1],I=e.canvas.isBlank(i,S,"group",v.x,v.y,E[0],E[1])&&n.groupChild.length===N.length,k&&d.is_matched&&n.groupChild.length===P.length||!k&&d.is_matched&&I?s.changeParent(g?g.id:"canvas",function(){this.move(v.x,v.y),this.reConnect()}):I||$canvas.trigger("CANVAS_PLACE_OVERLAP"),$canvas(i).select()}}n.shadow.remove(),n.canvas_body.removeClass("node-dragging").removeClass("cloning"),$("#overlayer").remove(),Canvon(".dropable-group").removeClass("dropable-group"),Canvon(".match-dropable-group").removeClass("match-dropable-group"),$(document).off(".DRAGABLE_EVENT")},gatewaymove:function(t){var n=t.data,r=Math.round((t.pageY-n.offsetY)/(e.canvas.GRID_HEIGHT/n.scale_ratio)),i=n.vpc_data.position(),s=n.vpc_data.size(),o=n.target_type;return r>i[1]+s[1]-8&&(r=i[1]+s[1]-8),r<i[1]&&(r=i[1]),o==="AWS.VPC.InternetGateway"&&n.SVGtranslate.setTranslate((i[0]-4)*e.canvas.GRID_WIDTH,r*e.canvas.GRID_HEIGHT),o==="AWS.VPC.VPNGateway"&&n.SVGtranslate.setTranslate((i[0]+s[0]-4)*e.canvas.GRID_WIDTH,r*e.canvas.GRID_HEIGHT),!1},gatewayup:function(t){var n=t.data.target,r=n.attr("id"),i=$canvas(r),s=i.type,o=$canvas.offset(),u=Canvon(t.data.shadow).offset(),a=n.data("class"),f=$canvas.scale(),l=e.canvas.pixelToGrid(u.left-o.left,u.top-o.top);i.position(null,l.y),i.reConnect(),i.select(),Canvon(".dropable-group").removeClass("dropable-group"),t.data.shadow.remove(),t.data.canvas_body.removeClass("node-dragging"),$("#overlayer").remove(),$(document).off({mousemove:e.canvas.event.gatewaymove,mouseup:e.canvas.event.gatewayup})},asgExpandup:function(t){var n=t.data,r=t.data.target,i=r.attr("id"),s=t.data.target_type,o=n.nodeType,u=$canvas(i),a=$("#svg_canvas"),f=$canvas.offset(),l=Canvon(t.data.shadow).offset(),c=$canvas.scale(),h=e.canvas.pixelToGrid(l.left-f.left,l.top-f.top),p=n.size,d=e.canvas.areaChild(i,s,h.x,h.y,h.x+p[0],h.y+p[1]),v=e.canvas.isMatchPlace(null,s,o,h.x,h.y,p[0],p[1]),m=e.canvas.parentGroup(i,s,h.x,h.y,h.x+p[0],h.y+p[1]);d.length===0&&v.is_matched&&(u.asgExpand(v.target,h.x,h.y),u.select()),Canvon(".dropable-group").removeClass("dropable-group"),t.data.shadow.remove(),t.data.canvas_body.removeClass("node-dragging"),$("#overlayer").remove(),$(document).off(".DRAGABLE_EVENT")},rdsCreateReadReplicaup:function(t){var n=t.data,r=t.data.target,i=r.attr("id"),s=t.data.target_type,o=n.nodeType,u=$canvas(i),a=$("#svg_canvas"),f=$canvas.offset(),l=Canvon(t.data.shadow).offset(),c=$canvas.scale(),h=e.canvas.pixelToGrid(l.left-f.left,l.top-f.top),p=n.size,d=e.canvas.isMatchPlace(null,s,o,h.x,h.y,p[0],p[1]),v=e.canvas.parentGroup(i,s,h.x,h.y,h.x+p[0],h.y+p[1]);(u.model.get("x")!==h.x||u.model.get("y")!==h.y)&&d.is_matched&&u.rdsCreateReadReplica(d.target,h.x,h.y),Canvon(".dropable-group").removeClass("dropable-group"),t.data.shadow.remove(),t.data.canvas_body.removeClass("node-dragging"),$("#overlayer").remove(),$(document).off(".DRAGABLE_EVENT")}},e.canvas.event.drawConnection={mousedown:function(t){if(t.which!=1)return!1;var n=$("#svg_canvas"),r=n.offset(),i=$(this),s=Canvon(this).offset(),o=i.parent(),u=o.attr("id"),a=$canvas(u),f=i.data("type"),l=i.data("name"),c=$canvas.scale(),h,p,d={left:s.left+Math.round(s.width/2),top:s.top+Math.round(s.height/2)};$(document.body).append('<div id="overlayer"></div>'),n.append(Canvon.group().attr({"class":"draw-line-wrap line-"+f,id:"draw-line-connection"})),$(document).on({mousemove:e.canvas.event.drawConnection.mousemove,mouseup:e.canvas.event.drawConnection.mouseup},{connect:i.data("connect"),originalTarget:i.parent(),originalX:(d.left-r.left)*c,originalY:(d.top-r.top)*c,draw_line:$("#draw-line-connection"),port_name:l,canvas_offset:r,scale_ratio:c}),e.canvas.event.clearSelected(),$.each(a.connection(),function(e,t){Canvon("#"+t.line).addClass("view-keephover")});var v=a.connectionData(l),m=/\./ig;for(var g in v)$("."+g.replace(m,"-")).each(function(e,t){if(t.id==u)return;var n=v[g];for(var r=0;r<v[g].length;++r)a.isConnectable(l,t.id,n[r])&&(h=this,$(h).find(".port-"+n[r]).each(function(){p=$(this),p.css("display")!=="none"&&(Canvon(h).addClass("connectable"),Canvon(p).addClass("connectable-port view-show"))}))});return!1},mousemove:function(e){var t=e.data,n=t.canvas_offset,r=t.scale_ratio,i=(e.pageX-n.left)*r,s=(e.pageY-n.top)*r,o=t.originalX,u=t.originalY,a=Math.atan2(s-u,i-o),f=8,l=.5235987755982988,c=a-l,h=a+l;return t.draw_line.empty().append(Canvon.line(o,u,i,s).attr("class","draw-line"),Canvon.polygon([[i,s],[i-f*Math.cos(c),s-f*Math.sin(c)],[i-f*Math.cos(h),s-f*Math.sin(h)]]).attr("class","draw-line-arrow")),!1},mouseup:function(t){t.data.draw_line.remove();var n=e.canvas.matchPoint(Math.round(t.pageX-t.data.canvas_offset.left),Math.round(t.pageY-t.data.canvas_offset.top)),r=t.data.originalTarget,i=t.data.port_name,s=r.data("class"),o,i,u,a,f,l,c;return(s==="AWS.VPC.RouteTable"||s==="AWS.ELB")&&!n&&(f=e.canvas.pixelToGrid(t.pageX-t.data.canvas_offset.left,t.pageY-t.data.canvas_offset.top),n=null,$.each($canvas.group(),function(e,t){l=t.position(),c=t.size();if(t.type==="AWS.VPC.Subnet"&&l&&l[0]-2<f.x&&l[0]+c[0]+2>f.x&&l[1]<f.y&&l[1]+c[1]>f.y)return n=document.getElementById(t.id),!1})),n&&(o=$(n),$.inArray(r.data("class"),["AWS.EC2.Instance","AWS.AutoScaling.LaunchConfiguration"])>-1&&o.data("class")==="AWS.ELB"?(match_node_offset=n.getBoundingClientRect(),t.pageX>match_node_offset.left+match_node_offset.width/2&&(u="elb-sg-out"),t.pageX<match_node_offset.left+match_node_offset.width/2&&(u="elb-sg-in")):u=o.find(".connectable-port").data("name"),!r.is(o)&&u!==undefined&&$canvas.connect(r.attr("id"),i,o.attr("id"),u)),Canvon("#svg_canvas .connectable").removeClass("connectable"),Canvon("#svg_canvas .view-keephover").removeClass("view-keephover"),Canvon("#svg_canvas .view-show").removeClass("view-show"),Canvon("#svg_canvas .connectable-port").removeClass("connectable-port"),$("#overlayer").remove(),$(document).off({mousemove:e.canvas.event.drawConnection.mousemove,mouseup:e.canvas.event.drawConnection.mouseup}),!1}},e.canvas.event.siderbarDrag={mousedown:function(t){if(t.which===1){var n=$(this),r=n.offset(),i=$("#svg_canvas"),s=$canvas.offset(),o=n.data("type"),u=n.data("component-type"),a=$("#changeAmiDropZone"),f,l,c,h,p,d,v,m;if(n.hasClass("resource-disabled"))return!1;$(document.body).append('<div id="drag_shadow"></div><div id="overlayer" class="grabbing"></div>'),c=$("#drag_shadow"),u==="group"?(m=e.canvas.GROUP_DEFAULT_SIZE[o],c.addClass(o.replace(/\./ig,"-"))):(h=n.find(".resource-icon").clone(),c.append(h),m=e.canvas.COMPONENT_SIZE[o]),c.css({top:t.pageY-50,left:t.pageX-50,width:m[0]*e.canvas.GRID_WIDTH,height:m[1]*e.canvas.GRID_HEIGHT}).show(),o==="AWS.EC2.EBS.Volume"?(e.canvas.getState()==="appedit"?Canvon(".AWS-EC2-Instance, .AWS-AutoScaling-LaunchConfiguration").addClass("attachable"):Canvon(".AWS-EC2-Instance, .AWS-AutoScaling-LaunchConfiguration").addClass("attachable"),c.addClass("AWS-EC2-EBS-Volume"),$(document).on({mousemove:e.canvas.volume.mousemove,mouseup:e.canvas.volume.mouseup},{target:n,canvas_offset:s,canvas_body:$("#canvas_body"),shadow:c,action:"add"})):(v=e.canvas.MATCH_PLACEMENT[o],v&&Canvon("."+v.join(",").replace(/\./ig,"-").replace(/,/ig,",.")).addClass("dropable-group"),o==="AWS.EC2.Instance"&&a.is(":visible")&&(f=a.offset(),l={x1:f.left,x2:f.left+a.width(),y1:f.top,y2:f.top+a.height()}),$(document).on({mousemove:e.canvas.event.siderbarDrag.mousemove,mouseup:e.canvas.event.siderbarDrag.mouseup},{target:n,node_type:u,canvas_offset:s,target_type:o,shadow:c,scale_ratio:$canvas.scale(),component_size:u==="node"?e.canvas.COMPONENT_SIZE[o]:e.canvas.GROUP_DEFAULT_SIZE[o],drop_zone:a,drop_zone_data:l})),$("#canvas_body").addClass("node-dragging")}return e.canvas.volume.close(),e.canvas.event.clearSelected(),!1},mousemove:function(t){var n=t.data,r=n.shadow[0],i=n.canvas_offset,s=n.target[0].id,o=n.node_type,u=n.target_type,a=n.component_size,f=10,l=10,c=n.scale_ratio,h={x:Math.round((t.pageX-i.left-50)/(f/c)),y:Math.round((t.pageY-i.top-50)/(l/c))},p=e.canvas.isMatchPlace(null,u,o,h.x,h.y,a[0],a[1]);return Canvon(".match-dropable-group").removeClass("match-dropable-group"),p.is_matched&&Canvon("#"+p.target).addClass("match-dropable-group"),n.drop_zone_data&&(t.pageX>n.drop_zone_data.x1&&t.pageX<n.drop_zone_data.x2&&t.pageY>n.drop_zone_data.y1&&t.pageY<n.drop_zone_data.y2?n.drop_zone.addClass("hover"):n.drop_zone.removeClass("hover")),r.style.top=t.pageY-50+"px",r.style.left=t.pageX-50+"px",!1},mouseup:function(t){$("#overlayer").remove(),t.data.shadow.hide();var n=document.elementFromPoint(t.pageX,t.pageY);if(n&&(n.id==="changeAmiDropZone"||$(n).parents("#changeAmiDropZone").length>0))$("#changeAmiDropZone").removeClass("hover").trigger("drop",$(t.data.target).data("option").imageId),t.data.shadow.remove();else{t.data.shadow.show();if(!$("#canvas_body").hasClass("canvas_zoomed")){var r=$(t.data.target),i=r.attr("id")||"",s=r.data("component-type"),o=r.data("type"),u=$canvas.offset(),a=t.data.shadow.position(),f=r.data("option")||{},l=e.canvas.pixelToGrid(a.left-u.left,a.top-u.top),c,h,p,d,v,m,g,y,b;l.x>0&&l.y>0&&(s==="node"&&(c=e.canvas.COMPONENT_SIZE[o],o==="AWS.VPC.InternetGateway"||o==="AWS.VPC.VPNGateway"?(v=$(".AWS-VPC-VPC").attr("id"),m=$canvas(v),g=m.position(),vpc_size=m.size(),f.groupUId=v,l.y>g[1]+vpc_size[1]-c[1]&&(l.y=g[1]+vpc_size[1]-c[1]),l.y<g[1]&&(l.y=g[1]),o==="AWS.VPC.InternetGateway"&&(l.x=g[0]-c[1]/2),o==="AWS.VPC.VPNGateway"&&(l.x=g[0]+vpc_size[0]-c[1]/2),$canvas.add(o,f,l)):(h=e.canvas.isMatchPlace(null,o,s,l.x,l.y,c[0],c[1]),h.is_matched?(f.groupUId=h.target,b=$canvas.add(o,f,l),b&&e.canvas.select(b)):$canvas.trigger("CANVAS_PLACE_NOT_MATCH",{type:o}))),s==="group"&&(p=e.canvas.GROUP_DEFAULT_SIZE[o],o==="AWS.VPC.Subnet",h=e.canvas.isMatchPlace(null,o,s,l.x,l.y,p[0],p[1]),y=e.canvas.areaChild(null,o,l.x,l.y,l.x+p[0],l.y+p[1]),h.is_matched?e.canvas.isBlank(i,o,"group",l.x-1,l.y-1,p[0]+2,p[1]+2)&&y.length===0?(f.groupUId=h.target,b=$canvas.add(o,f,l),(!$canvas.hasVPC()||o!=="AWS.EC2.AvailabilityZone")&&e.canvas.select(b)):$canvas.trigger("CANVAS_PLACE_OVERLAP"):$canvas.trigger("CANVAS_PLACE_NOT_MATCH",{type:o}))),o==="AWS.VPC.InternetGateway"||o==="AWS.VPC.VPNGateway"?t.data.shadow.show().animate({left:l.x*e.canvas.GRID_WIDTH+u.left,top:l.y*e.canvas.GRID_HEIGHT+u.top,opacity:0},function(){t.data.shadow.remove()}):t.data.shadow.remove()}else $canvas.trigger("CANVAS_ZOOMED_DROP_ERROR"),t.data.shadow.remove()}Canvon(".dropable-group").removeClass("dropable-group"),Canvon(".match-dropable-group").removeClass("match-dropable-group"),$("#canvas_body").removeClass("node-dragging"),$(document).off({mousemove:e.canvas.event.mousemove,mouseup:e.canvas.event.mouseup})}},e.canvas.event.groupResize={mousedown:function(t){if(t.which===1){var n=t.target,r=$(n.parentNode.parentNode),i=$canvas(r.attr("id")),s=r.find(".group"),o=s[0].getBoundingClientRect(),u=$canvas.offset(),a=$canvas.scale(),f=e.canvas.GRID_WIDTH,l=e.canvas.GRID_HEIGHT,c=(o.left-u.left)*a,h=(o.top-u.top)*a,p=i.type,d=document.getElementById("line_layer");p==="AWS.VPC.Subnet"&&$.each(i.connection(),function(e,t){d.removeChild(document.getElementById(t.line))}),r.find(".group-label, .port").hide(),$(document.body).append('<div id="overlayer" style="cursor: '+$(t.target).css("cursor")+'"></div>'),$(document).on({mousemove:e.canvas.event.groupResize.mousemove,mouseup:e.canvas.event.groupResize.mouseup},{parent:r,resizer:n,target:s,originalTarget:s[0],group_child:e.canvas.groupChild(n.parentNode.parentNode),originalX:t.pageX,originalY:t.pageY,originalWidth:o.width,originalHeight:o.height,originalTop:o.top,originalLeft:o.left,originalTranslate:r.attr("transform"),canvas_offset:u,offsetX:t.pageX-u.left,offsetY:t.pageY-u.top,direction:$(n).data("direction"),group_type:p,scale_ratio:a,group_min_padding:e.canvas.GROUP_MIN_PADDING,parentGroup:e.canvas.parentGroup(r.attr("id"),p,Math.ceil(c/f),Math.ceil(h/l),Math.ceil((o.left+o.width)/f),Math.ceil((o.top+o.height)/l)),group_port:p==="AWS.VPC.Subnet"?[r.find(".port-subnet-assoc-in").first(),r.find(".port-subnet-assoc-out").first()]:null})}return!1},mousemove:function(e){var t=e.data,n=t.originalTarget,r=t.direction,i=t.scale_ratio,s=t.group_min_padding,o=Math.ceil((e.pageX-t.originalLeft)/10)*10*i,u=t.originalWidth*i-s,a=Math.ceil((e.pageY-t.originalTop)/10)*10*i,f=t.originalHeight*i-s,l,c;switch(r){case"topleft":l={y:a>f?f:a,x:o>u?u:o,width:t.originalWidth*i-o,height:t.originalHeight*i-a};break;case"topright":l={y:a>f?f:a,width:Math.round((t.originalWidth+e.pageX-t.originalX)/10)*10*i,height:t.originalHeight*i-a};break;case"bottomleft":l={x:o>u?u:o,width:t.originalWidth*i-o,height:Math.round((t.originalHeight+e.pageY-t.originalY)/10)*10*i};break;case"bottomright":l={width:Math.round((t.originalWidth+e.pageX-t.originalX)/10)*10*i,height:Math.round((t.originalHeight+e.pageY-t.originalY)/10)*10*i};break;case"top":l={y:a>f?f:a,height:t.originalHeight*i-a};break;case"right":l={width:Math.round((t.originalWidth+e.pageX-t.originalX)/10)*10*i};break;case"bottom":l={height:Math.round((t.originalHeight+e.pageY-t.originalY)/10)*10*i};break;case"left":l={x:o>u?u:o,width:t.originalWidth*i-o}}l.width!==undefined&&l.width<s&&(l.width=s),l.height!==undefined&&l.height<s&&(l.height=s);for(c in l)n[c].baseVal.value=l[c];return!1},mouseup:function(t){var n=t.data,r=n.parent,i=n.target,s=i[0],o=n.group_type,u=n.direction,a=r[0].getBoundingClientRect(),f=n.canvas_offset,l=$canvas.scale(),c=e.canvas.GRID_WIDTH,h=e.canvas.GRID_HEIGHT,p=s.x.baseVal.value,d=s.y.baseVal.value,v=r.attr("id"),m=Math.round(s.width.baseVal.value/c),g=Math.round(s.height.baseVal.value/h),y=Math.round(((a.left-f.left)*l+p)/c),b=Math.round(((a.top-f.top)*l+d)/h),w=$canvas.size(),E=[],S=[],x=[],T=[],N=e.canvas.GROUP_PADDING,C=n.parentGroup,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,J,K,Q;p<0&&(y=Math.round((a.left-f.left)*l/c));if(u==="top"||u==="topleft"||u==="topright")d<0?b=Math.round((a.top-f.top)*l/h):d>0&&(b=Math.round(((a.top-f.top)*l+d)/c));$.each(n.group_child,function(e,t){t=$canvas(t.id),H=t.size(),P=t.position(),E.push(P[0]),S.push(P[1]),x.push(P[0]+H[0]),T.push(P[1]+H[1])}),B=Math.max.apply(Math,x)+N,j=Math.max.apply(Math,T)+N,F=Math.min.apply(Math,E)-N,I=Math.min.apply(Math,S)-N;switch(u){case"topleft":y>=F&&(m+=y-F,y=F),b>=I&&(g+=b-I,b=I);break;case"topright":m=m+y>=B?m:B-y,b>=I&&(g+=b-I,b=I);break;case"bottomleft":y>=F&&(m+=y-F,y=F),g=g+b>=j?g:j-b;break;case"bottomright":m=m+y>=B?m:B-y,g=g+b>=j?g:j-b;break;case"top":b>=I&&(g+=b-I,b=I);break;case"right":m=m+y>=B?m:B-y;break;case"bottom":g=g+b>=j?g:j-b;break;case"left":y>=F&&(m+=y-F,y=F)}C&&(O=$canvas(C.id),M=O.size(),_=O.position(),y<_[0]+N&&(m=y+m-_[0]-N,y=_[0]+N),b<_[1]+N&&(g=b+g-_[1]-N,b=_[1]+N),m+y>_[0]+M[0]-N&&(m=_[0]+M[0]-N-y),g+b>_[1]+M[1]-N&&(g=_[1]+M[1]-N-b)),o==="AWS.VPC.VPC"?(b<=3&&(g=g+b-3,b=3),y<=5&&(m=m+y-5,y=5)):(b<=2&&(g=g+b-2,b=2),y<=2&&(m=m+y-2,y=2)),m>N&&g>N&&n.group_child.length===e.canvas.areaChild(v,o,y,b,y+m,b+g).length&&y+m<w[0]-3&&b+g<w[1]-3?(o==="AWS.VPC.VPC"&&(q=$(".AWS-VPC-InternetGateway"),W=$(".AWS-VPC-VPNGateway"),q[0]&&(igw_item=$canvas(q[0].id),z=igw_item.position()[1],z>b+g-8&&(z=b+g-8),z<b&&(z=b),igw_item.position(y-4,z),igw_item.reConnect()),W[0]&&(vgw_item=$canvas(W[0].id),J=vgw_item.position()[1],J>b+g-8&&(J=b+g-8),J<b&&(J=b),vgw_item.position(y+m-4,J),vgw_item.reConnect())),k=$canvas(v),k.position(y,b),k.size(m,g),e.canvas.updateResizer(r,m,g)):(m=Math.round(n.originalWidth*l/10),g=Math.round(n.originalHeight*l/10),k=$canvas(v),L=k.position(),k.position(L[0],L[1]),k.size(m,g),e.canvas.updateResizer(r,m,g)),r.find(".group-label, .port").show(),o==="AWS.VPC.Subnet"&&(K=g*e.canvas.GRID_HEIGHT/2-5,n.group_port[0].attr("transform","translate(-12, "+K+")"),n.group_port[1].attr("transform","translate("+(m*e.canvas.GRID_WIDTH+10)+", "+K+")")),k.reConnect(),$("#overlayer").remove(),$(document).off({mousemove:e.canvas.event.groupResize.mousemove,mouseup:e.canvas.event.groupResize.mouseup})}},e.canvas.event.ctrlMove={mousedown:function(t){if(t.which===1&&(t.ctrlKey||t.metaKey)){e.canvas.event.clearSelected(),t.stopImmediatePropagation();var n=$canvas.offset(),r=$(".OEPanelCenter"),i=r.find(".scroll-content").first()[0];return $(document).on({mousemove:e.canvas.event.ctrlMove.mousemove,mouseup:e.canvas.event.ctrlMove.mouseup},{canvas:r,offsetX:t.pageX,offsetY:t.pageY,originalCoordinate:{left:i.realScrollLeft?i.realScrollLeft:0,top:i.realScrollTop?i.realScrollTop:0}}),$(document.body).append('<div id="overlayer" class="grabbing"></div>'),!1}},mousemove:function(e){var t=e.data;return scrollbar.scrollTo(t.canvas,{left:t.offsetX-e.pageX-t.originalCoordinate.left,top:t.offsetY-e.pageY-t.originalCoordinate.top}),!1},mouseup:function(){return $("#overlayer").remove(),$(document).off({mousemove:e.canvas.event.ctrlMove.mousemove,mouseup:e.canvas.event.ctrlMove.mouseup}),!1}},e.canvas.event.selectLine=function(t){return t.which===1&&(e.canvas.event.clearSelected(),$canvas(this.id).select()),!1},e.canvas.event.selectNode=function(t){if(t.which===1){if(e.canvas.event.dblclick(function(){$canvas.trigger("SHOW_PROPERTY_PANEL")}))return!1;e.canvas.event.clearSelected(),$canvas(this.id).select()}return!1},e.canvas.event.appDrawConnection=function(){return e.canvas.event.drawConnection.mousedown.call(this,event),!1},e.canvas.event.clearList=function(t){return e.canvas.instanceList.close(),e.canvas.eniList.close(),e.canvas.asgList.close(),e.canvas.event.clearSelected(t),!0},e.canvas.event.nodeHover=function(e){var t=$canvas(this.id).connection(),n=[],r=t.length;while(r--)n[r]="#"+t[r].line;Canvon(n.join(","))[e.type==="mouseenter"?"addClass":"removeClass"]("view-hover");if($("#"+this.id).data().class==="AWS.RDS.DBInstance"){var i=e.handleObj.origType==="mouseenter"?!0:!1;$canvas(this.id).hover(i)}return!0},e.canvas.event.groupHover=function(e){if(this.parentElement&&this.parentElement.id&&$("#"+this.parentElement.id).length!=0&&$("#"+this.parentElement.id).data().class==="AWS.RDS.DBSubnetGroup"){var t=e.handleObj.origType==="mouseenter"?!0:!1;$canvas(this.parentElement.id).hover(t)}return!0},e.canvas.event.clearSelected=function(e){return e&&$(e.currentTarget).is("#tab-bar li")?!1:(Canvon("#svg_canvas .selected").removeClass("selected"),Canvon("#svg_canvas .view-show").removeClass("view-show"),$("#node-action-wrap").remove(),$canvas.selected_node().length=0,!0)},e.canvas.event.clickBlank=function(t){return t.target.id==="svg_canvas"&&$canvas.trigger("CANVAS_NODE_SELECTED",""),e.canvas.volume.close(),e.canvas.event.clearSelected(),!0},e.canvas.event.keyEvent=function(t){var n=e.canvas.getState(),r=$canvas.selected_node(),i=App.workspaces.getAwakeSpace();if($("#modal-wrap")[0]!==undefined||$(".sub-stateeditor").css("display")==="block"&&t.which!==46&&t.which!==8||i&&i.isDashboard)return!0;if($.inArray(n,["new","app","stack","appedit","appview"])>-1){var s=t.which,o=t.target.nodeName.toLowerCase();if(o==="input"||o==="textarea"||t.target.contentEditable==="true")return!0;if(!(s!==46&&s!==8||n!=="stack"&&n!=="appedit")&&r.length>0)return t.ctrlKey||t.metaKey?!0:(e.canvas.volume.close(),$.each(r,function(e,t){$canvas(t).remove()}),!1);if(s===8&&o!=="input"&&o!=="textarea")return!1;if(s===9&&r.length===1){var u=r[0],a=[],f=0,l,c,h,p;return $canvas(u).nodeType!=="node"?!1:($.each($canvas.node(),function(e,t){t.id===u&&(l=e),a.push(t.id),e++}),l===a.length-1?l=0:l++,e.canvas.event.clearSelected(),h=$("#"+a[l]).attr("id"),p=$canvas(h),p.select(),!1)}if($.inArray(s,[37,38,39,40])>-1&&(n==="stack"||n==="appedit"||n==="appview")&&r.length===1&&$("#"+r[0]).data("type")!=="line"){var d=$("#"+r[0]),v=r[0],m=$canvas(v),g=m.nodeType,y=m.type,b=m.position(),w=$canvas.size(),E=$canvas.scale(),b={x:b[0],y:b[1]},S=m.size(),x,T,N,C,k;return g!=="node"?!1:(s===38&&b.y--,s===40&&b.y++,y==="AWS.VPC.InternetGateway"||y==="AWS.VPC.VPNGateway"?(x={},T=$(".AWS-VPC-VPC").attr("id"),N=$canvas(T),k=N.position(),C=N.size(),x.is_matched=b.y<=k[1]+C[1]-S[1]&&b.y>=k[1]):(s===37&&b.x--,s===39&&b.x++,x=e.canvas.isMatchPlace(v,y,g,b.x,b.y,S[0],S[1])),b.x>0&&b.y>0&&x.is_matched&&b.x+S[0]<w[0]-3&&b.y+S[1]<w[1]-3&&(m.position(b.x,b.y),m.reConnect()),!1)}if((t.ctrlKey||t.metaKey)&&s===83&&n==="stack")return $canvas.trigger("CANVAS_SAVE"),!1;if((t.ctrlKey||t.metaKey)&&s===187)return e.canvas.zoomIn(),!1;if((t.ctrlKey||t.metaKey)&&s===189)return e.canvas.zoomOut(),!1;if(s===13&&e.canvas.getState()!=="appview"){var L=$canvas($canvas.selected_node()[0]).type;return(L==="AWS.EC2.Instance"||L==="AWS.AutoScaling.LaunchConfiguration")&&$canvas.trigger("SHOW_STATE_EDITOR",$canvas.selected_node()[0]),!1}if(s===83&&r.length===1&&e.canvas.getState()!=="appview"){var L=$canvas($canvas.selected_node()[0]).type;return(L==="AWS.EC2.Instance"||L==="AWS.AutoScaling.LaunchConfiguration")&&$canvas.trigger("SHOW_STATE_EDITOR",$canvas.selected_node()[0]),!1}if(s===80)return $canvas.trigger("SHOW_PROPERTY_PANEL"),!1}},e.canvas.analysis=function(){function w(t){var r=[],i=d[n[t].type],s,o;return $.each(n,function(u,a){$.inArray(n[u].type,i)>-1&&a.parentId===t&&(o=w(u),s={id:u,coordinate:[0,0],size:[0,0],type:a.type},e.canvas.COMPONENT_SIZE[a.type]!==undefined&&(s.size=e.canvas.COMPONENT_SIZE[a.type]),m[a.type]!==undefined&&(s.size=m[a.type]),o&&(s.children=o),r.push(s))}),r.length<1?!1:r}function E(e){if(e.children!==undefined){var t=0;return $.each(e.children,function(e,n){t+=E(n)}),e.totalChild=t+e.children.length,e.type==="AWS.VPC.Subnet"&&(e.hasELBConnected=!1,$.each(e.children,function(t,n){$.inArray(n.id,i)>-1&&(e.hasELBConnected=!0),n.type==="AWS.AutoScaling.Group"&&n.children!==undefined&&$.inArray(n.children[0].id,i)>-1&&(e.hasELBConnected=!0)})),e.children.length}return e.totalChild=0,e.type==="AWS.VPC.Subnet"&&(e.hasELBConnected=!1),0}function S(e){e.children!==undefined&&(e.type==="AWS.EC2.AvailabilityZone"?e.children.sort(function(e,t){if(e.hasELBConnected===!0&&t.hasELBConnected===!0||e.hasELBConnected===!1&&t.hasELBConnected===!1)return t.totalChild-e.totalChild;if(e.hasELBConnected===!0&&t.hasELBConnected===!1)return-1;if(e.hasELBConnected===!1&&t.hasELBConnected===!0)return 1}):e.children.sort(function(e,t){return t.totalChild-e.totalChild}),$.each(e.children,function(e,t){S(t)}))}function x(r){var s={},u=r.children,a=u.length,f=g[r.type],l=0,c=0,h=2,p=2,d={},m=[],y=[],b=[],w=!1,E=Math.ceil(Math.sqrt(a)),S=a===0?0:Math.ceil(a/E),x=0,T=0,C,k,L;u.sort(function(e,t){return v[e.type]-v[t.type]}),$.each(u,function(e,r){k=!1,L=null,s[r.type]===undefined&&(s[r.type]=[]),s[r.type].push(r),r.type!=="AWS.AutoScaling.Group"&&r.type!=="AWS.EC2.Instance"||r.children===undefined?C=n[r.id].connection():C=n[r.children[0].id].connection(),C?($.each(C,function(e,r){n[r.target].type==="AWS.ELB"&&t[r.line].target[r.target]==="elb-sg-out"&&(k=!0,L=r.target)}),k?(d[L]===undefined&&(d[L]=[]),d[L].push(r)):r.type==="AWS.AutoScaling.Group"&&m.push(r)):r.type==="AWS.AutoScaling.Group"&&m.push(r)});var A=0,O=0,M=0,_=0,T,D=15,P=15,H=11,B=11;m.length>0&&(d.zz=m),$.each(d,function(e,t){M=0,t.sort(function(e,t){return v[e.type]-v[t.type]}),$.each(t,function(e,t){t.type==="AWS.AutoScaling.Group"&&(O=D,t.coordinate=[_+2,M+o],M+=P,t.children!==undefined&&N(t)),t.type==="AWS.EC2.Instance"&&(O=O===D?D:H,t.coordinate=[_+(O===D?4:2),M+o],M+=B)}),A++,_+=O}),s["AWS.EC2.Instance"]!==undefined&&($.each(s["AWS.EC2.Instance"],function(e,t){$.inArray(t.id,i)===-1&&b.push(t)}),b.sort(function(e,t){return $canvas(e.id).getModel().attributes.name.localeCompare($canvas(t.id).getModel().attributes.name)}));if(b.length>0){var j=b.length,F=Math.ceil(Math.sqrt(j)),I=j===0?0:Math.ceil(j/F),x=0,T=0;$.each(b,function(e,t){x>=F&&(x=0,T++),t.coordinate=[x*9+x*h+o,T*9+T*h+o],x++}),$.each(b,function(e,t){t.coordinate[0]+=_}),_+=F*H}if(s["AWS.VPC.NetworkInterface"]!==undefined){var j=s["AWS.VPC.NetworkInterface"].length,F=Math.ceil(Math.sqrt(j)),I=j===0?0:Math.ceil(j/F),q=0,x=0,T=0;$.each(s["AWS.VPC.NetworkInterface"],function(e,t){x>=F&&(x=0,T++),t.coordinate=[x*9+x*h+q+o,T*9+T*h+o],x++})}s["AWS.VPC.NetworkInterface"]!==undefined&&$.each(s["AWS.VPC.NetworkInterface"],function(e,t){t.coordinate[0]+=_});var l=0,c=0,R,U;$.each(u,function(t,n){R=n.coordinate,U=e.canvas.COMPONENT_SIZE[n.type],R[0]+U[0]>l&&(l=R[0]+U[0]),R[1]+U[1]>c&&(c=R[1]+U[1])}),r.size=[l+o,c+o]}function T(e){var t=[],r=[],i=[],s,o,u,a;return $.each(e,function(e,a){s=!1,o=!1,a.children!==undefined&&($.each(a.children,function(e,t){t.type==="AWS.AutoScaling.Group"&&t.children!==undefined&&(t=t.children[0]),node_connection=n[t.id].connection(),node_connection&&$.each(node_connection,function(e,t){n[t.target].type==="AWS.ELB"&&(u=$canvas(t.target).getModel().attributes.internal?"internal":"internet-facing",u==="internet-facing"&&(s=!0),u==="internal"&&(o=!0))})}),s?t.push(a):o&&r.push(a)),!s&&!o&&i.push(a)}),t.sort(function(e,t){return t.totalChild-e.totalChild}),t.sort(function(e,t){return t.totalChild-e.totalChild}),i.sort(function(e,t){if(t.totalChild===e.totalChild&&t.totalChild>0&&e.totalChild>0){var n={a:0,b:0};return $.each({a:e,b:t},function(e,t){$.each(t.children,function(t,r){r.type==="AWS.AutoScaling.Group"&&(n[e]+=3),r.type==="AWS.EC2.Instance"&&(n[e]+=2),r.type==="AWS.VPC.NetworkInterface"&&(n[e]+=1)})}),n.b-n.a}return t.totalChild-e.totalChild}),e=t.concat(r,i),e}function N(e){var t=e.children,n=2,r=t.length,i=g[e.type],s=0,u=0,a=2,f=2;e.type==="AWS.EC2.AvailabilityZone"&&(n=4),i==="matrix"&&x(e),i==="vertical"&&($.each(t,function(e,r){r.coordinate=[0+o,e+o],r.children!==undefined&&N(r),r.size[0]>s&&(s=r.size[0]),u+=r.size[1],e>0&&(b=t[e-1],r.coordinate=[0+o,b.size[1]+b.coordinate[1]+n],u+=n*2)}),e.size=[s+o*2,u+n*(r-1)+o]),i==="horizontal"&&(e.type==="AWS.EC2.AvailabilityZone"&&(t=T(t)),$.each(t,function(e,r){r.coordinate=[e+o,0+o],r.children!==undefined&&N(r),r.size[1]>u&&(u=r.size[1]),s+=r.size[0],e>0&&(b=t[e-1],r.coordinate=[b.size[0]+b.coordinate[0]+n,0+o],s+=n*2)}),e.size=[s-n*(r-1)+o*2,u+o*2]),i==="center"&&($.each(t,function(e,t){t.coordinate=[2,2]}),e.size=[13,13])}function I(e,t,n){var r=e.coordinate;r[0]+=t,r[1]+=n,e.children!==undefined&&$.each(e.children,function(e,t){I(t,r[0],r[1])})}function q(e){var t=n[e.id];$canvas(e.id).position(e.coordinate[0],e.coordinate[1]),e.size!==undefined&&$canvas(e.id).size(e.size[0],e.size[1]),e.children!==undefined&&$.each(e.children,function(e,t){q(t)})}function R(){var e=0,t=0,n=["AWS.VPC.CustomerGateway","AWS.VPC.InternetGateway","AWS.VPC.VPNGateway"],r,i,s,o;$.each($canvas.node(),function(s,o){r=o.position(),i=o.size(),$.inArray(o.type,n)===-1&&(r[0]+i[0]>e&&(e=r[0]+i[0]),r[1]+i[1]>t&&(t=r[1]+i[1]))}),$.each($canvas.group(),function(n,s){r=s.position(),i=s.size(),s.type!=="AWS.AutoScaling.Group"&&(r[0]+i[0]>e&&(e=r[0]+i[0]),r[1]+i[1]>t&&(t=r[1]+i[1]))}),y.size[0]=e-y.coordinate[0]+l,y.size[1]=t-y.coordinate[1]+c,$canvas(y.id).size(e-y.coordinate[0]+l,t-y.coordinate[1]+c)}var t=$canvas.connection(),n={},r={},i=[],s,o=2,u=2,a=20,f=10,l=8,c=5,h=14,p=e.canvas.COMPONENT_SIZE["AWS.ELB"],d={"AWS.VPC.VPC":["AWS.EC2.AvailabilityZone","AWS.RDS.DBSubnetGroup"],"AWS.EC2.AvailabilityZone":["AWS.VPC.Subnet"],"AWS.VPC.Subnet":["AWS.EC2.Instance","AWS.AutoScaling.Group","AWS.VPC.NetworkInterface"],"AWS.RDS.DBSubnetGroup":["AWS.RDS.DBInstance"],"AWS.AutoScaling.Group":["AWS.AutoScaling.LaunchConfiguration"]},v={"AWS.AutoScaling.Group":1,"AWS.EC2.Instance":2,"AWS.VPC.NetworkInterface":3},m={"AWS.VPC.VPC":[60,60],"AWS.EC2.AvailabilityZone":[17,17],"AWS.VPC.Subnet":[15,15],"AWS.RDS.DBSubnetGroup":[15,15],"AWS.AutoScaling.Group":[13,13]},g={"AWS.VPC.VPC":"vertical","AWS.EC2.AvailabilityZone":"horizontal","AWS.RDS.DBSubnetGroup":"horizontal","AWS.VPC.Subnet":"matrix","AWS.AutoScaling.Group":"center"},y,b;$.each($canvas.node(),function(e,t){n[t.id]=t}),$.each($canvas.group(),function(e,t){n[t.id]=t}),$.each(n,function(e,t){var n=t.type,i=r[n];i===undefined&&(r[n]=[]),r[n].push(e)}),y={id:r["AWS.VPC.VPC"][0],coordinate:[5,3],size:[0,0],type:"AWS.VPC.VPC"},r["AWS.ELB"]!==undefined&&$.each(r["AWS.ELB"],function(e,t){$.each($canvas(t).connection(),function(e,t){t.port==="elb-sg-out"&&i.push(t.target)})}),node_child=w(r["AWS.VPC.VPC"][0]),node_child&&(y.children=node_child),E(y),S(y),y.children&&N(y),y.children&&$.each(y.children,function(e,t){t.coordinate[0]+=a,t.coordinate[1]+=f});if(r["AWS.VPC.RouteTable"]!==undefined){var C=15,k=5,L=4,A=e.canvas.COMPONENT_SIZE["AWS.VPC.RouteTable"],O=[],M=[],D=[],P,H,B;r["AWS.VPC.RouteTable"].length>0&&(r["AWS.VPC.RouteTable"].sort(function(e,t){return $canvas(e).getModel().attributes.name.localeCompare($canvas(t).getModel().attributes.name)}),$.each(r["AWS.VPC.RouteTable"],function(e,t){P=!1,H=$canvas(t).connection(),$.each(H,function(e,n){n.port==="rtb-tgt"&&(B=$canvas(n.target).type,B==="AWS.VPC.InternetGateway"&&(P=!0,O.push(t)),B==="AWS.VPC.VPNGateway"&&(P=!0,M.push(t)))}),P===!1&&D.push(t)}),r["AWS.VPC.RouteTable"]=_.unique(O.concat(M,D)),$.each(r["AWS.VPC.RouteTable"],function(e,t){$canvas(t).position((e+1)*A[0]+(e+1)*L+C,k)}))}var j=y.children,F=0;j!==undefined&&j.length>1&&r["AWS.ELB"]!==undefined&&(F=j[0].coordinate[1]+j[0].size[1],j[2]&&(j[2].size[1]>j[0].size[1]?(j[2].coordinate=[j[0].coordinate[0]+j[0].size[0]+5,j[0].coordinate[1]],j[0].coordinate=[j[0].coordinate[0],j[0].coordinate[1]+(j[2].size[1]-j[0].size[1])/2],F=j[2].coordinate[1]+j[2].size[1]):j[2].coordinate=[j[0].coordinate[0]+j[0].size[0]+5,j[0].coordinate[1]+j[0].size[1]-j[2].size[1]]),j[1]&&(j[1].coordinate[1]=F+15),j[3]&&(j[3].coordinate=[j[1].coordinate[0]+j[1].size[0]+5,j[1].coordinate[1]])),r["AWS.ELB"]!==undefined&&(r["AWS.ELB"].sort(function(e,t){return e=$canvas(e).getModel().attributes.internal?"internal":"internet-facing",t=$canvas(t).getModel().attributes.internal?"internal":"internet-facing",t.localeCompare(e)}),j.length>1?$.each(r["AWS.ELB"],function(e,t){$canvas(t).position(h+e*10+e*10,F+5)}):$.each(r["AWS.ELB"],function(e,t){$canvas(t).position(h,j[0].coordinate[0]+(j[0].size[1]/2-5)+e*10)})),I(y,0,0),q(y),R(),r["AWS.VPC.InternetGateway"]!==undefined&&$canvas(r["AWS.VPC.InternetGateway"][0]).position(y.coordinate[0]-4,y.coordinate[1]+y.size[1]/2-4),r["AWS.VPC.VPNGateway"]!==undefined&&$canvas(r["AWS.VPC.VPNGateway"][0]).position(y.coordinate[0]+y.size[0]-4,y.coordinate[1]+y.size[1]/2-4),r["AWS.VPC.CustomerGateway"]!==undefined&&$.each(r["AWS.VPC.CustomerGateway"],function(e,t){$canvas(t).position(y.coordinate[0]+y.size[0]+8,y.coordinate[1]+e*11+y.size[1]/2-5)});var U=y.size[0]+80,z=y.size[1]+50;return $canvas.size(U<180?180:U,z<150?150:z),!0},e.canvas.benchmark=function(t){var n=2,r=2,i=8,s=8,o=2,u=Math.ceil(Math.sqrt(t)),a=t===0?0:Math.ceil(t/u),f=$canvas.scale(),l=0,c=0,h=0,p=$canvas.add("AWS.EC2.AvailabilityZone",{name:"us-east-1a"},{x:5,y:5});for(;h<t;h++)l>=u&&(l=0,c++),$canvas.add("AWS.EC2.Instance",{imageId:"ami-cde4bca4",cachedAmi:{osType:"amazon",architecture:"i386",rootDeviceType:"ebs"},groupUId:p},{x:i+l*9+l*n+o,y:s+c*9+c*r+o}),l++;$canvas(p).size(u*(9+n)+8,a*(9+r)+8),e.canvas.updateResizer($("#"+p)[0],u*(9+n)+8,a*(9+r)+8),canvas_size=[u*(9+n)+50,a*(9+r)+50],$("#svg_canvas").attr({width:canvas_size[0]*e.canvas.GRID_WIDTH/f,height:canvas_size[1]*e.canvas.GRID_HEIGHT/f}),$("#canvas_body").css({width:canvas_size[0]*e.canvas.GRID_WIDTH/f,height:canvas_size[1]*e.canvas.GRID_HEIGHT/f}),$canvas.size(canvas_size[0],canvas_size[1])}}),define("MC.validate",["MC"],function(e){var t=function(e,t,n){return Function.call.apply(Array.prototype.slice,arguments)},n={email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,letters:/[a-zA-Z]/,alphanum:/^\w+$/,digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/,awsName:/^[a-zA-Z0-9][a-zA-Z0-9-]*$/,phone:/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,5})|(\(?\d{2,6}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/,usPhone:/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/,ipv4:/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/,cidr:/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\/(\d|[1-2]\d|3[0-2]))$/,awsCidr:/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\/([1][6-9]|[2][0-8]))$/,ipaddress:/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\/(\d|[1-2]\d|3[0-2]))?$/,url:/^(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,urlstrict:/^(https?|s?ftp|git):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,arn:/^arn:aws:sns:[\w-]+:.+$/,sqs:/^arn:aws:sqs:[\w-]+:\d{12}:.+$/,deviceLinux:/^\/dev\/(hd[a-z]([1-9]|1[0-5])|(sd[a-z]|sd[b-z]([1-9]|1[0-5])))$/,deviceWindows:/^xvd[f-p]$/};e.validate=function(){var r=arguments[0];if(r in e.validate)return e.validate[r].apply(e.validate,t(arguments,1));if(r in n)return n[r].test(t(arguments,1,2));throw"the validate method: ["+r+"] doesn't exist"},e.validate.required=function(e){return!!e},e.validate.equal=function(e,t){return e===t},e.validate.exist=function(e,t){if(Array.prototype.indexOf&&Array.prototype.indexOf===t.indexOf)return t.indexOf(e)!==-1;var n=0;for(;n<t.length;n++)if(t[n]===e)break;return n!==t.length},e.validate.range=function(e,t){return e>=t[0]&&e<=t[1]},e.validate.http=function(e){return n.urlstrict.test(e)&&e.slice(0,4)==="http"},e.validate.https=function(e){return n.urlstrict.test(e)&&e.slice(0,5)==="https"},e.validate.deviceName=function(e,t,r){return t==="linux"?(r&&(e="/dev/"+e),n.deviceLinux.test(e)):t==="windows"?(r&&(e="xvd"+e),n.deviceWindows.test(e)):!1},e.validate.portRange=function(e){var t=[];if(e.indexOf("-")===-1){if(!e||isNaN(Number(e)))return!1;t[0]=Number(e)}else{valueAry=e.split("-");if(valueAry.length!==2||!valueAry[0]||!valueAry[1])return!1;if(isNaN(Number(valueAry[0]))||isNaN(Number(valueAry[1])))return!1;t[0]=Number(valueAry[0]),t[1]=Number(valueAry[1])}return t},e.validate.portValidRange=function(e){if(e.length===1){port1=e[0];if(port1<0||port1>65535)return!1}else{port1=e[0],port2=e[1];if(port1<0||port1>65535||port2<0||port2>65535)return!1;if(port2<=port1)return!1}return!0},e.validate.port=function(e){var t=null;return!e||isNaN(Number(e))?!1:(t=Number(e),t)}}),function(){define("event",["underscore","backbone"],function(){var e,t;return e=function(){function e(){_.extend(this,Backbone.Events)}return e.prototype.OPEN_PROPERTY="OPEN_PROPERTY",e.prototype.FORCE_OPEN_PROPERTY="FORCE_OPEN_PROPERTY",e.prototype.REFRESH_PROPERTY="REFRESH_PROPERTY",e.prototype.UPDATE_STATUS_BAR="UPDATE_STATUS_BAR",e.prototype.UPDATE_TA_MODAL="UPDATE_TA_MODAL",e.prototype.UNLOAD_TA_MODAL="UNLOAD_TA_MODAL",e.prototype.TA_SYNC_START="TA_SYNC_START",e.prototype.TA_SYNC_FINISH="TA_SYNC_FINISH",e.prototype.PROPERTY_REFRESH_ENI_IP_LIST="PROPERTY_REFRESH_ENI_IP_LIST",e.prototype.UPDATE_STATE_STATUS_DATA="STATE_STATUS_DATA_UPDATE",e.prototype.UPDATE_STATE_STATUS_DATA_TO_EDITOR="UPDATE_STATE_STATUS_DATA_TO_EDITOR",e.prototype.STATE_EDITOR_SAVE_DATA="STATE_EDITOR_SAVE_DATA",e.prototype.SHOW_STATE_EDITOR="SHOW_STATE_EDITOR",e.prototype.STATE_EDITOR_DATA_UPDATE="STATE_EDITOR_DATA_UPDATE",e.prototype.onListen=function(e,t,n){return this.once(e,t,n)},e.prototype.onLongListen=function(e,t,n){return this.on(e,t,n)},e.prototype.offListen=function(e,t){return t?this.off(e,t):this.off(e)},e}(),t=new e,t})}.call(this),define("lib/lib",function(){});