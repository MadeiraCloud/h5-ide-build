/*
#**********************************************************
#* Filename: MC.core.js
#* Creator: Angel
#* Description: The core of the whole system
#* Date: 20131115
# **********************************************************
# (c) Copyright 2013 Madeiracloud  All Rights Reserved
# **********************************************************
*/

/*!
 * jQuery Cookie Plugin v1.3.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */

/*
#**********************************************************
#* MC.canvas
#* Description: Canvas logic core
# **********************************************************
# (c) Copyright 2014 Madeiracloud  All Rights Reserved
# **********************************************************
*/

/*
#**********************************************************
#* Filename: MC.validate.js
#* Creator: Tim
#* Description: Validate helper of logic
#* Date: 20130813
# **********************************************************
# (c) Copyright 2013 Madeiracloud  All Rights Reserved
# **********************************************************
*/

define("ui/MC.template",["handlebars"],function(e){var t,n={tab:{},notification:{}};return t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<li id="tab-bar-'+a((o=t&&t.tab_id,typeof o===u?o.apply(t):o))+'" data-tab-type="'+a((o=t&&t.tab_type,typeof o===u?o.apply(t):o))+'">\n	<a href="#tab-content-'+a((o=t&&t.tab_id,typeof o===u?o.apply(t):o))+'" title="'+a((o=t&&t.tab_name,typeof o===u?o.apply(t):o))+'" data-tab-id="'+a((o=t&&t.tab_id,typeof o===u?o.apply(t):o))+'" class="truncate tab-bar-truncate">\n		<i class="icon-tabbar-label"></i>\n		'+a((o=t&&t.tab_name,typeof o===u?o.apply(t):o))+'\n	</a>\n	<a href="javascript:void(0)" class="close-restriction icon-close" title="'+a(n.i18n.call(t,"TOOL_TIT_CLOSE_TAB",{hash:{},data:i}))+'"></a>\n</li>\n\n',s},n.tab.item=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<li id="tab-bar-'+a((o=t&&t.target_id,typeof o===u?o.apply(t):o))+'">\n	<a href="#tab-content-'+a((o=t&&t.target_id,typeof o===u?o.apply(t):o))+'" data-toggle="tab" class="truncate tab-bar-truncate" title="'+a((o=t&&t.target_id,typeof o===u?o.apply(t):o))+'">\n		<i class="icon-dashboard-tabbar icon-tabbar-label"></i>\n		'+a((o=t&&t.target_id,typeof o===u?o.apply(t):o))+'\n	</a>\n	<a href="javascript:void(0)" class="icon-close close-tab" title="'+a(n.i18n.call(t,"TOOL_TIT_CLOSE_TAB",{hash:{},data:i}))+'"></a>\n</li>\n\n',s},n.tab.dashboard=e.template(t),t=function(e,t,n,r,i){function l(e,t){return'\n		<i class="notification_close">&times;</i>\n	'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div class="notification_item '+a((o=t&&t.type,typeof o===u?o.apply(t):o))+'_item">\n	<span>'+a((o=t&&t.template,typeof o===u?o.apply(t):o))+"</span>\n	",o=n["if"].call(t,t&&t.should_stay,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n</div>\n\n",s},n.notification.item=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="",i;r+='\n			<div class="modal-text-wraper">\n				<div class="modal-center-align-helper">\n					',i=n["if"].call(e,e&&e.input,{hash:{},inverse:f.program(4,h,t),fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;return r+="\n				</div>\n			</div>\n		",r}function c(e,t){var n="",r;return n+='\n						<div class="modal-control-group">\n							<label class="modal-text-major">'+a((r=e&&e.body,typeof r===u?r.apply(e):r))+'</label>\n							<input id="modal-input-value" class="input" type="text" value="'+a((r=e&&e.input,typeof r===u?r.apply(e):r))+'" />\n						</div>\n					',n}function h(e,t){var r="",i;r+='\n						<div class="modal-text-major">\n							',i=(i=e&&e.body,typeof i===u?i.apply(e):i);if(i||i===0)r+=i;r+="\n						</div>\n						",i=n["if"].call(e,e&&e.is_asg,{hash:{},inverse:f.noop,fn:f.program(5,p,t),data:t});if(i||i===0)r+=i;return r+="\n					",r}function p(e,t){var r="";return r+='\n							<div class="modal-text-minor">'+a(n.i18n.call(e,"POP_CONFIRM_STOP_ASG",{hash:{},data:t}))+"</div>\n						",r}function d(e,t){var r="",i;r+='\n			<div class="terminate-pro-app-confirm">\n				',i=n["if"].call(e,e&&e.is_stop,{hash:{},inverse:f.program(11,g,t),fn:f.program(8,v,t),data:t});if(i||i===0)r+=i;return r+='\n				<p class="confirm-area"><input class="input" id="confirm-app-name" data-confirm="'+a((i=e&&e.app_name,typeof i===u?i.apply(e):i))+'"/></p>\n			</div>\n		',r}function v(e,t){var r="",i;r+="\n					<p><b>"+a((i=e&&e.app_name,typeof i===u?i.apply(e):i))+a(n.i18n.call(e,"POP_CONFIRM_PROD_APP_WARNING_MSG",{hash:{},data:t}))+"</b>"+a(n.i18n.call(e,"POP_CONFIRM_STOP_PROD_APP_MSG",{hash:{},data:t}))+"\n						",i=n["if"].call(e,e&&e.is_asg,{hash:{},inverse:f.noop,fn:f.program(9,m,t),data:t});if(i||i===0)r+=i;return r+="\n					</p>\n					<p>"+a(n.i18n.call(e,"POP_CONFIRM_STOP_PROD_APP_INPUT_LBL",{hash:{},data:t}))+"</p>\n				",r}function m(e,t){var r="";return r+="\n							"+a(n.i18n.call(e,"POP_CONFIRM_STOP_ASG",{hash:{},data:t}))+"\n						",r}function g(e,t){var r="",i;return r+="\n					<p><b>"+a((i=e&&e.app_name,typeof i===u?i.apply(e):i))+" "+a(n.i18n.call(e,"POP_CONFIRM_PROD_APP_WARNING_MSG",{hash:{},data:t}))+"</b>"+a(n.i18n.call(e,"POP_CONFIRM_TERMINATE_PROD_APP_MSG",{hash:{},data:t}))+"</p>\n					<p>"+a(n.i18n.call(e,"POP_CONFIRM_TERMINATE_PROD_APP_INPUT_LBL",{hash:{},data:t}))+"</p>\n				",r}function y(e,t){return"disabled"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div style="width:420px">\n	<div class="modal-header">\n		<h3>'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+'</h3>\n		<i class="modal-close">&times;</i>\n	</div>\n	<div class="modal-body">\n		',o=n.unless.call(t,t&&t.is_production,{hash:{},inverse:f.program(7,d,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+='\n	</div>\n	<div class="modal-footer">\n		<button id="btn-confirm" class="btn btn-'+a((o=t&&t.color,typeof o===u?o.apply(t):o))+'" ',o=n["if"].call(t,t&&t.is_production,{hash:{},inverse:f.noop,fn:f.program(13,y,i),data:i});if(o||o===0)s+=o;return s+=">"+a((o=t&&t.confirm,typeof o===u?o.apply(t):o))+'</button>\n		<button class="btn modal-close btn-silver">'+a(n.i18n.call(t,"TOOL_POP_BTN_CANCEL",{hash:{},data:i}))+"</button>\n	</div>\n</div>\n\n",s},n.modalApp=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;s+='<div style="width:700px">\n	<div class="modal-header">\n		<h3>'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+'</h3>\n		<i class="modal-close">&times;</i>\n	</div>\n	<div class="modal-body">\n		<textarea id="json-content"></textarea>\n	</div>\n	<div class="modal-footer">\n		<a id="btn-confirm" class="btn btn-'+a((o=t&&t.color,typeof o===u?o.apply(t):o))+'" href="data://text/plain;, ',o=(o=t&&t.filecontent,typeof o===u?o.apply(t):o);if(o||o===0)s+=o;return s+='" download="'+a((o=t&&t.download,typeof o===u?o.apply(t):o))+'">'+a((o=t&&t.confirm,typeof o===u?o.apply(t):o))+'</a>\n		<button class="btn modal-close btn-silver">'+a(n.i18n.call(t,"TOOL_POP_BTN_CANCEL",{hash:{},data:i}))+"</button>\n	</div>\n</div>\n\n",s},n.modalToolbar=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o=this.escapeExpression;return s+='<div id="modal-export-cf" style="width:468px">\n	<div class="modal-header"> <h3>'+o(n.i18n.call(t,"TOOL_POP_EXPORT_CF",{hash:{},data:i}))+'</h3><i class="modal-close">&times;</i> </div>\n	<div class="modal-body">\n		<div class="modal-text-wraper"> <div class="modal-center-align-helper">\n			<div class="modal-text-major"></div>\n			<div class="modal-text-minor">'+o(n.i18n.call(t,"TOOL_POP_EXPORT_CF_INFO",{hash:{},data:i}))+'</div>\n		</div> </div>\n	</div>\n	<div class="modal-footer">\n		<a id="tpl-download" class="btn btn-blue modal-close disabled" target="_blank">'+o(n.i18n.call(t,"TOOL_POP_BTN_EXPORT_CF",{hash:{},data:i}))+'</a>\n		<button class="btn modal-close btn-silver">'+o(n.i18n.call(t,"TOOL_POP_BTN_CANCEL",{hash:{},data:i}))+"</button>\n	</div>\n</div>\n\n",s},n.exportCloudFormation=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function";return s+='<div style="width:468px">\n	<div class="modal-header"> <h3>'+u(n.i18n.call(t,"TOOL_EXPORT_AS_JSON",{hash:{},data:i}))+'</h3><i class="modal-close">&times;</i> </div>\n	<div class="modal-body">\n		<div class="modal-text-wraper"> <div class="modal-center-align-helper">\n			<div class="modal-text-major"></div>\n			<div class="modal-text-minor">'+u(n.i18n.call(t,"TOOL_POP_BODY_EXPORT_AS_JSON",{hash:{},data:i}))+'</div>\n		</div> </div>\n	</div>\n	<div class="modal-footer">\n		<a class="btn btn-blue modal-close" href="'+u((o=t&&t.data,typeof o===a?o.apply(t):o))+'" target="_blank" download="'+u((o=t&&t.name,typeof o===a?o.apply(t):o))+'">'+u(n.i18n.call(t,"TOOL_POP_BTN_DOWNLOAD",{hash:{},data:i}))+'</a>\n		<button id="tpl-cancel" class="btn modal-close btn-silver">'+u(n.i18n.call(t,"TOOL_POP_BTN_CANCEL",{hash:{},data:i}))+"</button>\n	</div>\n</div>\n\n",s},n.exportJSON=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o=this.escapeExpression;return s+='<div style="width:468px">\n	<div class="modal-header"> <h3>'+o(n.i18n.call(t,"POP_IMPORT_JSON_TIT",{hash:{},data:i}))+'</h3><i class="modal-close">&times;</i> </div>\n	<div class="modal-body" style="min-height:0px;">\n		<div id="modal-import-json-dropzone">'+o(n.i18n.call(t,"POP_IMPORT_DROP_LBL",{hash:{},data:i}))+'<label for="modal-import-json-file" class="select-file-link">'+o(n.i18n.call(t,"POP_IMPORT_SELECT_LBL",{hash:{},data:i}))+'</label><input type="file" id="modal-import-json-file"></div>\n		<div id="import-json-error"></div>\n	</div>\n</div>\n\n',s},n.importJSON=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div style="width:420px">\n	<div class="modal-header">\n		<h3>'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+'</h3>\n		<i class="modal-close">&times;</i>\n	</div>\n\n	<div class="modal-body">\n		<div class="loading-spinner"></div>\n	</div>\n\n	<div class="modal-footer">\n		<a id="btn-confirm" class="btn btn-'+a((o=t&&t.color,typeof o===u?o.apply(t):o))+'" >'+a((o=t&&t.confirm,typeof o===u?o.apply(t):o))+'</a>\n		<button class="btn modal-close btn-silver">'+a(n.i18n.call(t,"TOOL_POP_BTN_CANCEL",{hash:{},data:i}))+"</button>\n	</div>\n</div>\n\n",s},n.exportPNG=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div class="modal-resource-instance-detail" style="width:420px">\n	<div class="modal-header">\n		<h3>'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+'</h3>\n		<i class="modal-close">&times;</i>\n	</div>\n\n	<div class="modal-body">\n		<dl class="dl-horizontal">\n			<dt>DnsName</dt>\n			<dd>'+a((o=t&&t.dnsName,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>Architecture</dt>\n			<dd>"+a((o=t&&t.architecture,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>EbsOptimized</dt>\n			<dd>"+a((o=t&&t.ebsOptimized,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>GroupSet</dt>\n			<dd>"+a((o=t&&t.groupSet,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>Hypervisor</dt>\n			<dd>"+a((o=t&&t.hypervisor,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>ImageId</dt>\n			<dd>"+a((o=t&&t.imageId,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>InstanceState</dt>\n			<dd>"+a((o=t&&t.instanceState,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>InstanceType</dt>\n			<dd>"+a((o=t&&t.instanceType,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>IpAddress</dt>\n			<dd>"+a((o=t&&t.ipAddress,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>KernelId</dt>\n			<dd>"+a((o=t&&t.kernelId,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>KeyName</dt>\n			<dd>"+a((o=t&&t.keyName,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>LaunchTime</dt>\n			<dd>"+a((o=t&&t.launchTime,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>Monitoring</dt>\n			<dd>"+a((o=t&&t.monitoring,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>NetworkInterfaceSet</dt>\n			<dd>"+a((o=t&&t.networkInterfaceSet,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>AvailabilityZone</dt>\n			<dd>"+a((o=t&&t.availabilityZone,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>PrivateDnsName</dt>\n			<dd>"+a((o=t&&t.privateDnsName,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>RootDeviceName</dt>\n			<dd>"+a((o=t&&t.rootDeviceName,typeof o===u?o.apply(t):o))+"</dd>\n			<dt>RootDeviceType</dt>\n			<dd>"+a((o=t&&t.rootDeviceType,typeof o===u?o.apply(t):o))+'</dd>\n		</dl>\n	</div>\n\n	<div class="modal-footer">\n		<button class="btn modal-close btn-silver">'+a(n.i18n.call(t,"POP_BTN_CLOSE",{hash:{},data:i}))+"</button>\n	</div>\n</div>\n\n",s},n.modalResourceInstanceDetail=e.template(t),t=function(e,t,n,r,i){function l(e,t){return'\n<div class="modal-resource-detail" style="width:800px">\n'}function c(e,t){return'\n<div class="modal-resource-detail" style="width:420px">\n'}function h(e,t){var n="",r;n+="\n			",r=typeof e===u?e.apply(e):e;if(r||r===0)n+=r;return n+="\n		",n}function p(e,t){var r="",i;r+='\n		<br />\n		<br />\n		<table class="table table-light">\n			<thead>\n				<tr>\n					',i=n.each.call(e,(i=e&&e.detail_table,i==null||i===!1?i:i.th_set),{hash:{},inverse:f.noop,fn:f.program(8,d,t),data:t});if(i||i===0)r+=i;r+="\n				</tr>\n			</thead>\n			<tbody>\n				<tr>\n				",i=n.each.call(e,(i=e&&e.detail_table,i==null||i===!1?i:i.tr1_set),{hash:{},inverse:f.noop,fn:f.program(10,v,t),data:t});if(i||i===0)r+=i;r+="\n				</tr>\n\n				<tr>\n				",i=n.each.call(e,(i=e&&e.detail_table,i==null||i===!1?i:i.tr2_set),{hash:{},inverse:f.noop,fn:f.program(10,v,t),data:t});if(i||i===0)r+=i;return r+="\n				</tr>\n			</tbody>\n		</table>\n		",r}function d(e,t){var n="";return n+='\n					<th style="width:160px">'+a(typeof e===u?e.apply(e):e)+"</th>\n					",n}function v(e,t){var n="";return n+="\n					<td>"+a(typeof e===u?e.apply(e):e)+"</td>\n				",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;o=n["if"].call(t,t&&t.detail_table,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+='\n	<div class="modal-header">\n		<h3>'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+'</h3>\n		<i class="modal-close">&times;</i>\n	</div>\n	<div class="modal-body">\n		<dl class="dl-horizontal">\n		',o=n.each.call(t,t&&t.sub_info,{hash:{},inverse:f.noop,fn:f.program(5,h,i),data:i});if(o||o===0)s+=o;s+="\n		</dl>\n		",o=n["if"].call(t,t&&t.detail_table,{hash:{},inverse:f.noop,fn:f.program(7,p,i),data:i});if(o||o===0)s+=o;return s+='\n	</div>\n	<div class="modal-footer">\n		<button class="btn modal-close btn-silver">'+a(n.i18n.call(t,"POP_BTN_CLOSE",{hash:{},data:i}))+"</button>\n	</div>\n</div>\n\n",s},n.modalRegionResourceDetail=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div class="bubble-head">'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+'</div>\n<div class="bubble-content">\n	<dl class="dl-horizontal">\n		<dt>Start Time:</dt>\n		<dd>'+a((o=t&&t["start-time"],typeof o===u?o.apply(t):o))+"</dd>\n		<dt>Stop Time:</dt>\n		<dd>"+a((o=t&&t["end-time"],typeof o===u?o.apply(t):o))+"</dd>\n		<dt>Estimated Cost:</dt>\n		<dd>"+a((o=t&&t.cost,typeof o===u?o.apply(t):o))+"</dd>\n	</dl>\n</div>\n\n",s},n.bubbleTest=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div class="bubble-head alert">'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+'</div>\n<div class="bubble-content">\n	'+a((o=t&&t.description,typeof o===u?o.apply(t):o))+"\n</div>\n\n",s},n.bubbleAlert=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div class="bubble-head suggest">'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+'</div>\n<div class="bubble-content">\n	'+a((o=t&&t.description,typeof o===u?o.apply(t):o))+"\n</div>\n\n",s},n.bubbleSuggest=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div class="bubble-head"><i class="icon-'+a((o=t&&t.status,typeof o===u?o.apply(t):o))+' icon-label"></i>'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+'</div>\n<div class="bubble-content">\n	<dl class="dl-horizontal">\n		<dt>Start Time:</dt>\n		<dd>'+a((o=t&&t["start-time"],typeof o===u?o.apply(t):o))+"</dd>\n		<dt>Stop Time:</dt>\n		<dd>"+a((o=t&&t["end-time"],typeof o===u?o.apply(t):o))+"</dd>\n		<!--dt>Estimated Cost:</dt>\n		<dd>"+a((o=t&&t.cost,typeof o===u?o.apply(t):o))+"</dd-->\n	</dl>\n</div>\n\n",s},n.bubbleAppInfo=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div class="bubble-head"><i class="status-'+a((o=t&&t.status,typeof o===u?o.apply(t):o))+' icon-label"></i>'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+"-("+a((o=t&&t.id,typeof o===u?o.apply(t):o))+')</div>\n<div class="bubble-content">\n	<dl class="dl-horizontal">\n		<dt>Launch Time:</dt>\n		<dd>'+a((o=t&&t["launch-time"],typeof o===u?o.apply(t):o))+"</dd>\n		<dt>Availability Zone:</dt>\n		<dd>"+a((o=t&&t.az,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>Instance Type:</dt>\n		<dd>"+a((o=t&&t["instance-type"],typeof o===u?o.apply(t):o))+"</dd>\n	</dl>\n</div>\n\n",s},n.bubbleInstanceInfo=e.template(t),t=function(e,t,n,r,i){function l(e,t){var n="",r;n+="\n		",r=typeof e===u?e.apply(e):e;if(r||r===0)n+=r;return n+="\n	",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div class="bubble-head"><i class="status-'+a((o=t&&t.status,typeof o===u?o.apply(t):o))+' icon-label"></i>'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+'</div>\n<div class="bubble-content">\n<dl class="dl-horizontal">\n	',o=n.each.call(t,t&&t.sub_info,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n</dl>\n</div>\n\n",s},n.bubbleRegionResourceInfo=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div class="bubble-head"></i>'+a((o=t&&t.snapshotId,typeof o===u?o.apply(t):o))+'</div>\n<div class="bubble-content">\n	<dl class="dl-horizontal">\n		<dt>SnapshotId</dt>\n		<dd>'+a((o=t&&t.snapshotId,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>StartTime</dt>\n		<dd>"+a((o=t&&t.startTime,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>Status</dt>\n		<dd>"+a((o=t&&t.status,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>Size</dt>\n		<dd>"+a((o=t&&t.size,typeof o===u?o.apply(t):o))+"</dd>\n	</dl>\n</div>\n\n",s},n.bubbleSnapshotInfo=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div class="bubble-head">'+a((o=t&&t.id,typeof o===u?o.apply(t):o))+'</div>\n<div class="bubble-content">\n	<dl class="dl-horizontal">\n		<dt>'+a(n.i18n.call(t,"DASH_BUB_NAME",{hash:{},data:i}))+"</dt>\n		<dd>"+a((o=t&&t.name,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>"+a(n.i18n.call(t,"DASH_BUB_DESCRIPTION",{hash:{},data:i}))+"</dt>\n		<dd>"+a((o=t&&t.description,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>"+a(n.i18n.call(t,"DASH_BUB_ARCHITECTURE",{hash:{},data:i}))+"</dt>\n		<dd>"+a((o=t&&t.architecture,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>"+a(n.i18n.call(t,"DASH_BUB_IMAGELOCATION",{hash:{},data:i}))+"</dt>\n		<dd>"+a((o=t&&t.imageLocation,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>"+a(n.i18n.call(t,"DASH_BUB_ISPUBLIC",{hash:{},data:i}))+"</dt>\n		<dd>"+a((o=t&&t.isPublic,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>"+a(n.i18n.call(t,"DASH_BUB_KERNELID",{hash:{},data:i}))+"</dt>\n		<dd>"+a((o=t&&t.kernelId,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>"+a(n.i18n.call(t,"DASH_BUB_ROOTDEVICENAME",{hash:{},data:i}))+"</dt>\n		<dd>"+a((o=t&&t.rootDeviceName,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>"+a(n.i18n.call(t,"DASH_BUB_ROOTDEVICETYPE",{hash:{},data:i}))+"</dt>\n		<dd>"+a((o=t&&t.rootDeviceType,typeof o===u?o.apply(t):o))+"</dd>\n	</dl>\n</div>\n\n",s},n.bubbleAMIInfo=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div class="bubble-head"></i>'+a((o=t&&t.id,typeof o===u?o.apply(t):o))+'</div>\n<div class="bubble-content">\n	<dl class="dl-horizontal">\n		<dt>Name</dt>\n		<dd>'+a((o=t&&t.name,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>Description</dt>\n		<dd>"+a((o=t&&t.description,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>Architecture</dt>\n		<dd>"+a((o=t&&t.architecture,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>Image Location</dt>\n		<dd>"+a((o=t&&t.imageLocation,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>Public</dt>\n		<dd>"+a((o=t&&t.isPublic,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>KernelId</dt>\n		<dd>"+a((o=t&&t.kernelId,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>Root Device Name</dt>\n		<dd>"+a((o=t&&t.rootDeviceName,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>Root Device Type</dt>\n		<dd>"+a((o=t&&t.rootDeviceType,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>Image Size</dt>\n		<dd>"+a((o=t&&t.imageSize,typeof o===u?o.apply(t):o))+"</dd>\n		<dt>Support Instance Type</dt>\n		<dd>"+a((o=t&&t.instance_type,typeof o===u?o.apply(t):o))+"</dd>\n	</dl>\n</div>\n\n",s},n.bubbleAMIMongoInfo=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o=this.escapeExpression;return s+='<div style="width:660px">\n	<div class="modal-header">\n		<h3>'+o(n.i18n.call(t,"DASH_POP_CREATE_STACK_CREATE_THIS_STACK_IN",{hash:{},data:i}))+':</h3>\n		<i class="modal-close">×</i>\n	</div>\n	<div class="modal-body">\n		<div id="createNewStack_wrap">\n			<ul class="clearfix">\n				<li>\n					<a class="new-stack-dialog" href="javascript:void(0)" data-supported-platform="ec2-classic">\n						<h4>'+o(n.i18n.call(t,"DASH_POP_CREATE_STACK_CLASSIC",{hash:{},data:i}))+"</h4>\n						<p>"+o(n.i18n.call(t,"DASH_POP_CREATE_STACK_CLASSIC_INTRO",{hash:{},data:i}))+'.</p>\n					</a>\n				</li>\n				<li>\n					<a class="new-stack-dialog" href="javascript:void(0)" data-supported-platform="ec2-vpc">\n						<h4>'+o(n.i18n.call(t,"DASH_POP_CREATE_STACK_VPC",{hash:{},data:i}))+"</h4>\n						<p>"+o(n.i18n.call(t,"DASH_POP_CREATE_STACK_VPC_INTRO",{hash:{},data:i}))+".</p>\n					</a>\n				</li>\n			</ul>\n		</div>\n	</div>\n</div>\n\n",s},n.createNewStackClassic=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o=this.escapeExpression;return s+='<div style="width:400px">\n	<div class="modal-header">\n		<h3>'+o(n.i18n.call(t,"DASH_POP_CREATE_STACK_CREATE_STACK_ERROR",{hash:{},data:i}))+'</h3>\n		<i class="modal-close">×</i>\n	</div>\n	<div class="modal-body">\n		<div id="createNewStack_wrap" class="load-account-attr-error">\n			<p>'+o(n.i18n.call(t,"DASH_POP_FALE_LOAD_RESOURCE_PLEASE_RETRY",{hash:{},data:i}))+'</p>\n			<button class="btn btn-blue" id="reload-account-attributes">'+o(n.i18n.call(t,"DASH_POP_BTN_RETRY",{hash:{},data:i}))+"</button>\n		</div>\n	</div>\n</div>\n\n",s},n.createNewStackErrorAndReload=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o=this.escapeExpression;return s+='<div style="width:660px">\n	<div class="modal-header">\n		<h3>'+o(n.i18n.call(t,"DASH_POP_CREATE_STACK_CREATE_THIS_STACK_IN",{hash:{},data:i}))+':</h3>\n		<i class="modal-close">×</i>\n	</div>\n	<div class="modal-body">\n		<div id="createNewStack_wrap">\n			<ul class="clearfix">\n				<li>\n					<a class="new-stack-dialog" href="javascript:void(0)" data-supported-platform="default-vpc">\n						<h4>'+o(n.i18n.call(t,"DASH_POP_CREATE_STACK_DEFAULT_VPC",{hash:{},data:i}))+"</h4>\n						<p>"+o(n.i18n.call(t,"DASH_POP_CREATE_STACK_DEFAULT_VPC_INTRO",{hash:{},data:i}))+'.</p>\n					</a>\n				</li>\n				<li>\n					<a class="new-stack-dialog" href="javascript:void(0)" data-supported-platform="custom-vpc">\n						<h4>'+o(n.i18n.call(t,"DASH_POP_CREATE_STACK_CUSTOM_VPC",{hash:{},data:i}))+"</h4>\n						<p>"+o(n.i18n.call(t,"DASH_POP_CREATE_STACK_VPC_INTRO",{hash:{},data:i}))+".</p>\n					</a>\n				</li>\n			</ul>\n		</div>\n	</div>\n</div>\n\n",s},n.createNewStackVPC=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="",i;r+="\n\nIPSec Tunnel #"+a((i=e&&e.number,typeof i===u?i.apply(e):i))+"\n================================================================================\n#1: Internet Key Exchange Configuration\n\nConfigure the IKE SA as follows\n  - Authentication Method    : "+a((i=e&&e.ike_protocol_method,typeof i===u?i.apply(e):i))+"\n  - Pre-Shared Key           : "+a((i=e&&e.ike_pre_shared_key,typeof i===u?i.apply(e):i))+"\n  - Authentication Algorithm : "+a((i=e&&e.ike_authentication_protocol_algorithm,typeof i===u?i.apply(e):i))+"\n  - Encryption Algorithm     : "+a((i=e&&e.ike_encryption_protocol,typeof i===u?i.apply(e):i))+"\n  - Lifetime                 : "+a((i=e&&e.ike_lifetime,typeof i===u?i.apply(e):i))+" seconds\n  - Phase 1 Negotiation Mode : "+a((i=e&&e.ike_mode,typeof i===u?i.apply(e):i))+"\n  - Perfect Forward Secrecy  : "+a((i=e&&e.ike_perfect_forward_secrecy,typeof i===u?i.apply(e):i))+"\n\n#2: IPSec Configuration\n\nConfigure the IPSec SA as follows:\n  - Protocol                 : "+a((i=e&&e.ipsec_protocol,typeof i===u?i.apply(e):i))+"\n  - Authentication Algorithm : "+a((i=e&&e.ipsec_authentication_protocol,typeof i===u?i.apply(e):i))+"\n  - Encryption Algorithm     : "+a((i=e&&e.ipsec_encryption_protocol,typeof i===u?i.apply(e):i))+"\n  - Lifetime                 : "+a((i=e&&e.ipsec_lifetime,typeof i===u?i.apply(e):i))+" seconds\n  - Mode                     : "+a((i=e&&e.ipsec_mode,typeof i===u?i.apply(e):i))+"\n  - Perfect Forward Secrecy  : "+a((i=e&&e.ipsec_perfect_forward_secrecy,typeof i===u?i.apply(e):i))+"\n\nIPSec Dead Peer Detection (DPD) will be enabled on the AWS Endpoint. We\nrecommend configuring DPD on your endpoint as follows:\n  - DPD Interval             : "+a((i=e&&e.ipsec_interval,typeof i===u?i.apply(e):i))+"\n  - DPD Retries              : "+a((i=e&&e.ipsec_retries,typeof i===u?i.apply(e):i))+"\n\nIPSec ESP (Encapsulating Security Payload) inserts additional\nheaders to transmit packets. These headers require additional space,\nwhich reduces the amount of space available to transmit application data.\nTo limit the impact of this behavior, we recommend the following\nconfiguration on your Customer Gateway:\n  - TCP MSS Adjustment       : "+a((i=e&&e.tcp_mss_adjustment,typeof i===u?i.apply(e):i))+" bytes\n  - Clear Don't Fragment Bit : "+a((i=e&&e.clear_df_bit,typeof i===u?i.apply(e):i))+"\n  - Fragmentation            : "+a((i=e&&e.fragmentation_before_encryption,typeof i===u?i.apply(e):i))+"\n\n#3: Tunnel Interface Configuration\n\nYour Customer Gateway must be configured with a tunnel interface that is\nassociated with the IPSec tunnel. All traffic transmitted to the tunnel\ninterface is encrypted and transmitted to the Virtual Private Gateway.\n\nThe Customer Gateway and Virtual Private Gateway each have two addresses that relate\nto this IPSec tunnel. Each contains an outside address, upon which encrypted\ntraffic is exchanged. Each also contain an inside address associated with\nthe tunnel interface.\n\nThe Customer Gateway outside IP address was provided when the Customer Gateway\nwas created. Changing the IP address requires the creation of a new\nCustomer Gateway.\n\nThe Customer Gateway inside IP address should be configured on your tunnel\ninterface.\n\nOutside IP Addresses:\n  - Customer Gateway 		        : "+a((i=e&&e.customer_gateway_outside_address,typeof i===u?i.apply(e):i))+"\n  - Virtual Private Gateway	        : "+a((i=e&&e.vpn_gateway_outside_address,typeof i===u?i.apply(e):i))+"\n\nInside IP Addresses\n  - Customer Gateway         		: "+a((i=e&&e.customer_gateway_inside_address,typeof i===u?i.apply(e):i))+"\n  - Virtual Private Gateway             : "+a((i=e&&e.vpn_gateway_inside_address,typeof i===u?i.apply(e):i))+"\n\nConfigure your tunnel to fragment at the optimal size:\n  - Tunnel interface MTU     : 1436 bytes\n\n",i=n["if"].call(e,e&&e.isStaticRouting,{hash:{},inverse:f.program(4,h,t),fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function c(e,t){var n="",r;return n+="\n#4: Static Routing Configuration:\n\nTo route traffic between your internal network and your VPC,\nyou will need a static route added to your router.\n\nStatic Route Configuration Options:\n\n  - Next hop                      : "+a((r=e&&e.next_hop,typeof r===u?r.apply(e):r))+"\n\nYou should add static routes towards your internal network on the VGW.\nThe VGW will then send traffic towards your internal network over\nhe tunnels.\n",n}function h(e,t){var n="",r;return n+="\n#4: Border Gateway Protocol (BGP) Configuration:\n\nThe Border Gateway Protocol (BGPv4) is used within the tunnel, between the inside\nIP addresses, to exchange routes from the VPC to your home network. Each\nBGP router has an Autonomous System Number (ASN). Your ASN was provided\nto AWS when the Customer Gateway was created.\n\nBGP Configuration Options:\n  - Customer Gateway ASN	          : "+a((r=e&&e.customer_gateway_bgp_asn,typeof r===u?r.apply(e):r))+"\n  - Virtual Private  Gateway ASN          : "+a((r=e&&e.vpn_gateway_bgp_asn,typeof r===u?r.apply(e):r))+"\n  - Neighbor IP Address     		  : "+a((r=e&&e.neighbor_ip_address,typeof r===u?r.apply(e):r))+"\n  - Neighbor Hold Time       : "+a((r=e&&e.customer_gateway_bgp_hold_time,typeof r===u?r.apply(e):r))+"\n\nConfigure BGP to announce routes to the Virtual Private Gateway. The gateway\nwill announce prefixes to your customer gateway based upon the prefix you\nassigned to the VPC at creation time.\n",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+="Amazon Web Services\nVirtual Private Cloud\n\nVPN Connection Configuration\n================================================================================\nAWS utilizes unique identifiers to manipulate the configuration of\na VPN Connection. Each VPN Connection is assigned a VPN Connection Identifier\nand is associated with two other identifiers, namely the\nCustomer Gateway Identifier and the Virtual Private Gateway Identifier.\n\nYour VPN Connection ID		         : "+a((o=t&&t.vpnConnectionId,typeof o===u?o.apply(t):o))+"\nYour Virtual Private Gateway ID          : "+a((o=t&&t.vpnGatewayId,typeof o===u?o.apply(t):o))+"\nYour Customer Gateway ID    		 : "+a((o=t&&t.customerGatewayId,typeof o===u?o.apply(t):o))+"\n\nA VPN Connection consists of a pair of IPSec tunnel security associations (SAs).\nIt is important that both tunnel security associations be configured.\n\n",o=n.each.call(t,t&&t.tunnel,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n\n\n\nAdditional Notes and Questions\n================================================================================\n\n  - Amazon Virtual Private Cloud Getting Started Guide:\n      http://docs.amazonwebservices.com/AmazonVPC/latest/GettingStartedGuide\n  - Amazon Virtual Private Cloud Network Administrator Guide:\n      http://docs.amazonwebservices.com/AmazonVPC/latest/NetworkAdminGuide\n  - XSL Version: 2009-07-15-1119716\n\n\n",s},n.configurationDownload=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div id="modal-run-stack">\n	<div class="modal-header">\n		<h3>Run Stack</h3>\n		<i class="modal-close">×</i>\n	</div>\n	<div class="modal-body">\n		<div class="modal-control-group clearfix" data-bind="true">\n			<label class="label" for="app-name">App Name</label>\n			<input id="app-name" class="input modal-input-value" type="text" value="'+a((o=t&&t.name,typeof o===u?o.apply(t):o))+'" data-ignore="true">\n		</div>\n		<div class="modal-control-group app-usage-group clearfix">\n			<label for="">App Usage</label>\n			<div id="app-usage-selectbox" class="selectbox">\n				<div class="selection"><i class="icon-app-type-testing"></i>Testing</div>\n				<ul class="dropdown" tabindex="-1">\n					<li class="selected item" data-value="testing"><i class="icon-app-type-testing"></i>Testing</li>\n					<li class="item" data-value="development"><i class="icon-app-type-development"></i>Development</li>\n					<li class="item" data-value="production"><i class="icon-app-type-production"></i>Production</li>\n					<li class="item" data-value="others"><i class="icon-app-type-others" data-value="testing"></i>Others</li>\n				<ul>\n			</div>\n		</div>\n		<div class="stack-validation">\n			<details open style="display:none;">\n				<summary>Stack Validation</summary>\n				<div id="stack-run-validation-container"></div>\n			</details>\n			<div class="nutshell" style="display: none;">:<label></label></div>\n			<div class="validating">\n				<div class="loading-spinner loading-spinner-small"></div>\n				<p>Validating your stack...</p>\n			</div>\n		</div>\n		<div class="estimate clearfix">\n			<span class="title">Estimated Cost</span>\n			<span class="price" id="label-total-fee"><b>$'+a((o=t&&t.total_fee,typeof o===u?o.apply(t):o))+'</b> / month</span>\n		</div>\n\n	</div>\n	<div class="modal-footer">\n\n		<button class="btn btn-blue" id="btn-confirm" disabled>Run Stack</button>\n		<button class="btn btn-silver modal-close" id="run-stack-cancel">Cancel</button>\n	</div>\n</div>\n\n',s},n.modalRunStack=e.template(t),t=function(e,t,n,r,i){function l(e,t,r){var i="",s;i+="\n",s=n["if"].call(e,r&&r.deletable,{hash:{},inverse:f.program(4,h,t),fn:f.program(2,c,t),data:t});if(s||s===0)i+=s;i+='\n<div class="rule-list-row">\n	<div class=\'rule-direction-icon tooltip icon-'+a((s=e&&e.direction,typeof s===u?s.apply(e):s))+"' data-tooltip='",s=n.ifCond.call(e,e&&e.direction,"inbound",{hash:{},inverse:f.program(8,d,t),fn:f.program(6,p,t),data:t});if(s||s===0)i+=s;i+="'></div>\n	<div class='rule-reference tooltip truncate' data-tooltip='",s=n.ifCond.call(e,e&&e.direction,"inbound",{hash:{},inverse:f.program(12,m,t),fn:f.program(10,v,t),data:t});if(s||s===0)i+=s;i+="'>",s=n["if"].call(e,e&&e.color,{hash:{},inverse:f.noop,fn:f.program(14,g,t),data:t});if(s||s===0)i+=s;i+=a((s=e&&e.relation,typeof s===u?s.apply(e):s))+'</div>\n</div>\n<div class="rule-list-row">\n	<div><span class="rule-protocol tooltip" data-tooltip=\''+a(n.i18n.call(e,"PROP_SG_TIP_PROTOCOL",{hash:{},data:t}))+"' >"+a((s=e&&e.protocol,typeof s===u?s.apply(e):s))+"</span></div>\n	<div class='rule-port tooltip' data-tooltip='"+a(n.i18n.call(e,"PROP_SG_TIP_PORT_CODE",{hash:{},data:t}))+"'>"+a((s=e&&e.port,typeof s===u?s.apply(e):s))+"</div>\n</div>\n",s=n["if"].call(e,r&&r.deletable,{hash:{},inverse:f.noop,fn:f.program(16,y,t),data:t});if(s||s===0)i+=s;return i+="\n</li>",i}function c(e,t){var n="",r;return n+='\n<li data-uid="'+a((r=e&&e.ruleSetId,typeof r===u?r.apply(e):r))+'" data-protocol="'+a((r=e&&e.protocol,typeof r===u?r.apply(e):r))+'" data-port="'+a((r=e&&e.port,typeof r===u?r.apply(e):r))+'" data-relation="'+a((r=e&&e.relation,typeof r===u?r.apply(e):r))+'" data-relationid="'+a((r=e&&e.relationId,typeof r===u?r.apply(e):r))+'" data-direction="'+a((r=e&&e.direction,typeof r===u?r.apply(e):r))+'" class="pos-r sg-create-rule-item">\n',n}function h(e,t){return'\n<li class="sg-create-rule-item">\n'}function p(e,t){return a(n.i18n.call(e,"PROP_SG_TIP_INBOUND",{hash:{},data:t}))}function d(e,t){return a(n.i18n.call(e,"PROP_SG_TIP_OUTBOUND",{hash:{},data:t}))}function v(e,t){return"Source"}function m(e,t){return"Destination"}function g(e,t){var n="",r;return n+='<span class="sg-color" style="background-color:'+a((r=e&&e.color,typeof r===u?r.apply(e):r))+'"></span>',n}function y(e,t){var r="";return r+='<a href="#" class="sg-rule-delete icon-remove tooltip" data-tooltip=\''+a(n.i18n.call(e,"PROP_SG_TIP_REMOVE_RULE",{hash:{},data:t}))+"'></a>",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;o=n.each.call(t,t,{hash:{},inverse:f.noop,fn:f.programWithDepth(1,l,i,t),data:i});if(o||o===0)s+=o;return s+="\n\n",s},n.sgRuleList=e.template(t),t=function(e,t,n,r,i){function l(e,t){var n="",r;n+='\n<h3 class="sg-create-group truncate"><span class="sg-color sg-color-rule-header" style="background-color:'+a((r=e&&e.ownerColor,typeof r===u?r.apply(e):r))+'"></span>'+a((r=e&&e.ownerName,typeof r===u?r.apply(e):r))+'</h3>\n<ul class="sg-rule-list">',r=(r=e&&e.content,typeof r===u?r.apply(e):r);if(r||r===0)n+=r;return n+="</ul>\n",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;o=n.each.call(t,t&&t.groups,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n\n",s},n.groupedSgRuleList=e.template(t),t=function(e,t,n,r,i){function l(e,t){var n="",r;n+='\n<h3 class="sg-create-group truncate"><span class="sg-color sg-color-rule-header" style="background-color:'+a((r=e&&e.ownerColor,typeof r===u?r.apply(e):r))+'"></span>'+a((r=e&&e.ownerName,typeof r===u?r.apply(e):r))+'</h3>\n<ul class="sg-rule-list">',r=(r=e&&e.content,typeof r===u?r.apply(e):r);if(r||r===0)n+=r;return n+="</ul>\n",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='Following rule(s) will be deleted from its(their) security group:</div>\n<article class="scroll-wrap delete-sgrule-dialog">\n<div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n<div class="scroll-content">\n',o=n.each.call(t,t,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n</div>\n</article>\n\n",s},n.groupedSgRuleListDelConfirm=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;s+='<div style="width:420px">\n	<div class="modal-header"> <h3>'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+'</h3><i class="modal-close">&times;</i> </div>\n	<div class="modal-body">\n		<div class="modal-text-wraper"> <div class="modal-center-align-helper">\n			<div class="modal-text-major">',o=(o=t&&t.content,typeof o===u?o.apply(t):o);if(o||o===0)s+=o;return s+='</div>\n		</div> </div>\n	</div>\n	<div class="modal-footer">\n		<button id="canvas-op-confirm" class="btn modal-close btn-red">'+a(n.i18n.call(t,"CFM_BTN_DELETE",{hash:{},data:i}))+'</button>\n		<button class="btn modal-close btn-silver">'+a(n.i18n.call(t,"CFM_BTN_CANCEL",{hash:{},data:i}))+"</button>\n	</div>\n</div>\n\n",s},n.canvasOpConfirm=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="",i;r+='\n<li class="input-ip-item">\n  <div class="name tooltip" data-tooltip="',i=n["if"].call(e,e&&e.autoAssign,{hash:{},inverse:a.program(4,h,t),fn:a.program(2,c,t),data:t});if(i||i===0)r+=i;r+='">\n    <label class="input-ip-wrap" for="propertyIpListItem-'+u((i=t==null||t===!1?t:t.index,typeof i===f?i.apply(e):i))+'"><span class="input-ip-prefix">'+u((i=e&&e.prefix,typeof i===f?i.apply(e):i))+'</span>\n    <input type="text" class="input input-ip"  id="propertyIpListItem-'+u((i=t==null||t===!1?t:t.index,typeof i===f?i.apply(e):i))+'" value="'+u((i=e&&e.suffix,typeof i===f?i.apply(e):i))+'" ',i=n.unless.call(e,e&&e.editable,{hash:{},inverse:a.noop,fn:a.program(6,p,t),data:t});if(i||i===0)r+=i;r+=' data-ignore="true" data-ignore-regexp="^[0-9.x]*$" data-required="true">\n    </label>\n  </div>\n  <div class="input-ip-eip-btn tooltip toggle-eip',i=n["if"].call(e,e&&e.hasEip,{hash:{},inverse:a.noop,fn:a.program(8,d,t),data:t});if(i||i===0)r+=i;r+='" data-tooltip="',i=n["if"].call(e,e&&e.hasEip,{hash:{},inverse:a.program(12,m,t),fn:a.program(10,v,t),data:t});if(i||i===0)r+=i;r+='"></div>\n  ',i=n.unless.call(e,e&&e.unDeletable,{hash:{},inverse:a.noop,fn:a.program(14,g,t),data:t});if(i||i===0)r+=i;return r+="\n</li>\n",r}function c(e,t){return u(n.i18n.call(e,"PROP_INSTANCE_IP_MSG_2",{hash:{},data:t}))}function h(e,t){return u(n.i18n.call(e,"PROP_INSTANCE_IP_MSG_1",{hash:{},data:t}))}function p(e,t){return'disabled="disabled"'}function d(e,t){return" associated"}function v(e,t){return u(n.i18n.call(e,"PROP_INSTANCE_IP_MSG_4",{hash:{},data:t}))}function m(e,t){return u(n.i18n.call(e,"PROP_INSTANCE_IP_MSG_3",{hash:{},data:t}))}function g(e,t){return'<div class="icon-remove"></div>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a=this,f="function";o=n.each.call(t,t,{hash:{},inverse:a.noop,fn:a.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n\n",s},n.propertyIpList=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="";return r+='\n				<div class="modal-text-minor" style="margin-top:10px;"><i class="icon-inbound"></i>'+u(n.i18n.call(e,"POP_SGRULE_LBL_INBOUND",{hash:{},data:t}))+"</div>\n			",r}function c(e,t){var r="";return r+='\n			<div class="radio-group-horizontal">\n				<div class="radio">\n					<input id="radio_inbound" type="radio" name="sg-direction" checked="checked" value="inbound" />\n					<label for="radio_inbound"></label>\n				</div>\n				<label for="radio_inbound" ><i class="icon-inbound icon-label"></i>'+u(n.i18n.call(e,"POP_SGRULE_LBL_INBOUND",{hash:{},data:t}))+'</label>\n			</div>\n\n			<div class="radio-group-horizontal">\n				<div class="radio">\n					<input id="radio_outbound" type="radio" name="sg-direction" value="outbound"/>\n					<label for="radio_outbound"></label>\n				</div>\n				<label for="radio_outbound"><i class="icon-outbound icon-label"></i>'+u(n.i18n.call(e,"POP_SGRULE_LBL_OUTBOUND",{hash:{},data:t}))+"</label>\n			</div>\n			",r}function h(e,t){var n="",r;return n+='\n					<li class="item truncate" data-id="sg" data-uid="'+u((r=e&&e.id,typeof r===a?r.apply(e):r))+'"><span class="sg-color" style="background-color:'+u((r=e&&e.color,typeof r===a?r.apply(e):r))+'"></span>'+u((r=e&&e.name,typeof r===a?r.apply(e):r))+"</li>\n					",n}function p(e,t){return"\n							"}function d(e,t){var r="";return r+='\n							<li class="item" data-id="custom">'+u(n.i18n.call(e,"POP_SGRULE_PROTOCOL_CUSTOM",{hash:{},data:t}))+'</li>\n							<li class="item" data-id="all">'+u(n.i18n.call(e,"POP_SGRULE_PROTOCOL_ALL",{hash:{},data:t}))+"</li>\n							",r}function v(e,t){return'\n					<div class="sg-protocol-option-input" id="sg-protocol-custom">\n						<input class="input" name="protocol-custom-ranged" placeholder="0-255" data-ignore="true" data-ignore-regexp="^[0-9]*$" data-required="true">\n					</div>\n					<div class="sg-protocol-option-input" id="sg-protocol-all">\n						Port Range:<span>0-65535</span>\n					</div>\n				'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+='<div id="modal-sg-rule" data-bind="true">\n	<div class="modal-header">\n		<h3>'+u(n.i18n.call(t,"POP_SGRULE_TITLE_ADD",{hash:{},data:i}))+'</h3><i class="modal-close">&times;</i>\n	</div>\n\n	<div class="modal-body">\n		<div class="modal-control-group clearfix">\n			<label class="label-short">'+u(n.i18n.call(t,"POP_SGRULE_LBL_DIRECTION",{hash:{},data:i}))+'</label>\n\n			<div id="sg-modal-direction">\n			',o=n["if"].call(t,t&&t.isClassic,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+='\n			</div>\n		</div>\n\n		<div class="modal-control-group clearfix">\n			<label class="label-short" for="securitygroup-modal-description" id="rule-modal-ip-range">'+u(n.i18n.call(t,"POP_SGRULE_LBL_SOURCE",{hash:{},data:i}))+'</label>\n			<div class="selectbox" id="sg-add-model-source-select">\n				<div class="selection">IP...</div>\n				<ul class="dropdown">\n					<li class="item selected" data-id="custom">IP...</li>\n					',o=n.each.call(t,t&&t.sgList,{hash:{},inverse:f.noop,fn:f.program(5,h,i),data:i});if(o||o===0)s+=o;s+='\n				</ul>\n			</div>\n			<input class="input" type="text" id="securitygroup-modal-description" data-ignore="true" data-ignore-regexp="^[0-9./]*$" data-required="true" placeholder=\''+u(n.i18n.call(t,"POP_SGRULE_PLACEHOLD_SOURCE",{hash:{},data:i}))+'\'>\n		</div>\n\n		<div class="modal-control-group clearfix">\n			<label class="label-short" >'+u(n.i18n.call(t,"POP_SGRULE_LBL_PROTOCOL",{hash:{},data:i}))+'</label>\n				<div class="modal-protocol-select">\n					<div class="selectbox" id="modal-protocol-select"  data-protocal-type="tcp">\n						<div class="selection">'+u(n.i18n.call(t,"POP_SGRULE_PROTOCOL_TCP",{hash:{},data:i}))+'</div>\n						<ul class="dropdown" tabindex="-1">\n							<li class="selected item" data-id="tcp">'+u(n.i18n.call(t,"POP_SGRULE_PROTOCOL_TCP",{hash:{},data:i}))+'</li>\n							<li class="item" data-id="udp">'+u(n.i18n.call(t,"POP_SGRULE_PROTOCOL_UDP",{hash:{},data:i}))+'</li>\n							<li class="item" data-id="icmp">'+u(n.i18n.call(t,"POP_SGRULE_PROTOCOL_ICMP",{hash:{},data:i}))+"</li>\n							",o=n["if"].call(t,t&&t.isClassic,{hash:{},inverse:f.program(9,d,i),fn:f.program(7,p,i),data:i});if(o||o===0)s+=o;s+='\n						</ul>\n					</div>\n				</div>\n			<div id="sg-protocol-select-result">\n				<div class="sg-protocol-option-input show" id="sg-protocol-tcp">\n					<input class="input" type="text" placeholder=\''+u(n.i18n.call(t,"POP_SGRULE_PLACEHOLD_PORT_RANGE",{hash:{},data:i}))+'\' data-ignore="true" data-ignore-regexp="^[0-9-]*$"  data-required="true"/>\n				</div>\n				<div class="sg-protocol-option-input" id="sg-protocol-udp">\n					<input class="input" type="text" placeholder=\''+u(n.i18n.call(t,"POP_SGRULE_PLACEHOLD_PORT_RANGE",{hash:{},data:i}))+'\' data-ignore="true" data-ignore-regexp="^[0-9-]*$" data-required="true"/>\n				</div>\n\n				<div class="sg-protocol-option-input" id="sg-protocol-icmp">\n					<div class="selectbox" id="protocol-icmp-main-select" data-protocal-main="0"  data-protocal-sub="-1">\n					<div class="selection">Echo Reply(0)</div>\n					<div class="dropdown scroll-wrap scrollbar-auto-hide context-wrap" style="height:300px;">\n						<div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n						<ul tabindex="-1" class="scroll-content">\n							<li class="item selected" data-id="0">Echo Reply(0)</li>\n							<li class="item" data-id="3">Destination Unreachable(3) ...</li>\n							<li class="item" data-id="4">Source Quench(4)</li>\n							<li class="item" data-id="5">Redirect Message(5) ...</li>\n							<li class="item" data-id="6">Alternate Host Address(6)</li>\n							<li class="item" data-id="8">Echo Request(8)</li>\n							<li class="item" data-id="9">Router Advertisement(9)</li>\n							<li class="item" data-id="10">Router Solicitation(10)</li>\n							<li class="item" data-id="11">Time Exceeded(11) ...</li>\n							<li class="item" data-id="12">Parameter Problem: Bad IP header(12) ...</li>\n							<li class="item" data-id="13">Timestamp(13)</li>\n							<li class="item" data-id="14">Timestamp Reply(14)</li>\n							<li class="item" data-id="15">Information Request(15)</li>\n							<li class="item" data-id="16">Information Reply(16)</li>\n							<li class="item" data-id="17">Address Mask Request(17)</li>\n							<li class="item" data-id="18">Address Mask Reply(18)</li>\n							<li class="item" data-id="30">Traceroute(30)</li>\n							<li class="item" data-id="31">Datagram Conversion Error(31)</li>\n							<li class="item" data-id="32">Mobile Host Redirect(32)</li>\n							<li class="item" data-id="33">Where Are You(33)</li>\n							<li class="item" data-id="34">Here I Am(34)</li>\n							<li class="item" data-id="35">Mobile Registration Request(35)</li>\n							<li class="item" data-id="36">Mobile Registration Reply(36)</li>\n							<li class="item" data-id="37">Domain Name Request(37)</li>\n							<li class="item" data-id="38">Domain Name Reply(38)</li>\n							<li class="item" data-id="39">SKIP Algorithm Discovery Protocol(39)</li>\n							<li class="item" data-id="40">Photuris Security Failures(40)</li>\n							<li class="item" data-id="-1">All(-1)</li>\n						</ul>\n					</div>\n					</div>\n				</div>\n\n				<div class="selectbox protocol-icmp-sub-select" id="protocol-icmp-sub-select-3">\n					<div class="selection">All(-1)</div>\n					<div class="dropdown scroll-wrap scrollbar-auto-hide context-wrap" style="height:300px;">\n						<div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n						<ul class="scroll-content" tabindex="-1">\n							<li class="item selected" data-id="-1">All(-1)</li>\n							<li class="item" data-id="0">destination network unreachable(0)</li>\n							<li class="item" data-id="1">destination host unreachable(1)</li>\n							<li class="item" data-id="2">destination protocol unreachable(2)</li>\n							<li class="item" data-id="3">destination port unreachable(3)</li>\n							<li class="item" data-id="4">fragmentation required and DF flag set(4)</li>\n							<li class="item" data-id="5">source route failed(5)</li>\n							<li class="item" data-id="6">destination network unknown(6)</li>\n							<li class="item" data-id="7">destination host unknown(7)</li>\n							<li class="item" data-id="8">source host isolated(8)</li>\n							<li class="item" data-id="9">network administratively prohibited(9)</li>\n							<li class="item" data-id="10">host administratively prohibited(10)</li>\n							<li class="item" data-id="11">network unreachable for TOS(11)</li>\n							<li class="item" data-id="12">host unreachable for TOS(12)</li>\n							<li class="item" data-id="13">communication administratively prohibited(13)</li>\n						</ul>\n					</div>\n				</div>\n\n				<div class="selectbox protocol-icmp-sub-select" id="protocol-icmp-sub-select-5">\n					<div class="selection">All(-1)</div>\n					<ul class="dropdown" tabindex="-1">\n						<li class="selected item" data-id="-1">All(-1)</li>\n						<li class="item" data-id="0">redirect datagram for the network(0)</li>\n						<li class="item" data-id="1">redirect datagram for the host(1)</li>\n						<li class="item" data-id="2">redirect datagram for the TOS & network(2)</li>\n						<li class="item" data-id="3">redirect datagram for the TOS & host(3)</li>\n					</ul>\n				</div>\n\n				<div class="selectbox protocol-icmp-sub-select" id="protocol-icmp-sub-select-11">\n					<div class="selection">All(-1)</div>\n					<ul class="dropdown" tabindex="-1">\n						<li class="item selected" data-id="-1">All(-1)</li>\n						<li class="item" data-id="0">TTL expired transit(0)</li>\n						<li class="item" data-id="1">fragmentation reasembly time exceeded(1)</li>\n					</ul>\n				</div>\n\n				<div class="selectbox protocol-icmp-sub-select" id="protocol-icmp-sub-select-12">\n					<div class="selection">All(-1)</div>\n					<ul class="dropdown" role="menu">\n						<li class="item selected" data-id="-1">All(-1)</li>\n						<li class="item" data-id="0">pointer indicates the error(0)</li>\n						<li class="item" data-id="1">missing a required option(1)</li>\n						<li class="item" data-id="2">bad length(2)</li>\n					</ul>\n				</div>\n\n				',o=n.unless.call(t,t&&t.isClassic,{hash:{},inverse:f.noop,fn:f.program(11,v,i),data:i});if(o||o===0)s+=o;return s+='\n			</div>\n		</div>\n	</div>\n	<div class="modal-footer">\n		<button class="btn btn-blue" id=\'sg-modal-save\'>'+u(n.i18n.call(t,"POP_SGRULE_BTN_SAVE",{hash:{},data:i}))+'</button>\n		<button class="btn btn-silver modal-close">'+u(n.i18n.call(t,"POP_SGRULE_BTN_CANCEL",{hash:{},data:i}))+"</button>\n	</div>\n</div>\n\n",s},n.modalSGRule=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div style="width:420px">\n	<div class="modal-header">\n		<h3 id=\'keypair-name\'>'+a((o=t&&t.name,typeof o===u?o.apply(t):o))+'</h3>\n		<i class="modal-close">&times;</i>\n	</div>\n	<div class="modal-body">\n		<section id=\'keypair-loading\' class="loading-spinner"></section>\n\n		<section id="keypair-body-linux" class="hide">\n			<div class="keypair-download clearfix modal-control-group">\n				<p class="modal-text-major left">Key Pair data is ready</p>\n				<a href="#" class="btn btn-blue right" id="keypair-kp-linux">Download</a>\n			</div>\n			<div id="keypair-remote" class="modal-control-group clearfix">\n				<label for="keypair-cmd">Remote Access</label>\n				<input class="input click-select" id="keypair-cmd" type="text" readonly="readonly">\n			</div>\n\n		</section>\n		<section id="keypair-body-win" class="hide">\n			<div class="modal-control-group">\n				<h4>Remote Access</h4>\n				<label for="keypair-private-key">Private Key</label>\n				<textarea id="keypair-private-key" class="click-select" readonly="readonly"></textarea>\n				<a href="#" id="keypair-rdp" class="btn btn-blue">Download RDP</a>\n				<a href="#" id="keypair-kp-win" class="btn btn-blue">Download Key Pair</a>\n			</div>\n\n			<div id="keypair-public" class="modal-control-group clearfix">\n				<label for="keypair-dns">Public DNS</label>\n				<input class="input click-select" type="text" readonly="readonly" id="keypair-dns">\n			</div>\n\n			<div class="modal-control-group clearfix">\n				<label style="width:100%;">Windows Login Password</label>\n				<div id="keypair-login">\n					<input type="password" readonly="readonly" id="keypair-pwd" class="input click-select">\n					<a href="#" class="btn btn-silver kp-copy-btn" id="keypair-show">Show password</a>\n				</div>\n				<div id="keypair-no-pwd"></div>\n			</div>\n\n		</section>\n	</div>\n\n	<div class="modal-footer">\n		<button class="btn modal-close btn-silver">Close</button>\n	</div>\n</div>\n\n',s},n.modalDownloadKP=e.template(t),t=function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<article>\n	<div class="property-control-group">This resource is not available. It may have been deleted from other source or terminated in previous app editing.</div>\n</article>\n\n'},n.missingPropertyPanel=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<article>\n	<div class="property-control-group">'+a((o=t&&t.asgName,typeof o===u?o.apply(t):o))+" is deleted in stopped app. The auto scaling group will be created when the app is started.</div>\n</article>\n\n",s},n.missingAsgWhenStop=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="",i;r+='<li>\n			<a href="#" id="'+a((i=e&&e.id,typeof i===u?i.apply(e):i))+'" data-instance="'+a((i=e&&e.instance_id,typeof i===u?i.apply(e):i))+'" class="',i=n["if"].call(e,e&&e.snapshotId,{hash:{},inverse:f.program(4,h,t),fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;return r+="_item "+a((i=e&&e.deleted,typeof i===u?i.apply(e):i))+'">\n				<span class="volume_name">'+a((i=e&&e.name,typeof i===u?i.apply(e):i))+'</span>\n				<span class="volume_size">'+a((i=e&&e.size,typeof i===u?i.apply(e):i))+"GB</span>\n			</a>\n		</li>",r}function c(e,t){return"snapshot"}function h(e,t){return"volume"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div class="bubble-head">Attached volume (<span id="instance_volume_number">'+a((o=t&&t.length,typeof o===u?o.apply(t):o))+'</span>)</div>\n<div id="instance_volume_wrap" class="scroll-wrap">\n	<div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n	<ul id="instance_volume_list" class="clearfix bubble-content scroll-content">\n		',o=n.each.call(t,t,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n	</ul>\n</div>\n\n",s},n.instanceVolume=e.template(t),t=function(e,t,n,r,i){function l(e,t,n){var r="",i;return r+='\n		<li>\n			<a href="#" class="asgList-item" id="'+a((i=e&&e.id,typeof i===u?i.apply(e):i))+'" data-id="'+a((i=e&&e.id,typeof i===u?i.apply(e):i))+'">\n				<i class="asgList-item-status tooltip status status-'+a((i=e&&e.state,typeof i===u?i.apply(e):i))+'" data-tooltip="'+a((i=e&&e.state,typeof i===u?i.apply(e):i))+'" ></i>\n				<span class="asgList-item-icon" style="background-image:url(\'./assets/images/'+a((i=e&&e.background,typeof i===u?i.apply(e):i))+'\')"></span>\n				<div class="asgList-item-volume" data-target-id='+a((i=e&&e.id,typeof i===u?i.apply(e):i))+'>\n					<span class="asgList-item-number">'+a((i=n&&n.volume,typeof i===u?i.apply(e):i))+'</span>\n				</div>\n				<span class="asgList-item-label">'+a((i=e&&e.id,typeof i===u?i.apply(e):i))+"</span>\n			</a>\n		</li>\n		",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div id="asgList-wrap">\n	<div id="asgList-header">\n		<span id="asgList-title">'+a((o=t&&t.name,typeof o===u?o.apply(t):o))+'</span>\n		<a id="asgList-close" href="javascript:void(0)" onclick="MC.canvas.asgList.close()">&times;</a>\n	</div>\n	<ul id="asgList" class="clearfix">\n		',o=n.each.call(t,t,{hash:{},inverse:f.noop,fn:f.programWithDepth(1,l,i,t),data:i});if(o||o===0)s+=o;return s+="\n	</ul>\n</div>\n\n",s},n.asgList=e.template(t),t=function(e,t,n,r,i){function l(e,t,n){var r="",i;return r+='\n		<li>\n			<a href="#" class=\'instanceList-item '+a((i=e&&e.deleted,typeof i===u?i.apply(e):i))+"' id=\""+a((i=e&&e.id,typeof i===u?i.apply(e):i))+"_"+a((i=t==null||t===!1?t:t.index,typeof i===u?i.apply(e):i))+'" data-id="'+a((i=e&&e.appId,typeof i===u?i.apply(e):i))+'">\n				<i class="instanceList-item-status tooltip status status-'+a((i=e&&e.state,typeof i===u?i.apply(e):i))+'" data-tooltip="'+a((i=e&&e.state,typeof i===u?i.apply(e):i))+'"></i>\n				<span class="instanceList-item-icon" style="background-image:url(\'./assets/images/'+a((i=n&&n.background,typeof i===u?i.apply(e):i))+'\')"></span>\n				<div class="instanceList-item-volume" data-target-id="'+a((i=e&&e.id,typeof i===u?i.apply(e):i))+"_"+a((i=t==null||t===!1?t:t.index,typeof i===u?i.apply(e):i))+'">\n					<span class="instanceList-item-number">'+a((i=n&&n.volume,typeof i===u?i.apply(e):i))+'</span>\n				</div>\n				<span class="instanceList-item-label">'+a((i=e&&e.name,typeof i===u?i.apply(e):i))+"-"+a((i=t==null||t===!1?t:t.index,typeof i===u?i.apply(e):i))+"</span>\n			</a>\n		</li>\n		",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div id="instanceList-wrap" data-id="'+a((o=(o=t&&t[0],o==null||o===!1?o:o.id),typeof o===u?o.apply(t):o))+'">\n	<div id="instanceList-header">\n		<span id="instanceList-title">'+a((o=t&&t.name,typeof o===u?o.apply(t):o))+'</span>\n		<a id="instanceList-close" href="javascript:void(0)" onclick="MC.canvas.instanceList.close()">&times;</a>\n	</div>\n	<ul id="instanceList" class="clearfix">\n		',o=n.each.call(t,t,{hash:{},inverse:f.noop,fn:f.programWithDepth(1,l,i,t),data:i});if(o||o===0)s+=o;return s+="\n	</ul>\n</div>\n\n",s},n.instanceList=e.template(t),t=function(e,t,n,r,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o="",u,a="function",f=this.escapeExpression;return o+='<li>\n	<a href="#" class="instanceList-item" id="'+f((u=t&&t.id,typeof u===a?u.apply(t):u))+"_"+f((u=i==null||i===!1?i:i.index,typeof u===a?u.apply(t):u))+'" data-id="'+f((u=t&&t.appId,typeof u===a?u.apply(t):u))+'">\n		<i class="instanceList-item-status tooltip status status-'+f((u=t&&t.status,typeof u===a?u.apply(t):u))+'"></i>\n		<span class="instanceList-item-icon" style="background-image:url(\'./assets/images/ide/ami/'+f((u=s&&s.background,typeof u===a?u.apply(t):u))+'.png\')"></span>\n		<div class="instanceList-item-volume" data-target-id="'+f((u=t&&t.id,typeof u===a?u.apply(t):u))+"_"+f((u=i==null||i===!1?i:i.index,typeof u===a?u.apply(t):u))+'">\n			<span class="instanceList-item-number">'+f((u=t&&t.volume,typeof u===a?u.apply(t):u))+'</span>\n		</div>\n		<span class="instanceList-item-label">'+f((u=t&&t.name,typeof u===a?u.apply(t):u))+"</span>\n	</a>\n</li>\n\n",o},n.instanceListItem=e.template(t),t=function(e,t,n,r,i){function l(e,t,r){var i="",s;i+='\n		<li>\n			<a href="#" class="eniList-item '+a((s=e&&e.deleted,typeof s===u?s.apply(e):s))+'" id="'+a((s=e&&e.id,typeof s===u?s.apply(e):s))+"_"+a((s=t==null||t===!1?t:t.index,typeof s===u?s.apply(e):s))+'" data-id="'+a((s=e&&e.appId,typeof s===u?s.apply(e):s))+'">\n				<i class="eniList-item-eip-status',s=n["if"].call(e,r&&r.eip,{hash:{},inverse:f.noop,fn:f.program(2,c,t),data:t});if(s||s===0)i+=s;return i+='"></i>\n				<span class="eniList-item-label">'+a((s=e&&e.appId,typeof s===u?s.apply(e):s))+"</span>\n			</a>\n		</li>\n		",i}function c(e,t){return" on"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div id="eniList-wrap">\n	<div id="eniList-header">\n		<span id="eniList-title">'+a((o=t&&t.name,typeof o===u?o.apply(t):o))+'</span>\n		<a id="eniList-close" href="javascript:void(0)" onclick="MC.canvas.eniList.close()">&times;</a>\n	</div>\n	<ul id="eniList" class="clearfix">\n		',o=n.each.call(t,t,{hash:{},inverse:f.noop,fn:f.programWithDepth(1,l,i,t),data:i});if(o||o===0)s+=o;return s+="\n	</ul>\n</div>\n\n",s},n.eniList=e.template(t),t=function(e,t,n,r,i,s){function c(e,t){return" on"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var o="",u,a="function",f=this.escapeExpression,l=this;o+='<li>\n	<a href="#" class="eniList-item" id="'+f((u=t&&t.id,typeof u===a?u.apply(t):u))+"_"+f((u=i==null||i===!1?i:i.index,typeof u===a?u.apply(t):u))+'" data-id="'+f((u=t&&t.id,typeof u===a?u.apply(t):u))+'">\n		<i class="eniList-item-eip-status',u=n["if"].call(t,s&&s.eip,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(u||u===0)o+=u;return o+='"></i>\n		<span class="eniList-item-label">'+f((u=t&&t.name,typeof u===a?u.apply(t):u))+"</span>\n	</a>\n</li>\n\n",o},n.eniListItem=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div style="width:420px">\n	<div class="modal-header"> <h3>Set up CIDR Block</h3><i class="modal-close">&times;</i> </div>\n	<div class="modal-body">\n		<div class="modal-text-wraper"> <div class="modal-center-align-helper">\n			<div class="modal-text-major">'+a((o=t&&t.main_content,typeof o===u?o.apply(t):o))+'</div>\n			<div class="modal-text-minor">'+a((o=t&&t.desc_content,typeof o===u?o.apply(t):o))+'</div>\n		</div> </div>\n	</div>\n	<div class="modal-footer">\n		<a id="cidr-remove" class="link-red left link-modal-danger">'+a((o=t&&t.remove_content,typeof o===u?o.apply(t):o))+'</a>\n		<button id="cidr-return" class="btn modal-close btn-blue">OK</button>\n	</div>\n</div>\n\n',s},n.setupCIDRConfirm=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div class="modal-header"> <h3>Attach Network Interface to Instance</h3><i class="modal-close">&times;</i> </div>\n<div class="modal-body">\n	<div class="modal-center-align-helper">\n		<p>'+a((o=t&&t.host,typeof o===u?o.apply(t):o))+" has been automatically assigned Public IP.</p>\n		<p>If you want to attach the external network interface to "+a((o=t&&t.host,typeof o===u?o.apply(t):o))+", the Public IP must be removed.</p>\n		<p>Do you still want to attach "+a((o=t&&t.eni,typeof o===u?o.apply(t):o))+" to "+a((o=t&&t.host,typeof o===u?o.apply(t):o))+" and remove the Public IP?</p>\n	</div>\n</div>\n\n",s},n.modalAttachingEni=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;s+='<div style="width:420px">\n	',o=(o=t&&t.confirm,typeof o===u?o.apply(t):o);if(o||o===0)s+=o;return s+='\n	<div class="modal-footer">\n		<button class="btn modal-close btn-blue" id="canvas-op-confirm" style="width:200px;">'+a((o=t&&t.action,typeof o===u?o.apply(t):o))+'</button>\n		<button class="btn modal-close btn-silver">Cancel</button>\n	</div>\n</div>\n\n',s},n.modalCanvasConfirm=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div style="width:420px">\n	<div class="modal-header"> <h3>Stack Name Already in Use</h3><i class="modal-close">&times;</i> </div>\n	<div class="modal-body" style="min-height:120px;">\n		<div class="modal-text-wraper">\n			<div class="modal-center-align-helper">\n				<div class="modal-text-major">Stack name <span class="resource-name-label">'+a((o=t&&t.stack_name,typeof o===u?o.apply(t):o))+'</span> is already used by another stack. Please use a different name.</div>\n				<div class="modal-control-group modal-control-group-bg-blue" data-bind="true">\n					<label for="new-stack-name">Stack Name</label>\n					<input id="new-stack-name" class="input modal-input-value" type="text" value="'+a((o=t&&t.stack_name,typeof o===u?o.apply(t):o))+'" data-ignore="true">\n				</div>\n			</div>\n		</div>\n	</div>\n	<div class="modal-footer">\n		<button id="rename-confirm" class="btn btn-blue">Save</button>\n	</div>\n</div>\n\n',s},n.modalReinputStackName=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div style="width:420px">\n	<div class="modal-header"><h3 class="truncate" style="width: 380px;">Confirm to close '+a((o=t&&t.tab_name,typeof o===u?o.apply(t):o))+'</h3><i class="modal-close">&times;</i> </div>\n	<div class="modal-body">\n		<div class="modal-text-wraper"> <div class="modal-center-align-helper">\n			<div class="modal-text-major">'+a((o=t&&t.tab_name,typeof o===u?o.apply(t):o))+' has unsaved changes.</div>\n			<div class="modal-text-major">Do you confirm to close it?</div>\n		</div> </div>\n	</div>\n	<div class="modal-footer">\n		<button id="close-tab-confirm" class="btn btn-red" data-tab-id="'+a((o=t&&t.tab_id,typeof o===u?o.apply(t):o))+'">Close Tab</button>\n		<button class="btn modal-close btn-silver">Cancel</button>\n	</div>\n</div>\n\n',s},n.closeTabRestriction=e.template(t),t=function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div style="width:420px">\n	<div class="modal-header"><h3 class="truncate" style="width: 380px;">Changes not applied</h3><i class="modal-close">&times;</i> </div>\n	<div class="modal-body">\n		<div class="modal-text-wraper"> <div class="modal-center-align-helper">\n			<div class="modal-text-major">This app has been changed.</div>\n			<div class="modal-text-major">Do you conﬁrm to discard the changes?</div>\n		</div> </div>\n	</div>\n	<div class="modal-footer">\n		<button id="return-app-confirm" class="btn btn-red">Discard</button>\n		<button class="btn modal-close btn-silver">Cancel</button>\n	</div>\n</div>\n\n'},n.cancelAppEdit2App=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div style="width:420px">\n	<div class="modal-header"> <h3>'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+'</h3><i class="modal-close">&times;</i> </div>\n	<div class="modal-body">\n		<div class="modal-text-wraper">\n			 <div class="modal-center-align-helper">\n				<div class="modal-text-major">'+a((o=t&&t.main_content,typeof o===u?o.apply(t):o))+'</div>\n				<div class="modal-text-minor">'+a((o=t&&t.desc_content,typeof o===u?o.apply(t):o))+'</div>\n			</div>\n		 </div>\n	</div>\n	<div class="modal-footer">\n		<button id="modal-confirm-delete" class="btn btn-red">Delete</button>\n		<button id="modal-cancel" class="btn modal-close btn-silver">Cancel</button>\n	</div>\n</div>\n\n',s},n.modalDeleteSGOrACL=e.template(t),t=function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div id="loading-modal-wrap">\n	<div class="loading-modal" id="modal-box">\n		<div class="loading-spinner loading-spinner-mid"></div>\n		<div>Refreshing resources...</div>\n	</div>\n</div>\n\n'},n.loadingTransparent=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div style="width:420px">\n	<div class="modal-header"> <h3>'+a((o=t&&t.title,typeof o===u?o.apply(t):o))+'</h3><i class="modal-close">&times;</i> </div>\n	<div class="modal-body">\n		<div class="modal-text-wraper">\n			 <div class="modal-center-align-helper">\n				<div class="modal-text-major">'+a((o=t&&t.main_content,typeof o===u?o.apply(t):o))+'</div>\n				<div class="modal-text-minor">'+a((o=t&&t.desc_content,typeof o===u?o.apply(t):o))+'</div>\n			</div>\n		 </div>\n	</div>\n	<div class="modal-footer">\n		<button id="modal-confirm-delete" class="btn btn-red">Delete</button>\n		<button id="modal-cancel" class="btn modal-close btn-silver">Cancel</button>\n	</div>\n</div>\n\n',s},n.modalForceDeleteApp=e.template(t),t=function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div>\n	<div class="info">Last saved: <span class="stack-save-time">-<span></div>\n	<ul class="statusbar-btn-list">\n		<li class="statusbar-btn btn-state">\n			<span class="state-success"><i class="status status-green icon-label"></i><b>0</b></span>\n			<span class="state-failed"><i class="status status-red icon-label"></i><b>0</b></span>\n		</li>\n		<li class="statusbar-btn btn-ta-valid">Validate</li>\n	</ul>\n</div>\n\n'},n.statusbar=e.template(t),t=function(e,t,n,r,i){function l(e,t){var n="",r;return n+="\n				<li>"+a((r=e&&e.name,typeof r===u?r.apply(e):r))+"( "+a((r=e&&e.instance_id,typeof r===u?r.apply(e):r))+" )</li>\n				",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div style="width:420px">\n	<div class="modal-header"><h3 class="truncate" style="width: 380px;">Need to Restart Instance</h3><i class="modal-close">&times;</i> </div>\n	<div class="modal-body" style="height:150px;">\n		<div class="modal-text-wraper">\n			<div class="modal-text-major">To update the properties you have changed, following instances need to restart:</div>\n			<ul class="clearfix">\n				',o=n.each.call(t,t&&t.instance_list,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+='\n			</ul>\n			<div id="instance-type" class="modal-text-major"></div>\n		</div>\n	</div>\n	<div class="modal-footer">\n		<button id="confirm-update-app" class="btn btn-blue" style="width:160px;">Continue to Update</button>\n		<button class="btn modal-close btn-silver">Cancel</button>\n	</div>\n</div>\n\n',s},n.restartInstance=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="";return r+='\n		<h3 class="modal-text-major">'+u(n.i18n.call(e,"POP_CONFIRM_UPDATE_MAJOR_TEXT_RUNNING",{hash:{},data:t}))+"</h3>\n	",r}function c(e,t){var r="";return r+='\n		<h3 class="modal-text-major">'+u(n.i18n.call(e,"POP_CONFIRM_UPDATE_MAJOR_TEXT_STOPPED",{hash:{},data:t}))+'</h3>\n		<p class="modal-text-minor" style="margin-top:10px;">'+u(n.i18n.call(e,"POP_CONFIRM_UPDATE_MINOR_TEXT_STOPPED",{hash:{},data:t}))+"</p>\n	",r}function h(e,t){var r="",i;r+='\n		<table class="table-head-fix table app-update-summary-table-header" data-target="app-update-summary-table">\n			<thead> <tr class="header-row">\n				<th class="sortable active" width="30%">'+u(n.i18n.call(e,"POP_CONFIRM_UPDATE_TABLE_TYPE",{hash:{},data:t}))+'</th>\n				<th class="sortable" width="30%">'+u(n.i18n.call(e,"POP_CONFIRM_UPDATE_TABLE_NAME",{hash:{},data:t}))+'</th>\n				<th class="sortable" width="40%">'+u(n.i18n.call(e,"POP_CONFIRM_UPDATE_TABLE_CHANGE",{hash:{},data:t}))+'</th> </tr>\n			</thead>\n		</table>\n		<div class="scroll-wrap" style="max-height:256px;">\n			<div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n			<table class="table scroll-content" id="app-update-summary-table">\n				<tbody>\n				',i=n.each.call(e,e&&e.result,{hash:{},inverse:f.noop,fn:f.program(6,p,t),data:t});if(i||i===0)r+=i;return r+="\n				</tbody>\n			</table>\n		</div>\n	",r}function p(e,t){var r="",i;r+=' <tr>\n					<td width="30%">'+u((i=e&&e.type,typeof i===a?i.apply(e):i))+'</td>\n					<td width="30%">'+u((i=e&&e.name,typeof i===a?i.apply(e):i))+'</td>\n					<td width="40%">\n						',i=n.each.call(e,e&&e.changes,{hash:{},inverse:f.program(9,v,t),fn:f.program(7,d,t),data:t});if(i||i===0)r+=i;r+="\n						",i=n["if"].call(e,e&&e.extra,{hash:{},inverse:f.noop,fn:f.program(11,m,t),data:t});if(i||i===0)r+=i;r+="\n						",i=n["if"].call(e,e&&e.info,{hash:{},inverse:f.noop,fn:f.program(13,g,t),data:t});if(i||i===0)r+=i;return r+="</td>\n				</tr> ",r}function d(e,t){var n="",r;return n+='\n						<span class="au-summary-label au-summary-'+u((r=e&&e.name,typeof r===a?r.apply(e):r))+'">'+u((r=e&&e.info,typeof r===a?r.apply(e):r))+"</span>\n						",n}function v(e,t){var n="",r;return n+='\n						<span class="au-summary-label au-summary-'+u((r=e&&e.change,typeof r===a?r.apply(e):r))+'">'+u((r=e&&e.change,typeof r===a?r.apply(e):r))+"</span>\n						",n}function m(e,t){var n="",r;return n+='<p class="au-summary-extra">'+u((r=e&&e.extra,typeof r===a?r.apply(e):r))+"</p>",n}function g(e,t){var n="",r;return n+='<span class="tooltip icon-warning" data-tooltip="'+u((r=e&&e.info,typeof r===a?r.apply(e):r))+'"></span>',n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+='<div id="app-apply-update" style="width:460px">\n	<div class="modal-header"><h3 class="truncate" style="width: 380px;">'+u(n.i18n.call(t,"POP_CONFIRM_UPDATE_TIT",{hash:{},data:i}))+'</h3><i class="modal-close">&times;</i> </div>\n	<div class="modal-body">\n	',o=n["if"].call(t,t&&t.isRunning,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+="\n	",o=n["if"].call(t,(o=t&&t.result,o==null||o===!1?o:o.length),{hash:{},inverse:f.noop,fn:f.program(5,h,i),data:i});if(o||o===0)s+=o;return s+='\n		<div class="stack-validation">\n			<details open style="display:none;">\n				<summary>'+u(n.i18n.call(t,"POP_CONFIRM_UPDATE_VALIDATION",{hash:{},data:i}))+'</summary>\n				<div id="stack-run-validation-container"></div>\n			</details>\n			<div class="nutshell" style="display: none;">:<label></label></div>\n			<div class="validating">\n				<div class="loading-spinner loading-spinner-small"></div>\n				<p>'+u(n.i18n.call(t,"POP_CONFIRM_UPDATE_VALIDATING",{hash:{},data:i}))+'</p>\n			</div>\n		</div>\n	</div>\n	<div class="modal-footer">\n		<button id="confirm-update-app" class="btn btn-blue" style="width:160px;" disabled>'+u(n.i18n.call(t,"POP_CONFIRM_UPDATE_CONFIRM_BTN",{hash:{},data:i}))+'</button>\n		<button class="btn modal-close btn-silver">'+u(n.i18n.call(t,"POP_CONFIRM_UPDATE_CANCEL_BTN",{hash:{},data:i}))+"</button>\n	</div>\n</div>\n\n",s},n.updateApp=e.template(t),t=function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="overlay-content-wrap">\n	<div class="overlay-text">Oops! There has been some issue loading the tab.</div>\n	<button class="btn btn-blue" id="btn-fail-reload">Reload</button>\n</div>\n\n'},n.openTabFail=e.template(t),t=function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="overlay-content-wrap">\n	<div class="overlay-text">Starting app...</div>\n	<div class="loading-spinner"></div>\n</div>\n\n'},n.appStarting=e.template(t),t=function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="overlay-content-wrap">\n	<div class="overlay-text">Stopping app...</div>\n	<div class="loading-spinner"></div>\n</div>\n\n'},n.appStopping=e.template(t),t=function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="overlay-content-wrap">\n	<div class="overlay-text">Terminating app...</div>\n	<div class="loading-spinner"></div>\n</div>\n\n'},n.appTerminating=e.template(t),t=function(e,t,n,r,i){function l(e,t){var n="",r;return n+='\n	<div class="progress">\n		<div class="bar" id="progress_bar" style="width: '+a((r=e&&e.rate,typeof r===u?r.apply(e):r))+'%;"></div>\n	</div>\n	<p class="process-info">\n		<span><b class="num" id="progress_num">'+a((r=e&&e.dones,typeof r===u?r.apply(e):r))+'</b> of</span>\n		<span><b class="total" id="progress_total">'+a((r=e&&e.steps,typeof r===u?r.apply(e):r))+"</b> tasks</span>\n	</p>\n	",n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div class="overlay-content-wrap">\n	<div class="overlay-text">Updating app...</div>\n	<div class="loading-spinner"></div>\n	',o=n["if"].call(t,t&&t.is_show,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n</div>\n\n",s},n.appUpdating=e.template(t),t=function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="overlay-content-wrap">\n	<div class="overlay-text">App has updated successfully.</div>\n	<button class="btn btn-blue" id="btn-updated-success">Done</button>\n</div>\n\n'},n.appUpdatedSuccess=e.template(t),t=function(e,t,n,r,i){function l(e,t){var r="",i;r+='\n	<div class="error-info-block">\n		<div class="result-sub-title">'+u(n.i18n.call(e,"PROC_RLT_FAILED_SUB_TITLE",{hash:{},data:t}))+'</div>\n		<div class="result-error-info">\n			<p class="title">'+u(n.i18n.call(e,"PROC_ERR_INFO",{hash:{},data:t}))+'</p>\n			<p class="detail">',i=(i=e&&e.detail,typeof i===a?i.apply(e):i);if(i||i===0)r+=i;r+="</p>\n		</div>\n		",i=n["if"].call(e,e&&e.update_detail,{hash:{},inverse:f.noop,fn:f.program(2,c,t),data:t});if(i||i===0)r+=i;return r+="\n	</div>\n	",r}function c(e,t){return'\n		<div class="result-error-notice">The state of your app has been rolled back, except for the already deleted resources.</div>\n		'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function",f=this;s+='<div class="overlay-content-wrap app-change-fail">\n	<div class="overlay-text">Oops! The app failed to '+u((o=t&&t.state,typeof o===a?o.apply(t):o))+".</div>\n	",o=n["if"].call(t,t&&t.is_show,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+='\n	<button class="btn btn-silver" id="btn-changedfail">Done</button>\n</div>\n\n',s},n.appChangedfail=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div id="node-action-wrap">\n	<div id="node-action-state">\n		<div id="node-action-state-btn">\n			<i id="node-state-icon"></i>\n			<span id="node-state-number">'+a((o=t&&t.state_num,typeof o===u?o.apply(t):o))+'</span>\n		</div>\n		<div class="node-action-tooltip">Edit State</div>\n	</div>\n</div>\n\n',s},n.nodeAction=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<div id="modal-instance-sys-log" style="width: 900px;">\n	<div class="modal-header"><h3>System Log: '+a((o=t&&t.instance_id,typeof o===u?o.apply(t):o))+'</h3><i class="modal-close">&times;</i> </div>\n	<div class="modal-body">\n		<section class="instance-sys-log-loading loading-spinner"></section>\n		<div class="instance-sys-log-content font-mono">'+a((o=t&&t.log_content,typeof o===u?o.apply(t):o))+'</div>\n		<div class="instance-sys-log-info modal-text-minor">System log is not ready yet. Please try in a short while.</div>\n	</div>\n	<div class="modal-footer">\n		<button id="modal-instance-sys-log-cancel" class="btn modal-close btn-silver">Close</button>\n	</div>\n</div>\n\n',s},n.modalInstanceSysLog=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+="Are you sure you want to delete "+a((o=t&&t.name,typeof o===u?o.apply(t):o))+'?</div>\n<div class="modal-text-minor">Once deleted, the states of '+a((o=t&&t.name,typeof o===u?o.apply(t):o))+"'s configuration will be lost.</div>\n\n",s},n.NodeStateRemoveConfirmation=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+="Are you sure you want to delete "+a((o=t&&t.name,typeof o===u?o.apply(t):o))+'?</div>\n<div class="modal-text-minor">The security group '+a((o=t&&t.sg,typeof o===u?o.apply(t):o))+" will also be deleted. Other load balancer using this security group will be affected.</div>\n\n",s},n.ElbRemoveConfirmation=e.template(t),t=function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div style="width:420px">\n	<div class="modal-header"><h3>Conﬁrm to Enable VisualOps</h3><i class="modal-close">&times;</i></div>\n	<div class="modal-body">\n		<div class="modal-text-wraper">\n			<div class="modal-center-align-helper">\n				<div class="modal-text-major">Enable VisualOps will override your custom User Data. Are you sure to continue?</div>\n			</div>\n		</div>\n	</div>\n	<div class="modal-footer">\n		<button id="modal-stack-agent-enable-confirm" style="width:145px;" class="btn modal-confirm btn-blue">Enable VisualOps</button>\n		<button id="modal-stack-agent-enable-cancel" class="btn modal-close btn-silver">Cancel</button>\n	</div>\n</div>\n\n'},n.modalStackAgentEnable=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o=this.escapeExpression;return s+='<div style="width:640px" id="modal-key-short">\n	<div class="modal-header"><h3>'+o(n.i18n.call(t,"KEY_MOD_TIT",{hash:{},data:i}))+'</h3><i class="modal-close">&times;</i></div>\n	<div class="modal-body scroll-wrap">\n		<div class="scrollbar-veritical-wrap"><div class="scrollbar-veritical-thumb"></div></div>\n		<div class="scroll-content" style="height: 560px">\n			<section class="key-stack-app">\n				<h3 class="title">'+o(n.i18n.call(t,"KEY_TIT_STACK_APP_OP",{hash:{},data:i}))+'</h3>\n				<ul class="keys">\n					<li class="key-item">\n						<div class="key font-mono">'+o(n.i18n.call(t,"KEY_PROP_KEY",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_PROP_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key font-mono">'+o(n.i18n.call(t,"KEY_STAT_KEY",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_STAT_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_DUPL_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_DUPL_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_DUPL_ACTION",{hash:{},data:i}))+'\n						</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_DEL_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_DEL_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_DEL_ACTION",{hash:{},data:i}))+'\n						</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_SAVE_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_SAVE_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_SAVE_ACTION",{hash:{},data:i}))+'\n						</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_SCRL_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_SCRL_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_SCRL_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n				</ul>\n			</section>\n			<section class="key-state">\n				<h3 class="title">'+o(n.i18n.call(t,"KEY_TIT_STATE_GEN",{hash:{},data:i}))+'</h3>\n				<ul class="keys">\n					<li class="key-item">\n						<div class="key font-mono">'+o(n.i18n.call(t,"KEY_FOCUS_KEY",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_FOCUS_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key font-mono">'+o(n.i18n.call(t,"KEY_SELECT_KEY",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_SELECT_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key font-mono">'+o(n.i18n.call(t,"KEY_EXPAND_KEY",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_EXPAND_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key font-mono">'+o(n.i18n.call(t,"KEY_COLLAPSE_KEY",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_COLLAPSE_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key font-mono">'+o(n.i18n.call(t,"KEY_NEXT_KEY",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_NEXT_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key font-mono">'+o(n.i18n.call(t,"KEY_PREV_KEY",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_PREV_ACTION",{hash:{},data:i}))+'\n						</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_INFO_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_INFO_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_INFO_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_LOG_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_LOG_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_LOG_ACTION",{hash:{},data:i}))+'\n						</div>\n					</li>\n				</ul>\n			</section>\n			<section class="key-state-edit">\n				<h3 class="title">'+o(n.i18n.call(t,"KEY_TIT_STATE_EDIT",{hash:{},data:i}))+'</h3>\n				<ul class="keys">\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_SELECT_ALL_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_SELECT_ALL_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_SELECT_ALL_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_DESELECT_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_DESELECT_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_DESELECT_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_CREATE_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_CREATE_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_CREATE_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_DEL_STATE_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_DEL_STATE_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_DEL_STATE_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_MOVE_FOCUS_STATE_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_MOVE_FOCUS_STATE_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_MOVE_FOCUS_STATE_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_COPY_STATE_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_COPY_STATE_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_COPY_STATE_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_PASTE_STATE_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_PASTE_STATE_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_PASTE_STATE_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_UNDO_STATE_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_UNDO_STATE_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_UNDO_STATE_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n					<li class="key-item">\n						<div class="key mac font-mono">'+o(n.i18n.call(t,"KEY_REDO_STATE_KEY_MAC",{hash:{},data:i}))+'</div>\n						<div class="key pc font-mono">'+o(n.i18n.call(t,"KEY_REDO_STATE_KEY_PC",{hash:{},data:i}))+'</div>\n						<div class="action">'+o(n.i18n.call(t,"KEY_REDO_STATE_ACTION",{hash:{},data:i}))+'</div>\n					</li>\n				</ul>\n			</section>\n		</div>\n	</div>\n	<div class="modal-footer">\n		<button class="btn modal-close btn-silver">'+o(n.i18n.call(t,"KEY_MODAL_BTN_CLOSE",{hash:{},data:i}))+"</button>\n	</div>\n</div>\n\n",s},n.shortkey=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this.escapeExpression,a="function";return s+='<div style="width:343px" id="modal-ssl-cert-setting">\n	<div class="modal-header"><h3>Server Certiﬁcate</h3><i class="modal-close">&times;</i> </div>\n	<div class="modal-body" style="min-height:120px;">\n		<div class="modal-ssl-cert-item clearfix">\n			<label class="left">'+u(n.i18n.call(t,"PROP_ELB_LBL_LISTENER_NAME",{hash:{},data:i}))+'</label>\n			<input class="input" value="'+u((o=(o=t&&t.sslCert,o==null||o===!1?o:o.name),typeof o===a?o.apply(t):o))+'" type="text" data-required="true" data-ignore="true" id="elb-ssl-cert-name-input"/>\n		</div>\n		<div class="modal-ssl-cert-item clearfix">\n			<label class="left">'+u(n.i18n.call(t,"PROP_ELB_LBL_LISTENER_PRIVATE_KEY",{hash:{},data:i}))+'</label>\n			<textarea class="input elb-ssl-cert-input tooltip" data-tooltip="'+u(n.i18n.call(t,"POP_TIP_PEM_ENCODED",{hash:{},data:i}))+'" data-required="true" data-ignore="true" id="elb-ssl-cert-privatekey-input">'+u((o=(o=t&&t.sslCert,o==null||o===!1?o:o.key),typeof o===a?o.apply(t):o))+'</textarea>\n		</div>\n		<div class="modal-ssl-cert-item clearfix">\n			<label class="left"  >'+u(n.i18n.call(t,"PROP_ELB_LBL_LISTENER_PUBLIC_KEY",{hash:{},data:i}))+'</label>\n			<textarea class="input elb-ssl-cert-input tooltip" data-tooltip="'+u(n.i18n.call(t,"POP_TIP_PEM_ENCODED",{hash:{},data:i}))+'" data-required="true" data-ignore="true" id="elb-ssl-cert-publickey-input">'+u((o=(o=t&&t.sslCert,o==null||o===!1?o:o.body),typeof o===a?o.apply(t):o))+'</textarea>\n		</div>\n		<div class="modal-ssl-cert-item clearfix">\n			<label class="left"  >'+u(n.i18n.call(t,"PROP_ELB_LBL_LISTENER_CERTIFICATE_CHAIN",{hash:{},data:i}))+'</label>\n			<textarea class="input elb-ssl-cert-input tooltip" data-tooltip="'+u(n.i18n.call(t,"POP_TIP_PEM_ENCODED",{hash:{},data:i}))+'" id="elb-ssl-cert-chain-input">'+u((o=(o=t&&t.sslCert,o==null||o===!1?o:o.chain),typeof o===a?o.apply(t):o))+'</textarea>\n		</div>\n	</div>\n	<div class="modal-footer">\n		<button id="elb-ssl-cert-confirm" class="btn btn-blue">Save</button>\n		<button id="elb-ssl-cert-cancel" class="btn modal-close btn-silver">Cancel</button>\n	</div>\n</div>\n\n',s},n.modalSSLCertSetting=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o=this.escapeExpression;return s+='<div style="width:623px" id="experimental-modal">\n	<div class="modal-header">\n		<h3>'+o(n.i18n.call(t,"INVITE_MOD_TIT",{hash:{},data:i}))+'</h3>\n		<i class="modal-close">×</i>\n	</div>\n	<div class="modal-body">\n		<h3 class="modal-body-header">'+o(n.i18n.call(t,"INVITE_MOD_INTRO",{hash:{},data:i}))+'</h3>\n		<div class="modal-body-content">\n			<div class="modal-text-minor">'+o(n.i18n.call(t,"INVITE_MOD_INTRO_MORE",{hash:{},data:i}))+'</div>\n			<h4 class="request-invite-header">'+o(n.i18n.call(t,"INVITE_MOD_REQUEST_TIT",{hash:{},data:i}))+'</h4>\n			<div class="request-invite-content">'+o(n.i18n.call(t,"INVITE_MOD_REQUEST_CONTENT",{hash:{},data:i}))+'</div>\n			<textarea id="experimental-message" class="input" style="width:95%;height:120px;" placeholder=\''+o(n.i18n.call(t,"INVITE_MOD_REQUEST_PLACEHOLDER",{hash:{},data:i}))+'\' data-required="true"></textarea>\n		</div>\n	</div>\n	<div class="modal-footer">\n		<button id="experimental-visops-confirm" class="btn btn-blue">'+o(n.i18n.call(t,"INVITE_MOD_BTN_REQUEST",{hash:{},data:i}))+'</button>\n		<button id="experimental-visops-cancel" class="btn modal-close btn-silver">'+o(n.i18n.call(t,"INVITE_MOD_BTN_CANCEL",{hash:{},data:i}))+"</button>\n	</div>\n</div>\n\n",s},n.experimentalVisops=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o=this.escapeExpression;return s+='<h3 class="modal-body-header">'+o(n.i18n.call(t,"INVITE_MOD_THANK_LBL",{hash:{},data:i}))+'</h3>\n<div class="modal-text-major tac">'+o(n.i18n.call(t,"INVITE_MOD_THANK_MORE",{hash:{},data:i}))+"</div>\n\n",s},n.experimentalVisopsTrail=e.template(t),t=function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="bubble-head">A NAT instance must meet following requirements:</div>\n<div class="bubble-content">\n	<ul class="bubble-NAT-req-list">\n		<li>Should have a route targeting the instance itself with destination to 0.0.0.0/0.</li>\n		<li>Should belong to a subnet which routes traffic with destination 0.0.0.0/0 to Internet Gateway.</li>\n		<li>Should disable Source/Destination Checking in "Network Interface Details".</li>\n		<li>Should have public IP or Elastic IP.</li>\n		<li>Should have outbound rule to the outside.</li>\n		<li>Should have inbound rule from within the VPC.</li>\n	</ul>\n</div>\n\n'},n.bubbleNATreq=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o=this.escapeExpression;return s+=o(n.nl2br.call(t,t&&t.content,{hash:{},data:i}))+"\n\n",s},n.covertNl2br=e.template(t),t=function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o=this.escapeExpression;return s+=o(n.breaklines.call(t,t&&t.content,{hash:{},data:i}))+"\n\n",s},n.convertBreaklines=e.template(t),t=function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div id="system-notice">\n	<span>\n		<b>Notice: </b>We will drop the support for <em>EC2 Classic</em> and <em>Default VPC</em> soon, and focus on VPC, which is recommended for everyone.\n		<a href="http://blog.visualops.io/2014/02/18/vpc-always-forget-about-the-rest/" class="notice-btn" target="_blank">Learn more</a>\n	</span>\n	<a class="notice-close" href="javascript:void(0)" id="system-notice-close">x</a>\n</div>\n'},n.systemNotice=e.template(t),n}),function(){define("lib/handlebarhelpers",["handlebars","i18n!nls/lang.js"],function(e,t){return e.registerHelper("i18n",function(n){var r;return r=t.ide[n],r=r||"undefined",new e.SafeString(r)}),e.registerHelper("tolower",function(t){return new e.SafeString(t.toLowerCase())}),e.registerHelper("emptyStr",function(t){return t===""||t===void 0||t===null?"-":new e.SafeString(t)}),e.registerHelper("UTC",function(t){return new e.SafeString((new Date(t)).toUTCString())}),e.registerHelper("breaklines",function(t){return t=e.Utils.escapeExpression(t),t=t.replace(/(\r\n|\n|\r)/gm,"<br>"),new e.SafeString(t)}),e.registerHelper("nl2br",function(t){var n;return n=(t+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2"),new e.SafeString(n)}),e.registerHelper("ifCond",function(e,t,n){return e===t?n.fn(this):n.inverse(this)}),e.registerHelper("timeStr",function(t){var n;return n=new Date(t),isNaN(Date.parse(t))||!n.toLocaleDateString||!n.toTimeString?t?new e.SafeString(t):"-":(n=new Date(t),n.toLocaleDateString()+" "+n.toTimeString())}),e.registerHelper("plusone",function(e){return e=parseInt(e,10),isNaN(e)?e:""+(e+1)}),null})}.call(this);var MC={DOMAIN:window.MC_DOMAIN,API_HOST:window.MC_PROTO+"://api."+window.MC_DOMAIN,IMG_URL:"./assets/images/",current_module:{},_extractIDRegex:/^\s*?@?{?([-A-Z0-9a-z]+)}?/,data:{},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)}).toUpperCase()},isJSON:function(e){var t=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,r=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,i=/(?:^|:|,)(?:\s*\[)+/g;return typeof e=="string"&&e.trim()!==""?t.test(e.replace(n,"@").replace(r,"]").replace(i,"")):!1},api_queue:{},api:function(e){$.ajax({url:MC.API_HOST+e.url,dataType:"json",type:"POST",data:JSON.stringify({jsonrpc:"2.0",id:MC.guid(),method:e.method||"",params:e.data||{}}),success:function(t){e.success(t.result[1],t.result[0])},error:function(t,n,r){e.error(n,-1)}})},browserDetect:function(){var e=/(webkit|firefox|opera|msie|ipad|iphone|android)/ig,t=navigator.userAgent.toLowerCase(),n=$(document.body),r,i;return e.exec(t),r=RegExp.$1,n.addClass(r),r==="webkit"&&/version\/([0-9])\.([0-9\.]*) safari/ig.exec(t)!==null&&(n.addClass("safari"),r="safari",i=/version\/([0-9])\.([0-9\.]*) safari/ig.exec(t)[1]),r==="webkit"&&/chrome\/([0-9]{1,2})/ig.exec(t)!==null&&(n.addClass("chrome"),r="chrome",i=/chrome\/([0-9]{1,2})/ig.exec(t)[1]),r==="opera"&&/version\/([0-9]{1,2})/ig.exec(t)!==null&&(n.addClass("opera"),r="opera",i=/version\/([0-9]{1,2})/ig.exec(t)[1]),r==="firefox"&&/firefox\/([0-9]{1,2})/ig.exec(t)&&(i=/firefox\/([0-9]{1,2})/ig.exec(t)[1]),r==="msie"&&/msie ([0-9]{1,2})/ig.exec(t)&&(i=/msie ([0-9]{1,2})/ig.exec(t)[1]),i*=1,MC.browser=r,MC.browserVersion=i,{browser:r,version:i}},isSupport:function(){var e=MC.browserDetect(),t=e.browser,n=e.version;return t==="chrome"&&n>=10||t==="safari"&&n>=6||t==="msie"&&n>=10||t==="firefox"&&n>=4||t==="opera"&&n>=10||/trident\/7\.0/ig.test(navigator.userAgent.toLowerCase())?!0:!1},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},canvasName:function(e){return e.length>17?e.substring(0,14)+"...":e},asgName:function(e){return e.length>15?e.substring(0,12)+"...":e},truncate:function(e,t){return e.length>t?e.substring(0,t-3)+"...":e},leftPadString:function(e,t,n){return e.length>=t?e:(new Array(t-e.length+1)).join(n)+e},rightPadString:function(e,t,n){return e.length>=t?e:e+(new Array(t-e.length+1)).join(n)},extractID:function(e){if(!e)return"";var t=MC._extractIDRegex.exec(e);return t?t[1]:e},titleNotification:function(e){var t=/\([0-9]*\)/ig;return e>0?document.title=document.title.match(t)?document.title.replace(t,"("+e+")"):"("+e+") "+document.title:document.title=document.title.replace(t,""),!0},numberFormat:function(e){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var t=isFinite(+e)?+e:0,n=0,r=",",i=".",s="",o=function(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n};return s=(n?o(t,n):""+Math.round(t)).split("."),s[0].length>3&&(s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,r)),(s[1]||"").length<n&&(s[1]=s[1]||"",s[1]+=[n-s[1].length+1].join("0")),s.join(i)},dateFormat:function(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()},r;/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(r in n)(new RegExp("("+r+")")).test(t)&&(t=t.replace(RegExp.$1,RegExp.$1.length===1?n[r]:("00"+n[r]).substr((""+n[r]).length)));return t},intervalDate:function(e){var t=new Date,e=e*1e3,n=(t.getTime()-e)/1e3,r=Math.floor(n/86400),i=Math.floor(n/3600),s=Math.floor(n/60);return r>30?MC.dateFormat(new Date(e),"dd/MM yyyy"):r>0?r+" days ago":i>0?i+" hours ago":s>0?s+" minutes ago":"just now"},timestamp:function(e,t,n){if($.type(e)==="date"&&$.type(t)==="date"){var r=1;switch(n){case"s":r=1e3;break;case"m":r=6e4;break;case"h":r=36e5;break;case"d":r=864e5;break;default:r=1e3}return parseInt((t.getTime()-e.getTime())/parseInt(r))}console.error("variable is type date",e,t,n)},rand:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},base64Encode:function(e){return window.btoa(unescape(encodeURIComponent(e)))},base64Decode:function(e){return decodeURIComponent(escape(window.atob(e)))},log:function(e,t,n){if(MC.current_module!==e)return;console[t]("[",e,"]",n)},camelCase:function(e){return e.replace(/-([a-z])/ig,function(e,t){return(t+"").toUpperCase()})},getBoolean:function(e){return e==="true"||e==="True"?!0:e==="false"||e==="False"?!1:!!e}},storage=function(e){return{set:function(t,n){e[t]=typeof n=="object"?JSON.stringify(n):n},get:function(t){var n=e[t];return MC.isJSON(n)?JSON.parse(n):n||""},remove:function(t){return e.removeItem(t),!0},clear:function(){e.clear()}}};MC.storage=storage(localStorage),MC.session=storage(sessionStorage),MC.cacheForDev=function(e,t,n){return!1},define("MC",["ui/MC.template","lib/handlebarhelpers","jquery","sprintf"],function(e){var t=function(){return!0},n=function(){return!1};return function(){jQuery.extend({xml2json:function e(t){var n={},r,i,s,o,u,a;for(u in t.childNodes){s=t.childNodes[u];if(s.nodeType===1){o=s.hasChildNodes()?e(s):s.nodevalue,o=o==null?null:o,s.nodeName!=="item"&&s.nodeName!=="member"||!o.value?s.nextElementSibling&&s.nextElementSibling.nodeName===s.nodeName||s.nodeName==="item"||s.nodeName==="member"?($.type(n[s.nodeName])==="undefined"&&(n[s.nodeName]=[]),$.isEmptyObject(o)||n[s.nodeName].push(o)):s.previousElementSibling&&s.previousElementSibling.nodeName===s.nodeName?$.isEmptyObject(o)||n[s.nodeName].push(o):n[s.nodeName]=o:o.key?($.type(n)!=="object"&&(n={}),$.isEmptyObject(o)||(n[o.key]=o.value)):($.type(n)!=="array"&&(n=[]),$.isEmptyObject(o)||n.push(o.value));if(s.attributes.length>0){n[s.nodeName]["@attributes"]={};for(a in s.attributes)r=s.attributes.item(a),n[s.nodeName]["@attributes"][r.nodeName]=r.nodeValue}if(s.childElementCount===0&&s.textContent!=null&&s.textContent!==""){i=s.textContent.trim();switch(i.toLowerCase()){case"true":i=!0;break;case"false":i=!1}n[s.nodeName]instanceof Array?n[s.nodeName].push(i):n[s.nodeName]=i}}}return n}})}(),function(e){function t(e){return e}function n(e){return decodeURIComponent(e.replace(i," "))}function r(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return s.json?JSON.parse(e):e}catch(t){}}var i=/\+/g,s=e.cookie=function(i,o,u){if(void 0!==o){u=e.extend({},s.defaults,u);if("number"==typeof u.expires){var a=u.expires,f=u.expires=new Date;f.setDate(f.getDate()+a)}return o=s.json?JSON.stringify(o):String(o),document.cookie=[s.raw?i:encodeURIComponent(i),"=",s.raw?o:encodeURIComponent(o),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join("")}o=s.raw?t:n,u=document.cookie.split("; ");for(var a=i?void 0:{},f=0,l=u.length;f<l;f++){var c=u[f].split("="),h=o(c.shift()),c=o(c.join("="));if(i&&i===h){a=r(c);break}i||(a[h]=r(c))}return a};s.defaults={},e.removeCookie=function(t,n){return void 0!==e.cookie(t)?(e.cookie(t,"",e.extend({},n,{expires:-1})),!0):!1}}(jQuery),$(document).ready(function(){var e=$.cookie("lang");e===undefined&&(e=navigator.language?navigator.language:navigator.browserLanguage,e=e.replace(/-[\w]*/ig,""),e==="zh"?e="zh-cn":e==="en"?e="en-us":e="en-us"),$(document.body).addClass("locale-"+e),navigator.platform.toLowerCase().indexOf("mac")>=0&&$(document.body).addClass("mac"),MC.browserDetect()}),MC.template=e,MC}),function(){define("constant",["MC","i18n!nls/lang.js"],function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A;return s={"AWS.EC2.AvailabilityZone":"ZoneName","AWS.EC2.Instance":"InstanceId","AWS.EC2.KeyPair":"KeyFingerprint","AWS.EC2.SecurityGroup":"GroupId","AWS.EC2.EIP":"PublicIp","AWS.EC2.AMI":"ImageId","AWS.EC2.EBS.Volume":"VolumeId","AWS.ELB":"LoadBalancerName","AWS.VPC.VPC":"VpcId","AWS.VPC.Subnet":"SubnetId","AWS.VPC.InternetGateway":"InternetGatewayId","AWS.VPC.RouteTable":"RouteTableId","AWS.VPC.VPNGateway":"VpnGatewayId","AWS.VPC.CustomerGateway":"CustomerGatewayId","AWS.VPC.NetworkInterface":"NetworkInterfaceId","AWS.VPC.DhcpOptions":"DhcpOptionsId","AWS.VPC.VPNConnection":"VpnConnectionId","AWS.VPC.NetworkAcl":"NetworkAclId","AWS.IAM.ServerCertificate":"","AWS.AutoScaling.Group":"AutoScalingGroupARN","AWS.AutoScaling.LaunchConfiguration":"LaunchConfigurationARN","AWS.AutoScaling.NotificationConfiguration":"","AWS.AutoScaling.ScalingPolicy":"PolicyARN","AWS.AutoScaling.ScheduledActions":"ScheduledActionARN","AWS.CloudWatch.CloudWatch":"AlarmArn","AWS.SNS.Subscription":"","AWS.SNS.Topic":""},u={AWS_EC2_AvailabilityZone:"AWS.EC2.AvailabilityZone",AWS_EC2_Instance:"AWS.EC2.Instance",AWS_EC2_KeyPair:"AWS.EC2.KeyPair",AWS_EC2_SecurityGroup:"AWS.EC2.SecurityGroup",AWS_EC2_EIP:"AWS.EC2.EIP",AWS_EC2_AMI:"AWS.EC2.AMI",AWS_EBS_Volume:"AWS.EC2.EBS.Volume",AWS_EBS_Snapshot:"AWS.EC2.EBS.Snapshot",AWS_ELB:"AWS.ELB",AWS_VPC_VPC:"AWS.VPC.VPC",AWS_VPC_Subnet:"AWS.VPC.Subnet",AWS_VPC_InternetGateway:"AWS.VPC.InternetGateway",AWS_VPC_RouteTable:"AWS.VPC.RouteTable",AWS_VPC_VPNGateway:"AWS.VPC.VPNGateway",AWS_VPC_CustomerGateway:"AWS.VPC.CustomerGateway",AWS_VPC_NetworkInterface:"AWS.VPC.NetworkInterface",AWS_VPC_DhcpOptions:"AWS.VPC.DhcpOptions",AWS_VPC_VPNConnection:"AWS.VPC.VPNConnection",AWS_VPC_NetworkAcl:"AWS.VPC.NetworkAcl",AWS_IAM_ServerCertificate:"AWS.IAM.ServerCertificate",AWS_AutoScaling_Group:"AWS.AutoScaling.Group",AWS_AutoScaling_LaunchConfiguration:"AWS.AutoScaling.LaunchConfiguration",AWS_AutoScaling_NotificationConfiguration:"AWS.AutoScaling.NotificationConfiguration",AWS_AutoScaling_ScalingPolicy:"AWS.AutoScaling.ScalingPolicy",AWS_AutoScaling_ScheduledActions:"AWS.AutoScaling.ScheduledActions",AWS_CloudWatch_CloudWatch:"AWS.CloudWatch.CloudWatch",AWS_SNS_Subscription:"AWS.SNS.Subscription",AWS_SNS_Topic:"AWS.SNS.Topic"},N={AZ:"AWS.EC2.AvailabilityZone",INSTANCE:"AWS.EC2.Instance",KP:"AWS.EC2.KeyPair",SG:"AWS.EC2.SecurityGroup",EIP:"AWS.EC2.EIP",AMI:"AWS.EC2.AMI",VOL:"AWS.EC2.EBS.Volume",SNAP:"AWS.EC2.EBS.Snapshot",ELB:"AWS.ELB",VPC:"AWS.VPC.VPC",SUBNET:"AWS.VPC.Subnet",IGW:"AWS.VPC.InternetGateway",RT:"AWS.VPC.RouteTable",VGW:"AWS.VPC.VPNGateway",CGW:"AWS.VPC.CustomerGateway",ENI:"AWS.VPC.NetworkInterface",DHCP:"AWS.VPC.DhcpOptions",VPN:"AWS.VPC.VPNConnection",ACL:"AWS.VPC.NetworkAcl",IAM:"AWS.IAM.ServerCertificate",ASG:"AWS.AutoScaling.Group",LC:"AWS.AutoScaling.LaunchConfiguration",NC:"AWS.AutoScaling.NotificationConfiguration",SP:"AWS.AutoScaling.ScalingPolicy",SA:"AWS.AutoScaling.ScheduledActions",CW:"AWS.CloudWatch.CloudWatch",SUBSCRIPTION:"AWS.SNS.Subscription",TOPIC:"AWS.SNS.Topic"},o={AWS_EC2_AvailabilityZone:"az",AWS_EC2_Instance:"instance",AWS_EC2_KeyPair:"kp",AWS_EC2_SecurityGroup:"sg",AWS_EC2_EIP:"eip",AWS_EC2_AMI:"ami",AWS_EBS_Volume:"vol",AWS_EBS_Snapshot:"snap",AWS_ELB:"elb",AWS_VPC_VPC:"vpc",AWS_VPC_Subnet:"subnet",AWS_VPC_InternetGateway:"igw",AWS_VPC_RouteTable:"rtb",AWS_VPC_VPNGateway:"vgw",AWS_VPC_CustomerGateway:"cgw",AWS_VPC_NetworkInterface:"eni",AWS_VPC_DhcpOptions:"dhcp",AWS_VPC_VPNConnection:"vpn",AWS_VPC_NetworkAcl:"acl",AWS_IAM_ServerCertificate:"iam",AWS_AutoScaling_Group:"asg",AWS_AutoScaling_LaunchConfiguration:"asl_lc",AWS_AutoScaling_NotificationConfiguration:"asl_nc",AWS_AutoScaling_ScalingPolicy:"asl_sp",AWS_AutoScaling_ScheduledActions:"asl_sa",AWS_CloudWatch_CloudWatch:"clw",AWS_SNS_Subscription:"sns_sub",AWS_SNS_Topic:"sns_top"},r={INSTANCE_SG:"instance_sg",INSTANCE_ATTACH:"instance_attach",ELB_SG_IN:"elb_sg_in",ELB_SG_OUT:"elb_sg_out",ELB_ATTACH:"elb_attach",SUBNET_ATTACH:"subnet_attach",SUBNET_ACL:"subnet_acl",RTB_SRC:"rtb_src",RTB_TGT_LEFT:"rtb_tgt_left",RTB_TGT_RIGHT:"rtb_tgt_right",IGW_TGT:"igw_tgt",VGW_TGT:"vgw_tgt",VGW_VPN:"vgw_vpn",CGW_VPN:"cgw_vpn",ENI_ATTACH:"eni_attach",ENI_SG:"eni_sg"},m={WINDOWS:"windows",AMAZON:"amazon",REDHAT:"redhat",CENTOS:"centos",FEDORA:"fedora",DEBIAN:"debian",UBUNTU:"ubuntu",GENTOO:"gentoo",SUSE:"suse",OPENSUSE:"opensuse",LINUX_OTHER:"linux-other"},c={"t1.micro":["T1 Micro","ECU Up to 2","Core 1","Memory 613MB"],"m1.small":["M1 Small","ECU 1","Core 1","Memory 1.7GB"],"m1.medium":["M1 Medium","ECU 2","Core 1","Memory 3.7GB"],"m1.large":["M1 Large","ECU 4","Core 2","Memory 7.5GB"],"m1.xlarge":["M1 Extra Large","ECU 8","Core 4","Memory 15GB"],"m3.xlarge":["M3 Extra Large","ECU 13","Core 4","Memory 15GB"],"m3.2xlarge":["M3 Double Extra Large","ECU 26","Core 8","Memory 30GB"],"m2.xlarge":["M2 High-Memory Extra Large","ECU 6.5","Core 2","Memory 17.1GB"],"m2.2xlarge":["M2 High-Memory Double Extra Large","ECU 13","Core 4","Memory 34.2GB"],"m2.4xlarge":["M2 High-Memory Quadruple Extra Large","ECU 26","Core 8","Memory 68.4GB"],"c1.medium":["C1 High-CPU Medium","ECU 5","Core 2","Memory 1.7GB"],"c1.xlarge":["C1 High-CPU Extra Large","ECU 20","Core 8","Memory 7GB"],"hi1.4xlarge":["High I/O Quadruple Extra Large","ECU 35","Core 16","Memory 60.5GB"],"hs1.8xlarge":["High Storage Eight Extra Large","ECU 35","Core 16","Memory 117GB"]},l={pending:0,running:16,shuttingdown:32,terminated:48,stopping:64,stopped:80},d={MESSAGE_E_SESSION:"This session has expired, please log in again",MESSAGE_E_EXTERNAL:"Sorry, there seems to be a problem with AWS",MESSAGE_E_ERROR:"Sorry, we're experiencing techincal difficulty",MESSAGE_E_UNKNOWN:"Something is wrong. Please contact support@visualops.io",MESSAGE_E_PARAM:"Parameter error!"},S=["us-east-1","us-west-1","us-west-2","eu-west-1","ap-southeast-1","ap-southeast-2","ap-northeast-1","sa-east-1"],T={},x={},T["us-east-1"]=t.ide["IDE_LBL_REGION_NAME_SHORT_us-east-1"],x["us-east-1"]=t.ide["IDE_LBL_REGION_NAME_us-east-1"],T["us-west-1"]=t.ide["IDE_LBL_REGION_NAME_SHORT_us-west-1"],x["us-west-1"]=t.ide["IDE_LBL_REGION_NAME_us-west-1"],T["us-west-2"]=t.ide["IDE_LBL_REGION_NAME_SHORT_us-west-2"],x["us-west-2"]=t.ide["IDE_LBL_REGION_NAME_us-west-2"],T["eu-west-1"]=t.ide["IDE_LBL_REGION_NAME_SHORT_eu-west-1"],x["eu-west-1"]=t.ide["IDE_LBL_REGION_NAME_eu-west-1"],T["ap-southeast-1"]=t.ide["IDE_LBL_REGION_NAME_SHORT_ap-southeast-1"],x["ap-southeast-1"]=t.ide["IDE_LBL_REGION_NAME_ap-southeast-1"],T["ap-southeast-2"]=t.ide["IDE_LBL_REGION_NAME_SHORT_ap-southeast-2"],x["ap-southeast-2"]=t.ide["IDE_LBL_REGION_NAME_ap-southeast-2"],T["ap-northeast-1"]=t.ide["IDE_LBL_REGION_NAME_SHORT_ap-northeast-1"],x["ap-northeast-1"]=t.ide["IDE_LBL_REGION_NAME_ap-northeast-1"],T["sa-east-1"]=t.ide["IDE_LBL_REGION_NAME_SHORT_sa-east-1"],x["sa-east-1"]=t.ide["IDE_LBL_REGION_NAME_sa-east-1"],C={E_OK:0,E_NONE:1,E_INVALID:2,E_FULL:3,E_EXIST:4,E_EXTERNAL:5,E_FAILED:6,E_BUSY:7,E_NORSC:8,E_NOPERM:9,E_NOSTOP:10,E_NOSTART:11,E_ERROR:12,E_LEFTOVER:13,E_TIMEOUT:14,E_UNKNOWN:15,E_CONN:16,E_EXPIRED:17,E_PARAM:18,E_SESSION:19,E_END:20,E_BLOCKED_USER:21},n={APP_STATE_RUNNING:"Running",APP_STATE_STOPPED:"Stopped",APP_STATE_REBOOTING:"Rebooting",APP_STATE_CLONING:"Cloning",APP_STATE_SAVETOSTACK:"Saving",APP_STATE_TERMINATING:"Terminating",APP_STATE_UPDATING:"Updating",APP_STATE_SHUTTING_DOWN:"Shutting down",APP_STATE_STOPPING:"Stopping",APP_STATE_STARTING:"Starting",APP_STATE_TERMINATED:"Terminated",APP_STATE_INITIALIZING:"Initializing"},k=[],k["us-east-1"]=["cloudfront","cloudsearch-us-east-1","cloudwatch-us-east-1","dynamodb-us-east-1","ec2-us-east-1","elb-us-east-1","emr-us-east-1","elastictranscoder-us-east-1","elasticache-us-east-1","fps","glacier-us-east-1","mturk-requestor","mturk-worker","redshift-us-east-1","rds-us-east-1","route53","ses-us-east-1","sns-us-east-1","sqs-us-east-1","s3-us-standard","swf-us-east-1","simpledb-us-east-1","vpc-us-east-1","cloudformation-us-east-1","cloudhsm-us-east-1","datapipeline-us-east-1","directconnect-us-east-1","elasticbeanstalk-us-east-1","import-export","management-console","opsworks-us-east-1","storagegateway-us-east-1"],k["us-west-1"]=["cloudfront","cloudsearch-us-west-1","cloudwatch-us-west-1","dynamodb-us-west-1","ec2-us-west-1","elb-us-west-1","emr-us-west-1","elastictranscoder-us-west-1","elasticache-us-west-1","fps","glacier-us-west-1","mturk-requestor","mturk-worker","rds-us-west-1","route53","sns-us-west-1","sqs-us-west-1","s3-us-west-1","s3-us-standard","swf-us-west-1","simpledb-us-west-1","vpc-us-west-1","cloudformation-us-west-1","directconnect-us-west-1","elasticbeanstalk-us-west-1","import-export","management-console","storagegateway-us-west-1"],k["us-west-2"]=["cloudfront","cloudsearch-us-west-2","cloudwatch-us-west-2","dynamodb-us-west-2","ec2-us-west-2","elb-us-west-2","emr-us-west-2","elastictranscoder-us-west-2","elasticache-us-west-2","fps","glacier-us-west-2","mturk-requestor","mturk-worker","redshift-us-west-2","rds-us-west-2","route53","sns-us-west-2","sqs-us-west-2","s3-us-west-2","s3-us-standard","swf-us-west-2","simpledb-us-west-2","vpc-us-west-2","cloudformation-us-west-2","directconnect-us-east-1","elasticbeanstalk-us-west-2","import-export","management-console","storagegateway-us-west-2"],k["sa-east-1"]=["cloudfront","cloudwatch-sa-east-1","dynamodb-sa-east-1","ec2-sa-east-1","elb-sa-east-1","emr-sa-east-1","elasticache-sa-east-1","rds-sa-east-1","route53","sns-sa-east-1","sqs-sa-east-1","s3-sa-east-1","swf-sa-east-1","simpledb-sa-east-1","vpc-sa-east-1","cloudformation-sa-east-1","directconnect-sa-east-1","elasticbeanstalk-sa-east-1","management-console","storagegateway-sa-east-1"],k["eu-west-1"]=["cloudfront","cloudsearch-eu-west-1","cloudwatch-eu-west-1","dynamodb-eu-west-1","ec2-eu-west-1","elb-eu-west-1","emr-eu-west-1","elastictranscoder-eu-west-1","elasticache-eu-west-1","glacier-eu-west-1","mturk-worker","redshift-eu-west-1","rds-eu-west-1","route53","sns-eu-west-1","sqs-eu-west-1","s3-eu-west-1","swf-eu-west-1","simpledb-eu-west-1","vpc-eu-west-1","cloudformation-eu-west-1","cloudhsm-eu-west-1","directconnect-eu-west-1","elasticbeanstalk-eu-west-1","import-export","management-console","storagegateway-eu-west-1"],k["ap-southeast-1"]=["cloudfront","cloudsearch-ap-southeast-1","cloudwatch-ap-southeast-1","dynamodb-ap-southeast-1","ec2-ap-southeast-1","elb-ap-southeast-1","emr-ap-southeast-1","elastictranscoder-ap-southeast-1","elasticache-ap-southeast-1","mturk-worker","rds-ap-southeast-1","route53","sns-ap-southeast-1","sqs-ap-southeast-1","s3-ap-southeast-1","swf-ap-southeast-1","simpledb-ap-southeast-1","vpc-ap-southeast-1","cloudformation-ap-southeast-1","directconnect-ap-southeast-1","elasticbeanstalk-ap-southeast-1","import-export","management-console","storagegateway-ap-southeast-1"],k["ap-southeast-2"]=["cloudfront","cloudwatch-ap-southeast-2","dynamodb-ap-southeast-2","ec2-ap-southeast-2","elb-ap-southeast-2","emr-ap-southeast-2","mturk-worker","rds-ap-southeast-2","route53","sns-ap-southeast-2","sqs-ap-southeast-2","s3-ap-southeast-2","swf-ap-southeast-2","simpledb-ap-southeast-2","vpc-ap-southeast-2","cloudformation-ap-southeast-2","directconnect-ap-southeast-2","elasticbeanstalk-ap-southeast-2","import-export","management-console","storagegateway-ap-southeast-2"],k["ap-northeast-1"]=["cloudfront","cloudwatch-ap-northeast-1","dynamodb-ap-northeast-1","ec2-ap-northeast-1","elb-ap-northeast-1","emr-ap-northeast-1","elastictranscoder-ap-northeast-1","elasticache-ap-northeast-1","glacier-ap-northeast-1","mturk-worker","redshift-ap-northeast-1","rds-ap-northeast-1","route53","sns-ap-northeast-1","sqs-ap-northeast-1","s3-ap-northeast-1","swf-ap-northeast-1","simpledb-ap-northeast-1","vpc-ap-northeast-1","cloudformation-ap-northeast-1","directconnect-ap-northeast-1","elasticbeanstalk-ap-northeast-1","import-export","management-console","storagegateway-ap-northeast-1"],v={OPS_STATE_PENDING:"Pending",OPS_STATE_INPROCESS:"InProcess",OPS_STATE_DONE:"Done",OPS_STATE_ROLLBACK:"Rollback",OPS_STATE_FAILED:"Failed"},i={AZ:"AWS.EC2.AvailabilityZone",AMI:"AWS.EC2.AMI",VOLUME:"AWS.EC2.EBS.Volume",SNAPSHOT:"AWS.EC2.EBS.Snapshot",EIP:"AWS.EC2.EIP",INSTANCE:"AWS.EC2.Instance",KP:"AWS.EC2.KeyPair",SG:"AWS.EC2.SecurityGroup",ELB:"AWS.ELB",ACL:"AWS.VPC.NetworkAcl",CGW:"AWS.VPC.CustomerGateway",DHCP:"AWS.VPC.DhcpOptions",ENI:"AWS.VPC.NetworkInterface",IGW:"AWS.VPC.InternetGateway",RT:"AWS.VPC.RouteTable",SUBNET:"AWS.VPC.Subnet",VPC:"AWS.VPC.VPC",VPN:"AWS.VPC.VPNConnection",VGW:"AWS.VPC.VPNGateway",ASG:"AWS.AutoScaling.Group",ASL_ACT:"AWS.AutoScaling.Activities",ASL_INS:"AWS.AutoScaling.Instance",ASL_LC:"AWS.AutoScaling.LaunchConfiguration",ASL_NC:"AWS.AutoScaling.NotificationConfiguration",ASL_SP:"AWS.AutoScaling.ScalingPolicy",ASL_SA:"AWS.AutoScaling.ScheduledActions",CLW:"AWS.CloudWatch.CloudWatch",SNS_SUB:"AWS.SNS.Subscription",SNS_TOPIC:"AWS.SNS.Topic"},w=5,b=30,y="\n screen mode id:i:2\n use multimon:i:0\n desktopwidth:i:1024\n desktopheight:i:768\n session bpp:i:32\n winposstr:s:0,3,0,0,1024,768\n compression:i:1\n keyboardhook:i:2\n audiocapturemode:i:0\n videoplaybackmode:i:1\n connection type:i:2\n displayconnectionbar:i:1\n disable wallpaper:i:1\n allow font smoothing:i:0\n allow desktop composition:i:0\n disable full window drag:i:1\n disable menu anims:i:1\n disable themes:i:0\n disable cursor setting:i:0\n bitmapcachepersistenable:i:1\n full address:s:%s\n audiomode:i:0\n redirectprinters:i:1\n redirectcomports:i:0\n redirectsmartcards:i:1\n redirectclipboard:i:1\n redirectposdevices:i:0\n redirectdirectx:i:1\n autoreconnection enabled:i:1\n authentication level:i:2\n prompt for credentials:i:0\n negotiate security layer:i:1\n remoteapplicationmode:i:0\n alternate shell:s:\n shell working directory:s:\n gatewayhostname:s:\n gatewayusagemethod:i:4\n gatewaycredentialssource:i:4\n gatewayprofileusagemethod:i:0\n promptcredentialonce:i:1\n use redirection server name:i:0\n",a={expires:1,path:"/",domain:"."+e.DOMAIN},p={expires:1,path:"/"},f=["vpc-with-private-subnet-and-vpn","vpc-with-public-and-private-subnets-and-vpn","vpc-with-public-subnet-only","vpc-with-public-and-private-subnets"],L={ERROR:"ERROR",WARNING:"WARNING",NOTICE:"NOTICE"},h=["centos","redhat","rhel","ubuntu","debian","fedora","gentoo","opensuse","suse","sles","amazon","amaz","linux-other"],A=["windows","win"],g={"linux-other":"linux",redhat:"rhel",suse:"sles",windows:"mswin"},E={stateEditorReference:/@\{([A-Z0-9]{8}-([A-Z0-9]{4}-){3}[A-Z0-9]{12})\.\w+\}/g,stateEditorOriginReference:/@\{(([\w-]+)\.(([\w-]+(\[\d+\])?)|state.[\w-]+))\}/g,uid:/[A-Z0-9]{8}-([A-Z0-9]{4}-){3}[A-Z0-9]{12}/g},{AWS_RESOURCE_KEY:s,INSTANCE_TYPE:c,INSTANCE_STATES:l,AWS_RESOURCE_TYPE:u,AWS_RESOURCE_SHORT_TYPE:o,AWS_PORT_NAME:r,OS_TYPE:m,REGION_KEYS:S,REGION_SHORT_LABEL:T,REGION_LABEL:x,RETURN_CODE:C,LINUX:h,WINDOWS:A,MESSAGE_E:d,APP_STATE:n,OPS_STATE:v,RECENT_NUM:w,RECENT_DAYS:b,AWS_RESOURCE:i,SERVICE_REGION:k,RDP_TMPL:y,COOKIE_OPTION:a,LOCAL_COOKIE_OPTION:p,DEMO_STACK_NAME_LIST:f,TA:L,OS_TYPE_MAPPING:g,REGEXP:E,RESTYPE:N}})}.call(this),MC.canvas={getState:function(){var e="",t=Tabbar.current;if(t==="new"||t==="stack")e="stack";else if(t==="app"||t==="appedit"||t==="appview")e=t;return e},display:function(e,t,n){var r=$("#"+e+"_"+t);if(n===null||n===undefined){switch(r.attr("display")){case"none":n=!1;break;default:n=!0}return n}n===!0?(r.attr("display","inline"),r.attr("style",""),Canvon(r).addClass("tooltip")):(r.attr("display","none"),r.attr("style","opacity:0"),Canvon(r).removeClass("tooltip"))},update:function(e,t,n,r){var i=$("#"+e+"_"+n),r;switch(t){case"text":n.indexOf("name")!==-1&&(r=MC.canvasName(r)),i.length===0&&(i=$("#"+e).find("."+n)),i.text(r);break;case"image":i[0].setAttributeNS("http://www.w3.org/1999/xlink","href",r);break;case"eip":i.attr("data-eip-state",r);break;case"id":i.attr("id",r);break;case"color":i.attr("style","fill:"+r);break;case"tooltip":Canvon("#"+e+"_"+n).addClass("tooltip").data("tooltip",r).attr("data-tooltip",r)}return!0},resize:function(e,t){var n=$canvas.size(),r=$canvas.scale(),i=e==="width"?0:1,s=[],o=[],u=[],a=[],f,l,c,h,p,d;return t==="expand"&&(n[i]+=60,$("#svg_resizer_"+e+"_shrink").show()),t==="shrink"&&($.each($canvas.node(),function(e,t){f=t.position(),l=t.size(),u.push(f[0]+l[0]),a.push(f[1]+l[1])}),$.each($canvas.group(),function(e,t){f=t.position(),l=t.size(),u.push(f[0]+l[0]),a.push(f[1]+l[1])}),p=Math.max.apply(Math,u),d=Math.max.apply(Math,a),h=e==="width"?p:d,n[i]-60<=h?(n[i]=20+h,$("#svg_resizer_"+e+"_shrink").hide()):(n[i]-=60,n[i]===20+h&&$("#svg_resizer_"+e+"_shrink").hide())),$("#svg_canvas")[0].setAttribute("viewBox","0 0 "+MC.canvas.GRID_WIDTH*n[0]+" "+MC.canvas.GRID_HEIGHT*n[1]),$("#svg_canvas").attr({width:n[0]*MC.canvas.GRID_WIDTH/r,height:n[1]*MC.canvas.GRID_HEIGHT/r}),$("#canvas_container, #canvas_body").css({width:n[0]*MC.canvas.GRID_WIDTH/r,height:n[1]*MC.canvas.GRID_HEIGHT/r}),$canvas.size(n[0],n[1]),!0},zoomIn:function(){var e=$canvas.size(),t=$("#canvas_body"),n="",r=$canvas.scale();return r>1&&($canvas.scale((r*10-2)/10),r=$canvas.scale(),$("#svg_canvas")[0].setAttribute("viewBox","0 0 "+MC.canvas.GRID_WIDTH*e[0]+" "+MC.canvas.GRID_HEIGHT*e[1]),n=t.attr("class").replace(/zoomlevel_[^\s]+\s?/g,"")+"zoomlevel_"+(""+r).replace(".","_"),t.attr("class",n),$("#canvas_container, #canvas_body").css({width:e[0]*MC.canvas.GRID_WIDTH/r,height:e[1]*MC.canvas.GRID_HEIGHT/r}),$("#svg_canvas").attr({width:e[0]*MC.canvas.GRID_WIDTH/r,height:e[1]*MC.canvas.GRID_HEIGHT/r})),r===1&&$("#canvas_body").hasClass("canvas_zoomed")&&$("#canvas_body").removeClass("canvas_zoomed"),MC.canvas.event.clearSelected(),!0},zoomOut:function(){var e=$canvas.size(),t=$("#canvas_body"),n="",r=$canvas.scale();return r<1.6&&($canvas.scale((r*10+2)/10),r=$canvas.scale(),$("#svg_canvas")[0].setAttribute("viewBox","0 0 "+MC.canvas.GRID_WIDTH*e[0]+" "+MC.canvas.GRID_HEIGHT*e[1]),n=$.trim(t.attr("class").replace(/zoomlevel_[^\s]+\s?/g,""))+" zoomlevel_"+(""+r).replace(".","_"),t.attr("class",n),$("#canvas_container, #canvas_body").css({width:e[0]*MC.canvas.GRID_WIDTH/r,height:e[1]*MC.canvas.GRID_HEIGHT/r}),$("#svg_canvas").attr({width:e[0]*MC.canvas.GRID_WIDTH/r,height:e[1]*MC.canvas.GRID_HEIGHT/r})),$("#canvas_body").addClass("canvas_zoomed"),MC.canvas.event.clearSelected(),!0},_addPad:function(e,t){switch(e.angle){case 0:e.x+=MC.canvas.PORT_PADDING,e.y-=t;break;case 90:e.x-=t,e.y-=MC.canvas.PORT_PADDING;break;case 180:e.x-=MC.canvas.PORT_PADDING,e.y-=t;break;case 270:e.x-=t,e.y+=MC.canvas.PORT_PADDING}},_getPath:function(e,t,n){var r=0,i=0,s=MC.canvas.CORNER_RADIUS,o=2*MC.canvas.CORNER_RADIUS,u,a;return e.x===t.x?(i=t.y-e.y,Math.abs(i)<=o?u={x:t.x,y:(e.y+t.y)/2}:(r=i?i<0?-1:1:0,u={x:t.x,y:t.y-s*r}),i=t.x-n.x,Math.abs(i)<=o?a={x:(t.x+n.x)/2,y:t.y}:(r=i?i<0?-1:1:0,a={x:t.x-s*r,y:t.y})):(i=t.x-e.x,Math.abs(i)<=o?u={x:(e.x+t.x)/2,y:t.y}:(r=i?i<0?-1:1:0,u={x:t.x-s*r,y:t.y}),i=t.y-n.y,Math.abs(i)<=o?a={x:t.x,y:(t.y+n.y)/2}:(r=i?i<0?-1:1:0,a={x:t.x,y:t.y-s*r}))," L "+u.x+" "+u.y+" Q "+t.x+" "+t.y+" "+a.x+" "+a.y},_bezier_q_corner:function(e){var t="";if(e.length>=6){var n=e[0],r=e[1],i=e[e.length-2],s=e[e.length-1],o,u,a;o={x:(r.x+i.x)/2,y:(r.y+i.y)/2},u=e[2],a=e[e.length-3],t="M "+n.x+" "+n.y+" Q "+a.x+" "+a.y+" "+i.x+" "+i.y+" L "+s.x+" "+s.y}else $.each(e,function(n,r){if(n===0)t="M "+r.x+" "+r.y;else if(n===e.length-1)t+=" "+r.x+" "+r.y;else{prev_p=e[n-1],next_p=e[n+1];if(!(prev_p.x===r.x&&next_p.x===r.x||prev_p.y===r.y&&next_p.y===r.y)){var i=e[e.length-3],s=e[e.length-2],o=e[e.length-1];return t+=" Q "+i.x+" "+i.y+" "+s.x+" "+s.y+" L "+o.x+" "+o.y,!1}t+=" L "+r.x+" "+r.y}last_p=r});return t},_bezier_qt_corner:function(e){var t="";if(e.length>=4){var n=e[0],r=e[1],i=e[e.length-2],s=e[e.length-1],o,u,a;o={x:(r.x+i.x)/2,y:(r.y+i.y)/2},u=e[2],a=e[e.length-3],t="M "+n.x+" "+n.y+" L "+r.x+" "+r.y+" C "+u.x+" "+u.y+" "+a.x+" "+a.y+" "+i.x+" "+i.y+" L "+s.x+" "+s.y}else $.each(e,function(n,r){n===0?t="M "+r.x+" "+r.y:n===e.length-1?t+=" L "+r.x+" "+r.y:(prev_p=e[n-1],next_p=e[n+1],prev_p.x===r.x&&next_p.x===r.x||prev_p.y===r.y&&next_p.y===r.y?t+=" L "+r.x+" "+r.y:t+=MC.canvas._getPath(prev_p,r,next_p)),last_p=r});return t},_round_corner:function(e){var t="",n={},r={},i={};return $.each(e,function(s,o){s===0?t="M "+o.x+" "+o.y:s===e.length-1?t+=" L "+o.x+" "+o.y:(r=e[s-1],i=e[s+1],r.x===o.x&&i.x===o.x||r.y===o.y&&i.y===o.y?t+=" L "+o.x+" "+o.y:t+=MC.canvas._getPath(r,o,i)),n=o}),t},_adjustMidY:function(e,t,n,r){switch(e){case"rtb-src-top":case"rtb-src-bottom":t=n.y;break;case"rtb-tgt":case"elb-assoc":case"elb-sg-in":case"elb-sg-out":t=n.y+40*r}return t},_adjustMidX:function(e,t,n,r){switch(e){case"rtb-tgt-left":case"rtb-tgt-right":case"elb-assoc":case"elb-sg-in":case"elb-sg-out":n.angle===0?t=n.x+4:n.angle===180&&(t=n.x-4);break;case"rtb-src":t=n.x+40*r}return t},route:function(e,t,n,r,i,s,o){var u={},a={},f,l,c=!1,h=!1,p=!1,d=!1,v=!1,m=!1,g=!1,y=!1;$.extend(!0,u,t),$.extend(!0,a,n),Math.sqrt(Math.pow(n.y-t.y,2)+Math.pow(n.x-t.x,2))>MC.canvas.PORT_PADDING*2&&(MC.canvas._addPad(u,0),MC.canvas._addPad(a,0)),MC.canvas._addPad(u,0),MC.canvas._addPad(a,0);if(u.y<a.y){var b={};$.extend(!0,b,u),$.extend(!0,u,a),a=b;var w={};$.extend(!0,w,t),$.extend(!0,t,n),n=w;var E=r;r=i,i=E;var S=s;s=o,o=S}u.x>=a.x?(c=u.connectionAngle===0||u.connectionAngle===90,h=a.connectionAngle===0||a.connectionAngle===90,p=u.connectionAngle===180||u.connectionAngle===270,d=a.connectionAngle===180||a.connectionAngle===270):(v=u.connectionAngle===0||u.connectionAngle===270,m=a.connectionAngle===0||a.connectionAngle===270,g=u.connectionAngle===90||u.connectionAngle===180,y=a.connectionAngle===90||a.connectionAngle===180),e.push({x:t.x,y:t.y}),e.push({x:u.x,y:u.y});if(c&&h||g&&y)e.push({x:u.x,y:a.y});else if(p&&d||v&&m)e.push({x:a.x,y:u.y});else if(c&&d||g&&m)l=(u.y+a.y)/2,i!=="AWS.VPC.RouteTable"&&i!=="AWS.ELB"||i===r?(r==="AWS.VPC.RouteTable"||i==="AWS.ELB")&&i!==r&&Math.abs(u.y-l)>5&&(l=MC.canvas._adjustMidY(s,l,u,-1)):Math.abs(l-a.y)>5&&(l=MC.canvas._adjustMidY(o,l,a,1)),e.push({x:u.x,y:l}),e.push({x:a.x,y:l});else if(p&&h||v&&y)f=(u.x+a.x)/2,i!=="AWS.VPC.RouteTable"&&i!=="AWS.ELB"||i===r?r==="AWS.VPC.RouteTable"&&i!==r?Math.abs(f-a.x)>5&&(i==="AWS.VPC.InternetGateway"||i==="AWS.VPC.VPNGateway"?f=MC.canvas._adjustMidX(s,f,a,-1):f=MC.canvas._adjustMidX(s,f,u,-1)):r==="AWS.ELB"&&i!==r&&Math.abs(f-a.x)>5&&(i==="AWS.EC2.Instance"||i==="AWS.VPC.Subnet"||i==="AWS.AutoScaling.Group"||i==="AWS.AutoScaling.LaunchConfiguration"?f=MC.canvas._adjustMidX(s,f,a,-1):f=MC.canvas._adjustMidX(s,f,u,-1)):Math.abs(u.x-f)>5&&(f=MC.canvas._adjustMidX(o,f,u,1)),e.push({x:f,y:u.y}),e.push({x:f,y:a.y});return e.push({x:a.x,y:a.y}),e.push({x:n.x,y:n.y}),e},updateResizer:function(e,t,n){var r=10,i=0;t*=MC.canvas.GRID_WIDTH,n*=MC.canvas.GRID_HEIGHT,$(e).find(".resizer-wrap").empty().append(Canvon.rectangle(0,i,r,r).attr({"class":"group-resizer resizer-topleft","data-direction":"topleft"}),Canvon.rectangle(r,i,t-2*r,r).attr({"class":"group-resizer resizer-top","data-direction":"top"}),Canvon.rectangle(t-r,i,r,r).attr({"class":"group-resizer resizer-topright","data-direction":"topright"}),Canvon.rectangle(0,i+r,r,n-2*r).attr({"class":"group-resizer resizer-left","data-direction":"left"}),Canvon.rectangle(t-r,i+r,r,n-2*r).attr({"class":"group-resizer resizer-right","data-direction":"right"}),Canvon.rectangle(0,n+i-r,r,r).attr({"class":"group-resizer resizer-bottomleft","data-direction":"bottomleft"}),Canvon.rectangle(r,n+i-r,t-2*r,r).attr({"class":"group-resizer resizer-bottom","data-direction":"bottom"}),Canvon.rectangle(t-r,n+i-r,r,r).attr({"class":"group-resizer resizer-bottomright","data-direction":"bottomright"}))},route2:function(e,t){var n=[],r={},i={},s=!1,o=!1,u=!1,a=!1,f=!1,l=!1,c=!1,h=!1;$.extend(!0,r,e),$.extend(!0,i,t),Math.sqrt(Math.pow(i.y-r.y,2)+Math.pow(i.x-r.x,2))>MC.canvas.PORT_PADDING*2&&(MC.canvas._addPad(e,0),MC.canvas._addPad(t,0)),MC.canvas._addPad(e,0),MC.canvas._addPad(t,0);if(e.y<t.y){var p=e;e=t,t=p;var d=r;r=i,i=d}e.x>=t.x?(s=e.angle===0||e.angle===90,o=t.angle===0||t.angle===90,u=e.angle===180||e.angle===270,a=t.angle===180||t.angle===270):(f=e.angle===0||e.angle===270,l=t.angle===0||t.angle===270,c=e.angle===90||e.angle===180,h=t.angle===90||t.angle===180),n.push(r),n.push(e);if(s&&o||c&&h)n.push({x:e.x,y:t.y});else if(u&&a||f&&l)n.push({x:t.x,y:e.y});else if(s&&a||c&&l)mid_y=Math.round((e.y+t.y)/2),t.type!=="AWS.VPC.RouteTable"&&t.type!=="AWS.ELB"||t.type===e.type?(e.type==="AWS.VPC.RouteTable"||t.type==="AWS.ELB")&&t.type!==e.type&&Math.abs(e.y-mid_y)>5&&(mid_y=MC.canvas._adjustMidY(e.name,mid_y,e,-1)):Math.abs(mid_y-t.y)>5&&(mid_y=MC.canvas._adjustMidY(t.name,mid_y,t,1)),n.push({x:e.x,y:mid_y}),n.push({x:t.x,y:mid_y});else if(u&&o||f&&h)mid_x=Math.round((e.x+t.x)/2),t.type!=="AWS.VPC.RouteTable"&&t.type!=="AWS.ELB"||t.type===e.type?e.type==="AWS.VPC.RouteTable"&&t.type!==e.type?Math.abs(mid_x-t.x)>5&&(t.type==="AWS.VPC.InternetGateway"||t.type==="AWS.VPC.VPNGateway"?mid_x=MC.canvas._adjustMidX(e.name,mid_x,t,-1):mid_x=MC.canvas._adjustMidX(e.name,mid_x,e,-1)):e.type==="AWS.ELB"&&t.type!==e.type&&Math.abs(mid_x-t.x)>5&&(t.type==="AWS.EC2.Instance"||t.type==="AWS.VPC.Subnet"||t.type==="AWS.AutoScaling.Group"||t.type==="AWS.AutoScaling.LaunchConfiguration"?mid_x=MC.canvas._adjustMidX(e.name,mid_x,t,-1):mid_x=MC.canvas._adjustMidX(e.name,mid_x,e,-1)):Math.abs(e.x-mid_x)>5&&(mid_x=MC.canvas._adjustMidX(t.name,mid_x,e,1)),n.push({x:mid_x,y:e.y}),n.push({x:mid_x,y:t.y});return n.push(t),n.push(i),n},genPath:function(e,t,n,r,i,s,o){var u=0,a=0,f=[],l=Math.round((n.left-i.left+n.width/2)*s),c=Math.round((n.top-i.top+n.height/2)*s),h=Math.round((r.left-i.left+r.width/2)*s),p=Math.round((r.top-i.top+r.height/2)*s),d={x:l,y:c,connectionAngle:e.getAttribute("data-angle")*1};end0={x:h,y:p,connectionAngle:t.getAttribute("data-angle")*1},path,from_type==="AWS.VPC.RouteTable"&&from_target_port==="rtb-src"&&(u+=1),to_type==="AWS.VPC.RouteTable"&&to_target_port==="rtb-src"&&(a+=1),MC.canvas._addPad(d,1),MC.canvas._addPad(end0,1);if(d.x===end0.x||d.y===end0.y)path="M "+d.x+" "+d.y+" L "+end0.x+" "+end0.y;else{MC.canvas.route(f,d,end0,from_type,to_type,from_target_port,to_target_port);if(f.length>0)if(o.type==="sg")switch(MC.canvas_property.LINE_STYLE){case 0:path="M "+f[0].x+" "+f[0].y+" L "+f[1].x+" "+f[1].y+" L "+f[f.length-2].x+" "+f[f.length-2].y+" L "+f[f.length-1].x+" "+f[f.length-1].y;break;case 1:path=MC.canvas._round_corner(f);break;case 2:path=MC.canvas._bezier_q_corner(f);break;case 3:path=MC.canvas._bezier_qt_corner(f)}else path=MC.canvas._round_corner(f)}return path},connect:function(e,t,n,r,i){var s=$canvas.offset(),o=document.getElementById(e),u=document.getElementById(n),a=$canvas(e),f=$canvas(n),l=a.nodeType,c=f.nodeType,h=a.type,p=f.type,d=MC.canvas.CONNECTION_OPTION[h][p],v=$canvas.scale(),m,g,y,b,w,E,S,x,T;return d?($.type(d)==="array"&&$.each(d,function(e,n){n.from===t&&n.to===r&&(d=n)}),d.direction?(m=d.direction,m.from&&m.to?(o[0].getBoundingClientRect().left>u[0].getBoundingClientRect().left?(g=document.getElementById(e+"_port-"+t+"-left"),y=document.getElementById(n+"_port-"+r+"-right")):(g=document.getElementById(e+"_port-"+t+"-right"),y=document.getElementById(n+"_port-"+r+"-left")),b=g.getBoundingClientRect(),w=y.getBoundingClientRect()):(m.from&&(y=document.getElementById(n+"_port-"+r),w=y.getBoundingClientRect(),m.from==="vertical"&&(E=w.top>o[0].getBoundingClientRect().top?"bottom":"top"),m.from==="horizontal"&&(E=w.left>o[0].getBoundingClientRect().left?"right":"left"),g=document.getElementById(e+"_port-"+t+"-"+E),b=g.getBoundingClientRect()),m.to&&(g=document.getElementById(e+"_port-"+t),b=g.getBoundingClientRect(),m.to==="vertical"&&(E=b.top>u[0].getBoundingClientRect().top?"bottom":"top"),m.to==="horizontal"&&(E=b.left>u[0].getBoundingClientRect().left?"right":"left"),y=document.getElementById(n+"_port-"+r+"-"+E),w=y.getBoundingClientRect()))):(g=document.getElementById(e+"_port-"+t),b=g.getBoundingClientRect(),y=document.getElementById(n+"_port-"+r),w=y.getBoundingClientRect()),x=MC.canvas.genPath(g,y,b,w,s,v,d),T=document.getElementById(i),T!==null?$(T).children().attr("d",x):(MC.paper.start(),MC.paper.path(x),MC.paper.path(x).attr("class","fill-line"),d.dash_line===!0&&MC.paper.path(x).attr("class","dash-line"),T=MC.paper.save(),document.getElementById("line_layer").appendChild(T),T.setAttributeNS("http://www.w3.org/1999/xlink","class","line line-"+d.type),T.setAttributeNS("http://www.w3.org/1999/xlink","data-type","line"),T.id=i,T=null),!0):!1},select:function(e){var t=$canvas(e),n=t.$element(),r=t.nodeType,i;return Canvon(n).addClass("selected"),r==="line"&&(clone=n.clone(),n.remove(),$("#line_layer").append(clone)),r==="node"&&(clone=n.clone(),n.remove(),$("#node_layer").append(clone),$.each(t.connection(),function(t,n){Canvon("#"+n.line+", #"+e+"_port-"+n.port).addClass("view-show")}),Canvon(clone.find(".port")).addClass("view-show")),$canvas.selected_node().length=0,$canvas.selected_node().push(e),!0},move:function(e,t,n){var r=$canvas(e.id),i=r.type,s=r.nodeType,o=[],u,a,f,l,c,h,p;s==="node"&&(r.position(t,n),r.reConnect());if(s==="group"){u=MC.canvas.groupChild(e),a=r.position(),c=r.size(),f=t-a[0],l=n-a[1],r.position(t,n),r.reConnect(),$.each(u,function(e,t){h=$canvas(t.id),p=h.position(),h.position(p[0]+f,p[1]+l),(h.type==="AWS.VPC.Subnet"||h.type==="AWS.AutoScaling.Group"||h.nodeType==="node")&&$.each(h.connection(),function(e,t){o.push(t.line)})}),$.each(o,function(e,t){$canvas(t).reConnect()}),(i==="AWS.VPC.Subnet"||i==="AWS.AutoScaling.Group")&&r.reConnect();if(i==="AWS.VPC.VPC"){var d=t,v=n,m=c[0],g=c[1],y,b,w,E;y=$(".AWS-VPC-InternetGateway"),w=$(".AWS-VPC-VPNGateway"),y[0]&&(b=$canvas(y.attr("id")),b.position(d-4,b.position()[1]+l),b.reConnect()),w[0]&&(E=$canvas(w.attr("id")),E.position(d+m-4,E.position()[1]+l),E.reConnect())}}},position:function(e,t,n){t=t>0?t:0,n=n>0?n:0;var r=e.transform.baseVal,i;return r.numberOfItems===1?r.getItem(0).setTranslate(t*10,n*10):(i=e.ownerSVGElement.createSVGTransform(),i.setTranslate(t*10,n*10),r.appendItem(i)),!0},groupSize:function(e,t,n){var r=e.getElementsByClassName("group")[0];return r.width.baseVal.value=t*10,r.height.baseVal.value=n*10,r.x.baseVal.value=0,r.y.baseVal.value=0,!0},remove:function(e){return $(e).remove(),!0},pixelToGrid:function(e,t){var n=$canvas.scale();return{x:Math.ceil(e*n/MC.canvas.GRID_WIDTH),y:Math.ceil(t*n/MC.canvas.GRID_HEIGHT)}},matchPoint:function(e,t){var n=MC.canvas.pixelToGrid(e,t),r,i,s;return $.each($canvas.node(),function(e,t){r=t.position(),s=t.size();if(r&&r[0]<=n.x&&r[0]+s[0]>=n.x&&r[1]<=n.y&&r[1]+s[1]>=n.y)return i=document.getElementById(t.id),!1}),i},isMatchPlace:function(e,t,n,r,i,s,o){var u=[document.getElementById("asg_layer").childNodes,document.getElementById("subnet_layer").childNodes,document.getElementById("az_layer").childNodes,document.getElementById("vpc_layer").childNodes],a=[{x:r,y:i},{x:r+s,y:i},{x:r,y:i+o},{x:r+s,y:i+o}],f=$canvas.size(),l=MC.canvas.MATCH_PLACEMENT[$canvas.platform()][t],c=[],h=[],p={},d=!1,v,m,g,y,b,w,E=a.length,S,x;e!==null&&(c.push(e),n==="group"&&(y=MC.canvas.groupChild(document.getElementById(e)),$.each(y,function(e,t){$canvas(t.id).nodeType==="group"&&c.push(t.id)})));while(E--){S=u.length;while(S--)if(u[S]){v={},x=u[S].length;while(x--)id=u[S][x].id,group_item=$canvas(id),b=group_item.position(),w=group_item.size(),$.inArray(id,c)===-1&&a[E].x>b[0]&&a[E].x<b[0]+w[0]&&a[E].y>b[1]&&a[E].y<b[1]+w[1]&&(v.is_matched=$.inArray(group_item.type,l)>-1,v.target=id,m=id);$.isEmptyObject(v)||(h[E]=v)}}return d=h[0]&&h[1]&&h[2]&&h[3]&&h[0].is_matched&&h[1].is_matched&&h[2].is_matched&&h[3].is_matched&&h[0].target===h[1].target&&h[0].target===h[2].target&&h[0].target===h[3].target&&r+s<f[0]-3&&i+o<f[1]-3,!d&&$.inArray("Canvas",l)>-1&&!h[0]&&!h[1]&&!h[2]&&!h[3]&&r+s<f[0]-3&&i+o<f[1]-3&&(d=!0,m="Canvas"),{is_matched:d,target:d?m:null}},isBlank:function(e,t,n,r,i,s,o){var u=!0,a,f,l,c;return n==="group"&&(a=r+s,f=i+o,$.each($canvas.group(),function(n,s){l=s.position(),c=s.size(),s.id!==e&&s.type===t&&l[0]<a&&l[0]+c[0]>r&&l[1]<f&&l[1]+c[1]>i&&(u=!1)})),u},parentGroup:function(e,t,n,r,i,s){var o=MC.canvas.MATCH_PLACEMENT[$canvas.platform()][t],u=null,a,f,l;return $.each($canvas.group(),function(t,i){a=$canvas(i.id),f=a.position(),l=a.size();if(e!==i.id&&$.inArray(a.type,o)>-1&&f[0]<=n&&f[0]+l[0]>=n&&f[1]<=r&&f[1]+l[1]>=r)return u=document.getElementById(i.id),!1}),u},areaChild:function(e,t,n,r,i,s){var o=MC.canvas.GROUP_WEIGHT[t],u=[],a,f;return $.each($canvas.node(),function(t,o){a=o.position(),f=o.size(),e!==o.id&&o.type!=="AWS.VPC.InternetGateway"&&o.type!=="AWS.VPC.VPNGateway"&&(a[0]>n&&a[0]<i||a[0]+f[0]>n&&a[0]+f[0]<i)&&(a[1]>r&&a[1]<s||a[1]+f[1]>r&&a[1]+f[1]<s)&&u.push(document.getElementById(o.id))}),$.each($canvas.group(),function(l,c){a=c.position(),f=c.size(),e!==c.id&&($.inArray(c.type,o)>-1||c.type===t)&&n<=a[0]+f[0]&&i>=a[0]&&r<=a[1]+f[1]&&s>=a[1]&&u.push(document.getElementById(c.id))}),u},groupChild:function(e){var t=$canvas(e.id),n=t.position(),r=t.size();return MC.canvas.areaChild(t.id,t.type,n[0],n[1],n[0]+r[0],n[1]+r[1])}},MC.canvas.layout={init:function(){MC.paper=Canvon("#svg_canvas");var e=$canvas.size(),t={width:e[0]*MC.canvas.GRID_WIDTH,height:e[1]*MC.canvas.GRID_HEIGHT};return $("#svg_canvas").attr(t),$("#canvas_container").css(t),!0}},MC.canvas.volume={bubble:function(e,t,n){if(!$("#volume-bubble-box")[0]){var r=$("#"+e),i=$("#canvas_container"),s=$canvas.offset(),o=e.replace(/_[0-9]*$/ig,""),u,a,f,l,c,h;i.append('<div id="volume-bubble-box"><div class="arrow"></div><div id="volume-bubble-content"></div></div>'),h=$("#volume-bubble-box"),volume_list=n?$canvas($("#"+n+"-wrap").data("target-id")).listVolume(t):$canvas(e).volume(),$.each(volume_list,function(t,n){n.instance_id=e}),$("#volume-bubble-content").html(MC.template.instanceVolume(volume_list)),n?(f=r.offset(),l=r.width(),c=r.height()):(f=r[0].getBoundingClientRect(),l=f.width,c=f.height),u=h.width(),a=h.height(),h.addClass("bubble-left").data("target-id",e).css({left:f.left+l+15-s.left,top:f.top-s.top-(a-c)/2}).show(),r.prop("namespaceURI")==="http://www.w3.org/2000/svg"&&MC.canvas.update(e,"image","volume_status",MC.canvas.IMAGE.INSTANCE_VOLUME_ATTACHED_ACTIVE)}},show:function(){var e=$(this),t=$("#volume-bubble-box"),n=e.data("target-id"),r=n.replace(/_[0-9]*$/ig,""),i=e.hasClass("instanceList-item-volume")?"instanceList":e.hasClass("asgList-item-volume")?"asgList":null,s=i?$canvas($("#"+i+"-wrap").data("target-id")).listVolume(e.parent().data("id")):$canvas(n).volume(),o=s.length,u;if(!t[0]){if(MC.canvas.getState()==="app"||MC.canvas.getState()==="appview")return i?(MC.canvas.volume.bubble(n,e.parent().data("id"),i),!1):$canvas(n).list().length===0?(MC.canvas.volume.bubble(n),!1):($canvas(r).select(),!1);if(MC.canvas.getState()==="appedit"&&$canvas(n).type==="AWS.AutoScaling.LaunchConfiguration")return $canvas(r).select(),!1;o>0?MC.canvas.volume.bubble(n):$("#"+n).prop("namespaceURI")==="http://www.w3.org/2000/svg"&&MC.canvas.update(n,"image","volume_status",MC.canvas.IMAGE.INSTANCE_VOLUME_NOT_ATTACHED)}else{u=t.data("target-id"),MC.canvas.volume.close();if(r!==u&&MC.canvas.getState()==="app")return i?(MC.canvas.volume.bubble(n,e.parent().data("id"),i),!1):$canvas(n).list().length===0?(MC.canvas.volume.bubble(n),!1):($canvas(r).select(),!1)}return!1},select:function(e){return MC.canvas.event.clearSelected(),$("#instance_volume_list").find(".selected").removeClass("selected"),$("#"+e).addClass("selected"),$(document).on("keyup",MC.canvas.volume.remove),!1},close:function(e){var t=$("#volume-bubble-box"),n;if(e){n=$(e.target);if(n.attr("class")==="instance-volume"||n.is(".snapshot_item")||n.parent().is(".snapshot_item")||n.is(".volume_item")||n.parent().is(".volume_item"))return!1}t[0]&&(target_id=t.data("target-id"),t.remove(),$("#"+target_id).prop("namespaceURI")==="http://www.w3.org/2000/svg"&&MC.canvas.update(target_id,"image","volume_status",MC.canvas.IMAGE.INSTANCE_VOLUME_NOT_ATTACHED),$(document).off("keyup",MC.canvas.volume.remove).off("click",":not(.instance-volume, #volume-bubble-box)",MC.canvas.volume.close))},remove:function(e){if((e.which===46||e.which===8)&&e.ctrlKey===!1&&e.metaKey===!1&&e.target.tagName.toLowerCase()!=="input"&&MC.canvas.getState()!=="app"){var t=$("#volume-bubble-box"),n=t.data("target-id"),r=$("#"+n),i=r[0].getBoundingClientRect(),s=$("#instance_volume_list").find(".selected").attr("id");return s&&$canvas(s).remove()&&($("#"+s).parent().remove(),t.css("top",i.top-$("#canvas_container").offset().top-(t.height()-i.height)/2),$("#instance_volume_number").text($canvas(n).volume().length),$canvas.trigger("CANVAS_NODE_SELECTED","")),$(document).off("keyup",MC.canvas.volume.remove),!1}},mousedown:function(e){if(e.which===1){var t=$(this),n=t.offset(),r=$canvas.offset(),i=t.data("type"),s=MC.canvas.getState(),o,u;return s==="app"||s==="appview"?($canvas(this.id,"AWS.EC2.EBS.Volume").select(),!1):($(document.body).append('<div id="drag_shadow"><div class="resource-icon resource-icon-volume"></div></div>').append('<div id="overlayer"></div>'),o=$("#drag_shadow"),o.addClass("AWS-EC2-EBS-Volume").css({top:e.pageY-50,left:e.pageX-50}),Canvon(".AWS-EC2-Instance, .AWS-AutoScaling-LaunchConfiguration").addClass("attachable"),$(document).on({mousemove:MC.canvas.volume.mousemove,mouseup:MC.canvas.volume.mouseup},{target:t,instance_id:t.data("instance"),canvas_offset:$canvas.offset(),canvas_body:$("#canvas_body"),shadow:o,originalPageX:e.pageX,originalPageY:e.pageY,action:"move"}),$canvas(this.id,"AWS.EC2.EBS.Volume").select(),!1)}},mousemove:function(e){var t=MC.canvas.matchPoint(e.pageX-e.data.canvas_offset.left,e.pageY-e.data.canvas_offset.top),n=t?t.getAttribute("data-class"):null,r=e.data,i=["AWS.EC2.Instance","AWS.AutoScaling.LaunchConfiguration"];if(r.action==="add"||(e.pageX>r.originalPageX+2||e.pageX<r.originalPageX-2)&&(e.pageY>r.originalPageY+2||e.pageY<r.originalPageY-2))r.shadow.css({top:e.pageY-50,left:e.pageX-50}).show(),r.canvas_body.addClass("node-dragging"),t&&$.inArray(n,i)>-1?MC.canvas.volume.bubble(t.id):MC.canvas.volume.close();return!1},mouseup:function(e){var t=$(e.data.target),n=t.data("option")||{},r=$("#volume-bubble-box"),i,s,o,u,a,f,l,c,h;return Canvon(".AWS-EC2-Instance, .AWS-AutoScaling-LaunchConfiguration").removeClass("attachable"),r[0]?(c=r.data("target-id"),target_node=$("#"+c),target_offset=target_node[0].getBoundingClientRect(),e.data.action==="move"?(l=t.attr("id"),e.data.instance_id!==c&&(volume_item=$canvas(c).moveVolume(l),volume_item&&(a=volume_item.snapshotId?"snapshot_item":"volume_item",$("#instance_volume_list").append('<li><a href="javascript:void(0)" id="'+l+'" class="'+a+'"><span class="volume_name">'+volume_item.name+'</span><span class="volume_size">'+volume_item.size+"GB</span></a></li>"),$("#instance_volume_number").text($canvas(c).volume().length),$canvas(volume_item.id,"AWS.EC2.EBS.Volume").select()))):(volume_item=$canvas(c).addVolume(t.data("option")),volume_item&&(a=volume_item.snapshotId?"snapshot_item":"volume_item",$("#instance_volume_list").append('<li><a href="javascript:void(0)" id="'+volume_item.id+'" data-instance="'+c+'" class="'+a+'"><span class="volume_name">'+volume_item.name+'</span><span class="volume_size">'+volume_item.size+"GB</span></a></li>"),$("#instance_volume_number").text($canvas(c).volume().length),$canvas(volume_item.id,"AWS.EC2.EBS.Volume").select())),r.css("top",target_offset.top-$("#canvas_container").offset().top-(r.height()-target_offset.height)/2)):$canvas.trigger("CANVAS_PLACE_NOT_MATCH",{type:"AWS.EC2.EBS.Volume"}),e.data.shadow.remove(),e.data.canvas_body.removeClass("node-dragging"),$("#overlayer").remove(),$(document).off({mousemove:MC.canvas.volume.mousemove,mouseup:MC.canvas.volume.mouseup}),!1}},MC.canvas.asgList={show:function(e){e.stopImmediatePropagation();if(e.which===1){MC.canvas.event.clearList();var t=this.parentNode,n=t.id,r=Canvon(t).offset(),i=$canvas.offset();return $("#canvas_container").append(MC.template.asgList($canvas(n).list())),$("#asgList-wrap").data("target-id",t.id).on("click",".asgList-item",MC.canvas.asgList.select).css({top:r.top-i.top-30,left:r.left-i.left-20}),MC.canvas.asgList.select.call($("#asgList-wrap .asgList-item").first()),!0}},close:function(){return $("#asgList-wrap").remove(),MC.canvas.volume.close(),!1},select:function(e){var t=$(this);return $("#asgList-wrap .selected").removeClass("selected"),t.addClass("selected"),$canvas($("#asgList-wrap").data("target-id")).select(t.data("id")),!1},selectById:function(e,t){MC.canvas.event.clearList();var n=Canvon("#"+e).offset(),r=$canvas.offset();$("#canvas_container").append(MC.template.asgList($canvas(e).list())),$("#asgList-wrap").data("target-id",e).on("click",".asgList-item",MC.canvas.asgList.select).css({top:n.top-r.top-30,left:n.left-r.left-20}),MC.canvas.asgList.select.call($("#"+t))}},MC.canvas.instanceList={show:function(e){e.stopImmediatePropagation();if(e.which===1){MC.canvas.event.clearList();var t=this.parentNode,n=t.id,r=Canvon("#"+n).offset(),i=$canvas.offset(),s=$canvas(n).list();if(s.length===0)return $canvas(n).select(),!1;$("#canvas_container").append(MC.template.instanceList(s)),$("#instanceList-wrap").data("target-id",t.id).on("click",".instanceList-item",MC.canvas.instanceList.select).css({top:r.top-i.top-30,left:r.left-i.left-20}),MC.canvas.instanceList.select.call($("#instanceList-wrap .instanceList-item").first())}return!1},close:function(){return $("#instanceList-wrap").remove(),MC.canvas.volume.close(),!1},select:function(e){var t=$(this),n=$("#volume-bubble-box");return n[0]&&n.data("target-id")!==this.id&&MC.canvas.volume.close(),$("#instanceList-wrap .selected").removeClass("selected"),t.addClass("selected"),$canvas($("#instanceList-wrap").data("target-id")).select(t.data("id")),!1},selectById:function(e,t){MC.canvas.event.clearList();var n=Canvon("#"+e).offset(),r=$canvas.offset(),i=$canvas(e).list();$("#canvas_container").append(MC.template.instanceList(i)),$("#instanceList-wrap").data("target-id",e).on("click",".instanceList-item",MC.canvas.instanceList.select).css({top:n.top-r.top-30,left:n.left-r.left-20}),MC.canvas.instanceList.select.call($("#"+t))}},MC.canvas.eniList={show:function(e){e.stopImmediatePropagation();if(e.which===1){MC.canvas.event.clearList();var t=this.parentNode,n=t.id,r=Canvon("#"+n).offset(),i=$canvas.offset(),s=$canvas(n).list();return s.length===0?($canvas(n).select(),!1):($("#canvas_container").append(MC.template.eniList(s)),$("#eniList-wrap").data("target-id",t.id).on("click",".eniList-item",MC.canvas.eniList.select).css({top:r.top-i.top-30,left:r.left-i.left-20}),MC.canvas.eniList.select.call($("#eniList-wrap .eniList-item").first()),!1)}},close:function(){return $("#eniList-wrap").remove(),!1},select:function(e){var t=$(this);return $("#eniList-wrap .selected").removeClass("selected"),t.addClass("selected"),$canvas($("#eniList-wrap").data("target-id")).select(t.data("id")),!1},selectById:function(e,t){MC.canvas.event.clearList();var n=Canvon("#"+e).offset(),r=$canvas.offset(),i=$canvas(e).list();return $("#canvas_container").append(MC.template.eniList(i)),$("#eniList-wrap").data("target-id",e).on("click",".eniList-item",MC.canvas.eniList.select).css({top:n.top-r.top-30,left:n.left-r.left-20}),MC.canvas.eniList.select.call($("#"+t)),!1}},MC.canvas.nodeAction={show:function(e){var t=MC.canvas.getState(),n=$canvas(e).type;if((t==="stack"||t==="app"||t==="appedit")&&(n==="AWS.EC2.Instance"||n==="AWS.AutoScaling.LaunchConfiguration")){var r=Design.instance().component(e),i=r.getStateData(),s=0;i&&_.isArray(i)&&(s=i.length);if(t==="app"&&!s)return;$("#canvas_container").append(MC.template.nodeAction({state_num:s})),MC.canvas.nodeAction.updateNumber(s),MC.canvas.nodeAction.position(e)}},updateNumber:function(e){return $("#node-state-number").text(e),!1},position:function(e){var t=$("#"+e),n=t[0].getBoundingClientRect(),r=$("#svg_canvas").offset();return $("#node-action-wrap").css({left:n.left-r.left+n.width+5,top:n.top-r.top}).attr("data-id",e),!0},popup:function(e){return e.stopImmediatePropagation(),e.which===1&&$canvas.trigger("STATE_ICON_CLICKED",$(this).data("id")),!1},remove:function(e){var t=$("#node-action-wrap");return t.data("id")===e&&t.remove(),!0}},MC.canvas.event={},MC.canvas.event.dblclick=function(e){return MC.canvas.event.dblclick.timer?(e.call(this,event),!0):(MC.canvas.event.dblclick.timer=setTimeout(function(){MC.canvas.event.dblclick.timer=null},500),!1)},MC.canvas.event.dblclick.timer=null,MC.canvas.event.dragable={mousedown:function(e){if(e.which===1&&(e.ctrlKey||e.metaKey))return e.stopImmediatePropagation(),MC.canvas.event.ctrlMove.mousedown.call(this,e),!1;if(e.which===1){if(MC.canvas.event.dblclick(function(){$canvas.trigger("SHOW_PROPERTY_PANEL")}))return!1;var t=$(this),n=$canvas(this.id),r=n.offset(),i=n.type,s=n.nodeType,o=$("#svg_canvas"),u=$canvas.offset(),a=$("#canvas_body"),f=$canvas.platform(),l=$(e.target),c,h,p;i==="AWS.AutoScaling.LaunchConfiguration"&&MC.canvas.getState()==="app"&&(l.is(".instance-volume")?MC.canvas.volume.show.call(e.target):(MC.canvas.event.clearSelected(),$canvas(this.id).select()));if(l.is(".instance-volume"))return MC.canvas.volume.show.call(e.target),!1;if(l.is(".eip-status")&&MC.canvas.getState()!=="appview")return $canvas(this.id).toggleEip(),!1;i==="AWS.VPC.Subnet"&&t.find(".port").hide(),c=t.clone(),i==="AWS.EC2.Instance"&&c.append([Canvon.rectangle(75,75,25,25).attr({"class":"clone-icon",rx:2,ry:2}),Canvon.image(MC.IMG_URL+"ide/icon-drag-to-copy.png",82,82,12,12).attr("class","clone-icon")]),o.append(c),h=MC.canvas.MATCH_PLACEMENT[f][i],h&&$.each(h,function(e,t){t!=="AWS.AutoScaling.Group"&&t!=="Canvas"&&Canvon("."+t.replace(/\./ig,"-")).addClass("dropable-group")}),$(document.body).append('<div id="overlayer" class="grabbing"></div>'),c[0].transform.numberOfItems===0?p=c[0].transform.baseVal.appendItem(c[0].ownerSVGElement.createSVGTransform()):p=c[0].transform.baseVal.getItem(0),i==="AWS.VPC.InternetGateway"||i==="AWS.VPC.VPNGateway"?(Canvon(c).addClass("shadow"),$(document).on({mousemove:MC.canvas.event.dragable.gatewaymove,mouseup:MC.canvas.event.dragable.gatewayup},{target:t,canvas_body:a,target_type:i,node_type:s,vpc_data:$canvas($(".AWS-VPC-VPC").attr("id")),shadow:c,offsetX:e.pageX-r.left+u.left,offsetY:e.pageY-r.top+u.top,originalPageX:e.pageX,originalPageY:e.pageY,scale_ratio:$canvas.scale(),SVGtranslate:p})):$(document).on({"keydown.DRAGABLE_EVENT":i==="AWS.EC2.Instance"?MC.canvas.event.dragable.keyClone:!1,"mousemove.DRAGABLE_EVENT":MC.canvas.event.dragable.mousemove,"mouseup.DRAGABLE_EVENT":Canvon(e.target).hasClass("asg-resource-dragger")?MC.canvas.event.dragable.asgExpandup:MC.canvas.event.dragable.mouseup},{target:t,canvas_body:a,target_type:i,node_type:s,shadow:c,offsetX:e.pageX-r.left+u.left,offsetY:e.pageY-r.top+u.top,groupChild:s==="group"?MC.canvas.groupChild(this):null,originalPageX:e.pageX,originalPageY:e.pageY,originalTarget:e.target,size:n.size(),grid_width:MC.canvas.GRID_WIDTH,grid_height:MC.canvas.GRID_HEIGHT,scale_ratio:$canvas.scale(),SVGtranslate:p}),MC.canvas.volume.close(),MC.canvas.event.clearSelected()}},keyClone:function(e){if(!e.altKey)return e.data.canvas_body.removeClass("cloning"),!1;if(!e.data.canvas_body.hasClass("cloning"))return e.data.canvas_body.addClass("cloning"),!1},mousemove:function(e){var t=e.data,n=t.target[0].id,r=t.target_type,i=t.node_type,s=t.size,o=t.grid_width,u=t.grid_height,a=t.scale_ratio,f={x:Math.round((e.pageX-t.offsetX)/(o/a)),y:Math.round((e.pageY-t.offsetY)/(u/a))},l=MC.canvas.isMatchPlace(n,r,i,f.x,f.y,s[0],s[1]);return e.pageX!==t.originalPageX&&e.pageY!==t.originalPageY&&!Canvon(t.shadow).hasClass("shadow")&&(Canvon(t.shadow).addClass("shadow"),t.canvas_body.addClass("node-dragging")),e.altKey?t.canvas_body.addClass("cloning"):t.canvas_body.removeClass("cloning"),Canvon(".match-dropable-group").removeClass("match-dropable-group"),l.is_matched&&Canvon("#"+l.target).addClass("match-dropable-group"),t.SVGtranslate.setTranslate(f.x*o,f.y*u),!1},mouseup:function(e){var t=e.data,n=t.target,r=n.attr("id"),i=$canvas(r),s=t.target_type,o=t.node_type;s==="AWS.VPC.Subnet"&&t.target.find(".port").show();if(e.pageX===t.originalPageX&&e.pageY===t.originalPageY)MC.canvas.getState()==="app"?MC.canvas.instanceList.show.call(n[0],e):($canvas(r).select(),MC.canvas.volume.close());else{var u=$("#svg_canvas"),a=$canvas.offset(),f=Canvon(t.shadow).offset(),l=$canvas.node(),c=$canvas.scale(),h,p,d,v,m;o==="node"&&(h=t.size,d=MC.canvas.pixelToGrid(f.left-a.left,f.top-a.top),p=MC.canvas.isMatchPlace(r,s,o,d.x,d.y,h[0],h[1]),m=MC.canvas.parentGroup(r,s,d.x,d.y,d.x+h[0],d.y+h[1]),d.x>0&&d.y>0&&p.is_matched&&(t.canvas_body.hasClass("cloning")?i.clone(m?m.id:"canvas",d.x,d.y):i.changeParent(m?m.id:"canvas",function(){this.move(d.x,d.y),this.reConnect(),$canvas(r).select()})));if(o==="group"){var d=MC.canvas.pixelToGrid(f.left-a.left,f.top-a.top),g=$canvas.group(),y=g[r],b=i.position(),w=i.size(),E=i.type,S=MC.canvas.GROUP_PADDING,x=[],T=[],N={},C=!1,p,k,m,L,A,O,M,_,D,P,H,B,j,F;E==="AWS.VPC.VPC"?(d.y<=3&&(d.y=3),d.x<=5&&(d.x=5)):(d.y<=2&&(d.y=2),d.x<=2&&(d.x=2)),p=MC.canvas.isMatchPlace(r,s,o,d.x-1,d.y-1,w[0]+2,w[1]+2),k=MC.canvas.areaChild(r,s,d.x,d.y,d.x+w[0],d.y+w[1]),m=MC.canvas.parentGroup(r,E,d.x,d.y,d.x+w[0],d.y+w[1]),$.each(k,function(e,t){x.push(t.id)}),$.each(t.groupChild,function(e,t){x.push(t.id)}),$.each(x,function(e,t){$.inArray(t,T)===-1&&T.push(t)}),m&&(parent_item=$canvas(m.id),L=g[m.id],A=parent_item.position(),O=parent_item.size(),A[0]+S>d.x&&(d.x=A[0]+S,C=!0),A[0]+O[0]-S<d.x+w[0]&&(d.x=A[0]+O[0]-S-w[0],C=!0),A[1]+S>d.y&&(d.y=A[1]+S,C=!0),A[1]+O[1]-S<d.y+w[1]&&(d.y=A[1]+O[1]-S-w[1],C=!0),C&&(D=MC.canvas.areaChild(r,s,d.x,d.y,d.x+w[0],d.y+w[1]))),P=d.x-b[0],H=d.y-b[1],F=MC.canvas.isBlank(r,E,"group",d.x,d.y,w[0],w[1])&&t.groupChild.length===T.length,C&&p.is_matched&&t.groupChild.length===D.length||!C&&p.is_matched&&F?i.changeParent(m?m.id:"canvas",function(){this.move(d.x,d.y),this.reConnect()}):F||$canvas.trigger("CANVAS_PLACE_OVERLAP"),$canvas(r).select()}}t.shadow.remove(),t.canvas_body.removeClass("node-dragging").removeClass("cloning"),$("#overlayer").remove(),Canvon(".dropable-group").removeClass("dropable-group"),Canvon(".match-dropable-group").removeClass("match-dropable-group"),$(document).off(".DRAGABLE_EVENT")},gatewaymove:function(e){var t=e.data,n=Math.round((e.pageY-t.offsetY)/(MC.canvas.GRID_HEIGHT/t.scale_ratio)),r=t.vpc_data.position(),i=t.vpc_data.size(),s=t.target_type;return n>r[1]+i[1]-8&&(n=r[1]+i[1]-8),n<r[1]&&(n=r[1]),s==="AWS.VPC.InternetGateway"&&t.SVGtranslate.setTranslate((r[0]-4)*MC.canvas.GRID_WIDTH,n*MC.canvas.GRID_HEIGHT),s==="AWS.VPC.VPNGateway"&&t.SVGtranslate.setTranslate((r[0]+i[0]-4)*MC.canvas.GRID_WIDTH,n*MC.canvas.GRID_HEIGHT),!1},gatewayup:function(e){var t=e.data.target,n=t.attr("id"),r=$canvas(n),i=r.type,s=$canvas.offset(),o=Canvon(e.data.shadow).offset(),u=t.data("class"),a=$canvas.scale(),f=MC.canvas.pixelToGrid(o.left-s.left,o.top-s.top);r.position(null,f.y),r.reConnect(),r.select(),Canvon(".dropable-group").removeClass("dropable-group"),e.data.shadow.remove(),e.data.canvas_body.removeClass("node-dragging"),$("#overlayer").remove(),$(document).off({mousemove:MC.canvas.event.gatewaymove,mouseup:MC.canvas.event.gatewayup})},asgExpandup:function(e){var t=e.data,n=e.data.target,r=n.attr("id"),i=e.data.target_type,s=t.nodeType,o=$canvas(r),u=$("#svg_canvas"),a=$canvas.offset(),f=Canvon(e.data.shadow).offset(),l=$canvas.scale(),c=MC.canvas.pixelToGrid(f.left-a.left,f.top-a.top),h=t.size,p=MC.canvas.areaChild(r,i,c.x,c.y,c.x+h[0],c.y+h[1]),d=MC.canvas.isMatchPlace(null,i,s,c.x,c.y,h[0],h[1]),v=MC.canvas.parentGroup(r,i,c.x,c.y,c.x+h[0],c.y+h[1]);p.length===0&&d.is_matched&&(o.asgExpand(d.target,c.x,c.y),o.select()),Canvon(".dropable-group").removeClass("dropable-group"),e.data.shadow.remove(),e.data.canvas_body.removeClass("node-dragging"),$("#overlayer").remove(),$(document).off(".DRAGABLE_EVENT")}},MC.canvas.event.drawConnection={mousedown:function(e){if(e.which===1){var t=$("#svg_canvas"),n=t.offset(),r=$(this),i=Canvon(this).offset(),s=r.parent(),o=s.attr("id"),u=$canvas(o),a=u.type,f=r.data("position"),l=r.data("type"),c=r.data("name"),h=MC.canvas.CONNECTION_OPTION[a],p=$canvas.scale(),d={},v=8/p,m=u.connection(),g,y,b,w,E,S,x;switch(f){case"left":d.left=i.left,d.top=i.top+v;break;case"right":d.left=i.left+v,d.top=i.top+v;break;case"top":d.left=i.left+v,d.top=i.top;break;case"bottom":d.left=i.left+v,d.top=i.top+v}$(document.body).append('<div id="overlayer"></div>'),t.append(Canvon.group().attr({"class":"draw-line-wrap line-"+l,id:"draw-line-connection"})),$(document).on({mousemove:MC.canvas.event.drawConnection.mousemove,mouseup:MC.canvas.event.drawConnection.mouseup},{connect:r.data("connect"),originalTarget:r.parent(),originalX:(d.left-n.left)*p,originalY:(d.top-n.top)*p,option:h,draw_line:$("#draw-line-connection"),port_name:c,canvas_offset:n,scale_ratio:p}),MC.canvas.event.clearSelected(),$.each(m,function(e,t){Canvon("#"+t.line).addClass("view-keephover")}),$.each(h,function(e,t){$.type(t)!=="array"&&(t=[t]),$.each(t,function(t,n){n.from===c&&$("."+e.replace(/\./ig,"-")+":not(#"+o+")").each(function(e,t){u.isConnectable(n.from,t.id,n.to)&&(w=this,$(w).find(".port-"+n.to).each(function(){E=$(this),E.css("display")!=="none"&&(Canvon(w).addClass("connectable"),Canvon(E).addClass("connectable-port view-show"))}))})})})}return!1},mousemove:function(e){var t=e.data,n=t.canvas_offset,r=t.scale_ratio,i=(e.pageX-n.left)*r,s=(e.pageY-n.top)*r,o=t.originalX,u=t.originalY,a=Math.atan2(s-u,i-o),f=8,l=.5235987755982988,c=a-l,h=a+l;return t.draw_line.empty().append(Canvon.line(o,u,i,s).attr("class","draw-line"),Canvon.polygon([[i,s],[i-f*Math.cos(c),s-f*Math.sin(c)],[i-f*Math.cos(h),s-f*Math.sin(h)]]).attr("class","draw-line-arrow")),!1},mouseup:function(e){e.data.draw_line.remove();var t=MC.canvas.matchPoint(Math.round(e.pageX-e.data.canvas_offset.left),Math.round(e.pageY-e.data.canvas_offset.top)),n=e.data.originalTarget,r=e.data.port_name,i=n.data("class"),s,r,o,u,a,f,l;return(i==="AWS.VPC.RouteTable"||i==="AWS.ELB")&&!t&&(a=MC.canvas.pixelToGrid(e.pageX-e.data.canvas_offset.left,e.pageY-e.data.canvas_offset.top),t=null,$.each($canvas.group(),function(e,n){f=n.position(),l=n.size();if(n.type==="AWS.VPC.Subnet"&&f&&f[0]-2<a.x&&f[0]+l[0]+2>a.x&&f[1]<a.y&&f[1]+l[1]>a.y)return t=document.getElementById(n.id),!1})),t&&(s=$(t),$.inArray(n.data("class"),["AWS.EC2.Instance","AWS.AutoScaling.LaunchConfiguration"])>-1&&s.data("class")==="AWS.ELB"?(match_node_offset=t.getBoundingClientRect(),e.pageX>match_node_offset.left+match_node_offset.width/2&&(o="elb-sg-out"),e.pageX<match_node_offset.left+match_node_offset.width/2&&(o="elb-sg-in")):o=s.find(".connectable-port").data("name"),!n.is(s)&&o!==undefined&&$canvas.connect(n.attr("id"),r,s.attr("id"),o)),Canvon("#svg_canvas .connectable").removeClass("connectable"),Canvon("#svg_canvas .view-keephover").removeClass("view-keephover"),Canvon("#svg_canvas .view-show").removeClass("view-show"),Canvon("#svg_canvas .connectable-port").removeClass("connectable-port"),$("#overlayer").remove(),$(document).off({mousemove:MC.canvas.event.drawConnection.mousemove,mouseup:MC.canvas.event.drawConnection.mouseup}),!1}},MC.canvas.event.siderbarDrag={mousedown:function(e){if(e.which===1){var t=$(this),n=t.offset(),r=$("#svg_canvas"),i=$canvas.offset(),s=t.data("type"),o=t.data("component-type"),u=$canvas.platform(),a=$("#changeAmiDropZone"),f,l,c,h,p,d,v,m;if(t.data("enable")===!1)return!1;$(document.body).append('<div id="drag_shadow"></div><div id="overlayer" class="grabbing"></div>'),c=$("#drag_shadow"),o==="group"?(m=MC.canvas.GROUP_DEFAULT_SIZE[s],c.addClass(s.replace(/\./ig,"-"))):(h=t.find(".resource-icon").clone(),c.append(h),m=MC.canvas.COMPONENT_SIZE[s]),c.css({top:e.pageY-50,left:e.pageX-50,width:m[0]*MC.canvas.GRID_WIDTH,height:m[1]*MC.canvas.GRID_HEIGHT}).show(),s==="AWS.EC2.EBS.Volume"?(MC.canvas.getState()==="appedit"?Canvon(".AWS-EC2-Instance, .AWS-AutoScaling-LaunchConfiguration").addClass("attachable"):Canvon(".AWS-EC2-Instance, .AWS-AutoScaling-LaunchConfiguration").addClass("attachable"),c.addClass("AWS-EC2-EBS-Volume"),$(document).on({mousemove:MC.canvas.volume.mousemove,mouseup:MC.canvas.volume.mouseup},{target:t,canvas_offset:i,canvas_body:$("#canvas_body"),shadow:c,action:"add"})):(v=MC.canvas.MATCH_PLACEMENT[u][s],v&&Canvon("."+v.join(",").replace(/\./ig,"-").replace(/,/ig,",.")).addClass("dropable-group"),s==="AWS.EC2.Instance"&&a.is(":visible")&&(f=a.offset(),l={x1:f.left,x2:f.left+a.width(),y1:f.top,y2:f.top+a.height()}),$(document).on({mousemove:MC.canvas.event.siderbarDrag.mousemove,mouseup:MC.canvas.event.siderbarDrag.mouseup},{target:t,node_type:o,canvas_offset:i,target_type:s,shadow:c,scale_ratio:$canvas.scale(),component_size:o==="node"?MC.canvas.COMPONENT_SIZE[s]:MC.canvas.GROUP_DEFAULT_SIZE[s],drop_zone:a,drop_zone_data:l})),$("#canvas_body").addClass("node-dragging")}return MC.canvas.volume.close(),MC.canvas.event.clearSelected(),!1},mousemove:function(e){var t=e.data,n=t.shadow[0],r=t.canvas_offset,i=t.target[0].id,s=t.node_type,o=t.target_type,u=t.component_size,a=10,f=10,l=t.scale_ratio,c={x:Math.round((e.pageX-r.left-50)/(a/l)),y:Math.round((e.pageY-r.top-50)/(f/l))},h=MC.canvas.isMatchPlace(null,o,s,c.x,c.y,u[0],u[1]);return Canvon(".match-dropable-group").removeClass("match-dropable-group"),h.is_matched&&Canvon("#"+h.target).addClass("match-dropable-group"),t.drop_zone_data&&(e.pageX>t.drop_zone_data.x1&&e.pageX<t.drop_zone_data.x2&&e.pageY>t.drop_zone_data.y1&&e.pageY<t.drop_zone_data.y2?t.drop_zone.addClass("hover"):t.drop_zone.removeClass("hover")),n.style.top=e.pageY-50+"px",n.style.left=e.pageX-50+"px",!1},mouseup:function(e){$("#overlayer").remove(),e.data.shadow.hide();var t=document.elementFromPoint(e.pageX,e.pageY);if(t.id==="changeAmiDropZone"||$(t).parents("#changeAmiDropZone").length>0)$("#changeAmiDropZone").removeClass("hover").trigger("drop",$(e.data.target).data("option").imageId),e.data.shadow.remove();else{e.data.shadow.show();if(!$("#canvas_body").hasClass("canvas_zoomed")){var n=$(e.data.target),r=n.attr("id")||"",i=n.data("component-type"),s=n.data("type"),o=$canvas.offset(),u=e.data.shadow.position(),a=n.data("option")||{},f=MC.canvas.pixelToGrid(u.left-o.left,u.top-o.top),l,c,h,p,d,v,m,g,y;f.x>0&&f.y>0&&(i==="node"&&(l=MC.canvas.COMPONENT_SIZE[s],s==="AWS.VPC.InternetGateway"||s==="AWS.VPC.VPNGateway"?(d=$(".AWS-VPC-VPC").attr("id"),v=$canvas(d),m=v.position(),vpc_size=v.size(),a.groupUId=d,f.y>m[1]+vpc_size[1]-l[1]&&(f.y=m[1]+vpc_size[1]-l[1]),f.y<m[1]&&(f.y=m[1]),s==="AWS.VPC.InternetGateway"&&(f.x=m[0]-l[1]/2),s==="AWS.VPC.VPNGateway"&&(f.x=m[0]+vpc_size[0]-l[1]/2),$canvas.add(s,a,f)):(c=MC.canvas.isMatchPlace(null,s,i,f.x,f.y,l[0],l[1]),c.is_matched?(a.groupUId=c.target,y=$canvas.add(s,a,f),y&&MC.canvas.select(y)):$canvas.trigger("CANVAS_PLACE_NOT_MATCH",{type:s}))),i==="group"&&(h=MC.canvas.GROUP_DEFAULT_SIZE[s],s==="AWS.VPC.Subnet",c=MC.canvas.isMatchPlace(null,s,i,f.x,f.y,h[0],h[1]),g=MC.canvas.areaChild(null,s,f.x,f.y,f.x+h[0],f.y+h[1]),c.is_matched?MC.canvas.isBlank(r,s,"group",f.x-1,f.y-1,h[0]+2,h[1]+2)&&g.length===0?(a.groupUId=c.target,y=$canvas.add(s,a,f),(!$canvas.hasVPC()||s!=="AWS.EC2.AvailabilityZone")&&MC.canvas.select(y)):$canvas.trigger("CANVAS_PLACE_OVERLAP"):$canvas.trigger("CANVAS_PLACE_NOT_MATCH",{type:s}))),s==="AWS.VPC.InternetGateway"||s==="AWS.VPC.VPNGateway"?e.data.shadow.show().animate({left:f.x*MC.canvas.GRID_WIDTH+o.left,top:f.y*MC.canvas.GRID_HEIGHT+o.top,opacity:0},function(){e.data.shadow.remove()}):e.data.shadow.remove()}else $canvas.trigger("CANVAS_ZOOMED_DROP_ERROR"),e.data.shadow.remove()}Canvon(".dropable-group").removeClass("dropable-group"),Canvon(".match-dropable-group").removeClass("match-dropable-group"),$("#canvas_body").removeClass("node-dragging"),$(document).off({mousemove:MC.canvas.event.mousemove,mouseup:MC.canvas.event.mouseup})}},MC.canvas.event.groupResize={mousedown:function(e){if(e.which===1){var t=e.target,n=$(t.parentNode.parentNode),r=$canvas(n.attr("id")),i=n.find(".group"),s=i[0].getBoundingClientRect(),o=$canvas.offset(),u=$canvas.scale(),a=MC.canvas.GRID_WIDTH,f=MC.canvas.GRID_HEIGHT,l=(s.left-o.left)*u,c=(s.top-o.top)*u,h=r.type,p=document.getElementById("line_layer");h==="AWS.VPC.Subnet"&&$.each(r.connection(),function(e,t){p.removeChild(document.getElementById(t.line))}),n.find(".group-label, .port").hide(),$(document.body).append('<div id="overlayer" style="cursor: '+$(e.target).css("cursor")+'"></div>'),$(document).on({mousemove:MC.canvas.event.groupResize.mousemove,mouseup:MC.canvas.event.groupResize.mouseup},{parent:n,resizer:t,target:i,originalTarget:i[0],group_child:MC.canvas.groupChild(t.parentNode.parentNode),originalX:e.pageX,originalY:e.pageY,originalWidth:s.width,originalHeight:s.height,originalTop:s.top,originalLeft:s.left,originalTranslate:n.attr("transform"),canvas_offset:o,offsetX:e.pageX-o.left,offsetY:e.pageY-o.top,direction:$(t).data("direction"),group_type:h,scale_ratio:u,group_min_padding:MC.canvas.GROUP_MIN_PADDING,parentGroup:MC.canvas.parentGroup(n.attr("id"),h,Math.ceil(l/a),Math.ceil(c/f),Math.ceil((s.left+s.width)/a),Math.ceil((s.top+s.height)/f)),group_port:h==="AWS.VPC.Subnet"?[n.find(".port-subnet-assoc-in").first(),n.find(".port-subnet-assoc-out").first()]:null})}return!1},mousemove:function(e){var t=e.data,n=t.originalTarget,r=t.direction,i=t.scale_ratio,s=t.group_min_padding,o=Math.ceil((e.pageX-t.originalLeft)/10)*10*i,u=t.originalWidth*i-s,a=Math.ceil((e.pageY-t.originalTop)/10)*10*i,f=t.originalHeight*i-s,l,c;switch(r){case"topleft":l={y:a>f?f:a,x:o>u?u:o,width:t.originalWidth*i-o,height:t.originalHeight*i-a};break;case"topright":l={y:a>f?f:a,width:Math.round((t.originalWidth+e.pageX-t.originalX)/10)*10*i,height:t.originalHeight*i-a};break;case"bottomleft":l={x:o>u?u:o,width:t.originalWidth*i-o,height:Math.round((t.originalHeight+e.pageY-t.originalY)/10)*10*i};break;case"bottomright":l={width:Math.round((t.originalWidth+e.pageX-t.originalX)/10)*10*i,height:Math.round((t.originalHeight+e.pageY-t.originalY)/10)*10*i};break;case"top":l={y:a>f?f:a,height:t.originalHeight*i-a};break;case"right":l={width:Math.round((t.originalWidth+e.pageX-t.originalX)/10)*10*i};break;case"bottom":l={height:Math.round((t.originalHeight+e.pageY-t.originalY)/10)*10*i};break;case"left":l={x:o>u?u:o,width:t.originalWidth*i-o}}l.width!==undefined&&l.width<s&&(l.width=s),l.height!==undefined&&l.height<s&&(l.height=s);for(c in l)n[c].baseVal.value=l[c];return!1},mouseup:function(e){var t=e.data,n=t.parent,r=t.target,i=r[0],s=t.group_type,o=t.direction,u=n[0].getBoundingClientRect(),a=t.canvas_offset,f=$canvas.scale(),l=MC.canvas.GRID_WIDTH,c=MC.canvas.GRID_HEIGHT,h=i.x.baseVal.value,p=i.y.baseVal.value,d=n.attr("id"),v=Math.round(i.width.baseVal.value/l),m=Math.round(i.height.baseVal.value/c),g=Math.round(((u.left-a.left)*f+h)/l),y=Math.round(((u.top-a.top)*f+p)/c),b=$canvas.size(),w=[],E=[],S=[],x=[],T=MC.canvas.GROUP_PADDING,N=t.parentGroup,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,J,K;h<0&&(g=Math.round((u.left-a.left)*f/l));if(o==="top"||o==="topleft"||o==="topright")p<0?y=Math.round((u.top-a.top)*f/c):p>0&&(y=Math.round(((u.top-a.top)*f+p)/l));$.each(t.group_child,function(e,t){t=$canvas(t.id),P=t.size(),D=t.position(),w.push(D[0]),E.push(D[1]),S.push(D[0]+P[0]),x.push(D[1]+P[1])}),H=Math.max.apply(Math,S)+T,B=Math.max.apply(Math,x)+T,j=Math.min.apply(Math,w)-T,F=Math.min.apply(Math,E)-T;switch(o){case"topleft":g>=j&&(v+=g-j,g=j),y>=F&&(m+=y-F,y=F);break;case"topright":v=v+g>=H?v:H-g,y>=F&&(m+=y-F,y=F);break;case"bottomleft":g>=j&&(v+=g-j,g=j),m=m+y>=B?m:B-y;break;case"bottomright":v=v+g>=H?v:H-g,m=m+y>=B?m:B-y;break;case"top":y>=F&&(m+=y-F,y=F);break;case"right":v=v+g>=H?v:H-g;break;case"bottom":m=m+y>=B?m:B-y;break;case"left":g>=j&&(v+=g-j,g=j)}N&&(A=$canvas(N.id),O=A.size(),M=A.position(),g<M[0]+T&&(v=g+v-M[0]-T,g=M[0]+T),y<M[1]+T&&(m=y+m-M[1]-T,y=M[1]+T),v+g>M[0]+O[0]-T&&(v=M[0]+O[0]-T-g),m+y>M[1]+O[1]-T&&(m=M[1]+O[1]-T-y)),s==="AWS.VPC.VPC"?(y<=3&&(m=m+y-3,y=3),g<=5&&(v=v+g-5,g=5)):(y<=2&&(m=m+y-2,y=2),g<=2&&(v=v+g-2,g=2)),v>T&&m>T&&t.group_child.length===MC.canvas.areaChild(d,s,g,y,g+v,y+m).length&&g+v<b[0]-3&&y+m<b[1]-3?(s==="AWS.VPC.VPC"&&(I=$(".AWS-VPC-InternetGateway"),z=$(".AWS-VPC-VPNGateway"),I[0]&&(igw_item=$canvas(I[0].id),U=igw_item.position()[1],U>y+m-8&&(U=y+m-8),U<y&&(U=y),igw_item.position(g-4,U),igw_item.reConnect()),z[0]&&(vgw_item=$canvas(z[0].id),V=vgw_item.position()[1],V>y+m-8&&(V=y+m-8),V<y&&(V=y),vgw_item.position(g+v-4,V),vgw_item.reConnect())),C=$canvas(d),C.position(g,y),C.size(v,m),MC.canvas.updateResizer(n,v,m)):(v=Math.round(t.originalWidth*f/10),m=Math.round(t.originalHeight*f/10),C=$canvas(d),k=C.position(),C.position(k[0],k[1]),C.size(v,m),MC.canvas.updateResizer(n,v,m)),n.find(".group-label, .port").show(),s==="AWS.VPC.Subnet"&&(J=m*MC.canvas.GRID_HEIGHT/2-5,t.group_port[0].attr("transform","translate(-12, "+J+")"),t.group_port[1].attr("transform","translate("+(v*MC.canvas.GRID_WIDTH+10)+", "+J+")")),C.reConnect(),$("#overlayer").remove(),$(document).off({mousemove:MC.canvas.event.groupResize.mousemove,mouseup:MC.canvas.event.groupResize.mouseup})}},MC.canvas.event.ctrlMove={mousedown:function(e){if(e.which===1&&(e.ctrlKey||e.metaKey)){e.stopImmediatePropagation();var t=$canvas.offset(),n=$("#canvas"),r=n.find(".scroll-content").first()[0];return $(document).on({mousemove:MC.canvas.event.ctrlMove.mousemove,mouseup:MC.canvas.event.ctrlMove.mouseup},{canvas:n,offsetX:e.pageX,offsetY:e.pageY,originalCoordinate:{left:r.realScrollLeft?r.realScrollLeft:0,top:r.realScrollTop?r.realScrollTop:0}}),$(document.body).append('<div id="overlayer" class="grabbing"></div>'),!1}},mousemove:function(e){var t=e.data;return scrollbar.scrollTo(t.canvas,{left:t.offsetX-e.pageX-t.originalCoordinate.left,top:t.offsetY-e.pageY-t.originalCoordinate.top}),!1},mouseup:function(){return $("#overlayer").remove(),$(document).off({mousemove:MC.canvas.event.ctrlMove.mousemove,mouseup:MC.canvas.event.ctrlMove.mouseup}),!1}},MC.canvas.event.selectLine=function(e){return e.which===1&&(MC.canvas.event.clearSelected(),$canvas(this.id).select()),!1},MC.canvas.event.selectNode=function(e){if(e.which===1){if(MC.canvas.event.dblclick(function(){$canvas.trigger("SHOW_PROPERTY_PANEL")}))return!1;MC.canvas.event.clearSelected(),$canvas(this.id).select()}return!1},MC.canvas.event.appDrawConnection=function(){return MC.canvas.event.drawConnection.mousedown.call(this,event),!1},MC.canvas.event.clearList=function(e){return MC.canvas.instanceList.close(),MC.canvas.eniList.close(),MC.canvas.asgList.close(),MC.canvas.event.clearSelected(e),!0},MC.canvas.event.nodeHover=function(e){var t=$canvas(this.id).connection(),n=[],r=t.length;while(r--)n[r]="#"+t[r].line;return Canvon(n.join(","))[e.type==="mouseenter"?"addClass":"removeClass"]("view-hover"),!0},MC.canvas.event.clearSelected=function(e){return e&&$(e.currentTarget).is("#tab-bar li")?!1:(Canvon("#svg_canvas .selected").removeClass("selected"),Canvon("#svg_canvas .view-show").removeClass("view-show"),$("#node-action-wrap").remove(),$canvas.selected_node().length=0,!0)},MC.canvas.event.clickBlank=function(e){return e.target.id==="svg_canvas"&&$canvas.trigger("CANVAS_NODE_SELECTED",""),!0},MC.canvas.event.keyEvent=function(e){var t=MC.canvas.getState(),n=$canvas.selected_node();if($("#modal-wrap")[0]!==undefined||$(".sub-stateeditor").css("display")==="block"&&e.which!==46&&e.which!==8||Tabbar.current==="dashboard")return!0;if($.inArray(t,["new","app","stack","appedit","appview"])>-1){var r=e.which,i=e.target.nodeName.toLowerCase();if(i==="input"||i==="textarea"||e.target.contentEditable==="true")return!0;if(!(r!==46&&r!==8||t!=="stack"&&t!=="appedit")&&n.length>0)return e.ctrlKey?!0:(MC.canvas.volume.close(),$.each(n,function(e,t){$canvas(t).remove()}),!1);if(r===8&&i!=="input"&&i!=="textarea")return!1;if(r===9&&n.length===1){var s=n[0],o=[],u=0,a,f,l,c;return $canvas(s).nodeType!=="node"?!1:($.each($canvas.node(),function(e,t){t.id===s&&(a=e),o.push(t.id),e++}),a===o.length-1?a=0:a++,MC.canvas.event.clearSelected(),l=$("#"+o[a]).attr("id"),c=$canvas(l),c.select(),!1)}if($.inArray(r,[37,38,39,40])>-1&&(t==="stack"||t==="appedit"||t==="appview")&&n.length===1&&$("#"+n[0]).data("type")!=="line"){var h=$("#"+n[0]),p=n[0],d=$canvas(p),v=d.nodeType,m=d.type,g=d.position(),y=$canvas.size(),b=$canvas.scale(),g={x:g[0],y:g[1]},w=d.size(),E,S,x,T,N;return v!=="node"?!1:(r===38&&g.y--,r===40&&g.y++,m==="AWS.VPC.InternetGateway"||m==="AWS.VPC.VPNGateway"?(E={},S=$(".AWS-VPC-VPC").attr("id"),x=$canvas(S),N=x.position(),T=x.size(),E.is_matched=g.y<=N[1]+T[1]-w[1]&&g.y>=N[1]):(r===37&&g.x--,r===39&&g.x++,E=MC.canvas.isMatchPlace(p,m,v,g.x,g.y,w[0],w[1])),g.x>0&&g.y>0&&E.is_matched&&g.x+w[0]<y[0]-3&&g.y+w[1]<y[1]-3&&(d.position(g.x,g.y),d.reConnect()),!1)}if((e.ctrlKey||e.metaKey)&&r===83&&t==="stack")return $canvas.trigger("CANVAS_SAVE"),!1;if((e.ctrlKey||e.metaKey)&&r===187)return MC.canvas.zoomIn(),!1;if((e.ctrlKey||e.metaKey)&&r===189)return MC.canvas.zoomOut(),!1;if(r===13&&MC.canvas.getState()!=="appview"){var C=$canvas($canvas.selected_node()[0]).type;return(C==="AWS.EC2.Instance"||C==="AWS.AutoScaling.LaunchConfiguration")&&$canvas.trigger("SHOW_STATE_EDITOR",$canvas.selected_node()[0]),!1}if(r===83&&n.length===1&&MC.canvas.getState()!=="appview"){var C=$canvas($canvas.selected_node()[0]).type;return(C==="AWS.EC2.Instance"||C==="AWS.AutoScaling.LaunchConfiguration")&&$canvas.trigger("SHOW_STATE_EDITOR",$canvas.selected_node()[0]),!1}if(r===80)return $canvas.trigger("SHOW_PROPERTY_PANEL"),!1}},MC.canvas.analysis=function(){function b(e){var n=[],r=p[t[e].type],i,s;return $.each(t,function(o,u){$.inArray(t[o].type,r)>-1&&u.parentId===e&&(s=b(o),i={id:o,coordinate:[0,0],size:[0,0],type:u.type},MC.canvas.COMPONENT_SIZE[u.type]!==undefined&&(i.size=MC.canvas.COMPONENT_SIZE[u.type]),v[u.type]!==undefined&&(i.size=v[u.type]),s&&(i.children=s),n.push(i))}),n.length<1?!1:n}function w(e){if(e.children!==undefined){var t=0;return $.each(e.children,function(e,n){t+=w(n)}),e.totalChild=t+e.children.length,e.type==="AWS.VPC.Subnet"&&(e.hasELBConnected=!1,$.each(e.children,function(t,n){$.inArray(n.id,r)>-1&&(e.hasELBConnected=!0),n.type==="AWS.AutoScaling.Group"&&n.children!==undefined&&$.inArray(n.children[0].id,r)>-1&&(e.hasELBConnected=!0)})),e.children.length}return e.totalChild=0,e.type==="AWS.VPC.Subnet"&&(e.hasELBConnected=!1),0}function E(e){e.children!==undefined&&(e.type==="AWS.EC2.AvailabilityZone"?e.children.sort(function(e,t){if(e.hasELBConnected===!0&&t.hasELBConnected===!0||e.hasELBConnected===!1&&t.hasELBConnected===!1)return t.totalChild-e.totalChild;if(e.hasELBConnected===!0&&t.hasELBConnected===!1)return-1;if(e.hasELBConnected===!1&&t.hasELBConnected===!0)return 1}):e.children.sort(function(e,t){return t.totalChild-e.totalChild}),$.each(e.children,function(e,t){E(t)}))}function S(n){var i={},o=n.children,u=o.length,a=m[n.type],f=0,l=0,c=2,h=2,p={},v=[],g=[],y=[],b=!1,w=Math.ceil(Math.sqrt(u)),E=u===0?0:Math.ceil(u/w),S=0,x=0,N,C,k;o.sort(function(e,t){return d[e.type]-d[t.type]}),$.each(o,function(n,r){C=!1,k=null,i[r.type]===undefined&&(i[r.type]=[]),i[r.type].push(r),r.type!=="AWS.AutoScaling.Group"&&r.type!=="AWS.EC2.Instance"||r.children===undefined?N=t[r.id].connection():N=t[r.children[0].id].connection(),N?($.each(N,function(n,r){t[r.target].type==="AWS.ELB"&&e[r.line].target[r.target]==="elb-sg-out"&&(C=!0,k=r.target)}),C?(p[k]===undefined&&(p[k]=[]),p[k].push(r)):r.type==="AWS.AutoScaling.Group"&&v.push(r)):r.type==="AWS.AutoScaling.Group"&&v.push(r)});var L=0,A=0,O=0,M=0,x,_=15,D=15,P=11,H=11;v.length>0&&(p.zz=v),$.each(p,function(e,t){O=0,t.sort(function(e,t){return d[e.type]-d[t.type]}),$.each(t,function(e,t){t.type==="AWS.AutoScaling.Group"&&(A=_,t.coordinate=[M+2,O+s],O+=D,t.children!==undefined&&T(t)),t.type==="AWS.EC2.Instance"&&(A=A===_?_:P,t.coordinate=[M+(A===_?4:2),O+s],O+=H)}),L++,M+=A}),i["AWS.EC2.Instance"]!==undefined&&($.each(i["AWS.EC2.Instance"],function(e,t){$.inArray(t.id,r)===-1&&y.push(t)}),y.sort(function(e,t){return $canvas(e.id).getModel().attributes.name.localeCompare($canvas(t.id).getModel().attributes.name)}));if(y.length>0){var B=y.length,j=Math.ceil(Math.sqrt(B)),F=B===0?0:Math.ceil(B/j),S=0,x=0;$.each(y,function(e,t){S>=j&&(S=0,x++),t.coordinate=[S*9+S*c+s,x*9+x*c+s],S++}),$.each(y,function(e,t){t.coordinate[0]+=M}),M+=j*P}if(i["AWS.VPC.NetworkInterface"]!==undefined){var B=i["AWS.VPC.NetworkInterface"].length,j=Math.ceil(Math.sqrt(B)),F=B===0?0:Math.ceil(B/j),I=0,S=0,x=0;$.each(i["AWS.VPC.NetworkInterface"],function(e,t){S>=j&&(S=0,x++),t.coordinate=[S*9+S*c+I+s,x*9+x*c+s],S++})}i["AWS.VPC.NetworkInterface"]!==undefined&&$.each(i["AWS.VPC.NetworkInterface"],function(e,t){t.coordinate[0]+=M});var f=0,l=0,q,R;$.each(o,function(e,t){q=t.coordinate,R=MC.canvas.COMPONENT_SIZE[t.type],q[0]+R[0]>f&&(f=q[0]+R[0]),q[1]+R[1]>l&&(l=q[1]+R[1])}),n.size=[f+s,l+s]}function x(e){var n=[],r=[],i=[],s,o,u,a;return $.each(e,function(e,a){s=!1,o=!1,a.children!==undefined&&($.each(a.children,function(e,n){n.type==="AWS.AutoScaling.Group"&&n.children!==undefined&&(n=n.children[0]),node_connection=t[n.id].connection(),node_connection&&$.each(node_connection,function(e,n){t[n.target].type==="AWS.ELB"&&(u=$canvas(n.target).getModel().attributes.internal?"internal":"internet-facing",u==="internet-facing"&&(s=!0),u==="internal"&&(o=!0))})}),s?n.push(a):o&&r.push(a)),!s&&!o&&i.push(a)}),n.sort(function(e,t){return t.totalChild-e.totalChild}),n.sort(function(e,t){return t.totalChild-e.totalChild}),i.sort(function(e,t){if(t.totalChild===e.totalChild&&t.totalChild>0&&e.totalChild>0){var n={a:0,b:0};return $.each({a:e,b:t},function(e,t){$.each(t.children,function(t,r){r.type==="AWS.AutoScaling.Group"&&(n[e]+=3),r.type==="AWS.EC2.Instance"&&(n[e]+=2),r.type==="AWS.VPC.NetworkInterface"&&(n[e]+=1)})}),n.b-n.a}return t.totalChild-e.totalChild}),e=n.concat(r,i),e}function T(e){var t=e.children,n=2,r=t.length,i=m[e.type],o=0,u=0,a=2,f=2;e.type==="AWS.EC2.AvailabilityZone"&&(n=4),i==="matrix"&&S(e),i==="vertical"&&($.each(t,function(e,r){r.coordinate=[0+s,e+s],r.children!==undefined&&T(r),r.size[0]>o&&(o=r.size[0]),u+=r.size[1],e>0&&(y=t[e-1],r.coordinate=[0+s,y.size[1]+y.coordinate[1]+n],u+=n*2)}),e.size=[o+s*2,u+n*(r-1)+s]),i==="horizontal"&&(e.type==="AWS.EC2.AvailabilityZone"&&(t=x(t)),$.each(t,function(e,r){r.coordinate=[e+s,0+s],r.children!==undefined&&T(r),r.size[1]>u&&(u=r.size[1]),o+=r.size[0],e>0&&(y=t[e-1],r.coordinate=[y.size[0]+y.coordinate[0]+n,0+s],o+=n*2)}),e.size=[o-n*(r-1)+s*2,u+s*2]),i==="center"&&($.each(t,function(e,t){t.coordinate=[2,2]}),e.size=[13,13])}function F(e,t,n){var r=e.coordinate;r[0]+=t,r[1]+=n,e.children!==undefined&&$.each(e.children,function(e,t){F(t,r[0],r[1])})}function I(e){var n=t[e.id];$canvas(e.id).position(e.coordinate[0],e.coordinate[1]),e.size!==undefined&&$canvas(e.id).size(e.size[0],e.size[1]),e.children!==undefined&&$.each(e.children,function(e,t){I(t)})}function q(){var e=0,t=0,n=["AWS.VPC.CustomerGateway","AWS.VPC.InternetGateway","AWS.VPC.VPNGateway"],r,i,s,o;$.each($canvas.node(),function(s,o){r=o.position(),i=o.size(),$.inArray(o.type,n)===-1&&(r[0]+i[0]>e&&(e=r[0]+i[0]),r[1]+i[1]>t&&(t=r[1]+i[1]))}),$.each($canvas.group(),function(n,s){r=s.position(),i=s.size(),s.type!=="AWS.AutoScaling.Group"&&(r[0]+i[0]>e&&(e=r[0]+i[0]),r[1]+i[1]>t&&(t=r[1]+i[1]))}),g.size[0]=e-g.coordinate[0]+f,g.size[1]=t-g.coordinate[1]+l,$canvas(g.id).size(e-g.coordinate[0]+f,t-g.coordinate[1]+l)}var e=$canvas.connection(),t={},n={},r=[],i,s=2,o=2,u=20,a=10,f=8,l=5,c=14,h=MC.canvas.COMPONENT_SIZE["AWS.ELB"],p={"AWS.VPC.VPC":["AWS.EC2.AvailabilityZone"],"AWS.EC2.AvailabilityZone":["AWS.VPC.Subnet"],"AWS.VPC.Subnet":["AWS.EC2.Instance","AWS.AutoScaling.Group","AWS.VPC.NetworkInterface"],"AWS.AutoScaling.Group":["AWS.AutoScaling.LaunchConfiguration"]},d={"AWS.AutoScaling.Group":1,"AWS.EC2.Instance":2,"AWS.VPC.NetworkInterface":3},v={"AWS.VPC.VPC":[60,60],"AWS.EC2.AvailabilityZone":[17,17],"AWS.VPC.Subnet":[15,15],"AWS.AutoScaling.Group":[13,13]},m={"AWS.VPC.VPC":"vertical","AWS.EC2.AvailabilityZone":"horizontal","AWS.VPC.Subnet":"matrix","AWS.AutoScaling.Group":"center"},g,y;$.each($canvas.node(),function(e,n){t[n.id]=n}),$.each($canvas.group(),function(e,n){t[n.id]=n}),$.each(t,function(e,t){var r=t.type,i=n[r];i===undefined&&(n[r]=[]),n[r].push(e)}),g={id:n["AWS.VPC.VPC"][0],coordinate:[5,3],size:[0,0],type:"AWS.VPC.VPC"},n["AWS.ELB"]!==undefined&&$.each(n["AWS.ELB"],function(e,t){$.each($canvas(t).connection(),function(e,t){t.port==="elb-sg-out"&&r.push(t.target)})}),node_child=b(n["AWS.VPC.VPC"][0]),node_child&&(g.children=node_child),w(g),E(g),g.children&&T(g),g.children&&$.each(g.children,function(e,t){t.coordinate[0]+=u,t.coordinate[1]+=a});if(n["AWS.VPC.RouteTable"]!==undefined){var N=15,C=5,k=4,L=MC.canvas.COMPONENT_SIZE["AWS.VPC.RouteTable"],A=[],O=[],M=[],D,P,H;n["AWS.VPC.RouteTable"].length>0&&(n["AWS.VPC.RouteTable"].sort(function(e,t){return $canvas(e).getModel().attributes.name.localeCompare($canvas(t).getModel().attributes.name)}),$.each(n["AWS.VPC.RouteTable"],function(e,t){D=!1,P=$canvas(t).connection(),$.each(P,function(e,n){n.port==="rtb-tgt"&&(H=$canvas(n.target).type,H==="AWS.VPC.InternetGateway"&&(D=!0,A.push(t)),H==="AWS.VPC.VPNGateway"&&(D=!0,O.push(t)))}),D===!1&&M.push(t)}),n["AWS.VPC.RouteTable"]=_.unique(A.concat(O,M)),$.each(n["AWS.VPC.RouteTable"],function(e,t){$canvas(t).position((e+1)*L[0]+(e+1)*k+N,C)}))}var B=g.children,j=0;B!==undefined&&B.length>1&&n["AWS.ELB"]!==undefined&&(j=B[0].coordinate[1]+B[0].size[1],B[2]&&(B[2].size[1]>B[0].size[1]?(B[2].coordinate=[B[0].coordinate[0]+B[0].size[0]+5,B[0].coordinate[1]],B[0].coordinate=[B[0].coordinate[0],B[0].coordinate[1]+(B[2].size[1]-B[0].size[1])/2],j=B[2].coordinate[1]+B[2].size[1]):B[2].coordinate=[B[0].coordinate[0]+B[0].size[0]+5,B[0].coordinate[1]+B[0].size[1]-B[2].size[1]]),B[1]&&(B[1].coordinate[1]=j+15),B[3]&&(B[3].coordinate=[B[1].coordinate[0]+B[1].size[0]+5,B[1].coordinate[1]])),n["AWS.ELB"]!==undefined&&(n["AWS.ELB"].sort(function(e,t){return e=$canvas(e).getModel().attributes.internal?"internal":"internet-facing",t=$canvas(t).getModel().attributes.internal?"internal":"internet-facing",t.localeCompare(e)}),B.length>1?$.each(n["AWS.ELB"],function(e,t){$canvas(t).position(c+e*10+e*10,j+5)}):$.each(n["AWS.ELB"],function(e,t){$canvas(t).position(c,B[0].coordinate[0]+(B[0].size[1]/2-5)+e*10)})),F(g,0,0),I(g),q(),n["AWS.VPC.InternetGateway"]!==undefined&&$canvas(n["AWS.VPC.InternetGateway"][0]).position(g.coordinate[0]-4,g.coordinate[1]+g.size[1]/2-4),n["AWS.VPC.VPNGateway"]!==undefined&&$canvas(n["AWS.VPC.VPNGateway"][0]).position(g.coordinate[0]+g.size[0]-4,g.coordinate[1]+g.size[1]/2-4),n["AWS.VPC.CustomerGateway"]!==undefined&&$.each(n["AWS.VPC.CustomerGateway"],function(e,t){$canvas(t).position(g.coordinate[0]+g.size[0]+8,g.coordinate[1]+e*11+g.size[1]/2-5)});var R=g.size[0]+80,U=g.size[1]+50;return $canvas.size(R<180?180:R,U<150?150:U),!0},MC.canvas.benchmark=function(e){var t=2,n=2,r=8,i=8,s=2,o=Math.ceil(Math.sqrt(e)),u=e===0?0:Math.ceil(e/o),a=$canvas.scale(),f=0,l=0,c=0,h=$canvas.add("AWS.EC2.AvailabilityZone",{name:"us-east-1a"},{x:5,y:5});for(;c<e;c++)f>=o&&(f=0,l++),$canvas.add("AWS.EC2.Instance",{imageId:"ami-cde4bca4",cachedAmi:{osType:"amazon",architecture:"i386",rootDeviceType:"ebs"},groupUId:h},{x:r+f*9+f*t+s,y:i+l*9+l*n+s}),f++;$canvas(h).size(o*(9+t)+8,u*(9+n)+8),MC.canvas.updateResizer($("#"+h)[0],o*(9+t)+8,u*(9+n)+8),canvas_size=[o*(9+t)+50,u*(9+n)+50],$("#svg_canvas").attr({width:canvas_size[0]*MC.canvas.GRID_WIDTH/a,height:canvas_size[1]*MC.canvas.GRID_HEIGHT/a}),$("#canvas_container, #canvas_body").css({width:canvas_size[0]*MC.canvas.GRID_WIDTH/a,height:canvas_size[1]*MC.canvas.GRID_HEIGHT/a}),$canvas.size(canvas_size[0],canvas_size[1])},define("MC.canvas",["MC","canvon"],function(){}),define("MC.canvas.constant",["i18n!nls/lang.js","MC.canvas"],function(e){var t={GRID_WIDTH:10,GRID_HEIGHT:10,COMPONENT_WIDTH:100,COMPONENT_HEIGHT:100,COMPONENT_SIZE:{"AWS.ELB":[9,9],"AWS.EC2.Instance":[9,9],"AWS.EC2.EBS.Volume":[10,10],"AWS.VPC.NetworkInterface":[9,9],"AWS.VPC.CustomerGateway":[17,10],"AWS.VPC.RouteTable":[8,8],"AWS.VPC.InternetGateway":[8,8],"AWS.VPC.VPNGateway":[8,8],"AWS.AutoScaling.LaunchConfiguration":[9,9],"AWS.AutoScaling.Group":[13,13]},COMPONENT_TYPE:{"AWS.ELB":"node","AWS.EC2.Instance":"node","AWS.VPC.NetworkInterface":"node","AWS.VPC.CustomerGateway":"node","AWS.VPC.RouteTable":"node","AWS.VPC.InternetGateway":"node","AWS.VPC.VPNGateway":"node","AWS.AutoScaling.LaunchConfiguration":"node","AWS.EC2.AvailabilityZone":"group","AWS.VPC.Subnet":"group","AWS.VPC.VPC":"group","AWS.EC2.SGPlaceholder":"group","AWS.AutoScaling.Group":"group",node:["AWS.ELB","AWS.EC2.Instance","AWS.VPC.NetworkInterface","AWS.VPC.CustomerGateway","AWS.VPC.RouteTable","AWS.VPC.InternetGateway","AWS.VPC.VPNGateway","AWS.AutoScaling.LaunchConfiguration"],group:["AWS.EC2.AvailabilityZone","AWS.VPC.Subnet","AWS.VPC.VPC","AWS.EC2.SGPlaceholder","AWS.AutoScaling.Group"]},GROUP_DEFAULT_SIZE:{"AWS.VPC.VPC":[60,60],"AWS.EC2.AvailabilityZone":[21,21],"AWS.VPC.Subnet":[17,17],"AWS.AutoScaling.Group":[13,13]},SG_MAX_NUM:5,SG_COLORS:["f26c4f","7dc476","00bef2","615ca8","fcec00","ff9900","ffcc00","ffcc99","ff99ff","00cccc","99cc99","9999ff","ffff99","ff00ff","663300","336600","660066","003300","0000ff","666600"],GROUP_PADDING:2,IMAGE:{INSTANCE_VOLUME_ATTACHED_ACTIVE:MC.IMG_URL+"ide/icon/instance-volume-attached-active.png",INSTANCE_VOLUME_ATTACHED_NORMAL:MC.IMG_URL+"ide/icon/instance-volume-attached-normal.png",INSTANCE_VOLUME_NOT_ATTACHED:MC.IMG_URL+"ide/icon/instance-volume-not-attached.png",EIP_ON:MC.IMG_URL+"ide/icon/eip-on.png",EIP_OFF:MC.IMG_URL+"ide/icon/eip-off.png",ELB_INTERNAL_CANVAS:MC.IMG_URL+"ide/icon/elb-internal-canvas.png",ELB_INTERNET_CANVAS:MC.IMG_URL+"ide/icon/elb-internet-canvas.png",ENI_CANVAS_ATTACHED:MC.IMG_URL+"ide/icon/eni-canvas-attached.png",ENI_CANVAS_UNATTACHED:MC.IMG_URL+"ide/icon/eni-canvas-unattached.png",RT_CANVAS_MAIN:MC.IMG_URL+"ide/icon/rt-main-canvas.png",RT_CANVAS_NOT_MAIN:MC.IMG_URL+"ide/icon/rt-canvas.png"},MINDIST:20,TOL:.1,TOLxTOL:.01,TOGGLE_DIST:5,GROUP_MIN_PADDING:120,STOKE_WIDTH_AZ:2,STOKE_WIDTH_SUBNET:2,STOKE_WIDTH_VPC:4,PATH_PORT_LEFT:"M-8 0.5l6 -5.5l2 0 l0 11 l-2 0z",PATH_PORT_TOP:"M0.5 0l5.5 0l0 -2l-5.5 -6l-5.5 6l0 2z",PATH_PORT_RIGHT:"M8 0.5l-6 -5.5l-2 0 l0 11 l2 0z",PATH_PORT_BOTTOM:"M0.5 0l5.5 0l0 2l-5.5 6l-5.5 -6l0 -2z",PATH_PORT_DIAMOND:"M-5 0.5l5.5 -5.5l5.5 5.5 l-5.5 5.5z",PATH_ASG_TITLE:"M0 21l0 -16a5 5 0 0 1 5 -5l121 0a5 5 0 0 1 5 5l0 16z",PORT_PADDING:4,CORNER_RADIUS:8,PORT_RIGHT_ANGLE:0,PORT_UP_ANGLE:90,PORT_LEFT_ANGLE:180,PORT_DOWN_ANGLE:270,PORT_RIGHT_ROTATE:"",PORT_UP_ROTATE:", rotate(90,4,5)",PORT_LEFT_ROTATE:", rotate(180,4,5.5)",PORT_DOWN_ROTATE:", rotate(270,4,5)",COLOR_BLUE:"#6DAEFE",COLOR_GREEN:"#12CD4F",COLOR_GRAY:"#d8d7d6",COLOR_PURPLE:"#bf7aa5",LINE_COLOR:{sg:"#6DAEFE",attachment:"#12CD4F",association:"#d8d7d6",vpn:"#bf7aa5"},GROUP_LABEL_OFFSET:-6,GROUP_LABEL_COORDINATE:{"AWS.VPC.VPC":[6,16],"AWS.EC2.AvailabilityZone":[4,14],"AWS.VPC.Subnet":[4,14],"AWS.AutoScaling.Group":[4,14]},GROUP_WEIGHT:{"AWS.VPC.VPC":["AWS.EC2.AvailabilityZone","AWS.VPC.Subnet","AWS.AutoScaling.Group"],"AWS.EC2.AvailabilityZone":["AWS.VPC.Subnet","AWS.AutoScaling.Group"],"AWS.VPC.Subnet":["AWS.AutoScaling.Group"],"AWS.AutoScaling.Group":[]},GROUP_PARENT:{"AWS.VPC.VPC":"","AWS.EC2.AvailabilityZone":"AWS.VPC.VPC","AWS.VPC.Subnet":"AWS.EC2.AvailabilityZone","AWS.AutoScaling.Group":"AWS.VPC.Subnet"},PLATFORM_TYPE:{EC2_CLASSIC:"ec2-classic",CUSTOM_VPC:"custom-vpc",DEFAULT_VPC:"default-vpc",EC2_VPC:"ec2-vpc"},MATCH_PLACEMENT:{"ec2-classic":{"AWS.ELB":["Canvas"],"AWS.EC2.AvailabilityZone":["Canvas"],"AWS.EC2.Instance":["AWS.AutoScaling.Group","AWS.EC2.AvailabilityZone"],"AWS.EC2.EBS.Volume":["AWS.EC2.AvailabilityZone"],"AWS.AutoScaling.Group":["AWS.EC2.AvailabilityZone"]},"default-vpc":{"AWS.ELB":["Canvas"],"AWS.EC2.AvailabilityZone":["Canvas"],"AWS.EC2.Instance":["AWS.AutoScaling.Group","AWS.EC2.AvailabilityZone"],"AWS.EC2.EBS.Volume":["AWS.EC2.AvailabilityZone"],"AWS.VPC.NetworkInterface":["AWS.EC2.AvailabilityZone"],"AWS.AutoScaling.Group":["AWS.EC2.AvailabilityZone"]},"custom-vpc":{"AWS.ELB":["AWS.VPC.VPC"],"AWS.EC2.Instance":["AWS.AutoScaling.Group","AWS.VPC.Subnet"],"AWS.EC2.EBS.Volume":["AWS.VPC.Subnet"],"AWS.VPC.NetworkInterface":["AWS.VPC.Subnet"],"AWS.VPC.CustomerGateway":["Canvas"],"AWS.VPC.RouteTable":["AWS.VPC.VPC"],"AWS.VPC.InternetGateway":["AWS.VPC.VPC"],"AWS.VPC.VPNGateway":["AWS.VPC.VPC"],"AWS.EC2.AvailabilityZone":["AWS.VPC.VPC"],"AWS.VPC.Subnet":["AWS.EC2.AvailabilityZone"],"AWS.VPC.VPC":["Canvas"],"AWS.AutoScaling.Group":["AWS.VPC.Subnet"]},"ec2-vpc":{"AWS.ELB":["AWS.VPC.VPC"],"AWS.EC2.Instance":["AWS.AutoScaling.Group","AWS.VPC.Subnet"],"AWS.EC2.EBS.Volume":["AWS.VPC.Subnet"],"AWS.VPC.NetworkInterface":["AWS.VPC.Subnet"],"AWS.VPC.CustomerGateway":["Canvas"],"AWS.VPC.RouteTable":["AWS.VPC.VPC"],"AWS.VPC.InternetGateway":["AWS.VPC.VPC"],"AWS.VPC.VPNGateway":["AWS.VPC.VPC"],"AWS.EC2.AvailabilityZone":["AWS.VPC.VPC"],"AWS.VPC.Subnet":["AWS.EC2.AvailabilityZone"],"AWS.VPC.VPC":["Canvas"],"AWS.AutoScaling.Group":["AWS.VPC.Subnet"]}},CONNECTION_OPTION:{"AWS.EC2.Instance":{"AWS.AutoScaling.LaunchConfiguration":{type:"sg",from:"instance-sg",to:"launchconfig-sg",direction:{from:"horizontal",to:"horizontal"},relation:"multiple"},"AWS.AutoScaling.Group":[{type:"sg",from:"instance-sg",to:"launchconfig-sg",direction:{from:"horizontal",to:"horizontal"},relation:"multiple"}],"AWS.EC2.Instance":{type:"sg",from:"instance-sg",to:"instance-sg",direction:{from:"horizontal",to:"horizontal"},relation:"multiple"},"AWS.ELB":[{type:"elb-sg",from:"instance-sg",to:"elb-sg-out",direction:{from:"horizontal"},relation:"multiple"},{type:"sg",from:"instance-sg",to:"elb-sg-in",direction:{from:"horizontal"},relation:"multiple"}],"AWS.VPC.NetworkInterface":[{type:"attachment",from:"instance-attach",to:"eni-attach",relation:"multiple"},{type:"sg",from:"instance-sg",to:"eni-sg",direction:{from:"horizontal",to:"horizontal"},relation:"multiple"}],"AWS.VPC.RouteTable":{type:"rtb-target",from:"instance-rtb",to:"rtb-tgt",direction:{to:"horizontal"},relation:"multiple",dash_line:!0}},"AWS.ELB":{"AWS.EC2.Instance":[{type:"elb-sg",from:"elb-sg-out",to:"instance-sg",direction:{to:"horizontal"},relation:"multiple"},{type:"sg",from:"elb-sg-in",to:"instance-sg",direction:{to:"horizontal"},relation:"multiple"}],"AWS.VPC.NetworkInterface":[{type:"sg",from:"elb-sg-in",to:"eni-sg",direction:{to:"horizontal"},relation:"multiple"}],"AWS.AutoScaling.LaunchConfiguration":[{type:"elb-sg",from:"elb-sg-out",to:"launchconfig-sg",direction:{to:"horizontal"},relation:"multiple"},{type:"sg",from:"elb-sg-in",to:"launchconfig-sg",direction:{to:"horizontal"},relation:"multiple"}],"AWS.AutoScaling.Group":[{type:"elb-sg",from:"elb-sg-out",to:"launchconfig-sg",direction:{to:"horizontal"},relation:"multiple"},{type:"sg",from:"elb-sg-in",to:"launchconfig-sg",direction:{to:"horizontal"},relation:"multiple"}],"AWS.VPC.Subnet":{type:"association",from:"elb-assoc",to:"subnet-assoc-in",relation:"multiple"}},"AWS.VPC.NetworkInterface":{"AWS.ELB":[{type:"sg",from:"eni-sg",to:"elb-sg-in",direction:{from:"horizontal"},relation:"multiple"}],"AWS.AutoScaling.LaunchConfiguration":{type:"sg",from:"eni-sg",to:"launchconfig-sg",direction:{from:"horizontal",to:"horizontal"},relation:"multiple"},"AWS.AutoScaling.Group":[{type:"sg",from:"eni-sg",to:"launchconfig-sg",direction:{from:"horizontal",to:"horizontal"},relation:"multiple"}],"AWS.EC2.Instance":[{type:"sg",from:"eni-sg",to:"instance-sg",direction:{from:"horizontal",to:"horizontal"},relation:"multiple"},{type:"attachment",from:"eni-attach",to:"instance-attach",relation:"unique"}],"AWS.VPC.NetworkInterface":[{type:"sg",from:"eni-sg",to:"eni-sg",direction:{from:"horizontal",to:"horizontal"},relation:"multiple"}],"AWS.VPC.RouteTable":{type:"rtb-target",from:"eni-rtb",to:"rtb-tgt",direction:{to:"horizontal"},relation:"multiple",dash_line:!0}},"AWS.VPC.RouteTable":{"AWS.VPC.Subnet":{type:"association",from:"rtb-src",to:"subnet-assoc-out",direction:{from:"vertical"},relation:"multiple"},"AWS.EC2.Instance":{type:"rtb-target",from:"rtb-tgt",to:"instance-rtb",direction:{from:"horizontal"},relation:"multiple",dash_line:!0},"AWS.VPC.NetworkInterface":{type:"rtb-target",from:"rtb-tgt",to:"eni-rtb",direction:{from:"horizontal"},relation:"multiple",dash_line:!0},"AWS.VPC.InternetGateway":{type:"rtb-target",from:"rtb-tgt",to:"igw-tgt",direction:{from:"horizontal"},relation:"multiple",dash_line:!0},"AWS.VPC.VPNGateway":{type:"rtb-target",from:"rtb-tgt",to:"vgw-tgt",direction:{from:"horizontal"},relation:"multiple",dash_line:!0}},"AWS.VPC.InternetGateway":{"AWS.VPC.RouteTable":{type:"rtb-target",from:"igw-tgt",to:"rtb-tgt",direction:{to:"horizontal"},dash_line:!0,relation:"multiple"}},"AWS.VPC.VPNGateway":{"AWS.VPC.RouteTable":{type:"rtb-target",from:"vgw-tgt",to:"rtb-tgt",direction:{to:"horizontal"},dash_line:!0,relation:"multiple"},"AWS.VPC.CustomerGateway":{type:"vpn",from:"vgw-vpn",to:"cgw-vpn",relation:"multiple"}},"AWS.VPC.CustomerGateway":{"AWS.VPC.VPNGateway":{type:"vpn",from:"cgw-vpn",to:"vgw-vpn",relation:"unique"}},"AWS.VPC.Subnet":{"AWS.VPC.RouteTable":{type:"association",from:"subnet-assoc-out",to:"rtb-src",direction:{to:"vertical"},relation:"multiple"},"AWS.ELB":{type:"association",from:"subnet-assoc-in",to:"elb-assoc",relation:"multiple"}},"AWS.AutoScaling.LaunchConfiguration":{"AWS.AutoScaling.LaunchConfiguration":{type:"sg",from:"launchconfig-sg",to:"launchconfig-sg",direction:{from:"horizontal",to:"horizontal"},relation:"multiple"},"AWS.EC2.Instance":{type:"sg",from:"launchconfig-sg",to:"instance-sg",direction:{from:"horizontal",to:"horizontal"},relation:"multiple"},"AWS.VPC.NetworkInterface":{type:"sg",from:"launchconfig-sg",to:"eni-sg",direction:{from:"horizontal",to:"horizontal"},relation:"multiple"},"AWS.ELB":[{type:"elb-sg",from:"launchconfig-sg",to:"elb-sg-out",direction:{from:"horizontal"},relation:"multiple"},{type:"sg",from:"launchconfig-sg",to:"elb-sg-in",direction:{from:"horizontal"},relation:"multiple"}]},"AWS.AutoScaling.Group":{"AWS.AutoScaling.LaunchConfiguration":{type:"sg",from:"launchconfig-sg",to:"launchconfig-sg",direction:{from:"horizontal",to:"horizontal"},relation:"multiple"},"AWS.AutoScaling.Group":{type:"sg",from:"launchconfig-sg",to:"launchconfig-sg",direction:{from:"horizontal",to:"horizontal"},relation:"multiple"},"AWS.ELB":[{type:"elb-sg",from:"launchconfig-sg",to:"elb-sg-out",direction:{from:"horizontal"},relation:"multiple"},{type:"sg",from:"launchconfig-sg",to:"elb-sg-in",direction:{from:"horizontal"},relation:"multiple"}],"AWS.EC2.Instance":[{type:"sg",from:"launchconfig-sg",to:"instance-sg",direction:{from:"horizontal",to:"horizontal"},relation:"multiple"}],"AWS.VPC.NetworkInterface":[{type:"sg",from:"launchconfig-sg",to:"eni-sg",direction:{from:"horizontal",to:"horizontal"},relation:"multiple"}]}},STACK_PROPERTY:{original_json:"",selected_node:[]},STACK_JSON:{id:"",name:"",description:"",region:"",platform:"ec2-vpc",state:"Enabled",username:"",owner:"",version:"2013-09-04",tag:"",usage:"",component:{},layout:{size:[240,240],component:{group:{},node:{}},connection:{}},history:{time:{created:0,updatd:0}},property:{stoppable:"true",schedule:{stop:{run:null,when:null,during:null},backup:{day:null,when:null},start:{when:null}},policy:{ha:""},lease:{length:null,action:"",due:null}}},DESIGN_INIT_LAYOUT:{size:[240,240]},DESIGN_INIT_LAYOUT_VPC:{size:[240,240],component:{group:{VPC:{coordinate:[5,3],size:[60,60]}},node:{RTB:{coordinate:[50,5]}}}},DESIGN_INIT_DATA:{KP:{type:"AWS.EC2.KeyPair",name:"DefaultKP",resource:{KeyName:"DefaultKP"}},SG:{type:"AWS.EC2.SecurityGroup",name:"DefaultSG",resource:{IpPermissions:[{IpProtocol:"tcp",IpRanges:"0.0.0.0/0",FromPort:"22",ToPort:"22",Groups:[{GroupId:"",UserId:"",GroupName:""}]}],IpPermissionsEgress:[],Default:"true",GroupName:"DefaultSG",GroupDescription:"Default Security Group"}}},DESIGN_INIT_DATA_VPC:{KP:{type:"AWS.EC2.KeyPair",name:"DefaultKP",resource:{KeyName:"DefaultKP"}},SG:{type:"AWS.EC2.SecurityGroup",name:"DefaultSG",resource:{IpPermissions:[{IpProtocol:"tcp",IpRanges:"0.0.0.0/0",FromPort:"22",ToPort:"22",Groups:[{GroupId:"",UserId:"",GroupName:""}]}],IpPermissionsEgress:[],Default:"true",GroupName:"DefaultSG",GroupDescription:"Default Security Group"}},ACL:{type:"AWS.VPC.NetworkAcl",name:"DefaultACL",resource:{RouteTableId:"",NetworkAclId:"",VpcId:"",Default:"true",EntrySet:[{RuleAction:"allow",Protocol:"-1",CidrBlock:"0.0.0.0/0",Egress:!0,IcmpTypeCode:{Type:"",Code:""},PortRange:{To:"",From:""},RuleNumber:"100"},{RuleAction:"deny",Protocol:"-1",CidrBlock:"0.0.0.0/0",Egress:!0,IcmpTypeCode:{Type:"",Code:""},PortRange:{To:"",From:""},RuleNumber:"32767"},{RuleAction:"allow",Protocol:"-1",CidrBlock:"0.0.0.0/0",Egress:!1,IcmpTypeCode:{Type:"",Code:""},PortRange:{To:"",From:""},RuleNumber:"100"},{RuleAction:"deny",Protocol:"-1",CidrBlock:"0.0.0.0/0",Egress:!1,IcmpTypeCode:{Type:"",Code:""},PortRange:{To:"",From:""},RuleNumber:"32767"}],AssociationSet:[]}},VPC:{type:"AWS.VPC.VPC",name:"vpc",resource:{}},RTB:{type:"AWS.VPC.RouteTable",resource:{PropagatingVgwSet:[],RouteSet:[{State:"active",Origin:"CreateRouteTable",GatewayId:"local",DestinationCidrBlock:"10.0.0.0/16"}],AssociationSet:[{Main:"true"}]}}},AZ_JSON:{layout:{uid:"",type:"AWS.EC2.AvailabilityZone",coordinate:[0,0],size:[480,240],name:"",groupUId:""}},INSTANCE_JSON:{layout:{uid:"",type:"AWS.EC2.Instance",coordinate:[0,0],osType:"",architecture:"",rootDeviceType:"",virtualizationType:"",groupUId:"",connection:[],instanceList:[],volumeList:{},eipList:null,eniList:[]},data:{uid:"",type:"AWS.EC2.Instance",name:"",serverGroupUid:"",serverGroupName:"",number:1,index:0,state:"",software:{},resource:{RamdiskId:"",InstanceId:"",DisableApiTermination:"false",ShutdownBehavior:"terminate",SecurityGroupId:[],SecurityGroup:[],UserData:{Base64Encoded:"false",Data:""},ImageId:"",Placement:{Tenancy:"",AvailabilityZone:"",GroupName:""},PrivateIpAddress:"",BlockDeviceMapping:[],KernelId:"",SubnetId:"",KeyName:"",VpcId:"",InstanceType:"",Monitoring:"disabled",EbsOptimized:"false",NetworkInterface:[]}}},KP_JSON:{data:{uid:"",type:"AWS.EC2.KeyPair",name:"DefaultKP",resource:{KeyFingerprint:"",KeyName:"DefaultKP"}}},SG_JSON:{data:{uid:"",type:"AWS.EC2.SecurityGroup",name:"DefaultSG",resource:{IpPermissions:[{IpProtocol:"tcp",IpRanges:"0.0.0.0/0",FromPort:"22",ToPort:"22",Groups:[{GroupId:"",UserId:"",GroupName:""}]}],IpPermissionsEgress:[],GroupId:"",Default:"true",VpcId:"",GroupName:"DefaultSG",OwnerId:"",GroupDescription:"Default Security Group"}}},EIP_JSON:{data:{uid:"",type:"AWS.EC2.EIP",name:"",resource:{InstanceId:"",PrivateIpAddress:"",NetworkInterfaceId:"",NetworkInterfaceOwnerId:"",AllowReassociation:"",Domain:"standard",AssociationId:"",PublicIp:"",AllocationId:""}}},VOLUME_JSON:{data:{uid:"",type:"AWS.EC2.EBS.Volume",name:"/dev/sdf",serverGroupUid:"",serverGroupName:"",number:1,index:0,resource:{VolumeId:"",CreateTime:"",AvailabilityZone:"",Size:"1",Status:"",SnapshotId:"",Iops:"",AttachmentSet:{VolumeId:"",Status:"",AttachTime:"",InstanceId:"",DeleteOnTermination:"true",Device:"/dev/sdf"},VolumeType:"standard"}}},ELB_JSON:{layout:{uid:"",type:"AWS.ELB",coordinate:[0,0],groupUId:"",connection:[]},data:{uid:"",type:"AWS.ELB",name:"",resource:{HealthCheck:{Timeout:"5",Target:"HTTP:80/index.html",HealthyThreshold:"9",UnhealthyThreshold:"4",Interval:"30"},Policies:{AppCookieStickinessPolicies:[{CookieName:"",PolicyName:""}],OtherPolicies:[],LBCookieStickinessPolicies:[{CookieExpirationPeriod:"",PolicyName:""}]},BackendServerDescriptions:[{InstantPort:"",PoliciyNames:""}],SecurityGroups:[],CreatedTime:"",CanonicalHostedZoneNameID:"",ListenerDescriptions:[{PolicyNames:"",Listener:{LoadBalancerPort:"80",InstanceProtocol:"HTTP",Protocol:"HTTP",SSLCertificateId:"",InstancePort:"80"}}],DNSName:"",Scheme:"",CanonicalHostedZoneName:"",Instances:[],SourceSecurityGroup:{OwnerAlias:"",GroupName:""},Subnets:[],VpcId:"",LoadBalancerName:"",AvailabilityZones:[],CrossZoneLoadBalancing:"false"}}},VPC_JSON:{layout:{uid:"",type:"AWS.VPC.VPC",coordinate:[0,0],size:[0,0],connection:[]},data:{uid:"",type:"AWS.VPC.VPC",name:"vpc",resource:{EnableDnsHostnames:"false",DhcpOptionsId:"",CidrBlock:"10.0.0.0/16",State:"",InstanceTenancy:"default",VpcId:"",IsDefault:"false",EnableDnsSupport:"true"}}},SUBNET_JSON:{layout:{uid:"",type:"AWS.VPC.Subnet",coordinate:[0,0],size:[0,0],groupUId:"",connection:[]},data:{uid:"",type:"AWS.VPC.Subnet",name:"subnet1",resource:{AvailabilityZone:"",CidrBlock:"10.0.0.0/24",SubnetId:"",VpcId:"",AvailableIpAddressCount:"",State:""}}},IGW_JSON:{layout:{uid:"",type:"AWS.VPC.InternetGateway",coordinate:[0,0],groupUId:"",connection:[]},data:{uid:"",type:"AWS.VPC.InternetGateway",name:"IGW",resource:{InternetGatewayId:"",AttachmentSet:[{VpcId:"",State:"available"}]}}},ROUTETABLE_JSON:{layout:{uid:"",type:"AWS.VPC.RouteTable",coordinate:[0,0],groupUId:"",connection:[]},data:{uid:"",type:"AWS.VPC.RouteTable",name:"",resource:{VpcId:"",PropagatingVgwSet:[],RouteSet:[{State:"active",Origin:"CreateRouteTable",InstanceId:"",InstanceOwnerId:"",GatewayId:"local",NetworkInterfaceId:"",DestinationCidrBlock:"10.0.0.0/16"}],RouteTableId:"",AssociationSet:[]}}},VGW_JSON:{layout:{uid:"",type:"AWS.VPC.VPNGateway",coordinate:[0,0],groupUId:"",connection:[]},data:{uid:"",type:"AWS.VPC.VPNGateway",name:"VGW",resource:{Attachments:[{VpcId:"",State:"attached"}],Type:"ipsec.1",AvailabilityZone:"",VpnGatewayId:"",State:"available"}}},CGW_JSON:{layout:{uid:"",type:"AWS.VPC.CustomerGateway",networkName:"",coordinate:[0,0],groupUId:"",connection:[]},data:{uid:"",type:"AWS.VPC.CustomerGateway",name:"CustomerNetwork1",resource:{Type:"ipsec.1",BgpAsn:"",CustomerGatewayId:"",State:"available",IpAddress:""}}},ENI_JSON:{layout:{uid:"",type:"AWS.VPC.NetworkInterface",coordinate:[0,0],groupUId:"",connection:[],eniList:[],eipList:{}},data:{uid:"",type:"AWS.VPC.NetworkInterface",name:"eni1",serverGroupUid:"",serverGroupName:"",number:1,index:0,resource:{PrivateIpAddressSet:[{Association:{AssociationID:"",PublicDnsName:"",AllocationID:"",InstanceId:"",IpOwnerId:"",PublicIp:""},PrivateIpAddress:"10.0.0.1",AutoAssign:"true",Primary:"true"}],Status:"",GroupSet:[],PrivateDnsName:"",SourceDestCheck:"true",RequestId:"",MacAddress:"",OwnerId:"",RequestManaged:"",SecondPriIpCount:"",Attachment:{InstanceId:"",AttachmentId:"",DeviceIndex:"1",AttachTime:""},AvailabilityZone:"",SubnetId:"",Description:"",VpcId:"",PrivateIpAddress:"",NetworkInterfaceId:""}}},DHCP_JSON:{data:{uid:"",type:"AWS.VPC.DhcpOptions",name:"default",resource:{VpcId:"",DhcpOptionsId:"",DhcpConfigurationSet:[{Key:"domain-name-servers",ValueSet:[{Value:"AmazonProvidedDNS"}]}]}}},VPN_JSON:{data:{uid:"",type:"AWS.VPC.VPNConnection",name:"VPN",resource:{CustomerGatewayConfiguration:"",Routes:[],State:"",VgwTelemetry:{StatusMessage:"",LastStatusChange:"",OutsideIpAddress:"",Status:"",AcceptRouteCount:""},Type:"ipsec.1",VpnGatewayId:"",Options:{StaticRoutesOnly:"true"},CustomerGatewayId:"",VpnConnectionId:""}}},ACL_JSON:{data:{uid:"",type:"AWS.VPC.NetworkAcl",name:"DefaultACL",resource:{RouteTableId:"",NetworkAclId:"",VpcId:"",Default:"false",EntrySet:[{RuleAction:"allow",Protocol:"-1",CidrBlock:"0.0.0.0/0",Egress:"true",IcmpTypeCode:{Type:"",Code:""},PortRange:{To:"",From:""},RuleNumber:"100"},{RuleAction:"deny",Protocol:"-1",CidrBlock:"0.0.0.0/0",Egress:"true",IcmpTypeCode:{Type:"",Code:""},PortRange:{To:"",From:""},RuleNumber:"32767"},{RuleAction:"allow",Protocol:"-1",CidrBlock:"0.0.0.0/0",Egress:"false",IcmpTypeCode:{Type:"",Code:""},PortRange:{To:"",From:""},RuleNumber:"100"},{RuleAction:"deny",Protocol:"-1",CidrBlock:"0.0.0.0/0",Egress:"false",IcmpTypeCode:{Type:"",Code:""},PortRange:{To:"",From:""},RuleNumber:"32767"}],AssociationSet:[]}}},SRVCERT_JSON:{data:{uid:"",type:"AWS.IAM.ServerCertificate",name:"iam-name",resource:{PrivateKey:"private-key",ServerCertificateMetadata:{UploadDate:"",ServerCertificateName:"iam-name",ServerCertificateId:"",Arn:"",Path:""},CertificateBody:"public-key",CertificateChain:""}}},ASG_JSON:{layout:{uid:"",type:"AWS.AutoScaling.Group",coordinate:[0,0],size:[13,13],groupUId:"",originalId:"",connection:[]},data:{type:"AWS.AutoScaling.Group",name:"",uid:"",resource:{AutoScalingGroupARN:"",AutoScalingGroupName:"",AvailabilityZones:[],CreatedTime:"",DefaultCooldown:"300",DesiredCapacity:"",EnabledMetrics:[{Granularity:"",Metric:""}],HealthCheckGracePeriod:"300",HealthCheckType:"EC2",Instances:[],LaunchConfigurationName:"",LoadBalancerNames:[],MaxSize:"2",MinSize:"1",PlacementGroup:"",Status:"",SuspendedProcesses:[{ProcessName:"",SuspensionReason:""}],Tags:"",TerminationPolicies:["Default"],VPCZoneIdentifier:"",InstanceId:"",ShouldDecrementDesiredCapacity:""}}},ASL_LC_JSON:{layout:{uid:"",type:"AWS.AutoScaling.LaunchConfiguration",coordinate:[0,0],osType:"",architecture:"",rootDeviceType:"",groupUId:"",originalId:"",connection:[]},data:{name:"",uid:"",type:"AWS.AutoScaling.LaunchConfiguration",resource:{BlockDeviceMapping:[],CreatedTime:"",EbsOptimized:"",IamInstanceProfile:"",ImageId:"",InstanceMonitoring:"",InstanceType:"",KernelId:"",KeyName:"",LaunchConfigurationARN:"",LaunchConfigurationName:"",RamdiskId:"",SecurityGroups:[],SpotPrice:"",UserData:""}}},ASL_VOL_JSON:{DeviceName:"",Ebs:{VolumeSize:0}},ASL_NC_JSON:{data:{type:"AWS.AutoScaling.NotificationConfiguration",name:"",uid:"",resource:{AutoScalingGroupName:"",NotificationType:[],TopicARN:""}}},ASL_SP_JSON:{data:{type:"AWS.AutoScaling.ScalingPolicy",name:"",uid:"",resource:{AdjustmentType:"",Alarms:[{AlarmARN:"",AlarmName:""}],AutoScalingGroupName:"",Cooldown:"",MinAdjustmentStep:"",PolicyARN:"",PolicyName:"",ScalingAdjustment:""}}},ASL_SA_JSON:{data:{type:"AWS.AutoScaling.ScheduledActions",name:"",uid:"",resource:{AutoScalingGroupName:"",DesiredCapacity:"",EndTime:"",MaxSize:"",MinSize:"",Recurrence:"",ScheduledActionName:"",StartTime:""}}},CLW_JSON:{data:{type:"AWS.CloudWatch.CloudWatch",name:"",uid:"",resource:{ActionEnabled:"",AlarmActions:[],AlarmArn:"",AlarmConfigurationUpdatedTimestamp:"",AlarmDescription:"",AlarmName:"",ComparisonOperator:"",Dimensions:[{name:"",value:""}],EvaluationPeriods:"",InsufficientDataActions:[],MetricName:"",Namespace:"AWS/AutoScaling",OKAction:[],Period:"",StateReason:"",StateReasonData:"",StateUpdateTimestamp:"",StateValue:"",Statistic:"Average",Threshold:"",Unit:""}}},SNS_SUB_JSON:{data:{type:"AWS.SNS.Subscription",name:"",uid:"",resource:{Endpoint:"",TopicArn:"",Protocol:"",DeliveryPolicy:"",SubscriptionArn:""}}},SNS_TOPIC_JSON:{data:{type:"AWS.SNS.Topic",name:"",uid:"",resource:{Name:"",TopicArn:"",Policy:"",DisplayName:"",DeliveryPolicy:""}}}};for(var n in t)MC.canvas[n]=t[n]}),define("MC.validate",["MC"],function(e){var t=function(e,t,n){return Function.call.apply(Array.prototype.slice,arguments)},n={email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,alphanum:/^\w+$/,digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/,awsName:/^[a-zA-Z0-9][a-zA-Z0-9-]*$/,phone:/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,5})|(\(?\d{2,6}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/,usPhone:/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/,ipv4:/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/,cidr:/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\/(\d|[1-2]\d|3[0-2]))$/,awsCidr:/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\/([1][6-9]|[2][0-8]))$/,ipaddress:/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\/(\d|[1-2]\d|3[0-2]))?$/,url:/^(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,urlstrict:/^(https?|s?ftp|git):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,arn:/^arn:aws:sns:[\w-]+:.+$/,sqs:/^arn:aws:sqs:[\w-]+:\d{12}:.+$/,deviceLinux:/^\/dev\/(hd[a-z]([1-9]|1[0-5])|(sd[a-z]|sd[b-z]([1-9]|1[0-5])))$/,deviceWindows:/^xvd[f-p]$/};e.validate=function(){var r=arguments[0];if(r in e.validate)return e.validate[r].apply(e.validate,t(arguments,1));if(r in n)return n[r].test(t(arguments,1,2));throw"the validate method: ["+r+"] doesn't exist"},e.validate.required=function(e){return!!e},e.validate.equal=function(e,t){return e===t},e.validate.exist=function(e,t){if(Array.prototype.indexOf&&Array.prototype.indexOf===t.indexOf)return t.indexOf(e)!==-1;var n=0;for(;n<t.length;n++)if(t[n]===e)break;return n!==t.length},e.validate.range=function(e,t){return e>=t[0]&&e<=t[1]},e.validate.http=function(e){return n.urlstrict.test(e)&&e.slice(0,4)==="http"},e.validate.https=function(e){return n.urlstrict.test(e)&&e.slice(0,5)==="https"},e.validate.deviceName=function(e,t,r){return t==="linux"?(r&&(e="/dev/"+e),n.deviceLinux.test(e)):t==="windows"?(r&&(e="xvd"+e),n.deviceWindows.test(e)):!1},e.validate.preventDupname=function(t,n,r,i){$target=t instanceof $?t:$(t),arguments.length===3&&(i=r),$target.parsley("custom",function(t){if(t&&!e.validate("awsName",t))return"This value should be a valid "+i+" name.";if(!e.aws.aws.checkIsRepeatName(n,t))return i+' name " '+t+' " is already in using. Please use another one.'})},e.validate.portRange=function(e){var t=[];if(e.indexOf("-")===-1){if(!e||isNaN(Number(e)))return!1;t[0]=Number(e)}else{valueAry=e.split("-");if(valueAry.length!==2||!valueAry[0]||!valueAry[1])return!1;if(isNaN(Number(valueAry[0]))||isNaN(Number(valueAry[1])))return!1;t[0]=Number(valueAry[0]),t[1]=Number(valueAry[1])}return t},e.validate.portValidRange=function(e){if(e.length===1){port1=e[0];if(port1<0||port1>65535)return!1}else{port1=e[0],port2=e[1];if(port1<0||port1>65535||port2<0||port2>65535)return!1;if(port2<=port1)return!1}return!0},e.validate.port=function(e){var t=null;return!e||isNaN(Number(e))?!1:(t=Number(e),t)}}),function(){define("event",["underscore","backbone"],function(){var e,t;return e=function(){function e(){_.extend(this,Backbone.Events)}return e.prototype.NAVIGATION_COMPLETE="NAVIGATION_COMPLETE",e.prototype.HEADER_COMPLETE="HEADER_COMPLETE",e.prototype.DASHBOARD_COMPLETE="DASHBOARD_COMPLETE",e.prototype.DESIGN_COMPLETE="DESIGN_COMPLETE",e.prototype.RESOURCE_COMPLETE="RESOURCE_COMPLETE",e.prototype.DESIGN_SUB_COMPLETE="DESIGN_SUB_COMPLETE",e.prototype.IDE_AVAILABLE="IDE_AVAILABLE",e.prototype.LOGOUT_IDE="LOGOUT_IDE",e.prototype.OPEN_DESIGN="OPEN_DESIGN",e.prototype.OPEN_SUB_DESIGN="OPEN_SUB_DESIGN",e.prototype.CREATE_DESIGN_OBJ="CREATE_DESIGN_OBJ",e.prototype.OPEN_PROPERTY="OPEN_PROPERTY",e.prototype.FORCE_OPEN_PROPERTY="FORCE_OPEN_PROPERTY",e.prototype.REFRESH_PROPERTY="REFRESH_PROPERTY",e.prototype.RELOAD_AZ="RELOAD_AZ",e.prototype.RESOURCE_API_COMPLETE="RESOURCE_API_COMPLETE",e.prototype.SHOW_DESIGN_OVERLAY="SHOW_DESIGN_OVERLAY",e.prototype.HIDE_DESIGN_OVERLAY="HIDE_DESIGN_OVERLAY",e.prototype.UPDATE_RESOURCE_STATE="UPDATE_RESOURCE_STATE",e.prototype.SWITCH_TAB="SWITCH_TAB",e.prototype.SWITCH_DASHBOARD="SWITCH_DASHBOARD",e.prototype.SWITCH_PROCESS="SWITCH_PROCESS",e.prototype.SWITCH_LOADING_BAR="SWITCH_LOADING_BAR",e.prototype.SWITCH_WAITING_BAR="SWITCH_WAITING_BAR",e.prototype.SWITCH_MAIN="SWITCH_MAIN",e.prototype.ADD_TAB_DATA="ADD_TAB_DATA",e.prototype.DELETE_TAB_DATA="DELETE_TAB_DATA",e.prototype.UPDATE_TAB_DATA="UPDATE_TAB_DATA",e.prototype.OPEN_DESIGN_TAB="OPEN_DESIGN_TAB",e.prototype.CLOSE_DESIGN_TAB="CLOSE_DESIGN_TAB",e.prototype.UPDATE_DESIGN_TAB="UPDATE_DESIGN_TAB",e.prototype.UPDATE_DESIGN_TAB_ICON="UPDATE_DESIGN_TAB_ICON",e.prototype.UPDATE_DESIGN_TAB_TYPE="UPDATE_DESIGN_TAB_TYPE",e.prototype.HIDE_STATUS_BAR="HIDE_STATUS_BAR",e.prototype.UPDATE_STATUS_BAR="UPDATE_STATUS_BAR",e.prototype.UPDATE_TA_MODAL="UPDATE_TA_MODAL",e.prototype.UNLOAD_TA_MODAL="UNLOAD_TA_MODAL",e.prototype.TA_SYNC_START="TA_SYNC_START",e.prototype.TA_SYNC_FINISH="TA_SYNC_FINISH",e.prototype.RESULT_APP_LIST="RESULT_APP_LIST",e.prototype.RESULT_STACK_LIST="RESULT_STACK_LIST",e.prototype.RESULT_EMPTY_REGION_LIST="RESULT_EMPTY_REGION_LIST",e.prototype.UPDATE_DASHBOARD="UPDATE_DASHBOARD",e.prototype.UPDATE_REGION_THUMBNAIL="UPDATE_REGION_THUMBNAIL",e.prototype.RETURN_OVERVIEW_TAB="RETURN_OVERVIEW_TAB",e.prototype.RETURN_REGION_TAB="RETURN_REGION_TAB",e.prototype.APPEDIT_2_APP="APPEDIT_2_APP",e.prototype.RESTORE_CANVAS="RESTORE_CANVAS",e.prototype.ENABLE_RESOURCE_ITEM="ENABLE_RESOURCE_ITEM",e.prototype.DISABLE_RESOURCE_ITEM="DISABLE_RESOURCE_ITEM",e.prototype.SHOW_PROPERTY_PANEL="SHOW_PROPERTY_PANEL",e.prototype.PROPERTY_REFRESH_ENI_IP_LIST="PROPERTY_REFRESH_ENI_IP_LIST",e.prototype.PROPERTY_DISABLE_USER_DATA_INPUT="PROPERTY_DISABLE_USER_DATA_INPUT",e.prototype.UNDELEGATE_PROPERTY_DOM_EVENTS="UNDELEGATE_PROPERTY_DOM_EVENTS",e.prototype.CANVAS_CREATE_LINE="CANVAS_CREATE_LINE",e.prototype.CANVAS_DELETE_OBJECT="CANVAS_DELETE_OBJECT",e.prototype.CANVAS_UPDATE_APP_RESOURCE="CANVAS_UPDATE_APP_RESOURCE",e.prototype.CREATE_LINE_TO_CANVAS="CREATE_LINE_TO_CANVAS",e.prototype.DELETE_LINE_TO_CANVAS="DELETE_LINE_TO_CANVAS",e.prototype.REDRAW_SG_LINE="REDRAW_SG_LINE",e.prototype.UPDATE_SG_LINE="UPDATE_SG_LINE",e.prototype.START_APP="START_APP",e.prototype.STOP_APP="STOP_APP",e.prototype.TERMINATE_APP="TERMINATE_APP",e.prototype.DELETE_STACK="DELETE_STACK",e.prototype.DUPLICATE_STACK="DUPLICATE_STACK",e.prototype.SAVE_STACK="SAVE_STACK",e.prototype.UPDATE_APP_LIST="UPDATE_APP_LIST",e.prototype.UPDATE_STACK_LIST="UPDATE_STACK_LIST",e.prototype.UPDATE_STATUS_BAR_SAVE_TIME="UPDATE_STATUS_BAR_SAVE_TIME",e.prototype.UPDATE_APP_STATE="UPDATE_APP_STATE",e.prototype.CANVAS_SAVE="CANVAS_SAVE",e.prototype.NAVIGATION_TO_DASHBOARD_REGION="NAVIGATION_TO_DASHBOARD_REGION",e.prototype.RECONNECT_WEBSOCKET="RECONNECT_WEBSOCKET",e.prototype.WS_COLLECTION_READY_REQUEST="WS_COLLECTION_READY_REQUEST",e.prototype.UPDATE_REQUEST_ITEM="UPDATE_REQUEST_ITEM",e.prototype.UPDATE_IMPORT_ITEM="UPDATE_IMPORT_ITEM",e.prototype.RESOURCE_QUICKSTART_READY="RESOURCE_QUICKSTART_READY",e.prototype.SAVE_APP_THUMBNAIL="SAVE_APP_THUMBNAIL",e.prototype.UPDATE_PROCESS="UPDATE_PROCESS",e.prototype.UPDATE_HEADER="UPDATE_HEADER",e.prototype.UPDATE_REGION_RESOURCE="UPDATE_REGION_RESOURCE",e.prototype.UPDATE_AWS_CREDENTIAL="UPDATE_AWS_CREDENTIAL",e.prototype.ACCOUNT_DEMONSTRATE="ACCOUNT_DEMONSTRATE",e.prototype.UPDATE_APP_RESOURCE="UPDATE_APP_RESOURCE",e.prototype.UPDATE_APP_INFO="UPDATE_APP_INFO",e.prototype.UPDATE_STATE_STATUS_DATA="STATE_STATUS_DATA_UPDATE",e.prototype.UPDATE_STATE_STATUS_DATA_TO_EDITOR="UPDATE_STATE_STATUS_DATA_TO_EDITOR",e.prototype.STATE_EDITOR_SAVE_DATA="STATE_EDITOR_SAVE_DATA",e.prototype.GET_STATE_MODULE="GET_STATE_MODULE",e.prototype.SHOW_STATE_EDITOR="SHOW_STATE_EDITOR",e.prototype.STATE_EDITOR_DATA_UPDATE="STATE_EDITOR_DATA_UPDATE",e.prototype.onListen=function(e,t,n){return this.once(e,t,n)},e.prototype.onLongListen=function(e,t,n){return this.on(e,t,n)},e.prototype.offListen=function(e,t){return t?this.off(e,t):this.off(e)},e}(),t=new e,t})}.call(this),define("canvas_layout",["event","jquery","MC.canvas","MC.canvas.constant","canvon"],function(e){var t=function(){var e=MC.canvas.getState(),t=$("#canvas_container"),n=".CANVAS_EVENT";MC.paper=Canvon("#svg_canvas"),t.off(n).removeClass("canvas_state_app canvas_state_appedit canvas_state_stack canvas_state_appview").addClass("canvas_state_"+e),e==="app"&&t.on("mousedown"+n,".instance-volume, .instanceList-item-volume, .asgList-item-volume",MC.canvas.volume.show).on("click"+n,".line",MC.canvas.event.selectLine).on("mousedown"+n,MC.canvas.event.clearSelected).on("mousedown"+n,"#svg_canvas",MC.canvas.event.clickBlank).on("mouseenter"+n+" mouseleave"+n,".node",MC.canvas.event.nodeHover).on("selectstart"+n,!1).on("mousedown"+n,".dragable",MC.canvas.event.selectNode).on("mousedown"+n,".AWS-AutoScaling-LaunchConfiguration .instance-number-group",MC.canvas.asgList.show).on("mousedown"+n,".AWS-EC2-Instance .instance-number-group",MC.canvas.instanceList.show).on("mousedown"+n,".AWS-VPC-NetworkInterface .eni-number-group",MC.canvas.eniList.show).on("mousedown"+n,MC.canvas.event.ctrlMove.mousedown).on("mousedown"+n,"#node-action-wrap",MC.canvas.nodeAction.popup),e==="appedit"&&t.on("mousedown"+n,".instance-volume, .instanceList-item-volume, .asgList-item-volume",MC.canvas.volume.show).on("mousedown"+n,".port",MC.canvas.event.appDrawConnection).on("mousedown"+n,".dragable",MC.canvas.event.dragable.mousedown).on("mousedown"+n,".group-resizer",MC.canvas.event.groupResize.mousedown).on("click"+n,".line",MC.canvas.event.selectLine).on("mousedown"+n,MC.canvas.event.clearSelected).on("mousedown"+n,"#svg_canvas",MC.canvas.event.clickBlank).on("mouseenter"+n+" mouseleave"+n,".node",MC.canvas.event.nodeHover).on("selectstart"+n,!1).on("mousedown"+n,MC.canvas.event.ctrlMove.mousedown).on("mousedown"+n,"#node-action-wrap",MC.canvas.nodeAction.popup),e==="stack"&&t.on("mousedown"+n,".port",MC.canvas.event.drawConnection.mousedown).on("mousedown"+n,".dragable",MC.canvas.event.dragable.mousedown).on("mousedown"+n,".group-resizer",MC.canvas.event.groupResize.mousedown).on("mouseenter"+n+" mouseleave"+n,".node",MC.canvas.event.nodeHover).on("click"+n,".line",MC.canvas.event.selectLine).on("mousedown"+n,MC.canvas.event.clearSelected).on("mousedown"+n,"#svg_canvas",MC.canvas.event.clickBlank).on("selectstart"+n,!1).on("mousedown"+n,MC.canvas.event.ctrlMove.mousedown).on("mousedown"+n,"#node-action-wrap",MC.canvas.nodeAction.popup),e==="appview"&&t.on("mousedown"+n,".instance-volume, .instanceList-item-volume, .asgList-item-volume",MC.canvas.volume.show).on("mousedown"+n,".dragable",MC.canvas.event.dragable.mousedown).on("mousedown"+n,".group-resizer",MC.canvas.event.groupResize.mousedown).on("mouseenter"+n+" mouseleave"+n,".node",MC.canvas.event.nodeHover).on("click"+n,".line",MC.canvas.event.selectLine).on("mousedown"+n,".AWS-AutoScaling-LaunchConfiguration .instance-number-group",MC.canvas.asgList.show).on("mousedown"+n,MC.canvas.event.clearSelected).on("mousedown"+n,"#svg_canvas",MC.canvas.event.clickBlank).on("selectstart"+n,!1).on("mousedown"+n,MC.canvas.event.ctrlMove.mousedown),$("#tab-content-design").on("click","#canvas-panel, #resource-panel",MC.canvas.volume.close)},n=function(){$(document).on("keydown",MC.canvas.event.keyEvent),$("#header, #navigation, #tab-bar").on("click",MC.canvas.volume.close),$("#tab-content-design").on("mousedown",".resource-item",MC.canvas.event.siderbarDrag.mousedown),$(document.body).on("mousedown","#instance_volume_list a",MC.canvas.volume.mousedown)},r=function(){};return{listen:t,canvas_initialize:n,connect:r}}),function(){var e=[].slice;define("WS",["Meteor","underscore","MC"],function(t,n){var r,i,s;return i=""+MC.API_HOST+"/ws/",s=function(){var e,r;n.extend(t,{default_connection:null,refresh:r=function(e){}}),t._debug=function(e){return console.log.call(console,e)};if(t.isClient)return t.default_connection=t.connect(i,!0),n.each(["subscribe","methods","call","apply","status","reconnect"],e=function(e){return t[e]=n.bind(t.default_connection[e],t.default_connection)})},r=function(){function n(){this.collection={request:new t.Collection("request"),request_detail:new t.Collection("request_detail"),stack:new t.Collection("stack"),app:new t.Collection("app"),status:new t.Collection("status"),imports:new t.Collection("imports")}}return n.prototype.status=function(e,n){var r;return e==null&&(e=!1),n==null&&(n=null),n?Deps.autorun(r=function(){if(t.status().connected===e)return n()}):t.status().connected},n.prototype.sub=function(){var n,r,i,s,o,u;return i=arguments[0],n=4<=arguments.length?e.call(arguments,1,u=arguments.length-2):(u=1,[]),s=arguments[u++],r=arguments[u++],o=t.subscribe.apply(t,[i].concat(e.call(n),[{onReady:s,onError:r}])),o},n.prototype.unsub=function(e){var t;void 0;try{return e.stop()}catch(n){return t=n,void 0}},n}(),{websocketInit:s,WebSocket:r}})}.call(this),define("lib/lib",function(){});