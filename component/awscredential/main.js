(function(){define(["jquery","event","./template","./welcome","i18n!nls/lang.js"],function(e,t,n,r,i){var s,o,u,a;return a=null,o=null,s=function(e){return require(["./component/awscredential/view","./component/awscredential/model"],function(s,f){var l;if(a||o)return;return a=new s,o=new f,a.model=o,e==="welcome"?(l=r,a.state="welcome",MC.common.cookie.getCookieByName("state")==="1"&&o.updateAccountService()):(l=n,a.state="credential"),a.render(l),e==="welcome"?a.showSetting("credential"):MC.common.cookie.getCookieByName("has_cred")==="true"?a.showSetting("account"):a.showSetting("credential","is_failed"),a.on("CLOSE_POPUP",function(){return u()}),a.on("AWS_AUTHENTICATION",function(e,t,n){return void 0,o.attributes.is_authenticated&&o.resetKey(1),o.awsAuthenticate(t,n,e)}),o.on("REFRESH_AWS_CREDENTIAL",function(){void 0,t.trigger(t.UPDATE_AWS_CREDENTIAL);if(a)return o.attributes.is_authenticated?(a.showSetting("credential","load_resource"),setTimeout(function(){return a.showSetting("credential","on_update")},2e3)):a.showSetting("credential","is_failed")}),a.on("UPDATE_ACCOUNT_EMAIL",function(e){return void 0,o.updateAccountEmail(e)}),a.on("UPDATE_ACCOUNT_PASSWORD",function(e,t){return void 0,o.updateAccountPassword(e,t)}),o.on("UPDATE_ACCOUNT_ATTRIBUTES_SUCCESS",function(e){var t;return void 0,t=_.keys(e),_.contains(t,"email")&&(a.notify("info",i.ide.HEAD_MSG_INFO_UPDATE_EMAIL),MC.common.cookie.setCookieByName("email",MC.base64Encode(e.email)),a.showSetting("account")),_.contains(t,"password")&&(a.notify("info",i.ide.HEAD_MSG_INFO_UPDATE_PASSWORD),a.showSetting("account")),_.contains(t,"access_key")&&_.contains(t,"secret_key")&&(o.sync_redis(),o.resetKey(0)),null}),o.on("UPDATE_ACCOUNT_ATTRIBUTES_FAILED",function(e){var t;return void 0,t=_.keys(e),_.contains(t,"email")&&a.clickUpdateEmail("is_failed"),_.contains(t,"password")&&a.clickUpdatePassword("error_password"),null}),a.on("REMOVE_CREDENTIAL",function(){return void 0,o.resetKey(),null}),a.on("CANCAL_CREDENTIAL",function(){return void 0,o.resetKey(0),null})})},u=function(){return void 0,a.off(),o.off(),a.undelegateEvents(),a=null,o=null,modal.close()},{loadModule:s,unLoadModule:u}})}).call(this);