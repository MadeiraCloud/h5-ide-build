(function(){define(["event","./template","./modal_template","backbone","jquery","handlebars"],function(e,t,n){var r;return r=Backbone.View.extend({el:"#status-bar-modal",events:{"click .modal-close":"closedPopup"},render:function(e,r){return void 0,e==="stack"?($("#stack-run-validation-container").html(t(this.model.attributes)),$(".validating").hide(),this.processDetails(),$(".stack-validation details").show()):e==="statusbar"&&(this.$el.html(n()),this.$el.find("#modal-validation-statusbar").html(t(this.model.attributes)),this.processStatusBarDetails(),$("#status-bar-modal").show()),null},processStatusBarDetails:function(){var e,t,n,r;t=this.model.get("error_list"),r=this.model.get("warning_list"),n=this.model.get("notice_list"),e=this.$el.find(".tab li");if(!t.length)return r.length?e.eq(1).click():n.length?e.eq(2).click():(this.$el.find(".validation-content").text("Great job! No error, warning or notice here."),this.$el.find(".validation-content").addClass("empty"))},processDetails:function(){var e,t,n,r,i,s,o,u,a;return s=this.model.get("error_list"),a=this.model.get("warning_list"),o=this.model.get("notice_list"),r=$("#modal-box .tab li"),t=$("#modal-box .nutshell"),e=t.prev("details"),n=e.find("summary"),i=function(){return n.click(function(){return e.attr("open")==="open"?t.show():t.hide()})},u=function(e){var r;r="",s.length&&(r+=""+s.length+" error(s), ",_.defer(function(){return modal.position()})),a.length&&(r+=""+a.length+" warning(s), "),o.length&&(r+=""+o.length+" notice(s), "),r?r=r.slice(0,-2):r="No error, warning or notice.",t.find("label").text(r),t.click(function(){return n.click()});if(!e)return t.show()},s.length?(i(),u(!0)):a.length?(r.eq(1).click(),e.removeAttr("open"),u(),i()):o.length?(r.eq(2).click(),e.removeAttr("open"),u(),i()):(e.removeAttr("open"),u(),i(),$(".validation-content").text("Great job! No error, warning or notice here."))},restoreRun:function(){return $("#btn-confirm, #confirm-update-app").removeAttr("disabled")},_clickCurrentTab:function(e){void 0;if(!e)return;return _.each($(".tab").find("li"),function(t){if($(t).attr("data-tab-target")==="#item-"+e)return $(t).trigger("click")})},closedPopup:function(){if(this.$el.html())return void 0,this.$el.empty(),this.trigger("CLOSE_POPUP"),$("#status-bar-modal").hide()}}),r})}).call(this);